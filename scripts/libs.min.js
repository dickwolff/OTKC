window.fom=window.fom||{};
window.fom.components=window.fom.components||{};
fom.components.raceCountdown=(function(f,j){var s={DAY:86400000,HOUR:3600000,MIN:60000,SEC:1000},b={SHOW_TITLE_FOR:4.5*s.SEC,SHOW_COUNTDOWN_FOR:6*s.SEC,CSS_ANIMATION_DURATION:400},z={data:"data-datetime",countdown:".countdown-container",days:".days .value",hours:".hours .value",mins:".minutes .value",secs:".seconds .value"},c,a={};
function p(C){var D=(C&&typeof C==="string")?new Date(C):new Date();
return Date.parse(D)
}function n(C){return(typeof C==="number"&&C<10)?("0"+C):C
}function t(G){var E,C,F=["days","hours","mins","secs"],D={};
if(f.isArray(G)){C=G.length;
if(C===F.length){for(E=0;
E<C;
E+=1){D[F[E]]=G[E]
}}else{throw"timeTemplate: Expects an array of values to map exactly to: days, hours, minutes, seconds"
}}return D
}function k(D,F){var C=Math.floor(D/F),E=C*F;
return{result:C,remainder:D-E}
}function y(C){return k(C,s.DAY)
}function g(C){return k(C,s.HOUR)
}function B(C){return k(C,s.MIN)
}function e(C){return k(C,s.SEC)
}function A(D){var G,C,F,E;
G=y(D);
D=G.remainder;
C=g(D);
D=C.remainder;
F=B(D);
D=F.remainder;
E=e(D);
return t([G.result,C.result,F.result,E.result])
}function w(D){var C=p();
return(D>C)
}function h(D){var C=D.elements.secs,F=D.values.secs,E=F;
D.timer=setInterval(function(){if(E>0){E-=1
}else{if(w(D.target.ms)){E=59;
o(D)
}else{r(D)
}}C.text(n(E))
},s.SEC)
}function r(C){if(!w(C.target.ms)){C.elements.container.slideUp()
}clearInterval(C.timer)
}function x(D){var C=D.elements.container.find(".countdown-clock"),F,E=D.elements.container.hasClass("has-title");
if(!E){C.addClass("active");
return false
}F=D.elements.container.find(".countdown-title");
j.setTimeout(function(){m(C,F)
},b.SHOW_TITLE_FOR)
}function m(D,F){var C,E,G;
if(D.hasClass("active")){C=D;
E=F;
G=b.SHOW_TITLE_FOR
}else{C=F;
E=D;
G=b.SHOW_COUNTDOWN_FOR
}C.toggleClass("active");
j.setTimeout(function(){E.toggleClass("active");
j.setTimeout(function(){m(D,F)
},G)
},b.CSS_ANIMATION_DURATION)
}function d(F){var G,E,C=F.length,D;
for(D=0;
D<C;
D+=1){E=f(F[D]);
G={id:"slide"+D,target:{date:E.attr(z.data)},timer:null};
G.elements=t([E.find(z.days),E.find(z.hours),E.find(z.mins),E.find(z.secs)]);
G.elements.container=E;
G.target.ms=p(G.target.date);
if(w(G.target.ms)){G.elements.container.removeClass("hide");
o(G);
h(G);
x(G)
}a[G.id]=G
}}function u(D){var E=D.elements,C=D.values;
E.days.text(n(C.days));
E.hours.text(n(C.hours));
E.mins.text(n(C.mins));
E.secs.text(n(C.secs))
}function o(C){C.now=p();
C.values=A(C.target.ms-C.now);
u(C)
}function v(){c=f(z.countdown);
if(c.length>0){d(c)
}}function q(C){d(f(C))
}f(document).ready(function(){return v()
});
return{initOnEl:q}
}(jQuery,window));
window.fom=window.fom||{};
window.fom.modules=window.fom.modules||{};
window.fom.components=window.fom.components||{};
if(!window.console){window.console={log:function(){}}
}window.log=function(){log.history=log.history||[];
log.history.push(arguments);
if(this.console){console.log(Array.prototype.slice.call(arguments))
}};
jQuery.ajaxSetup({cache:true});
$(document).ready(function(){if($(".content-info.error .btn.resend-email")&&$(".content-info.error .btn.resend-email").length>0){$(".content-info.error .btn.resend-email").on("click",function(k){k.preventDefault();
var g=$(this);
var h=function(){g.removeClass("loading");
setTimeout($.proxy(function(){var e=$(".content-info.error").offset().top-1;
$("html, body").animate({scrollTop:e},"slow")
},this),0)
};
if($.cookie("resend-email-info")){var j=$.cookie("resend-email-info");
if(j!=null){var f=JSON.parse(j);
if(server!=null&&server.requestValidation!=null){g.addClass("loading");
server.requestValidation(f.UID,f.UIDSignature,f.signatureTimestamp).then(function(e){$(".serverside-success").show();
$(".serverside-error").hide();
h()
},function(e){$(".serverside-error").show();
$(".serverside-success").hide();
h()
})
}}}else{console.error("Resend info not found to trigger email validation request")
}})
}$click=$(".see-full");
$defaultLebel=$(".see-full").data("default-cont");
$closeCont=$(".see-full").data("close-cont");
$click.text($defaultLebel);
function a(){$click.toggleClass("open");
$expand=$(".feature-content");
$expand.slideToggle(500,function(){$click.text(function(){return $expand.is(":visible")?$closeCont:$defaultLebel
})
})
}$click.on("click",function(f){a()
});
$(".to-comaprision").on("click",function(h){h.preventDefault();
var f=$click.offset().top,g=400;
$("html, body").stop().animate({scrollTop:f},g);
if(!$click.hasClass("open")){a()
}});
$(".subscription-landing .C8-3-feature-category tr.title").prev().css("border-bottom","none");
$(".js-nav-label").on("click",function b(){$(this).toggleClass("open");
$(this).next().toggleClass("show")
});
if($.cookie("account-info")){var c=JSON.parse($.cookie("account-info"));
var d=$("#is-mobile-app-rendering").length&&$("#is-mobile-app-rendering").val()=="true";
if(!d&&c.UIDSignature){$.removeCookie("account-info");
$.removeCookie("login-token")
}}});
if(!window.Element){Element=function(){};
var __createElement=document.createElement;
document.createElement=function(c){var b=__createElement(c);
if(b==null){return null
}for(var a in Element.prototype){b[a]=Element.prototype[a]
}return b
};
var __getElementById=document.getElementById;
document.getElementById=function(c){var b=__getElementById(c);
if(b==null){return null
}for(var a in Element.prototype){b[a]=Element.prototype[a]
}return b
}
}(function(){var b=0;
var c=["ms","moz","webkit","o"];
for(var a=0;
a<c.length&&!window.requestAnimationFrame;
++a){window.requestAnimationFrame=window[c[a]+"RequestAnimationFrame"];
window.cancelAnimationFrame=window[c[a]+"CancelAnimationFrame"]||window[c[a]+"CancelRequestAnimationFrame"]
}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(h,e){var d=new Date().getTime();
var f=Math.max(0,16-(d-b));
var g=window.setTimeout(function(){h(d+f)
},f);
b=d+f;
return g
}
}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(d){clearTimeout(d)
}
}}());
(function(){var f;
var a=function(F,h){if(!(this instanceof a)){return new a(F,h)
}var E={direction:"horizontal",touchEventsTarget:"container",initialSlide:0,speed:300,autoplay:false,autoplayDisableOnInteraction:true,autoplayStopOnLast:false,iOSEdgeSwipeDetection:false,iOSEdgeSwipeThreshold:20,freeMode:false,freeModeMomentum:true,freeModeMomentumRatio:1,freeModeMomentumBounce:true,freeModeMomentumBounceRatio:1,freeModeMomentumVelocityRatio:1,freeModeSticky:false,freeModeMinimumVelocity:0.02,autoHeight:false,setWrapperSize:false,virtualTranslate:false,effect:"slide",coverflow:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:true},flip:{slideShadows:true,limitRotation:true},cube:{slideShadows:true,shadow:true,shadowOffset:20,shadowScale:0.94},fade:{crossFade:false},parallax:false,zoom:false,zoomMax:3,zoomMin:1,zoomToggle:true,scrollbar:null,scrollbarHide:true,scrollbarDraggable:false,scrollbarSnapOnRelease:false,keyboardControl:false,mousewheelControl:false,mousewheelReleaseOnEdges:false,mousewheelInvert:false,mousewheelForceToAxis:false,mousewheelSensitivity:1,mousewheelEventsTarged:"container",hashnav:false,hashnavWatchState:false,history:false,replaceState:false,breakpoints:undefined,spaceBetween:0,slidesPerView:1,slidesPerColumn:1,slidesPerColumnFill:"column",slidesPerGroup:1,centeredSlides:false,slidesOffsetBefore:0,slidesOffsetAfter:0,roundLengths:false,touchRatio:1,touchAngle:45,simulateTouch:true,shortSwipes:true,longSwipes:true,longSwipesRatio:0.5,longSwipesMs:300,followFinger:true,onlyExternal:false,threshold:0,touchMoveStopPropagation:true,touchReleaseOnEdges:false,uniqueNavElements:true,pagination:null,paginationElement:"span",paginationClickable:false,paginationHide:false,paginationBulletRender:null,paginationProgressRender:null,paginationFractionRender:null,paginationCustomRender:null,paginationType:"bullets",resistance:true,resistanceRatio:0.85,nextButton:null,prevButton:null,watchSlidesProgress:false,watchSlidesVisibility:false,grabCursor:false,preventClicks:true,preventClicksPropagation:true,slideToClickedSlide:false,lazyLoading:false,lazyLoadingInPrevNext:false,lazyLoadingInPrevNextAmount:1,lazyLoadingOnTransitionStart:false,preloadImages:true,updateOnImagesReady:true,loop:false,loopAdditionalSlides:0,loopedSlides:null,control:undefined,controlInverse:false,controlBy:"slide",normalizeSlideIndex:true,allowSwipeToPrev:true,allowSwipeToNext:true,swipeHandler:null,noSwiping:true,noSwipingClass:"swiper-no-swiping",passiveListeners:true,containerModifierClass:"swiper-container-",slideClass:"swiper-slide",slideActiveClass:"swiper-slide-active",slideDuplicateActiveClass:"swiper-slide-duplicate-active",slideVisibleClass:"swiper-slide-visible",slideDuplicateClass:"swiper-slide-duplicate",slideNextClass:"swiper-slide-next",slideDuplicateNextClass:"swiper-slide-duplicate-next",slidePrevClass:"swiper-slide-prev",slideDuplicatePrevClass:"swiper-slide-duplicate-prev",wrapperClass:"swiper-wrapper",bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",buttonDisabledClass:"swiper-button-disabled",paginationCurrentClass:"swiper-pagination-current",paginationTotalClass:"swiper-pagination-total",paginationHiddenClass:"swiper-pagination-hidden",paginationProgressbarClass:"swiper-pagination-progressbar",paginationClickableClass:"swiper-pagination-clickable",paginationModifierClass:"swiper-pagination-",lazyLoadingClass:"swiper-lazy",lazyStatusLoadingClass:"swiper-lazy-loading",lazyStatusLoadedClass:"swiper-lazy-loaded",lazyPreloaderClass:"swiper-lazy-preloader",notificationClass:"swiper-notification",preloaderClass:"preloader",zoomContainerClass:"swiper-zoom-container",observer:false,observeParents:false,a11y:false,prevSlideMessage:"Previous slide",nextSlideMessage:"Next slide",firstSlideMessage:"This is the first slide",lastSlideMessage:"This is the last slide",paginationBulletMessage:"Go to slide {{index}}",runCallbacksOnInit:true};
var C=h&&h.virtualTranslate;
h=h||{};
var z={};
for(var q in h){if(typeof h[q]==="object"&&h[q]!==null&&!(h[q].nodeType||h[q]===window||h[q]===document||(typeof g!=="undefined"&&h[q] instanceof g)||(typeof jQuery!=="undefined"&&h[q] instanceof jQuery))){z[q]={};
for(var A in h[q]){z[q][A]=h[q][A]
}}else{z[q]=h[q]
}}for(var x in E){if(typeof h[x]==="undefined"){h[x]=E[x]
}else{if(typeof h[x]==="object"){for(var L in E[x]){if(typeof h[x][L]==="undefined"){h[x][L]=E[x][L]
}}}}}var K=this;
K.params=h;
K.originalParams=z;
K.classNames=[];
if(typeof f!=="undefined"&&typeof g!=="undefined"){f=g
}if(typeof f==="undefined"){if(typeof g==="undefined"){f=window.Dom7||window.Zepto||window.jQuery
}else{f=g
}if(!f){return
}}K.$=f;
K.currentBreakpoint=undefined;
K.getActiveBreakpoint=function(){if(!K.params.breakpoints){return false
}var s=false;
var Y=[],p;
for(p in K.params.breakpoints){if(K.params.breakpoints.hasOwnProperty(p)){Y.push(p)
}}Y.sort(function(aa,Z){return parseInt(aa,10)>parseInt(Z,10)
});
for(var X=0;
X<Y.length;
X++){p=Y[X];
if(p>=window.innerWidth&&!s){s=p
}}return s||"max"
};
K.setBreakpoint=function(){var p=K.getActiveBreakpoint();
if(p&&K.currentBreakpoint!==p){var X=p in K.params.breakpoints?K.params.breakpoints[p]:K.originalParams;
var s=K.params.loop&&(X.slidesPerView!==K.params.slidesPerView);
for(var Y in X){K.params[Y]=X[Y]
}K.currentBreakpoint=p;
if(s&&K.destroyLoop){K.reLoop(true)
}}};
if(K.params.breakpoints){K.setBreakpoint()
}K.container=f(F);
if(K.container.length===0){return
}if(K.container.length>1){var O=[];
K.container.each(function(){var p=this;
O.push(new a(this,h))
});
return O
}K.container[0].swiper=K;
K.container.data("swiper",K);
K.classNames.push(K.params.containerModifierClass+K.params.direction);
if(K.params.freeMode){K.classNames.push(K.params.containerModifierClass+"free-mode")
}if(!K.support.flexbox){K.classNames.push(K.params.containerModifierClass+"no-flexbox");
K.params.slidesPerColumn=1
}if(K.params.autoHeight){K.classNames.push(K.params.containerModifierClass+"autoheight")
}if(K.params.parallax||K.params.watchSlidesVisibility){K.params.watchSlidesProgress=true
}if(K.params.touchReleaseOnEdges){K.params.resistanceRatio=0
}if(["cube","coverflow","flip"].indexOf(K.params.effect)>=0){if(K.support.transforms3d){K.params.watchSlidesProgress=true;
K.classNames.push(K.params.containerModifierClass+"3d")
}else{K.params.effect="slide"
}}if(K.params.effect!=="slide"){K.classNames.push(K.params.containerModifierClass+K.params.effect)
}if(K.params.effect==="cube"){K.params.resistanceRatio=0;
K.params.slidesPerView=1;
K.params.slidesPerColumn=1;
K.params.slidesPerGroup=1;
K.params.centeredSlides=false;
K.params.spaceBetween=0;
K.params.virtualTranslate=true
}if(K.params.effect==="fade"||K.params.effect==="flip"){K.params.slidesPerView=1;
K.params.slidesPerColumn=1;
K.params.slidesPerGroup=1;
K.params.watchSlidesProgress=true;
K.params.spaceBetween=0;
if(typeof C==="undefined"){K.params.virtualTranslate=true
}}if(K.params.grabCursor&&K.support.touch){K.params.grabCursor=false
}K.wrapper=K.container.children("."+K.params.wrapperClass);
if(K.params.pagination){K.paginationContainer=f(K.params.pagination);
if(K.params.uniqueNavElements&&typeof K.params.pagination==="string"&&K.paginationContainer.length>1&&K.container.find(K.params.pagination).length===1){K.paginationContainer=K.container.find(K.params.pagination)
}if(K.params.paginationType==="bullets"&&K.params.paginationClickable){K.paginationContainer.addClass(K.params.paginationModifierClass+"clickable")
}else{K.params.paginationClickable=false
}K.paginationContainer.addClass(K.params.paginationModifierClass+K.params.paginationType)
}if(K.params.nextButton||K.params.prevButton){if(K.params.nextButton){K.nextButton=f(K.params.nextButton);
if(K.params.uniqueNavElements&&typeof K.params.nextButton==="string"&&K.nextButton.length>1&&K.container.find(K.params.nextButton).length===1){K.nextButton=K.container.find(K.params.nextButton)
}}if(K.params.prevButton){K.prevButton=f(K.params.prevButton);
if(K.params.uniqueNavElements&&typeof K.params.prevButton==="string"&&K.prevButton.length>1&&K.container.find(K.params.prevButton).length===1){K.prevButton=K.container.find(K.params.prevButton)
}}}K.isHorizontal=function(){return K.params.direction==="horizontal"
};
K.rtl=K.isHorizontal()&&(K.container[0].dir.toLowerCase()==="rtl"||K.container.css("direction")==="rtl");
if(K.rtl){K.classNames.push(K.params.containerModifierClass+"rtl")
}if(K.rtl){K.wrongRTL=K.wrapper.css("display")==="-webkit-box"
}if(K.params.slidesPerColumn>1){K.classNames.push(K.params.containerModifierClass+"multirow")
}if(K.device.android){K.classNames.push(K.params.containerModifierClass+"android")
}K.container.addClass(K.classNames.join(" "));
K.translate=0;
K.progress=0;
K.velocity=0;
K.lockSwipeToNext=function(){K.params.allowSwipeToNext=false;
if(K.params.allowSwipeToPrev===false&&K.params.grabCursor){K.unsetGrabCursor()
}};
K.lockSwipeToPrev=function(){K.params.allowSwipeToPrev=false;
if(K.params.allowSwipeToNext===false&&K.params.grabCursor){K.unsetGrabCursor()
}};
K.lockSwipes=function(){K.params.allowSwipeToNext=K.params.allowSwipeToPrev=false;
if(K.params.grabCursor){K.unsetGrabCursor()
}};
K.unlockSwipeToNext=function(){K.params.allowSwipeToNext=true;
if(K.params.allowSwipeToPrev===true&&K.params.grabCursor){K.setGrabCursor()
}};
K.unlockSwipeToPrev=function(){K.params.allowSwipeToPrev=true;
if(K.params.allowSwipeToNext===true&&K.params.grabCursor){K.setGrabCursor()
}};
K.unlockSwipes=function(){K.params.allowSwipeToNext=K.params.allowSwipeToPrev=true;
if(K.params.grabCursor){K.setGrabCursor()
}};
function P(p){return Math.floor(p)
}K.setGrabCursor=function(p){K.container[0].style.cursor="move";
K.container[0].style.cursor=p?"-webkit-grabbing":"-webkit-grab";
K.container[0].style.cursor=p?"-moz-grabbin":"-moz-grab";
K.container[0].style.cursor=p?"grabbing":"grab"
};
K.unsetGrabCursor=function(){K.container[0].style.cursor=""
};
if(K.params.grabCursor){K.setGrabCursor()
}K.imagesToLoad=[];
K.imagesLoaded=0;
K.loadImage=function(X,ab,aa,s,p,ac){var Z;
function Y(){if(ac){ac()
}}if(!X.complete||!p){if(ab){Z=new window.Image();
Z.onload=Y;
Z.onerror=Y;
if(s){Z.sizes=s
}if(aa){Z.srcset=aa
}if(ab){Z.src=ab
}}else{Y()
}}else{Y()
}};
K.preloadImages=function(){K.imagesToLoad=K.container.find("img");
function s(){if(typeof K==="undefined"||K===null||!K){return
}if(K.imagesLoaded!==undefined){K.imagesLoaded++
}if(K.imagesLoaded===K.imagesToLoad.length){if(K.params.updateOnImagesReady){K.update()
}K.emit("onImagesReady",K)
}}for(var p=0;
p<K.imagesToLoad.length;
p++){K.loadImage(K.imagesToLoad[p],(K.imagesToLoad[p].currentSrc||K.imagesToLoad[p].getAttribute("src")),(K.imagesToLoad[p].srcset||K.imagesToLoad[p].getAttribute("srcset")),K.imagesToLoad[p].sizes||K.imagesToLoad[p].getAttribute("sizes"),true,s)
}};
K.autoplayTimeoutId=undefined;
K.autoplaying=false;
K.autoplayPaused=false;
function Q(){var s=K.params.autoplay;
var p=K.slides.eq(K.activeIndex);
if(p.attr("data-swiper-autoplay")){s=p.attr("data-swiper-autoplay")||K.params.autoplay
}K.autoplayTimeoutId=setTimeout(function(){if(K.params.loop){K.fixLoop();
K._slideNext();
K.emit("onAutoplay",K)
}else{if(!K.isEnd){K._slideNext();
K.emit("onAutoplay",K)
}else{if(!h.autoplayStopOnLast){K._slideTo(0);
K.emit("onAutoplay",K)
}else{K.stopAutoplay()
}}}},s)
}K.startAutoplay=function(){if(typeof K.autoplayTimeoutId!=="undefined"){return false
}if(!K.params.autoplay){return false
}if(K.autoplaying){return false
}K.autoplaying=true;
K.emit("onAutoplayStart",K);
Q()
};
K.stopAutoplay=function(p){if(!K.autoplayTimeoutId){return
}if(K.autoplayTimeoutId){clearTimeout(K.autoplayTimeoutId)
}K.autoplaying=false;
K.autoplayTimeoutId=undefined;
K.emit("onAutoplayStop",K)
};
K.pauseAutoplay=function(p){if(K.autoplayPaused){return
}if(K.autoplayTimeoutId){clearTimeout(K.autoplayTimeoutId)
}K.autoplayPaused=true;
if(p===0){K.autoplayPaused=false;
Q()
}else{K.wrapper.transitionEnd(function(){if(!K){return
}K.autoplayPaused=false;
if(!K.autoplaying){K.stopAutoplay()
}else{Q()
}})
}};
K.minTranslate=function(){return(-K.snapGrid[0])
};
K.maxTranslate=function(){return(-K.snapGrid[K.snapGrid.length-1])
};
K.updateAutoHeight=function(){var Z=[];
var s=0;
var Y;
if(K.params.slidesPerView!=="auto"&&K.params.slidesPerView>1){for(Y=0;
Y<Math.ceil(K.params.slidesPerView);
Y++){var X=K.activeIndex+Y;
if(X>K.slides.length){break
}Z.push(K.slides.eq(X)[0])
}}else{Z.push(K.slides.eq(K.activeIndex)[0])
}for(Y=0;
Y<Z.length;
Y++){if(typeof Z[Y]!=="undefined"){var p=Z[Y].offsetHeight;
s=p>s?p:s
}}if(s){K.wrapper.css("height",s+"px")
}};
K.updateContainerSize=function(){var s,p;
if(typeof K.params.width!=="undefined"){s=K.params.width
}else{s=K.container[0].clientWidth
}if(typeof K.params.height!=="undefined"){p=K.params.height
}else{p=K.container[0].clientHeight
}if(s===0&&K.isHorizontal()||p===0&&!K.isHorizontal()){return
}s=s-parseInt(K.container.css("padding-left"),10)-parseInt(K.container.css("padding-right"),10);
p=p-parseInt(K.container.css("padding-top"),10)-parseInt(K.container.css("padding-bottom"),10);
K.width=s;
K.height=p;
K.size=K.isHorizontal()?K.width:K.height
};
K.updateSlidesSize=function(){K.slides=K.wrapper.children("."+K.params.slideClass);
K.snapGrid=[];
K.slidesGrid=[];
K.slidesSizesGrid=[];
var ai=K.params.spaceBetween,p=-K.params.slidesOffsetBefore,aa,s=0,af=0;
if(typeof K.size==="undefined"){return
}if(typeof ai==="string"&&ai.indexOf("%")>=0){ai=parseFloat(ai.replace("%",""))/100*K.size
}K.virtualSize=-ai;
if(K.rtl){K.slides.css({marginLeft:"",marginTop:""})
}else{K.slides.css({marginRight:"",marginBottom:""})
}var ae;
if(K.params.slidesPerColumn>1){if(Math.floor(K.slides.length/K.params.slidesPerColumn)===K.slides.length/K.params.slidesPerColumn){ae=K.slides.length
}else{ae=Math.ceil(K.slides.length/K.params.slidesPerColumn)*K.params.slidesPerColumn
}if(K.params.slidesPerView!=="auto"&&K.params.slidesPerColumnFill==="row"){ae=Math.max(ae,K.params.slidesPerView*K.params.slidesPerColumn)
}}var ad;
var ac=K.params.slidesPerColumn;
var X=ae/ac;
var ag=X-(K.params.slidesPerColumn*X-K.slides.length);
for(aa=0;
aa<K.slides.length;
aa++){ad=0;
var ab=K.slides.eq(aa);
if(K.params.slidesPerColumn>1){var ah;
var Y,aj;
if(K.params.slidesPerColumnFill==="column"){Y=Math.floor(aa/ac);
aj=aa-Y*ac;
if(Y>ag||(Y===ag&&aj===ac-1)){if(++aj>=ac){aj=0;
Y++
}}ah=Y+aj*ae/ac;
ab.css({"-webkit-box-ordinal-group":ah,"-moz-box-ordinal-group":ah,"-ms-flex-order":ah,"-webkit-order":ah,order:ah})
}else{aj=Math.floor(aa/X);
Y=aa-aj*X
}ab.css("margin-"+(K.isHorizontal()?"top":"left"),(aj!==0&&K.params.spaceBetween)&&(K.params.spaceBetween+"px")).attr("data-swiper-column",Y).attr("data-swiper-row",aj)
}if(ab.css("display")==="none"){continue
}if(K.params.slidesPerView==="auto"){ad=K.isHorizontal()?ab.outerWidth(true):ab.outerHeight(true);
if(K.params.roundLengths){ad=P(ad)
}}else{ad=(K.size-(K.params.slidesPerView-1)*ai)/K.params.slidesPerView;
if(K.params.roundLengths){ad=P(ad)
}if(K.isHorizontal()){K.slides[aa].style.width=ad+"px"
}else{K.slides[aa].style.height=ad+"px"
}}K.slides[aa].swiperSlideSize=ad;
K.slidesSizesGrid.push(ad);
if(K.params.centeredSlides){p=p+ad/2+s/2+ai;
if(s===0&&aa!==0){p=p-K.size/2-ai
}if(aa===0){p=p-K.size/2-ai
}if(Math.abs(p)<1/1000){p=0
}if((af)%K.params.slidesPerGroup===0){K.snapGrid.push(p)
}K.slidesGrid.push(p)
}else{if((af)%K.params.slidesPerGroup===0){K.snapGrid.push(p)
}K.slidesGrid.push(p);
p=p+ad+ai
}K.virtualSize+=ad+ai;
s=ad;
af++
}K.virtualSize=Math.max(K.virtualSize,K.size)+K.params.slidesOffsetAfter;
var Z;
if(K.rtl&&K.wrongRTL&&(K.params.effect==="slide"||K.params.effect==="coverflow")){K.wrapper.css({width:K.virtualSize+K.params.spaceBetween+"px"})
}if(!K.support.flexbox||K.params.setWrapperSize){if(K.isHorizontal()){K.wrapper.css({width:K.virtualSize+K.params.spaceBetween+"px"})
}else{K.wrapper.css({height:K.virtualSize+K.params.spaceBetween+"px"})
}}if(K.params.slidesPerColumn>1){K.virtualSize=(ad+K.params.spaceBetween)*ae;
K.virtualSize=Math.ceil(K.virtualSize/K.params.slidesPerColumn)-K.params.spaceBetween;
if(K.isHorizontal()){K.wrapper.css({width:K.virtualSize+K.params.spaceBetween+"px"})
}else{K.wrapper.css({height:K.virtualSize+K.params.spaceBetween+"px"})
}if(K.params.centeredSlides){Z=[];
for(aa=0;
aa<K.snapGrid.length;
aa++){if(K.snapGrid[aa]<K.virtualSize+K.snapGrid[0]){Z.push(K.snapGrid[aa])
}}K.snapGrid=Z
}}if(!K.params.centeredSlides){Z=[];
for(aa=0;
aa<K.snapGrid.length;
aa++){if(K.snapGrid[aa]<=K.virtualSize-K.size){Z.push(K.snapGrid[aa])
}}K.snapGrid=Z;
if(Math.floor(K.virtualSize-K.size)-Math.floor(K.snapGrid[K.snapGrid.length-1])>1){K.snapGrid.push(K.virtualSize-K.size)
}}if(K.snapGrid.length===0){K.snapGrid=[0]
}if(K.params.spaceBetween!==0){if(K.isHorizontal()){if(K.rtl){K.slides.css({marginLeft:ai+"px"})
}else{K.slides.css({marginRight:ai+"px"})
}}else{K.slides.css({marginBottom:ai+"px"})
}}if(K.params.watchSlidesProgress){K.updateSlidesOffset()
}};
K.updateSlidesOffset=function(){for(var p=0;
p<K.slides.length;
p++){K.slides[p].swiperSlideOffset=K.isHorizontal()?K.slides[p].offsetLeft:K.slides[p].offsetTop
}};
K.currentSlidesPerView=function(){var Z=1,X,p;
if(K.params.centeredSlides){var s=K.slides[K.activeIndex].swiperSlideSize;
var Y;
for(X=K.activeIndex+1;
X<K.slides.length;
X++){if(K.slides[X]&&!Y){s+=K.slides[X].swiperSlideSize;
Z++;
if(s>K.size){Y=true
}}}for(p=K.activeIndex-1;
p>=0;
p--){if(K.slides[p]&&!Y){s+=K.slides[p].swiperSlideSize;
Z++;
if(s>K.size){Y=true
}}}}else{for(X=K.activeIndex+1;
X<K.slides.length;
X++){if(K.slidesGrid[X]-K.slidesGrid[K.activeIndex]<K.size){Z++
}}}return Z
};
K.updateSlidesProgress=function(ac){if(typeof ac==="undefined"){ac=K.translate||0
}if(K.slides.length===0){return
}if(typeof K.slides[0].swiperSlideOffset==="undefined"){K.updateSlidesOffset()
}var Y=-ac;
if(K.rtl){Y=ac
}K.slides.removeClass(K.params.slideVisibleClass);
for(var ab=0;
ab<K.slides.length;
ab++){var s=K.slides[ab];
var X=(Y+(K.params.centeredSlides?K.minTranslate():0)-s.swiperSlideOffset)/(s.swiperSlideSize+K.params.spaceBetween);
if(K.params.watchSlidesVisibility){var aa=-(Y-s.swiperSlideOffset);
var Z=aa+K.slidesSizesGrid[ab];
var p=(aa>=0&&aa<K.size)||(Z>0&&Z<=K.size)||(aa<=0&&Z>=K.size);
if(p){K.slides.eq(ab).addClass(K.params.slideVisibleClass)
}}s.progress=K.rtl?-X:X
}};
K.updateProgress=function(Y){if(typeof Y==="undefined"){Y=K.translate||0
}var X=K.maxTranslate()-K.minTranslate();
var p=K.isBeginning;
var s=K.isEnd;
if(X===0){K.progress=0;
K.isBeginning=K.isEnd=true
}else{K.progress=(Y-K.minTranslate())/(X);
K.isBeginning=K.progress<=0;
K.isEnd=K.progress>=1
}if(K.isBeginning&&!p){K.emit("onReachBeginning",K)
}if(K.isEnd&&!s){K.emit("onReachEnd",K)
}if(K.params.watchSlidesProgress){K.updateSlidesProgress(Y)
}K.emit("onProgress",K,K.progress)
};
K.updateActiveIndex=function(){var s=K.rtl?K.translate:-K.translate;
var Y,p,X;
for(p=0;
p<K.slidesGrid.length;
p++){if(typeof K.slidesGrid[p+1]!=="undefined"){if(s>=K.slidesGrid[p]&&s<K.slidesGrid[p+1]-(K.slidesGrid[p+1]-K.slidesGrid[p])/2){Y=p
}else{if(s>=K.slidesGrid[p]&&s<K.slidesGrid[p+1]){Y=p+1
}}}else{if(s>=K.slidesGrid[p]){Y=p
}}}if(K.params.normalizeSlideIndex){if(Y<0||typeof Y==="undefined"){Y=0
}}X=Math.floor(Y/K.params.slidesPerGroup);
if(X>=K.snapGrid.length){X=K.snapGrid.length-1
}if(Y===K.activeIndex){return
}K.snapIndex=X;
K.previousIndex=K.activeIndex;
K.activeIndex=Y;
K.updateClasses();
K.updateRealIndex()
};
K.updateRealIndex=function(){K.realIndex=parseInt(K.slides.eq(K.activeIndex).attr("data-swiper-slide-index")||K.activeIndex,10)
};
K.updateClasses=function(){K.slides.removeClass(K.params.slideActiveClass+" "+K.params.slideNextClass+" "+K.params.slidePrevClass+" "+K.params.slideDuplicateActiveClass+" "+K.params.slideDuplicateNextClass+" "+K.params.slideDuplicatePrevClass);
var ab=K.slides.eq(K.activeIndex);
ab.addClass(K.params.slideActiveClass);
if(h.loop){if(ab.hasClass(K.params.slideDuplicateClass)){K.wrapper.children("."+K.params.slideClass+":not(."+K.params.slideDuplicateClass+')[data-swiper-slide-index="'+K.realIndex+'"]').addClass(K.params.slideDuplicateActiveClass)
}else{K.wrapper.children("."+K.params.slideClass+"."+K.params.slideDuplicateClass+'[data-swiper-slide-index="'+K.realIndex+'"]').addClass(K.params.slideDuplicateActiveClass)
}}var aa=ab.next("."+K.params.slideClass).addClass(K.params.slideNextClass);
if(K.params.loop&&aa.length===0){aa=K.slides.eq(0);
aa.addClass(K.params.slideNextClass)
}var p=ab.prev("."+K.params.slideClass).addClass(K.params.slidePrevClass);
if(K.params.loop&&p.length===0){p=K.slides.eq(-1);
p.addClass(K.params.slidePrevClass)
}if(h.loop){if(aa.hasClass(K.params.slideDuplicateClass)){K.wrapper.children("."+K.params.slideClass+":not(."+K.params.slideDuplicateClass+')[data-swiper-slide-index="'+aa.attr("data-swiper-slide-index")+'"]').addClass(K.params.slideDuplicateNextClass)
}else{K.wrapper.children("."+K.params.slideClass+"."+K.params.slideDuplicateClass+'[data-swiper-slide-index="'+aa.attr("data-swiper-slide-index")+'"]').addClass(K.params.slideDuplicateNextClass)
}if(p.hasClass(K.params.slideDuplicateClass)){K.wrapper.children("."+K.params.slideClass+":not(."+K.params.slideDuplicateClass+')[data-swiper-slide-index="'+p.attr("data-swiper-slide-index")+'"]').addClass(K.params.slideDuplicatePrevClass)
}else{K.wrapper.children("."+K.params.slideClass+"."+K.params.slideDuplicateClass+'[data-swiper-slide-index="'+p.attr("data-swiper-slide-index")+'"]').addClass(K.params.slideDuplicatePrevClass)
}}if(K.paginationContainer&&K.paginationContainer.length>0){var Z,Y=K.params.loop?Math.ceil((K.slides.length-K.loopedSlides*2)/K.params.slidesPerGroup):K.snapGrid.length;
if(K.params.loop){Z=Math.ceil((K.activeIndex-K.loopedSlides)/K.params.slidesPerGroup);
if(Z>K.slides.length-1-K.loopedSlides*2){Z=Z-(K.slides.length-K.loopedSlides*2)
}if(Z>Y-1){Z=Z-Y
}if(Z<0&&K.params.paginationType!=="bullets"){Z=Y+Z
}}else{if(typeof K.snapIndex!=="undefined"){Z=K.snapIndex
}else{Z=K.activeIndex||0
}}if(K.params.paginationType==="bullets"&&K.bullets&&K.bullets.length>0){K.bullets.removeClass(K.params.bulletActiveClass);
if(K.paginationContainer.length>1){K.bullets.each(function(){if(f(this).index()===Z){f(this).addClass(K.params.bulletActiveClass)
}})
}else{K.bullets.eq(Z).addClass(K.params.bulletActiveClass)
}}if(K.params.paginationType==="fraction"){K.paginationContainer.find("."+K.params.paginationCurrentClass).text(Z+1);
K.paginationContainer.find("."+K.params.paginationTotalClass).text(Y)
}if(K.params.paginationType==="progress"){var ac=(Z+1)/Y,X=ac,s=1;
if(!K.isHorizontal()){s=ac;
X=1
}K.paginationContainer.find("."+K.params.paginationProgressbarClass).transform("translate3d(0,0,0) scaleX("+X+") scaleY("+s+")").transition(K.params.speed)
}if(K.params.paginationType==="custom"&&K.params.paginationCustomRender){K.paginationContainer.html(K.params.paginationCustomRender(K,Z+1,Y));
K.emit("onPaginationRendered",K,K.paginationContainer[0])
}}if(!K.params.loop){if(K.params.prevButton&&K.prevButton&&K.prevButton.length>0){if(K.isBeginning){K.prevButton.addClass(K.params.buttonDisabledClass);
if(K.params.a11y&&K.a11y){K.a11y.disable(K.prevButton)
}}else{K.prevButton.removeClass(K.params.buttonDisabledClass);
if(K.params.a11y&&K.a11y){K.a11y.enable(K.prevButton)
}}}if(K.params.nextButton&&K.nextButton&&K.nextButton.length>0){if(K.isEnd){K.nextButton.addClass(K.params.buttonDisabledClass);
if(K.params.a11y&&K.a11y){K.a11y.disable(K.nextButton)
}}else{K.nextButton.removeClass(K.params.buttonDisabledClass);
if(K.params.a11y&&K.a11y){K.a11y.enable(K.nextButton)
}}}}};
K.updatePagination=function(){if(!K.params.pagination){return
}if(K.paginationContainer&&K.paginationContainer.length>0){var p="";
if(K.params.paginationType==="bullets"){var X=K.params.loop?Math.ceil((K.slides.length-K.loopedSlides*2)/K.params.slidesPerGroup):K.snapGrid.length;
for(var s=0;
s<X;
s++){if(K.params.paginationBulletRender){p+=K.params.paginationBulletRender(K,s,K.params.bulletClass)
}else{p+="<"+K.params.paginationElement+' class="'+K.params.bulletClass+'"></'+K.params.paginationElement+">"
}}K.paginationContainer.html(p);
K.bullets=K.paginationContainer.find("."+K.params.bulletClass);
if(K.params.paginationClickable&&K.params.a11y&&K.a11y){K.a11y.initPagination()
}}if(K.params.paginationType==="fraction"){if(K.params.paginationFractionRender){p=K.params.paginationFractionRender(K,K.params.paginationCurrentClass,K.params.paginationTotalClass)
}else{p='<span class="'+K.params.paginationCurrentClass+'"></span> / <span class="'+K.params.paginationTotalClass+'"></span>'
}K.paginationContainer.html(p)
}if(K.params.paginationType==="progress"){if(K.params.paginationProgressRender){p=K.params.paginationProgressRender(K,K.params.paginationProgressbarClass)
}else{p='<span class="'+K.params.paginationProgressbarClass+'"></span>'
}K.paginationContainer.html(p)
}if(K.params.paginationType!=="custom"){K.emit("onPaginationRendered",K,K.paginationContainer[0])
}}};
K.update=function(Y){if(!K){return
}K.updateContainerSize();
K.updateSlidesSize();
K.updateProgress();
K.updatePagination();
K.updateClasses();
if(K.params.scrollbar&&K.scrollbar){K.scrollbar.set()
}var s;
function p(){var Z=K.rtl?-K.translate:K.translate;
s=Math.min(Math.max(K.translate,K.maxTranslate()),K.minTranslate());
K.setWrapperTranslate(s);
K.updateActiveIndex();
K.updateClasses()
}if(Y){var X;
if(K.controller&&K.controller.spline){K.controller.spline=undefined
}if(K.params.freeMode){p();
if(K.params.autoHeight){K.updateAutoHeight()
}}else{if((K.params.slidesPerView==="auto"||K.params.slidesPerView>1)&&K.isEnd&&!K.params.centeredSlides){X=K.slideTo(K.slides.length-1,0,false,true)
}else{X=K.slideTo(K.activeIndex,0,false,true)
}if(!X){p()
}}}else{if(K.params.autoHeight){K.updateAutoHeight()
}}};
K.onResize=function(p){if(K.params.onBeforeResize){K.params.onBeforeResize(K)
}if(K.params.breakpoints){K.setBreakpoint()
}var Y=K.params.allowSwipeToPrev;
var s=K.params.allowSwipeToNext;
K.params.allowSwipeToPrev=K.params.allowSwipeToNext=true;
K.updateContainerSize();
K.updateSlidesSize();
if(K.params.slidesPerView==="auto"||K.params.freeMode||p){K.updatePagination()
}if(K.params.scrollbar&&K.scrollbar){K.scrollbar.set()
}if(K.controller&&K.controller.spline){K.controller.spline=undefined
}var Z=false;
if(K.params.freeMode){var X=Math.min(Math.max(K.translate,K.maxTranslate()),K.minTranslate());
K.setWrapperTranslate(X);
K.updateActiveIndex();
K.updateClasses();
if(K.params.autoHeight){K.updateAutoHeight()
}}else{K.updateClasses();
if((K.params.slidesPerView==="auto"||K.params.slidesPerView>1)&&K.isEnd&&!K.params.centeredSlides){Z=K.slideTo(K.slides.length-1,0,false,true)
}else{Z=K.slideTo(K.activeIndex,0,false,true)
}}if(K.params.lazyLoading&&!Z&&K.lazy){K.lazy.load()
}K.params.allowSwipeToPrev=Y;
K.params.allowSwipeToNext=s;
if(K.params.onAfterResize){K.params.onAfterResize(K)
}};
K.touchEventsDesktop={start:"mousedown",move:"mousemove",end:"mouseup"};
if(window.navigator.pointerEnabled){K.touchEventsDesktop={start:"pointerdown",move:"pointermove",end:"pointerup"}
}else{if(window.navigator.msPointerEnabled){K.touchEventsDesktop={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}
}}K.touchEvents={start:K.support.touch||!K.params.simulateTouch?"touchstart":K.touchEventsDesktop.start,move:K.support.touch||!K.params.simulateTouch?"touchmove":K.touchEventsDesktop.move,end:K.support.touch||!K.params.simulateTouch?"touchend":K.touchEventsDesktop.end};
if(window.navigator.pointerEnabled||window.navigator.msPointerEnabled){(K.params.touchEventsTarget==="container"?K.container:K.wrapper).addClass("swiper-wp8-"+K.params.direction)
}K.initEvents=function(ab){var p=ab?"off":"on";
var Z=ab?"removeEventListener":"addEventListener";
var s=K.params.touchEventsTarget==="container"?K.container[0]:K.wrapper[0];
var aa=K.support.touch?s:document;
var X=K.params.nested?true:false;
if(K.browser.ie){s[Z](K.touchEvents.start,K.onTouchStart,false);
aa[Z](K.touchEvents.move,K.onTouchMove,X);
aa[Z](K.touchEvents.end,K.onTouchEnd,false)
}else{if(K.support.touch){var Y=K.touchEvents.start==="touchstart"&&K.support.passiveListener&&K.params.passiveListeners?{passive:true,capture:false}:false;
s[Z](K.touchEvents.start,K.onTouchStart,Y);
s[Z](K.touchEvents.move,K.onTouchMove,X);
s[Z](K.touchEvents.end,K.onTouchEnd,Y)
}if((h.simulateTouch&&!K.device.ios&&!K.device.android)||(h.simulateTouch&&!K.support.touch&&K.device.ios)){s[Z]("mousedown",K.onTouchStart,false);
document[Z]("mousemove",K.onTouchMove,X);
document[Z]("mouseup",K.onTouchEnd,false)
}}window[Z]("resize",K.onResize);
if(K.params.nextButton&&K.nextButton&&K.nextButton.length>0){K.nextButton[p]("click",K.onClickNext);
if(K.params.a11y&&K.a11y){K.nextButton[p]("keydown",K.a11y.onEnterKey)
}}if(K.params.prevButton&&K.prevButton&&K.prevButton.length>0){K.prevButton[p]("click",K.onClickPrev);
if(K.params.a11y&&K.a11y){K.prevButton[p]("keydown",K.a11y.onEnterKey)
}}if(K.params.pagination&&K.params.paginationClickable){K.paginationContainer[p]("click","."+K.params.bulletClass,K.onClickIndex);
if(K.params.a11y&&K.a11y){K.paginationContainer[p]("keydown","."+K.params.bulletClass,K.a11y.onEnterKey)
}}if(K.params.preventClicks||K.params.preventClicksPropagation){s[Z]("click",K.preventClicks,true)
}};
K.attachEvents=function(){K.initEvents()
};
K.detachEvents=function(){K.initEvents(true)
};
K.allowClick=true;
K.preventClicks=function(p){if(!K.allowClick){if(K.params.preventClicks){p.preventDefault()
}if(K.params.preventClicksPropagation&&K.animating){p.stopPropagation();
p.stopImmediatePropagation()
}}};
K.onClickNext=function(p){p.preventDefault();
if(K.isEnd&&!K.params.loop){return
}K.slideNext()
};
K.onClickPrev=function(p){p.preventDefault();
if(K.isBeginning&&!K.params.loop){return
}K.slidePrev()
};
K.onClickIndex=function(s){s.preventDefault();
var p=f(this).index()*K.params.slidesPerGroup;
if(K.params.loop){p=p+K.loopedSlides
}K.slideTo(p)
};
function W(Y,p){var s=f(Y.target);
if(!s.is(p)){if(typeof p==="string"){s=s.parents(p)
}else{if(p.nodeType){var X;
s.parents().each(function(Z,aa){if(aa===p){X=p
}});
if(!X){return undefined
}else{return p
}}}}if(s.length===0){return undefined
}return s[0]
}K.updateClickedSlide=function(ac){var p=W(ac,"."+K.params.slideClass);
var s=false;
if(p){for(var aa=0;
aa<K.slides.length;
aa++){if(K.slides[aa]===p){s=true
}}}if(p&&s){K.clickedSlide=p;
K.clickedIndex=f(p).index()
}else{K.clickedSlide=undefined;
K.clickedIndex=undefined;
return
}if(K.params.slideToClickedSlide&&K.clickedIndex!==undefined&&K.clickedIndex!==K.activeIndex){var Y=K.clickedIndex,ab,Z,X=K.params.slidesPerView==="auto"?K.currentSlidesPerView():K.params.slidesPerView;
if(K.params.loop){if(K.animating){return
}ab=parseInt(f(K.clickedSlide).attr("data-swiper-slide-index"),10);
if(K.params.centeredSlides){if((Y<K.loopedSlides-X/2)||(Y>K.slides.length-K.loopedSlides+X/2)){K.fixLoop();
Y=K.wrapper.children("."+K.params.slideClass+'[data-swiper-slide-index="'+ab+'"]:not(.'+K.params.slideDuplicateClass+")").eq(0).index();
setTimeout(function(){K.slideTo(Y)
},0)
}else{K.slideTo(Y)
}}else{if(Y>K.slides.length-X){K.fixLoop();
Y=K.wrapper.children("."+K.params.slideClass+'[data-swiper-slide-index="'+ab+'"]:not(.'+K.params.slideDuplicateClass+")").eq(0).index();
setTimeout(function(){K.slideTo(Y)
},0)
}else{K.slideTo(Y)
}}}else{K.slideTo(Y)
}}};
var M,y,v,I,k,H,J,G,r="input, select, textarea, button, video",j=Date.now(),D,S=[],U;
K.animating=false;
K.touches={startX:0,startY:0,currentX:0,currentY:0,diff:0};
var u,B;
K.onTouchStart=function(Y){if(Y.originalEvent){Y=Y.originalEvent
}u=Y.type==="touchstart";
if(!u&&"which" in Y&&Y.which===3){return
}if(K.params.noSwiping&&W(Y,"."+K.params.noSwipingClass)){K.allowClick=true;
return
}if(K.params.swipeHandler){if(!W(Y,K.params.swipeHandler)){return
}}var s=K.touches.currentX=Y.type==="touchstart"?Y.targetTouches[0].pageX:Y.pageX;
var p=K.touches.currentY=Y.type==="touchstart"?Y.targetTouches[0].pageY:Y.pageY;
if(K.device.ios&&K.params.iOSEdgeSwipeDetection&&s<=K.params.iOSEdgeSwipeThreshold){return
}M=true;
y=false;
v=true;
k=undefined;
B=undefined;
K.touches.startX=s;
K.touches.startY=p;
I=Date.now();
K.allowClick=true;
K.updateContainerSize();
K.swipeDirection=undefined;
if(K.params.threshold>0){G=false
}if(Y.type!=="touchstart"){var X=true;
if(f(Y.target).is(r)){X=false
}if(document.activeElement&&f(document.activeElement).is(r)){document.activeElement.blur()
}if(X){Y.preventDefault()
}}K.emit("onTouchStart",K,Y)
};
K.onTouchMove=function(Y){if(Y.originalEvent){Y=Y.originalEvent
}if(u&&Y.type==="mousemove"){return
}if(Y.preventedByNestedSwiper){K.touches.startX=Y.type==="touchmove"?Y.targetTouches[0].pageX:Y.pageX;
K.touches.startY=Y.type==="touchmove"?Y.targetTouches[0].pageY:Y.pageY;
return
}if(K.params.onlyExternal){K.allowClick=false;
if(M){K.touches.startX=K.touches.currentX=Y.type==="touchmove"?Y.targetTouches[0].pageX:Y.pageX;
K.touches.startY=K.touches.currentY=Y.type==="touchmove"?Y.targetTouches[0].pageY:Y.pageY;
I=Date.now()
}return
}if(u&&K.params.touchReleaseOnEdges&&!K.params.loop){if(!K.isHorizontal()){if((K.touches.currentY<K.touches.startY&&K.translate<=K.maxTranslate())||(K.touches.currentY>K.touches.startY&&K.translate>=K.minTranslate())){return
}}else{if((K.touches.currentX<K.touches.startX&&K.translate<=K.maxTranslate())||(K.touches.currentX>K.touches.startX&&K.translate>=K.minTranslate())){return
}}}if(u&&document.activeElement){if(Y.target===document.activeElement&&f(Y.target).is(r)){y=true;
K.allowClick=false;
return
}}if(v){K.emit("onTouchMove",K,Y)
}if(Y.targetTouches&&Y.targetTouches.length>1){return
}K.touches.currentX=Y.type==="touchmove"?Y.targetTouches[0].pageX:Y.pageX;
K.touches.currentY=Y.type==="touchmove"?Y.targetTouches[0].pageY:Y.pageY;
if(typeof k==="undefined"){var p;
if(K.isHorizontal()&&K.touches.currentY===K.touches.startY||!K.isHorizontal()&&K.touches.currentX===K.touches.startX){k=false
}else{p=Math.atan2(Math.abs(K.touches.currentY-K.touches.startY),Math.abs(K.touches.currentX-K.touches.startX))*180/Math.PI;
k=K.isHorizontal()?p>K.params.touchAngle:(90-p>K.params.touchAngle)
}}if(k){K.emit("onTouchMoveOpposite",K,Y)
}if(typeof B==="undefined"){if(K.touches.currentX!==K.touches.startX||K.touches.currentY!==K.touches.startY){B=true
}}if(!M){return
}if(k){M=false;
return
}if(!B){return
}K.allowClick=false;
K.emit("onSliderMove",K,Y);
Y.preventDefault();
if(K.params.touchMoveStopPropagation&&!K.params.nested){Y.stopPropagation()
}if(!y){if(h.loop){K.fixLoop()
}J=K.getWrapperTranslate();
K.setWrapperTransition(0);
if(K.animating){K.wrapper.trigger("webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd msTransitionEnd")
}if(K.params.autoplay&&K.autoplaying){if(K.params.autoplayDisableOnInteraction){K.stopAutoplay()
}else{K.pauseAutoplay()
}}U=false;
if(K.params.grabCursor&&(K.params.allowSwipeToNext===true||K.params.allowSwipeToPrev===true)){K.setGrabCursor(true)
}}y=true;
var X=K.touches.diff=K.isHorizontal()?K.touches.currentX-K.touches.startX:K.touches.currentY-K.touches.startY;
X=X*K.params.touchRatio;
if(K.rtl){X=-X
}K.swipeDirection=X>0?"prev":"next";
H=X+J;
var s=true;
if((X>0&&H>K.minTranslate())){s=false;
if(K.params.resistance){H=K.minTranslate()-1+Math.pow(-K.minTranslate()+J+X,K.params.resistanceRatio)
}}else{if(X<0&&H<K.maxTranslate()){s=false;
if(K.params.resistance){H=K.maxTranslate()+1-Math.pow(K.maxTranslate()-J-X,K.params.resistanceRatio)
}}}if(s){Y.preventedByNestedSwiper=true
}if(!K.params.allowSwipeToNext&&K.swipeDirection==="next"&&H<J){H=J
}if(!K.params.allowSwipeToPrev&&K.swipeDirection==="prev"&&H>J){H=J
}if(K.params.threshold>0){if(Math.abs(X)>K.params.threshold||G){if(!G){G=true;
K.touches.startX=K.touches.currentX;
K.touches.startY=K.touches.currentY;
H=J;
K.touches.diff=K.isHorizontal()?K.touches.currentX-K.touches.startX:K.touches.currentY-K.touches.startY;
return
}}else{H=J;
return
}}if(!K.params.followFinger){return
}if(K.params.freeMode||K.params.watchSlidesProgress){K.updateActiveIndex()
}if(K.params.freeMode){if(S.length===0){S.push({position:K.touches[K.isHorizontal()?"startX":"startY"],time:I})
}S.push({position:K.touches[K.isHorizontal()?"currentX":"currentY"],time:(new window.Date()).getTime()})
}K.updateProgress(H);
K.setWrapperTranslate(H)
};
K.onTouchEnd=function(al){if(al.originalEvent){al=al.originalEvent
}if(v){K.emit("onTouchEnd",K,al)
}v=false;
if(!M){return
}if(K.params.grabCursor&&y&&M&&(K.params.allowSwipeToNext===true||K.params.allowSwipeToPrev===true)){K.setGrabCursor(false)
}var am=Date.now();
var ai=am-I;
if(K.allowClick){K.updateClickedSlide(al);
K.emit("onTap",K,al);
if(ai<300&&(am-j)>300){if(D){clearTimeout(D)
}D=setTimeout(function(){if(!K){return
}if(K.params.paginationHide&&K.paginationContainer.length>0&&!f(al.target).hasClass(K.params.bulletClass)){K.paginationContainer.toggleClass(K.params.paginationHiddenClass)
}K.emit("onClick",K,al)
},300)
}if(ai<300&&(am-j)<300){if(D){clearTimeout(D)
}K.emit("onDoubleTap",K,al)
}}j=Date.now();
setTimeout(function(){if(K){K.allowClick=true
}},0);
if(!M||!y||!K.swipeDirection||K.touches.diff===0||H===J){M=y=false;
return
}M=y=false;
var ao;
if(K.params.followFinger){ao=K.rtl?K.translate:-K.translate
}else{ao=-H
}if(K.params.freeMode){if(ao<-K.minTranslate()){K.slideTo(K.activeIndex);
return
}else{if(ao>-K.maxTranslate()){if(K.slides.length<K.snapGrid.length){K.slideTo(K.snapGrid.length-1)
}else{K.slideTo(K.slides.length-1)
}return
}}if(K.params.freeModeMomentum){if(S.length>1){var ag=S.pop(),an=S.pop();
var ab=ag.position-an.position;
var ac=ag.time-an.time;
K.velocity=ab/ac;
K.velocity=K.velocity/2;
if(Math.abs(K.velocity)<K.params.freeModeMinimumVelocity){K.velocity=0
}if(ac>150||(new window.Date().getTime()-ag.time)>300){K.velocity=0
}}else{K.velocity=0
}K.velocity=K.velocity*K.params.freeModeMomentumVelocityRatio;
S.length=0;
var af=1000*K.params.freeModeMomentumRatio;
var ah=K.velocity*af;
var aa=K.translate+ah;
if(K.rtl){aa=-aa
}var p=false;
var Z;
var X=Math.abs(K.velocity)*20*K.params.freeModeMomentumBounceRatio;
if(aa<K.maxTranslate()){if(K.params.freeModeMomentumBounce){if(aa+K.maxTranslate()<-X){aa=K.maxTranslate()-X
}Z=K.maxTranslate();
p=true;
U=true
}else{aa=K.maxTranslate()
}}else{if(aa>K.minTranslate()){if(K.params.freeModeMomentumBounce){if(aa-K.minTranslate()>X){aa=K.minTranslate()+X
}Z=K.minTranslate();
p=true;
U=true
}else{aa=K.minTranslate()
}}else{if(K.params.freeModeSticky){var aj=0,Y;
for(aj=0;
aj<K.snapGrid.length;
aj+=1){if(K.snapGrid[aj]>-aa){Y=aj;
break
}}if(Math.abs(K.snapGrid[Y]-aa)<Math.abs(K.snapGrid[Y-1]-aa)||K.swipeDirection==="next"){aa=K.snapGrid[Y]
}else{aa=K.snapGrid[Y-1]
}if(!K.rtl){aa=-aa
}}}}if(K.velocity!==0){if(K.rtl){af=Math.abs((-aa-K.translate)/K.velocity)
}else{af=Math.abs((aa-K.translate)/K.velocity)
}}else{if(K.params.freeModeSticky){K.slideReset();
return
}}if(K.params.freeModeMomentumBounce&&p){K.updateProgress(Z);
K.setWrapperTransition(af);
K.setWrapperTranslate(aa);
K.onTransitionStart();
K.animating=true;
K.wrapper.transitionEnd(function(){if(!K||!U){return
}K.emit("onMomentumBounce",K);
K.setWrapperTransition(K.params.speed);
K.setWrapperTranslate(Z);
K.wrapper.transitionEnd(function(){if(!K){return
}K.onTransitionEnd()
})
})
}else{if(K.velocity){K.updateProgress(aa);
K.setWrapperTransition(af);
K.setWrapperTranslate(aa);
K.onTransitionStart();
if(!K.animating){K.animating=true;
K.wrapper.transitionEnd(function(){if(!K){return
}K.onTransitionEnd()
})
}}else{K.updateProgress(aa)
}}K.updateActiveIndex()
}if(!K.params.freeModeMomentum||ai>=K.params.longSwipesMs){K.updateProgress();
K.updateActiveIndex()
}return
}var ak,ae=0,s=K.slidesSizesGrid[0];
for(ak=0;
ak<K.slidesGrid.length;
ak+=K.params.slidesPerGroup){if(typeof K.slidesGrid[ak+K.params.slidesPerGroup]!=="undefined"){if(ao>=K.slidesGrid[ak]&&ao<K.slidesGrid[ak+K.params.slidesPerGroup]){ae=ak;
s=K.slidesGrid[ak+K.params.slidesPerGroup]-K.slidesGrid[ak]
}}else{if(ao>=K.slidesGrid[ak]){ae=ak;
s=K.slidesGrid[K.slidesGrid.length-1]-K.slidesGrid[K.slidesGrid.length-2]
}}}var ad=(ao-K.slidesGrid[ae])/s;
if(ai>K.params.longSwipesMs){if(!K.params.longSwipes){K.slideTo(K.activeIndex);
return
}if(K.swipeDirection==="next"){if(ad>=K.params.longSwipesRatio){K.slideTo(ae+K.params.slidesPerGroup)
}else{K.slideTo(ae)
}}if(K.swipeDirection==="prev"){if(ad>(1-K.params.longSwipesRatio)){K.slideTo(ae+K.params.slidesPerGroup)
}else{K.slideTo(ae)
}}}else{if(!K.params.shortSwipes){K.slideTo(K.activeIndex);
return
}if(K.swipeDirection==="next"){K.slideTo(ae+K.params.slidesPerGroup)
}if(K.swipeDirection==="prev"){K.slideTo(ae)
}}};
K._slideTo=function(s,p){return K.slideTo(s,p,true,true)
};
K.slideTo=function(Y,X,aa,p){if(typeof aa==="undefined"){aa=true
}if(typeof Y==="undefined"){Y=0
}if(Y<0){Y=0
}K.snapIndex=Math.floor(Y/K.params.slidesPerGroup);
if(K.snapIndex>=K.snapGrid.length){K.snapIndex=K.snapGrid.length-1
}var Z=-K.snapGrid[K.snapIndex];
if(K.params.autoplay&&K.autoplaying){if(p||!K.params.autoplayDisableOnInteraction){K.pauseAutoplay(X)
}else{K.stopAutoplay()
}}K.updateProgress(Z);
if(K.params.normalizeSlideIndex){for(var s=0;
s<K.slidesGrid.length;
s++){if(-Math.floor(Z*100)>=Math.floor(K.slidesGrid[s]*100)){Y=s
}}}if(!K.params.allowSwipeToNext&&Z<K.translate&&Z<K.minTranslate()){return false
}if(!K.params.allowSwipeToPrev&&Z>K.translate&&Z>K.maxTranslate()){if((K.activeIndex||0)!==Y){return false
}}if(typeof X==="undefined"){X=K.params.speed
}K.previousIndex=K.activeIndex||0;
K.activeIndex=Y;
K.updateRealIndex();
if((K.rtl&&-Z===K.translate)||(!K.rtl&&Z===K.translate)){if(K.params.autoHeight){K.updateAutoHeight()
}K.updateClasses();
if(K.params.effect!=="slide"){K.setWrapperTranslate(Z)
}return false
}K.updateClasses();
K.onTransitionStart(aa);
if(X===0||K.browser.lteIE9){K.setWrapperTranslate(Z);
K.setWrapperTransition(0);
K.onTransitionEnd(aa)
}else{K.setWrapperTranslate(Z);
K.setWrapperTransition(X);
if(!K.animating){K.animating=true;
K.wrapper.transitionEnd(function(){if(!K){return
}K.onTransitionEnd(aa)
})
}}return true
};
K.onTransitionStart=function(p){if(typeof p==="undefined"){p=true
}if(K.params.autoHeight){K.updateAutoHeight()
}if(K.lazy){K.lazy.onTransitionStart()
}if(p){K.emit("onTransitionStart",K);
if(K.activeIndex!==K.previousIndex){K.emit("onSlideChangeStart",K);
if(K.activeIndex>K.previousIndex){K.emit("onSlideNextStart",K)
}else{K.emit("onSlidePrevStart",K)
}}}};
K.onTransitionEnd=function(p){K.animating=false;
K.setWrapperTransition(0);
if(typeof p==="undefined"){p=true
}if(K.lazy){K.lazy.onTransitionEnd()
}if(p){K.emit("onTransitionEnd",K);
if(K.activeIndex!==K.previousIndex){K.emit("onSlideChangeEnd",K);
if(K.activeIndex>K.previousIndex){K.emit("onSlideNextEnd",K)
}else{K.emit("onSlidePrevEnd",K)
}}}if(K.params.history&&K.history){K.history.setHistory(K.params.history,K.activeIndex)
}if(K.params.hashnav&&K.hashnav){K.hashnav.setHash()
}};
K.slideNext=function(X,s,p){if(K.params.loop){if(K.animating){return false
}K.fixLoop();
var Y=K.container[0].clientLeft;
return K.slideTo(K.activeIndex+K.params.slidesPerGroup,s,X,p)
}else{return K.slideTo(K.activeIndex+K.params.slidesPerGroup,s,X,p)
}};
K._slideNext=function(p){return K.slideNext(true,p,true)
};
K.slidePrev=function(X,s,p){if(K.params.loop){if(K.animating){return false
}K.fixLoop();
var Y=K.container[0].clientLeft;
return K.slideTo(K.activeIndex-1,s,X,p)
}else{return K.slideTo(K.activeIndex-1,s,X,p)
}};
K._slidePrev=function(p){return K.slidePrev(true,p,true)
};
K.slideReset=function(X,s,p){return K.slideTo(K.activeIndex,s,X)
};
K.disableTouchControl=function(){K.params.onlyExternal=true;
return true
};
K.enableTouchControl=function(){K.params.onlyExternal=false;
return true
};
K.setWrapperTransition=function(p,s){K.wrapper.transition(p);
if(K.params.effect!=="slide"&&K.effects[K.params.effect]){K.effects[K.params.effect].setTransition(p)
}if(K.params.parallax&&K.parallax){K.parallax.setTransition(p)
}if(K.params.scrollbar&&K.scrollbar){K.scrollbar.setTransition(p)
}if(K.params.control&&K.controller){K.controller.setTransition(p,s)
}K.emit("onSetTransition",K,p)
};
K.setWrapperTranslate=function(aa,X,ac){var p=0,ab=0,Z=0;
if(K.isHorizontal()){p=K.rtl?-aa:aa
}else{ab=aa
}if(K.params.roundLengths){p=P(p);
ab=P(ab)
}if(!K.params.virtualTranslate){if(K.support.transforms3d){K.wrapper.transform("translate3d("+p+"px, "+ab+"px, "+Z+"px)")
}else{K.wrapper.transform("translate("+p+"px, "+ab+"px)")
}}K.translate=K.isHorizontal()?p:ab;
var s;
var Y=K.maxTranslate()-K.minTranslate();
if(Y===0){s=0
}else{s=(aa-K.minTranslate())/(Y)
}if(s!==K.progress){K.updateProgress(aa)
}if(X){K.updateActiveIndex()
}if(K.params.effect!=="slide"&&K.effects[K.params.effect]){K.effects[K.params.effect].setTranslate(K.translate)
}if(K.params.parallax&&K.parallax){K.parallax.setTranslate(K.translate)
}if(K.params.scrollbar&&K.scrollbar){K.scrollbar.setTranslate(K.translate)
}if(K.params.control&&K.controller){K.controller.setTranslate(K.translate,ac)
}K.emit("onSetTranslate",K,K.translate)
};
K.getTranslate=function(Z,Y){var p,X,aa,s;
if(typeof Y==="undefined"){Y="x"
}if(K.params.virtualTranslate){return K.rtl?-K.translate:K.translate
}aa=window.getComputedStyle(Z,null);
if(window.WebKitCSSMatrix){X=aa.transform||aa.webkitTransform;
if(X.split(",").length>6){X=X.split(", ").map(function(ab){return ab.replace(",",".")
}).join(", ")
}s=new window.WebKitCSSMatrix(X==="none"?"":X)
}else{s=aa.MozTransform||aa.OTransform||aa.MsTransform||aa.msTransform||aa.transform||aa.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,");
p=s.toString().split(",")
}if(Y==="x"){if(window.WebKitCSSMatrix){X=s.m41
}else{if(p.length===16){X=parseFloat(p[12])
}else{X=parseFloat(p[4])
}}}if(Y==="y"){if(window.WebKitCSSMatrix){X=s.m42
}else{if(p.length===16){X=parseFloat(p[13])
}else{X=parseFloat(p[5])
}}}if(K.rtl&&X){X=-X
}return X||0
};
K.getWrapperTranslate=function(p){if(typeof p==="undefined"){p=K.isHorizontal()?"x":"y"
}return K.getTranslate(K.wrapper[0],p)
};
K.observers=[];
function V(Y,X){X=X||{};
var s=window.MutationObserver||window.WebkitMutationObserver;
var p=new s(function(Z){Z.forEach(function(aa){K.onResize(true);
K.emit("onObserverUpdate",K,aa)
})
});
p.observe(Y,{attributes:typeof X.attributes==="undefined"?true:X.attributes,childList:typeof X.childList==="undefined"?true:X.childList,characterData:typeof X.characterData==="undefined"?true:X.characterData});
K.observers.push(p)
}K.initObservers=function(){if(K.params.observeParents){var s=K.container.parents();
for(var p=0;
p<s.length;
p++){V(s[p])
}}V(K.container[0],{childList:false});
V(K.wrapper[0],{attributes:false})
};
K.disconnectObservers=function(){for(var p=0;
p<K.observers.length;
p++){K.observers[p].disconnect()
}K.observers=[]
};
K.createLoop=function(){K.wrapper.children("."+K.params.slideClass+"."+K.params.slideDuplicateClass).remove();
var Y=K.wrapper.children("."+K.params.slideClass);
if(K.params.slidesPerView==="auto"&&!K.params.loopedSlides){K.params.loopedSlides=Y.length
}K.loopedSlides=parseInt(K.params.loopedSlides||K.params.slidesPerView,10);
K.loopedSlides=K.loopedSlides+K.params.loopAdditionalSlides;
if(K.loopedSlides>Y.length){K.loopedSlides=Y.length
}var p=[],X=[],s;
Y.each(function(aa,ab){var Z=f(this);
if(aa<K.loopedSlides){X.push(ab)
}if(aa<Y.length&&aa>=Y.length-K.loopedSlides){p.push(ab)
}Z.attr("data-swiper-slide-index",aa)
});
for(s=0;
s<X.length;
s++){K.wrapper.append(f(X[s].cloneNode(true)).addClass(K.params.slideDuplicateClass))
}for(s=p.length-1;
s>=0;
s--){K.wrapper.prepend(f(p[s].cloneNode(true)).addClass(K.params.slideDuplicateClass))
}};
K.destroyLoop=function(){K.wrapper.children("."+K.params.slideClass+"."+K.params.slideDuplicateClass).remove();
K.slides.removeAttr("data-swiper-slide-index")
};
K.reLoop=function(p){var s=K.activeIndex-K.loopedSlides;
K.destroyLoop();
K.createLoop();
K.updateSlidesSize();
if(p){K.slideTo(s+K.loopedSlides,0,false)
}};
K.fixLoop=function(){var p;
if(K.activeIndex<K.loopedSlides){p=K.slides.length-K.loopedSlides*3+K.activeIndex;
p=p+K.loopedSlides;
K.slideTo(p,0,false,true)
}else{if((K.params.slidesPerView==="auto"&&K.activeIndex>=K.loopedSlides*2)||(K.activeIndex>K.slides.length-K.params.slidesPerView*2)){p=-K.slides.length+K.activeIndex+K.loopedSlides;
p=p+K.loopedSlides;
K.slideTo(p,0,false,true)
}}};
K.appendSlide=function(s){if(K.params.loop){K.destroyLoop()
}if(typeof s==="object"&&s.length){for(var p=0;
p<s.length;
p++){if(s[p]){K.wrapper.append(s[p])
}}}else{K.wrapper.append(s)
}if(K.params.loop){K.createLoop()
}if(!(K.params.observer&&K.support.observer)){K.update(true)
}};
K.prependSlide=function(s){if(K.params.loop){K.destroyLoop()
}var X=K.activeIndex+1;
if(typeof s==="object"&&s.length){for(var p=0;
p<s.length;
p++){if(s[p]){K.wrapper.prepend(s[p])
}}X=K.activeIndex+s.length
}else{K.wrapper.prepend(s)
}if(K.params.loop){K.createLoop()
}if(!(K.params.observer&&K.support.observer)){K.update(true)
}K.slideTo(X,0,false)
};
K.removeSlide=function(X){if(K.params.loop){K.destroyLoop();
K.slides=K.wrapper.children("."+K.params.slideClass)
}var Y=K.activeIndex,p;
if(typeof X==="object"&&X.length){for(var s=0;
s<X.length;
s++){p=X[s];
if(K.slides[p]){K.slides.eq(p).remove()
}if(p<Y){Y--
}}Y=Math.max(Y,0)
}else{p=X;
if(K.slides[p]){K.slides.eq(p).remove()
}if(p<Y){Y--
}Y=Math.max(Y,0)
}if(K.params.loop){K.createLoop()
}if(!(K.params.observer&&K.support.observer)){K.update(true)
}if(K.params.loop){K.slideTo(Y+K.loopedSlides,0,false)
}else{K.slideTo(Y,0,false)
}};
K.removeAllSlides=function(){var s=[];
for(var p=0;
p<K.slides.length;
p++){s.push(p)
}K.removeSlide(s)
};
K.effects={fade:{setTranslate:function(){for(var Y=0;
Y<K.slides.length;
Y++){var s=K.slides.eq(Y);
var aa=s[0].swiperSlideOffset;
var X=-aa;
if(!K.params.virtualTranslate){X=X-K.translate
}var p=0;
if(!K.isHorizontal()){p=X;
X=0
}var Z=K.params.fade.crossFade?Math.max(1-Math.abs(s[0].progress),0):1+Math.min(Math.max(s[0].progress,-1),0);
s.css({opacity:Z}).transform("translate3d("+X+"px, "+p+"px, 0px)")
}},setTransition:function(s){K.slides.transition(s);
if(K.params.virtualTranslate&&s!==0){var p=false;
K.slides.transitionEnd(function(){if(p){return
}if(!K){return
}p=true;
K.animating=false;
var Y=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"];
for(var X=0;
X<Y.length;
X++){K.wrapper.trigger(Y[X])
}})
}}},flip:{setTranslate:function(){for(var ab=0;
ab<K.slides.length;
ab++){var ad=K.slides.eq(ab);
var p=ad[0].progress;
if(K.params.flip.limitRotation){p=Math.max(Math.min(ad[0].progress,1),-1)
}var Z=ad[0].swiperSlideOffset;
var aa=-180*p,ae=aa,af=0,ac=-Z,Y=0;
if(!K.isHorizontal()){Y=ac;
ac=0;
af=-ae;
ae=0
}else{if(K.rtl){ae=-ae
}}ad[0].style.zIndex=-Math.abs(Math.round(p))+K.slides.length;
if(K.params.flip.slideShadows){var X=K.isHorizontal()?ad.find(".swiper-slide-shadow-left"):ad.find(".swiper-slide-shadow-top");
var s=K.isHorizontal()?ad.find(".swiper-slide-shadow-right"):ad.find(".swiper-slide-shadow-bottom");
if(X.length===0){X=f('<div class="swiper-slide-shadow-'+(K.isHorizontal()?"left":"top")+'"></div>');
ad.append(X)
}if(s.length===0){s=f('<div class="swiper-slide-shadow-'+(K.isHorizontal()?"right":"bottom")+'"></div>');
ad.append(s)
}if(X.length){X[0].style.opacity=Math.max(-p,0)
}if(s.length){s[0].style.opacity=Math.max(p,0)
}}ad.transform("translate3d("+ac+"px, "+Y+"px, 0px) rotateX("+af+"deg) rotateY("+ae+"deg)")
}},setTransition:function(s){K.slides.transition(s).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(s);
if(K.params.virtualTranslate&&s!==0){var p=false;
K.slides.eq(K.activeIndex).transitionEnd(function(){if(p){return
}if(!K){return
}if(!f(this).hasClass(K.params.slideActiveClass)){return
}p=true;
K.animating=false;
var Y=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"];
for(var X=0;
X<Y.length;
X++){K.wrapper.trigger(Y[X])
}})
}}},cube:{setTranslate:function(){var Z=0,ac;
if(K.params.cube.shadow){if(K.isHorizontal()){ac=K.wrapper.find(".swiper-cube-shadow");
if(ac.length===0){ac=f('<div class="swiper-cube-shadow"></div>');
K.wrapper.append(ac)
}ac.css({height:K.width+"px"})
}else{ac=K.container.find(".swiper-cube-shadow");
if(ac.length===0){ac=f('<div class="swiper-cube-shadow"></div>');
K.container.append(ac)
}}}for(var aj=0;
aj<K.slides.length;
aj++){var p=K.slides.eq(aj);
var ab=aj*90;
var al=Math.floor(ab/360);
if(K.rtl){ab=-ab;
al=Math.floor(-ab/360)
}var Y=Math.max(Math.min(p[0].progress,1),-1);
var an=0,am=0,ak=0;
if(aj%4===0){an=-al*4*K.size;
ak=0
}else{if((aj-1)%4===0){an=0;
ak=-al*4*K.size
}else{if((aj-2)%4===0){an=K.size+al*4*K.size;
ak=K.size
}else{if((aj-3)%4===0){an=-K.size;
ak=3*K.size+K.size*4*al
}}}}if(K.rtl){an=-an
}if(!K.isHorizontal()){am=an;
an=0
}var ad="rotateX("+(K.isHorizontal()?0:-ab)+"deg) rotateY("+(K.isHorizontal()?ab:0)+"deg) translate3d("+an+"px, "+am+"px, "+ak+"px)";
if(Y<=1&&Y>-1){Z=aj*90+Y*90;
if(K.rtl){Z=-aj*90-Y*90
}}p.transform(ad);
if(K.params.cube.slideShadows){var ag=K.isHorizontal()?p.find(".swiper-slide-shadow-left"):p.find(".swiper-slide-shadow-top");
var s=K.isHorizontal()?p.find(".swiper-slide-shadow-right"):p.find(".swiper-slide-shadow-bottom");
if(ag.length===0){ag=f('<div class="swiper-slide-shadow-'+(K.isHorizontal()?"left":"top")+'"></div>');
p.append(ag)
}if(s.length===0){s=f('<div class="swiper-slide-shadow-'+(K.isHorizontal()?"right":"bottom")+'"></div>');
p.append(s)
}if(ag.length){ag[0].style.opacity=Math.max(-Y,0)
}if(s.length){s[0].style.opacity=Math.max(Y,0)
}}}K.wrapper.css({"-webkit-transform-origin":"50% 50% -"+(K.size/2)+"px","-moz-transform-origin":"50% 50% -"+(K.size/2)+"px","-ms-transform-origin":"50% 50% -"+(K.size/2)+"px","transform-origin":"50% 50% -"+(K.size/2)+"px"});
if(K.params.cube.shadow){if(K.isHorizontal()){ac.transform("translate3d(0px, "+(K.width/2+K.params.cube.shadowOffset)+"px, "+(-K.width/2)+"px) rotateX(90deg) rotateZ(0deg) scale("+(K.params.cube.shadowScale)+")")
}else{var af=Math.abs(Z)-Math.floor(Math.abs(Z)/90)*90;
var aa=1.5-(Math.sin(af*2*Math.PI/360)/2+Math.cos(af*2*Math.PI/360)/2);
var ai=K.params.cube.shadowScale,ah=K.params.cube.shadowScale/aa,X=K.params.cube.shadowOffset;
ac.transform("scale3d("+ai+", 1, "+ah+") translate3d(0px, "+(K.height/2+X)+"px, "+(-K.height/2/ah)+"px) rotateX(-90deg)")
}}var ae=(K.isSafari||K.isUiWebView)?(-K.size/2):0;
K.wrapper.transform("translate3d(0px,0,"+ae+"px) rotateX("+(K.isHorizontal()?0:Z)+"deg) rotateY("+(K.isHorizontal()?-Z:0)+"deg)")
},setTransition:function(p){K.slides.transition(p).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(p);
if(K.params.cube.shadow&&!K.isHorizontal()){K.container.find(".swiper-cube-shadow").transition(p)
}}},coverflow:{setTranslate:function(){var ag=K.translate;
var ak=K.isHorizontal()?-ag+K.width/2:-ag+K.height/2;
var aj=K.isHorizontal()?K.params.coverflow.rotate:-K.params.coverflow.rotate;
var af=K.params.coverflow.depth;
for(var ai=0,Z=K.slides.length;
ai<Z;
ai++){var p=K.slides.eq(ai);
var aa=K.slidesSizesGrid[ai];
var ab=p[0].swiperSlideOffset;
var ac=(ak-ab-aa/2)/aa*K.params.coverflow.modifier;
var ad=K.isHorizontal()?aj*ac:0;
var ae=K.isHorizontal()?0:aj*ac;
var al=-af*Math.abs(ac);
var am=K.isHorizontal()?0:K.params.coverflow.stretch*(ac);
var an=K.isHorizontal()?K.params.coverflow.stretch*(ac):0;
if(Math.abs(an)<0.001){an=0
}if(Math.abs(am)<0.001){am=0
}if(Math.abs(al)<0.001){al=0
}if(Math.abs(ad)<0.001){ad=0
}if(Math.abs(ae)<0.001){ae=0
}var Y="translate3d("+an+"px,"+am+"px,"+al+"px)  rotateX("+ae+"deg) rotateY("+ad+"deg)";
p.transform(Y);
p[0].style.zIndex=-Math.abs(Math.round(ac))+1;
if(K.params.coverflow.slideShadows){var ah=K.isHorizontal()?p.find(".swiper-slide-shadow-left"):p.find(".swiper-slide-shadow-top");
var s=K.isHorizontal()?p.find(".swiper-slide-shadow-right"):p.find(".swiper-slide-shadow-bottom");
if(ah.length===0){ah=f('<div class="swiper-slide-shadow-'+(K.isHorizontal()?"left":"top")+'"></div>');
p.append(ah)
}if(s.length===0){s=f('<div class="swiper-slide-shadow-'+(K.isHorizontal()?"right":"bottom")+'"></div>');
p.append(s)
}if(ah.length){ah[0].style.opacity=ac>0?ac:0
}if(s.length){s[0].style.opacity=(-ac)>0?-ac:0
}}}if(K.browser.ie){var X=K.wrapper[0].style;
X.perspectiveOrigin=ak+"px 50%"
}},setTransition:function(p){K.slides.transition(p).find(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").transition(p)
}}};
K.lazy={initialImageLoaded:false,loadImageInSlide:function(X,Y){if(typeof X==="undefined"){return
}if(typeof Y==="undefined"){Y=true
}if(K.slides.length===0){return
}var p=K.slides.eq(X);
var s=p.find("."+K.params.lazyLoadingClass+":not(."+K.params.lazyStatusLoadedClass+"):not(."+K.params.lazyStatusLoadingClass+")");
if(p.hasClass(K.params.lazyLoadingClass)&&!p.hasClass(K.params.lazyStatusLoadedClass)&&!p.hasClass(K.params.lazyStatusLoadingClass)){s=s.add(p[0])
}if(s.length===0){return
}s.each(function(){var Z=f(this);
Z.addClass(K.params.lazyStatusLoadingClass);
var aa=Z.attr("data-background");
var ad=Z.attr("data-src"),ac=Z.attr("data-srcset"),ab=Z.attr("data-sizes");
K.loadImage(Z[0],(ad||aa),ac,ab,false,function(){if(typeof K==="undefined"||K===null||!K){return
}if(aa){Z.css("background-image",'url("'+aa+'")');
Z.removeAttr("data-background")
}else{if(ac){Z.attr("srcset",ac);
Z.removeAttr("data-srcset")
}if(ab){Z.attr("sizes",ab);
Z.removeAttr("data-sizes")
}if(ad){Z.attr("src",ad);
Z.removeAttr("data-src")
}}Z.addClass(K.params.lazyStatusLoadedClass).removeClass(K.params.lazyStatusLoadingClass);
p.find("."+K.params.lazyPreloaderClass+", ."+K.params.preloaderClass).remove();
if(K.params.loop&&Y){var ae=p.attr("data-swiper-slide-index");
if(p.hasClass(K.params.slideDuplicateClass)){var af=K.wrapper.children('[data-swiper-slide-index="'+ae+'"]:not(.'+K.params.slideDuplicateClass+")");
K.lazy.loadImageInSlide(af.index(),false)
}else{var ag=K.wrapper.children("."+K.params.slideDuplicateClass+'[data-swiper-slide-index="'+ae+'"]');
K.lazy.loadImageInSlide(ag.index(),false)
}}K.emit("onLazyImageReady",K,p[0],Z[0])
});
K.emit("onLazyImageLoad",K,p[0],Z[0])
})
},load:function(){var aa;
var X=K.params.slidesPerView;
if(X==="auto"){X=0
}if(!K.lazy.initialImageLoaded){K.lazy.initialImageLoaded=true
}if(K.params.watchSlidesVisibility){K.wrapper.children("."+K.params.slideVisibleClass).each(function(){K.lazy.loadImageInSlide(f(this).index())
})
}else{if(X>1){for(aa=K.activeIndex;
aa<K.activeIndex+X;
aa++){if(K.slides[aa]){K.lazy.loadImageInSlide(aa)
}}}else{K.lazy.loadImageInSlide(K.activeIndex)
}}if(K.params.lazyLoadingInPrevNext){if(X>1||(K.params.lazyLoadingInPrevNextAmount&&K.params.lazyLoadingInPrevNextAmount>1)){var Z=K.params.lazyLoadingInPrevNextAmount;
var ac=X;
var Y=Math.min(K.activeIndex+ac+Math.max(Z,ac),K.slides.length);
var s=Math.max(K.activeIndex-Math.max(ac,Z),0);
for(aa=K.activeIndex+X;
aa<Y;
aa++){if(K.slides[aa]){K.lazy.loadImageInSlide(aa)
}}for(aa=s;
aa<K.activeIndex;
aa++){if(K.slides[aa]){K.lazy.loadImageInSlide(aa)
}}}else{var ab=K.wrapper.children("."+K.params.slideNextClass);
if(ab.length>0){K.lazy.loadImageInSlide(ab.index())
}var p=K.wrapper.children("."+K.params.slidePrevClass);
if(p.length>0){K.lazy.loadImageInSlide(p.index())
}}}},onTransitionStart:function(){if(K.params.lazyLoading){if(K.params.lazyLoadingOnTransitionStart||(!K.params.lazyLoadingOnTransitionStart&&!K.lazy.initialImageLoaded)){K.lazy.load()
}}},onTransitionEnd:function(){if(K.params.lazyLoading&&!K.params.lazyLoadingOnTransitionStart){K.lazy.load()
}}};
K.scrollbar={isTouched:false,setDragPosition:function(Z){var ab=K.scrollbar;
var ad=0,ac=0;
var p;
var X=K.isHorizontal()?((Z.type==="touchstart"||Z.type==="touchmove")?Z.targetTouches[0].pageX:Z.pageX||Z.clientX):((Z.type==="touchstart"||Z.type==="touchmove")?Z.targetTouches[0].pageY:Z.pageY||Z.clientY);
var Y=(X)-ab.track.offset()[K.isHorizontal()?"left":"top"]-ab.dragSize/2;
var s=-K.minTranslate()*ab.moveDivider;
var aa=-K.maxTranslate()*ab.moveDivider;
if(Y<s){Y=s
}else{if(Y>aa){Y=aa
}}Y=-Y/ab.moveDivider;
K.updateProgress(Y);
K.setWrapperTranslate(Y,true)
},dragStart:function(p){var s=K.scrollbar;
s.isTouched=true;
p.preventDefault();
p.stopPropagation();
s.setDragPosition(p);
clearTimeout(s.dragTimeout);
s.track.transition(0);
if(K.params.scrollbarHide){s.track.css("opacity",1)
}K.wrapper.transition(100);
s.drag.transition(100);
K.emit("onScrollbarDragStart",K)
},dragMove:function(p){var s=K.scrollbar;
if(!s.isTouched){return
}if(p.preventDefault){p.preventDefault()
}else{p.returnValue=false
}s.setDragPosition(p);
K.wrapper.transition(0);
s.track.transition(0);
s.drag.transition(0);
K.emit("onScrollbarDragMove",K)
},dragEnd:function(p){var s=K.scrollbar;
if(!s.isTouched){return
}s.isTouched=false;
if(K.params.scrollbarHide){clearTimeout(s.dragTimeout);
s.dragTimeout=setTimeout(function(){s.track.css("opacity",0);
s.track.transition(400)
},1000)
}K.emit("onScrollbarDragEnd",K);
if(K.params.scrollbarSnapOnRelease){K.slideReset()
}},draggableEvents:(function(){if((K.params.simulateTouch===false&&!K.support.touch)){return K.touchEventsDesktop
}else{return K.touchEvents
}})(),enableDraggable:function(){var s=K.scrollbar;
var p=K.support.touch?s.track:document;
f(s.track).on(s.draggableEvents.start,s.dragStart);
f(p).on(s.draggableEvents.move,s.dragMove);
f(p).on(s.draggableEvents.end,s.dragEnd)
},disableDraggable:function(){var s=K.scrollbar;
var p=K.support.touch?s.track:document;
f(s.track).off(s.draggableEvents.start,s.dragStart);
f(p).off(s.draggableEvents.move,s.dragMove);
f(p).off(s.draggableEvents.end,s.dragEnd)
},set:function(){if(!K.params.scrollbar){return
}var p=K.scrollbar;
p.track=f(K.params.scrollbar);
if(K.params.uniqueNavElements&&typeof K.params.scrollbar==="string"&&p.track.length>1&&K.container.find(K.params.scrollbar).length===1){p.track=K.container.find(K.params.scrollbar)
}p.drag=p.track.find(".swiper-scrollbar-drag");
if(p.drag.length===0){p.drag=f('<div class="swiper-scrollbar-drag"></div>');
p.track.append(p.drag)
}p.drag[0].style.width="";
p.drag[0].style.height="";
p.trackSize=K.isHorizontal()?p.track[0].offsetWidth:p.track[0].offsetHeight;
p.divider=K.size/K.virtualSize;
p.moveDivider=p.divider*(p.trackSize/K.size);
p.dragSize=p.trackSize*p.divider;
if(K.isHorizontal()){p.drag[0].style.width=p.dragSize+"px"
}else{p.drag[0].style.height=p.dragSize+"px"
}if(p.divider>=1){p.track[0].style.display="none"
}else{p.track[0].style.display=""
}if(K.params.scrollbarHide){p.track[0].style.opacity=0
}},setTranslate:function(){if(!K.params.scrollbar){return
}var X;
var Z=K.scrollbar;
var Y=K.translate||0;
var s;
var p=Z.dragSize;
s=(Z.trackSize-Z.dragSize)*K.progress;
if(K.rtl&&K.isHorizontal()){s=-s;
if(s>0){p=Z.dragSize-s;
s=0
}else{if(-s+Z.dragSize>Z.trackSize){p=Z.trackSize+s
}}}else{if(s<0){p=Z.dragSize+s;
s=0
}else{if(s+Z.dragSize>Z.trackSize){p=Z.trackSize-s
}}}if(K.isHorizontal()){if(K.support.transforms3d){Z.drag.transform("translate3d("+(s)+"px, 0, 0)")
}else{Z.drag.transform("translateX("+(s)+"px)")
}Z.drag[0].style.width=p+"px"
}else{if(K.support.transforms3d){Z.drag.transform("translate3d(0px, "+(s)+"px, 0)")
}else{Z.drag.transform("translateY("+(s)+"px)")
}Z.drag[0].style.height=p+"px"
}if(K.params.scrollbarHide){clearTimeout(Z.timeout);
Z.track[0].style.opacity=1;
Z.timeout=setTimeout(function(){Z.track[0].style.opacity=0;
Z.track.transition(400)
},1000)
}},setTransition:function(p){if(!K.params.scrollbar){return
}K.scrollbar.drag.transition(p)
}};
K.controller={LinearSpline:function(p,aa){var Z=(function(){var ac,ab,ad;
return function(af,ae){ab=-1;
ac=af.length;
while(ac-ab>1){if(af[ad=ac+ab>>1]<=ae){ab=ad
}else{ac=ad
}}return ac
}
})();
this.x=p;
this.y=aa;
this.lastIndex=p.length-1;
var Y,X;
var s=this.x.length;
this.interpolate=function(ab){if(!ab){return 0
}X=Z(this.x,ab);
Y=X-1;
return((ab-this.x[Y])*(this.y[X]-this.y[Y]))/(this.x[X]-this.x[Y])+this.y[Y]
}
},getInterpolateFunction:function(p){if(!K.controller.spline){K.controller.spline=K.params.loop?new K.controller.LinearSpline(K.slidesGrid,p.slidesGrid):new K.controller.LinearSpline(K.snapGrid,p.snapGrid)
}},setTranslate:function(Z,ab){var X=K.params.control;
var aa,p;
function Y(ac){Z=ac.rtl&&ac.params.direction==="horizontal"?-K.translate:K.translate;
if(K.params.controlBy==="slide"){K.controller.getInterpolateFunction(ac);
p=-K.controller.spline.interpolate(-Z)
}if(!p||K.params.controlBy==="container"){aa=(ac.maxTranslate()-ac.minTranslate())/(K.maxTranslate()-K.minTranslate());
p=(Z-K.minTranslate())*aa+ac.minTranslate()
}if(K.params.controlInverse){p=ac.maxTranslate()-p
}ac.updateProgress(p);
ac.setWrapperTranslate(p,false,K);
ac.updateActiveIndex()
}if(Array.isArray(X)){for(var s=0;
s<X.length;
s++){if(X[s]!==ab&&X[s] instanceof a){Y(X[s])
}}}else{if(X instanceof a&&ab!==X){Y(X)
}}},setTransition:function(X,Z){var s=K.params.control;
var p;
function Y(aa){aa.setWrapperTransition(X,K);
if(X!==0){aa.onTransitionStart();
aa.wrapper.transitionEnd(function(){if(!s){return
}if(aa.params.loop&&K.params.controlBy==="slide"){aa.fixLoop()
}aa.onTransitionEnd()
})
}}if(Array.isArray(s)){for(p=0;
p<s.length;
p++){if(s[p]!==Z&&s[p] instanceof a){Y(s[p])
}}}else{if(s instanceof a&&Z!==s){Y(s)
}}}};
K.hashnav={onHashCange:function(Y,p){var X=document.location.hash.replace("#","");
var s=K.slides.eq(K.activeIndex).attr("data-hash");
if(X!==s){K.slideTo(K.wrapper.children("."+K.params.slideClass+'[data-hash="'+(X)+'"]').index())
}},attachEvents:function(s){var p=s?"off":"on";
f(window)[p]("hashchange",K.hashnav.onHashCange)
},setHash:function(){if(!K.hashnav.initialized||!K.params.hashnav){return
}if(K.params.replaceState&&window.history&&window.history.replaceState){window.history.replaceState(null,null,("#"+K.slides.eq(K.activeIndex).attr("data-hash")||""))
}else{var p=K.slides.eq(K.activeIndex);
var s=p.attr("data-hash")||p.attr("data-history");
document.location.hash=s||""
}},init:function(){if(!K.params.hashnav||K.params.history){return
}K.hashnav.initialized=true;
var ab=document.location.hash.replace("#","");
if(ab){var Z=0;
for(var X=0,Y=K.slides.length;
X<Y;
X++){var p=K.slides.eq(X);
var aa=p.attr("data-hash")||p.attr("data-history");
if(aa===ab&&!p.hasClass(K.params.slideDuplicateClass)){var s=p.index();
K.slideTo(s,Z,K.params.runCallbacksOnInit,true)
}}}if(K.params.hashnavWatchState){K.hashnav.attachEvents()
}},destroy:function(){if(K.params.hashnavWatchState){K.hashnav.attachEvents(true)
}}};
K.history={init:function(){if(!K.params.history){return
}if(!window.history||!window.history.pushState){K.params.history=false;
K.params.hashnav=true;
return
}K.history.initialized=true;
this.paths=this.getPathValues();
if(!this.paths.key&&!this.paths.value){return
}this.scrollToSlide(0,this.paths.value,K.params.runCallbacksOnInit);
if(!K.params.replaceState){window.addEventListener("popstate",this.setHistoryPopState)
}},setHistoryPopState:function(){K.history.paths=K.history.getPathValues();
K.history.scrollToSlide(K.params.speed,K.history.paths.value,false)
},getPathValues:function(){var Y=window.location.pathname.slice(1).split("/");
var s=Y.length;
var p=Y[s-2];
var X=Y[s-1];
return{key:p,value:X}
},setHistory:function(X,s){if(!K.history.initialized||!K.params.history){return
}var p=K.slides.eq(s);
var Y=this.slugify(p.attr("data-history"));
if(!window.location.pathname.includes(X)){Y=X+"/"+Y
}if(K.params.replaceState){window.history.replaceState(null,null,Y)
}else{window.history.pushState(null,null,Y)
}},slugify:function(p){return p.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"")
},scrollToSlide:function(ab,aa,ac){if(aa){for(var Y=0,Z=K.slides.length;
Y<Z;
Y++){var p=K.slides.eq(Y);
var X=this.slugify(p.attr("data-history"));
if(X===aa&&!p.hasClass(K.params.slideDuplicateClass)){var s=p.index();
K.slideTo(s,ab,ac)
}}}else{K.slideTo(0,ab,ac)
}}};
function m(ab){if(ab.originalEvent){ab=ab.originalEvent
}var Z=ab.keyCode||ab.charCode;
if(!K.params.allowSwipeToNext&&(K.isHorizontal()&&Z===39||!K.isHorizontal()&&Z===40)){return false
}if(!K.params.allowSwipeToPrev&&(K.isHorizontal()&&Z===37||!K.isHorizontal()&&Z===38)){return false
}if(ab.shiftKey||ab.altKey||ab.ctrlKey||ab.metaKey){return
}if(document.activeElement&&document.activeElement.nodeName&&(document.activeElement.nodeName.toLowerCase()==="input"||document.activeElement.nodeName.toLowerCase()==="textarea")){return
}if(Z===37||Z===39||Z===38||Z===40){var ac=false;
if(K.container.parents("."+K.params.slideClass).length>0&&K.container.parents("."+K.params.slideActiveClass).length===0){return
}var ae={left:window.pageXOffset,top:window.pageYOffset};
var X=window.innerWidth;
var p=window.innerHeight;
var aa=K.container.offset();
if(K.rtl){aa.left=aa.left-K.container[0].scrollLeft
}var s=[[aa.left,aa.top],[aa.left+K.width,aa.top],[aa.left,aa.top+K.height],[aa.left+K.width,aa.top+K.height]];
for(var Y=0;
Y<s.length;
Y++){var ad=s[Y];
if(ad[0]>=ae.left&&ad[0]<=ae.left+X&&ad[1]>=ae.top&&ad[1]<=ae.top+p){ac=true
}}if(!ac){return
}}if(K.isHorizontal()){if(Z===37||Z===39){if(ab.preventDefault){ab.preventDefault()
}else{ab.returnValue=false
}}if((Z===39&&!K.rtl)||(Z===37&&K.rtl)){K.slideNext()
}if((Z===37&&!K.rtl)||(Z===39&&K.rtl)){K.slidePrev()
}}else{if(Z===38||Z===40){if(ab.preventDefault){ab.preventDefault()
}else{ab.returnValue=false
}}if(Z===40){K.slideNext()
}if(Z===38){K.slidePrev()
}}K.emit("onKeyPress",K,Z)
}K.disableKeyboardControl=function(){K.params.keyboardControl=false;
f(document).off("keydown",m)
};
K.enableKeyboardControl=function(){K.params.keyboardControl=true;
f(document).on("keydown",m)
};
K.mousewheel={event:false,lastScrollTime:(new window.Date()).getTime()};
function w(){var p="onwheel";
var X=p in document;
if(!X){var s=document.createElement("div");
s.setAttribute(p,"return;");
X=typeof s[p]==="function"
}if(!X&&document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==true){X=document.implementation.hasFeature("Events.wheel","3.0")
}return X
}function T(aa){var s=10;
var Z=40;
var Y=800;
var ac=0,ab=0,X=0,p=0;
if("detail" in aa){ab=aa.detail
}if("wheelDelta" in aa){ab=-aa.wheelDelta/120
}if("wheelDeltaY" in aa){ab=-aa.wheelDeltaY/120
}if("wheelDeltaX" in aa){ac=-aa.wheelDeltaX/120
}if("axis" in aa&&aa.axis===aa.HORIZONTAL_AXIS){ac=ab;
ab=0
}X=ac*s;
p=ab*s;
if("deltaY" in aa){p=aa.deltaY
}if("deltaX" in aa){X=aa.deltaX
}if((X||p)&&aa.deltaMode){if(aa.deltaMode===1){X*=Z;
p*=Z
}else{X*=Y;
p*=Y
}}if(X&&!ac){ac=(X<1)?-1:1
}if(p&&!ab){ab=(p<1)?-1:1
}return{spinX:ac,spinY:ab,pixelX:X,pixelY:p}
}if(K.params.mousewheelControl){K.mousewheel.event=(navigator.userAgent.indexOf("firefox")>-1)?"DOMMouseScroll":w()?"wheel":"mousewheel"
}function n(Z){if(Z.originalEvent){Z=Z.originalEvent
}var ab=0;
var aa=K.rtl?-1:1;
var Y=T(Z);
if(K.params.mousewheelForceToAxis){if(K.isHorizontal()){if(Math.abs(Y.pixelX)>Math.abs(Y.pixelY)){ab=Y.pixelX*aa
}else{return
}}else{if(Math.abs(Y.pixelY)>Math.abs(Y.pixelX)){ab=Y.pixelY
}else{return
}}}else{ab=Math.abs(Y.pixelX)>Math.abs(Y.pixelY)?-Y.pixelX*aa:-Y.pixelY
}if(ab===0){return
}if(K.params.mousewheelInvert){ab=-ab
}if(!K.params.freeMode){if((new window.Date()).getTime()-K.mousewheel.lastScrollTime>60){if(ab<0){if((!K.isEnd||K.params.loop)&&!K.animating){K.slideNext();
K.emit("onScroll",K,Z)
}else{if(K.params.mousewheelReleaseOnEdges){return true
}}}else{if((!K.isBeginning||K.params.loop)&&!K.animating){K.slidePrev();
K.emit("onScroll",K,Z)
}else{if(K.params.mousewheelReleaseOnEdges){return true
}}}}K.mousewheel.lastScrollTime=(new window.Date()).getTime()
}else{var p=K.getWrapperTranslate()+ab*K.params.mousewheelSensitivity;
var s=K.isBeginning,X=K.isEnd;
if(p>=K.minTranslate()){p=K.minTranslate()
}if(p<=K.maxTranslate()){p=K.maxTranslate()
}K.setWrapperTransition(0);
K.setWrapperTranslate(p);
K.updateProgress();
K.updateActiveIndex();
if(!s&&K.isBeginning||!X&&K.isEnd){K.updateClasses()
}if(K.params.freeModeSticky){clearTimeout(K.mousewheel.timeout);
K.mousewheel.timeout=setTimeout(function(){K.slideReset()
},300)
}else{if(K.params.lazyLoading&&K.lazy){K.lazy.load()
}}K.emit("onScroll",K,Z);
if(K.params.autoplay&&K.params.autoplayDisableOnInteraction){K.stopAutoplay()
}if(p===0||p===K.maxTranslate()){return
}}if(Z.preventDefault){Z.preventDefault()
}else{Z.returnValue=false
}return false
}K.disableMousewheelControl=function(){if(!K.mousewheel.event){return false
}var p=K.container;
if(K.params.mousewheelEventsTarged!=="container"){p=f(K.params.mousewheelEventsTarged)
}p.off(K.mousewheel.event,n);
K.params.mousewheelControl=false;
return true
};
K.enableMousewheelControl=function(){if(!K.mousewheel.event){return false
}var p=K.container;
if(K.params.mousewheelEventsTarged!=="container"){p=f(K.params.mousewheelEventsTarged)
}p.on(K.mousewheel.event,n);
K.params.mousewheelControl=true;
return true
};
function o(Z,Y){Z=f(Z);
var aa,X,s;
var ab=K.rtl?-1:1;
aa=Z.attr("data-swiper-parallax")||"0";
X=Z.attr("data-swiper-parallax-x");
s=Z.attr("data-swiper-parallax-y");
if(X||s){X=X||"0";
s=s||"0"
}else{if(K.isHorizontal()){X=aa;
s="0"
}else{s=aa;
X="0"
}}if((X).indexOf("%")>=0){X=parseInt(X,10)*Y*ab+"%"
}else{X=X*Y*ab+"px"
}if((s).indexOf("%")>=0){s=parseInt(s,10)*Y+"%"
}else{s=s*Y+"px"
}Z.transform("translate3d("+X+", "+s+",0px)")
}K.parallax={setTranslate:function(){K.container.children("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){o(this,K.progress)
});
K.slides.each(function(){var p=f(this);
p.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){var s=Math.min(Math.max(p[0].progress,-1),1);
o(this,s)
})
})
},setTransition:function(p){if(typeof p==="undefined"){p=K.params.speed
}K.container.find("[data-swiper-parallax], [data-swiper-parallax-x], [data-swiper-parallax-y]").each(function(){var X=f(this);
var s=parseInt(X.attr("data-swiper-parallax-duration"),10)||p;
if(p===0){s=0
}X.transition(s)
})
}};
K.zoom={scale:1,currentScale:1,isScaling:false,gesture:{slide:undefined,slideWidth:undefined,slideHeight:undefined,image:undefined,imageWrap:undefined,zoomMax:K.params.zoomMax},image:{isTouched:undefined,isMoved:undefined,currentX:undefined,currentY:undefined,minX:undefined,minY:undefined,maxX:undefined,maxY:undefined,width:undefined,height:undefined,startX:undefined,startY:undefined,touchesStart:{},touchesCurrent:{}},velocity:{x:undefined,y:undefined,prevPositionX:undefined,prevPositionY:undefined,prevTime:undefined},getDistanceBetweenTouches:function(Z){if(Z.targetTouches.length<2){return 1
}var s=Z.targetTouches[0].pageX,Y=Z.targetTouches[0].pageY,p=Z.targetTouches[1].pageX,X=Z.targetTouches[1].pageY;
var aa=Math.sqrt(Math.pow(p-s,2)+Math.pow(X-Y,2));
return aa
},onGestureStart:function(p){var s=K.zoom;
if(!K.support.gestures){if(p.type!=="touchstart"||p.type==="touchstart"&&p.targetTouches.length<2){return
}s.gesture.scaleStart=s.getDistanceBetweenTouches(p)
}if(!s.gesture.slide||!s.gesture.slide.length){s.gesture.slide=f(this);
if(s.gesture.slide.length===0){s.gesture.slide=K.slides.eq(K.activeIndex)
}s.gesture.image=s.gesture.slide.find("img, svg, canvas");
s.gesture.imageWrap=s.gesture.image.parent("."+K.params.zoomContainerClass);
s.gesture.zoomMax=s.gesture.imageWrap.attr("data-swiper-zoom")||K.params.zoomMax;
if(s.gesture.imageWrap.length===0){s.gesture.image=undefined;
return
}}s.gesture.image.transition(0);
s.isScaling=true
},onGestureChange:function(p){var s=K.zoom;
if(!K.support.gestures){if(p.type!=="touchmove"||p.type==="touchmove"&&p.targetTouches.length<2){return
}s.gesture.scaleMove=s.getDistanceBetweenTouches(p)
}if(!s.gesture.image||s.gesture.image.length===0){return
}if(K.support.gestures){s.scale=p.scale*s.currentScale
}else{s.scale=(s.gesture.scaleMove/s.gesture.scaleStart)*s.currentScale
}if(s.scale>s.gesture.zoomMax){s.scale=s.gesture.zoomMax-1+Math.pow((s.scale-s.gesture.zoomMax+1),0.5)
}if(s.scale<K.params.zoomMin){s.scale=K.params.zoomMin+1-Math.pow((K.params.zoomMin-s.scale+1),0.5)
}s.gesture.image.transform("translate3d(0,0,0) scale("+s.scale+")")
},onGestureEnd:function(p){var s=K.zoom;
if(!K.support.gestures){if(p.type!=="touchend"||p.type==="touchend"&&p.changedTouches.length<2){return
}}if(!s.gesture.image||s.gesture.image.length===0){return
}s.scale=Math.max(Math.min(s.scale,s.gesture.zoomMax),K.params.zoomMin);
s.gesture.image.transition(K.params.speed).transform("translate3d(0,0,0) scale("+s.scale+")");
s.currentScale=s.scale;
s.isScaling=false;
if(s.scale===1){s.gesture.slide=undefined
}},onTouchStart:function(p,X){var Y=p.zoom;
if(!Y.gesture.image||Y.gesture.image.length===0){return
}if(Y.image.isTouched){return
}if(p.device.os==="android"){X.preventDefault()
}Y.image.isTouched=true;
Y.image.touchesStart.x=X.type==="touchstart"?X.targetTouches[0].pageX:X.pageX;
Y.image.touchesStart.y=X.type==="touchstart"?X.targetTouches[0].pageY:X.pageY
},onTouchMove:function(X){var Y=K.zoom;
if(!Y.gesture.image||Y.gesture.image.length===0){return
}K.allowClick=false;
if(!Y.image.isTouched||!Y.gesture.slide){return
}if(!Y.image.isMoved){Y.image.width=Y.gesture.image[0].offsetWidth;
Y.image.height=Y.gesture.image[0].offsetHeight;
Y.image.startX=K.getTranslate(Y.gesture.imageWrap[0],"x")||0;
Y.image.startY=K.getTranslate(Y.gesture.imageWrap[0],"y")||0;
Y.gesture.slideWidth=Y.gesture.slide[0].offsetWidth;
Y.gesture.slideHeight=Y.gesture.slide[0].offsetHeight;
Y.gesture.imageWrap.transition(0);
if(K.rtl){Y.image.startX=-Y.image.startX
}if(K.rtl){Y.image.startY=-Y.image.startY
}}var p=Y.image.width*Y.scale;
var s=Y.image.height*Y.scale;
if(p<Y.gesture.slideWidth&&s<Y.gesture.slideHeight){return
}Y.image.minX=Math.min((Y.gesture.slideWidth/2-p/2),0);
Y.image.maxX=-Y.image.minX;
Y.image.minY=Math.min((Y.gesture.slideHeight/2-s/2),0);
Y.image.maxY=-Y.image.minY;
Y.image.touchesCurrent.x=X.type==="touchmove"?X.targetTouches[0].pageX:X.pageX;
Y.image.touchesCurrent.y=X.type==="touchmove"?X.targetTouches[0].pageY:X.pageY;
if(!Y.image.isMoved&&!Y.isScaling){if(K.isHorizontal()&&(Math.floor(Y.image.minX)===Math.floor(Y.image.startX)&&Y.image.touchesCurrent.x<Y.image.touchesStart.x)||(Math.floor(Y.image.maxX)===Math.floor(Y.image.startX)&&Y.image.touchesCurrent.x>Y.image.touchesStart.x)){Y.image.isTouched=false;
return
}else{if(!K.isHorizontal()&&(Math.floor(Y.image.minY)===Math.floor(Y.image.startY)&&Y.image.touchesCurrent.y<Y.image.touchesStart.y)||(Math.floor(Y.image.maxY)===Math.floor(Y.image.startY)&&Y.image.touchesCurrent.y>Y.image.touchesStart.y)){Y.image.isTouched=false;
return
}}}X.preventDefault();
X.stopPropagation();
Y.image.isMoved=true;
Y.image.currentX=Y.image.touchesCurrent.x-Y.image.touchesStart.x+Y.image.startX;
Y.image.currentY=Y.image.touchesCurrent.y-Y.image.touchesStart.y+Y.image.startY;
if(Y.image.currentX<Y.image.minX){Y.image.currentX=Y.image.minX+1-Math.pow((Y.image.minX-Y.image.currentX+1),0.8)
}if(Y.image.currentX>Y.image.maxX){Y.image.currentX=Y.image.maxX-1+Math.pow((Y.image.currentX-Y.image.maxX+1),0.8)
}if(Y.image.currentY<Y.image.minY){Y.image.currentY=Y.image.minY+1-Math.pow((Y.image.minY-Y.image.currentY+1),0.8)
}if(Y.image.currentY>Y.image.maxY){Y.image.currentY=Y.image.maxY-1+Math.pow((Y.image.currentY-Y.image.maxY+1),0.8)
}if(!Y.velocity.prevPositionX){Y.velocity.prevPositionX=Y.image.touchesCurrent.x
}if(!Y.velocity.prevPositionY){Y.velocity.prevPositionY=Y.image.touchesCurrent.y
}if(!Y.velocity.prevTime){Y.velocity.prevTime=Date.now()
}Y.velocity.x=(Y.image.touchesCurrent.x-Y.velocity.prevPositionX)/(Date.now()-Y.velocity.prevTime)/2;
Y.velocity.y=(Y.image.touchesCurrent.y-Y.velocity.prevPositionY)/(Date.now()-Y.velocity.prevTime)/2;
if(Math.abs(Y.image.touchesCurrent.x-Y.velocity.prevPositionX)<2){Y.velocity.x=0
}if(Math.abs(Y.image.touchesCurrent.y-Y.velocity.prevPositionY)<2){Y.velocity.y=0
}Y.velocity.prevPositionX=Y.image.touchesCurrent.x;
Y.velocity.prevPositionY=Y.image.touchesCurrent.y;
Y.velocity.prevTime=Date.now();
Y.gesture.imageWrap.transform("translate3d("+Y.image.currentX+"px, "+Y.image.currentY+"px,0)")
},onTouchEnd:function(ah,ad){var af=ah.zoom;
if(!af.gesture.image||af.gesture.image.length===0){return
}if(!af.image.isTouched||!af.image.isMoved){af.image.isTouched=false;
af.image.isMoved=false;
return
}af.image.isTouched=false;
af.image.isMoved=false;
var ag=300;
var ae=300;
var X=af.velocity.x*ag;
var ab=af.image.currentX+X;
var p=af.velocity.y*ae;
var Z=af.image.currentY+p;
if(af.velocity.x!==0){ag=Math.abs((ab-af.image.currentX)/af.velocity.x)
}if(af.velocity.y!==0){ae=Math.abs((Z-af.image.currentY)/af.velocity.y)
}var aa=Math.max(ag,ae);
af.image.currentX=ab;
af.image.currentY=Z;
var Y=af.image.width*af.scale;
var ac=af.image.height*af.scale;
af.image.minX=Math.min((af.gesture.slideWidth/2-Y/2),0);
af.image.maxX=-af.image.minX;
af.image.minY=Math.min((af.gesture.slideHeight/2-ac/2),0);
af.image.maxY=-af.image.minY;
af.image.currentX=Math.max(Math.min(af.image.currentX,af.image.maxX),af.image.minX);
af.image.currentY=Math.max(Math.min(af.image.currentY,af.image.maxY),af.image.minY);
af.gesture.imageWrap.transition(aa).transform("translate3d("+af.image.currentX+"px, "+af.image.currentY+"px,0)")
},onTransitionEnd:function(p){var X=p.zoom;
if(X.gesture.slide&&p.previousIndex!==p.activeIndex){X.gesture.image.transform("translate3d(0,0,0) scale(1)");
X.gesture.imageWrap.transform("translate3d(0,0,0)");
X.gesture.slide=X.gesture.image=X.gesture.imageWrap=undefined;
X.scale=X.currentScale=1
}},toggleZoom:function(af,al){var X=af.zoom;
if(!X.gesture.slide){X.gesture.slide=af.clickedSlide?f(af.clickedSlide):af.slides.eq(af.activeIndex);
X.gesture.image=X.gesture.slide.find("img, svg, canvas");
X.gesture.imageWrap=X.gesture.image.parent("."+af.params.zoomContainerClass)
}if(!X.gesture.image||X.gesture.image.length===0){return
}var aa,Z,am,ak,ah,ag,aq,ap,Y,an,aj,ao,ae,ad,ac,ab,p,ai;
if(typeof X.image.touchesStart.x==="undefined"&&al){aa=al.type==="touchend"?al.changedTouches[0].pageX:al.pageX;
Z=al.type==="touchend"?al.changedTouches[0].pageY:al.pageY
}else{aa=X.image.touchesStart.x;
Z=X.image.touchesStart.y
}if(X.scale&&X.scale!==1){X.scale=X.currentScale=1;
X.gesture.imageWrap.transition(300).transform("translate3d(0,0,0)");
X.gesture.image.transition(300).transform("translate3d(0,0,0) scale(1)");
X.gesture.slide=undefined
}else{X.scale=X.currentScale=X.gesture.imageWrap.attr("data-swiper-zoom")||af.params.zoomMax;
if(al){p=X.gesture.slide[0].offsetWidth;
ai=X.gesture.slide[0].offsetHeight;
am=X.gesture.slide.offset().left;
ak=X.gesture.slide.offset().top;
ah=am+p/2-aa;
ag=ak+ai/2-Z;
Y=X.gesture.image[0].offsetWidth;
an=X.gesture.image[0].offsetHeight;
aj=Y*X.scale;
ao=an*X.scale;
ae=Math.min((p/2-aj/2),0);
ad=Math.min((ai/2-ao/2),0);
ac=-ae;
ab=-ad;
aq=ah*X.scale;
ap=ag*X.scale;
if(aq<ae){aq=ae
}if(aq>ac){aq=ac
}if(ap<ad){ap=ad
}if(ap>ab){ap=ab
}}else{aq=0;
ap=0
}X.gesture.imageWrap.transition(300).transform("translate3d("+aq+"px, "+ap+"px,0)");
X.gesture.image.transition(300).transform("translate3d(0,0,0) scale("+X.scale+")")
}},attachEvents:function(Y){var s=Y?"off":"on";
if(K.params.zoom){var X=K.slides;
var p=K.touchEvents.start==="touchstart"&&K.support.passiveListener&&K.params.passiveListeners?{passive:true,capture:false}:false;
if(K.support.gestures){K.slides[s]("gesturestart",K.zoom.onGestureStart,p);
K.slides[s]("gesturechange",K.zoom.onGestureChange,p);
K.slides[s]("gestureend",K.zoom.onGestureEnd,p)
}else{if(K.touchEvents.start==="touchstart"){K.slides[s](K.touchEvents.start,K.zoom.onGestureStart,p);
K.slides[s](K.touchEvents.move,K.zoom.onGestureChange,p);
K.slides[s](K.touchEvents.end,K.zoom.onGestureEnd,p)
}}K[s]("touchStart",K.zoom.onTouchStart);
K.slides.each(function(aa,Z){if(f(Z).find("."+K.params.zoomContainerClass).length>0){f(Z)[s](K.touchEvents.move,K.zoom.onTouchMove)
}});
K[s]("touchEnd",K.zoom.onTouchEnd);
K[s]("transitionEnd",K.zoom.onTransitionEnd);
if(K.params.zoomToggle){K.on("doubleTap",K.zoom.toggleZoom)
}}},init:function(){K.zoom.attachEvents()
},destroy:function(){K.zoom.attachEvents(true)
}};
K._plugins=[];
for(var R in K.plugins){var N=K.plugins[R](K,K.params[R]);
if(N){K._plugins.push(N)
}}K.callPlugins=function(p){for(var s=0;
s<K._plugins.length;
s++){if(p in K._plugins[s]){K._plugins[s][p](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])
}}};
function t(p){if(p.indexOf("on")!==0){if(p[0]!==p[0].toUpperCase()){p="on"+p[0].toUpperCase()+p.substring(1)
}else{p="on"+p
}}return p
}K.emitterEventListeners={};
K.emit=function(p){if(K.params[p]){K.params[p](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])
}var s;
if(K.emitterEventListeners[p]){for(s=0;
s<K.emitterEventListeners[p].length;
s++){K.emitterEventListeners[p][s](arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])
}}if(K.callPlugins){K.callPlugins(p,arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])
}};
K.on=function(p,s){p=t(p);
if(!K.emitterEventListeners[p]){K.emitterEventListeners[p]=[]
}K.emitterEventListeners[p].push(s);
return K
};
K.off=function(p,X){var s;
p=t(p);
if(typeof X==="undefined"){K.emitterEventListeners[p]=[];
return K
}if(!K.emitterEventListeners[p]||K.emitterEventListeners[p].length===0){return
}for(s=0;
s<K.emitterEventListeners[p].length;
s++){if(K.emitterEventListeners[p][s]===X){K.emitterEventListeners[p].splice(s,1)
}}return K
};
K.once=function(s,X){s=t(s);
var p=function(){X(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]);
K.off(s,p)
};
K.on(s,p);
return K
};
K.a11y={makeFocusable:function(p){p.attr("tabIndex","0");
return p
},addRole:function(p,s){p.attr("role",s);
return p
},addLabel:function(s,p){s.attr("aria-label",p);
return s
},disable:function(p){p.attr("aria-disabled",true);
return p
},enable:function(p){p.attr("aria-disabled",false);
return p
},onEnterKey:function(p){if(p.keyCode!==13){return
}if(f(p.target).is(K.params.nextButton)){K.onClickNext(p);
if(K.isEnd){K.a11y.notify(K.params.lastSlideMessage)
}else{K.a11y.notify(K.params.nextSlideMessage)
}}else{if(f(p.target).is(K.params.prevButton)){K.onClickPrev(p);
if(K.isBeginning){K.a11y.notify(K.params.firstSlideMessage)
}else{K.a11y.notify(K.params.prevSlideMessage)
}}}if(f(p.target).is("."+K.params.bulletClass)){f(p.target)[0].click()
}},liveRegion:f('<span class="'+K.params.notificationClass+'" aria-live="assertive" aria-atomic="true"></span>'),notify:function(p){var s=K.a11y.liveRegion;
if(s.length===0){return
}s.html("");
s.html(p)
},init:function(){if(K.params.nextButton&&K.nextButton&&K.nextButton.length>0){K.a11y.makeFocusable(K.nextButton);
K.a11y.addRole(K.nextButton,"button");
K.a11y.addLabel(K.nextButton,K.params.nextSlideMessage)
}if(K.params.prevButton&&K.prevButton&&K.prevButton.length>0){K.a11y.makeFocusable(K.prevButton);
K.a11y.addRole(K.prevButton,"button");
K.a11y.addLabel(K.prevButton,K.params.prevSlideMessage)
}f(K.container).append(K.a11y.liveRegion)
},initPagination:function(){if(K.params.pagination&&K.params.paginationClickable&&K.bullets&&K.bullets.length){K.bullets.each(function(){var p=f(this);
K.a11y.makeFocusable(p);
K.a11y.addRole(p,"button");
K.a11y.addLabel(p,K.params.paginationBulletMessage.replace(/{{index}}/,p.index()+1))
})
}},destroy:function(){if(K.a11y.liveRegion&&K.a11y.liveRegion.length>0){K.a11y.liveRegion.remove()
}}};
K.init=function(){if(K.params.loop){K.createLoop()
}K.updateContainerSize();
K.updateSlidesSize();
K.updatePagination();
if(K.params.scrollbar&&K.scrollbar){K.scrollbar.set();
if(K.params.scrollbarDraggable){K.scrollbar.enableDraggable()
}}if(K.params.effect!=="slide"&&K.effects[K.params.effect]){if(!K.params.loop){K.updateProgress()
}K.effects[K.params.effect].setTranslate()
}if(K.params.loop){K.slideTo(K.params.initialSlide+K.loopedSlides,0,K.params.runCallbacksOnInit)
}else{K.slideTo(K.params.initialSlide,0,K.params.runCallbacksOnInit);
if(K.params.initialSlide===0){if(K.parallax&&K.params.parallax){K.parallax.setTranslate()
}if(K.lazy&&K.params.lazyLoading){K.lazy.load();
K.lazy.initialImageLoaded=true
}}}K.attachEvents();
if(K.params.observer&&K.support.observer){K.initObservers()
}if(K.params.preloadImages&&!K.params.lazyLoading){K.preloadImages()
}if(K.params.zoom&&K.zoom){K.zoom.init()
}if(K.params.autoplay){K.startAutoplay()
}if(K.params.keyboardControl){if(K.enableKeyboardControl){K.enableKeyboardControl()
}}if(K.params.mousewheelControl){if(K.enableMousewheelControl){K.enableMousewheelControl()
}}if(K.params.hashnavReplaceState){K.params.replaceState=K.params.hashnavReplaceState
}if(K.params.history){if(K.history){K.history.init()
}}if(K.params.hashnav){if(K.hashnav){K.hashnav.init()
}}if(K.params.a11y&&K.a11y){K.a11y.init()
}K.emit("onInit",K)
};
K.cleanupStyles=function(){K.container.removeClass(K.classNames.join(" ")).removeAttr("style");
K.wrapper.removeAttr("style");
if(K.slides&&K.slides.length){K.slides.removeClass([K.params.slideVisibleClass,K.params.slideActiveClass,K.params.slideNextClass,K.params.slidePrevClass].join(" ")).removeAttr("style").removeAttr("data-swiper-column").removeAttr("data-swiper-row")
}if(K.paginationContainer&&K.paginationContainer.length){K.paginationContainer.removeClass(K.params.paginationHiddenClass)
}if(K.bullets&&K.bullets.length){K.bullets.removeClass(K.params.bulletActiveClass)
}if(K.params.prevButton){f(K.params.prevButton).removeClass(K.params.buttonDisabledClass)
}if(K.params.nextButton){f(K.params.nextButton).removeClass(K.params.buttonDisabledClass)
}if(K.params.scrollbar&&K.scrollbar){if(K.scrollbar.track&&K.scrollbar.track.length){K.scrollbar.track.removeAttr("style")
}if(K.scrollbar.drag&&K.scrollbar.drag.length){K.scrollbar.drag.removeAttr("style")
}}};
K.destroy=function(s,p){K.detachEvents();
K.stopAutoplay();
if(K.params.scrollbar&&K.scrollbar){if(K.params.scrollbarDraggable){K.scrollbar.disableDraggable()
}}if(K.params.loop){K.destroyLoop()
}if(p){K.cleanupStyles()
}K.disconnectObservers();
if(K.params.zoom&&K.zoom){K.zoom.destroy()
}if(K.params.keyboardControl){if(K.disableKeyboardControl){K.disableKeyboardControl()
}}if(K.params.mousewheelControl){if(K.disableMousewheelControl){K.disableMousewheelControl()
}}if(K.params.a11y&&K.a11y){K.a11y.destroy()
}if(K.params.history&&!K.params.replaceState){window.removeEventListener("popstate",K.history.setHistoryPopState)
}if(K.params.hashnav&&K.hashnav){K.hashnav.destroy()
}K.emit("onDestroy");
if(s!==false){K=null
}};
K.init();
return K
};
a.prototype={isSafari:(function(){var h=window.navigator.userAgent.toLowerCase();
return(h.indexOf("safari")>=0&&h.indexOf("chrome")<0&&h.indexOf("android")<0)
})(),isUiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(window.navigator.userAgent),isArray:function(h){return Object.prototype.toString.apply(h)==="[object Array]"
},browser:{ie:window.navigator.pointerEnabled||window.navigator.msPointerEnabled,ieTouch:(window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>1)||(window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>1),lteIE9:(function(){var h=document.createElement("div");
h.innerHTML="<!--[if lte IE 9]><i></i><![endif]-->";
return h.getElementsByTagName("i").length===1
})()},device:(function(){var k=window.navigator.userAgent;
var j=k.match(/(Android);?[\s\/]+([\d.]+)?/);
var h=k.match(/(iPad).*OS\s([\d_]+)/);
var m=k.match(/(iPod)(.*OS\s([\d_]+))?/);
var n=!h&&k.match(/(iPhone\sOS|iOS)\s([\d_]+)/);
return{ios:h||n||m,android:j}
})(),support:{touch:(window.Modernizr&&Modernizr.touch===true)||(function(){return !!(("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch)
})(),transforms3d:(window.Modernizr&&Modernizr.csstransforms3d===true)||(function(){var h=document.createElement("div").style;
return("webkitPerspective" in h||"MozPerspective" in h||"OPerspective" in h||"MsPerspective" in h||"perspective" in h)
})(),flexbox:(function(){var k=document.createElement("div").style;
var j=("alignItems webkitAlignItems webkitBoxAlign msFlexAlign mozBoxAlign webkitFlexDirection msFlexDirection mozBoxDirection mozBoxOrient webkitBoxDirection webkitBoxOrient").split(" ");
for(var h=0;
h<j.length;
h++){if(j[h] in k){return true
}}})(),observer:(function(){return("MutationObserver" in window||"WebkitMutationObserver" in window)
})(),passiveListener:(function(){var h=false;
try{var j=Object.defineProperty({},"passive",{get:function(){h=true
}});
window.addEventListener("testPassiveListener",null,j)
}catch(k){}return h
})(),gestures:(function(){return"ongesturestart" in window
})()},plugins:{}};
var g=(function(){var j=function(k){var n=this,m=0;
for(m=0;
m<k.length;
m++){n[m]=k[m]
}n.length=k.length;
return this
};
var h=function(m,q){var k=[],p=0;
if(m&&!q){if(m instanceof j){return m
}}if(m){if(typeof m==="string"){var o,s,n=m.trim();
if(n.indexOf("<")>=0&&n.indexOf(">")>=0){var r="div";
if(n.indexOf("<li")===0){r="ul"
}if(n.indexOf("<tr")===0){r="tbody"
}if(n.indexOf("<td")===0||n.indexOf("<th")===0){r="tr"
}if(n.indexOf("<tbody")===0){r="table"
}if(n.indexOf("<option")===0){r="select"
}s=document.createElement(r);
s.innerHTML=m;
for(p=0;
p<s.childNodes.length;
p++){k.push(s.childNodes[p])
}}else{if(!q&&m[0]==="#"&&!m.match(/[ .<>:~]/)){o=[document.getElementById(m.split("#")[1])]
}else{o=(q||document).querySelectorAll(m)
}for(p=0;
p<o.length;
p++){if(o[p]){k.push(o[p])
}}}}else{if(m.nodeType||m===window||m===document){k.push(m)
}else{if(m.length>0&&m[0].nodeType){for(p=0;
p<m.length;
p++){k.push(m[p])
}}}}}return new j(k)
};
j.prototype={addClass:function(o){if(typeof o==="undefined"){return this
}var n=o.split(" ");
for(var m=0;
m<n.length;
m++){for(var k=0;
k<this.length;
k++){this[k].classList.add(n[m])
}}return this
},removeClass:function(o){var n=o.split(" ");
for(var m=0;
m<n.length;
m++){for(var k=0;
k<this.length;
k++){this[k].classList.remove(n[m])
}}return this
},hasClass:function(k){if(!this[0]){return false
}else{return this[0].classList.contains(k)
}},toggleClass:function(o){var n=o.split(" ");
for(var m=0;
m<n.length;
m++){for(var k=0;
k<this.length;
k++){this[k].classList.toggle(n[m])
}}return this
},attr:function(k,o){if(arguments.length===1&&typeof k==="string"){if(this[0]){return this[0].getAttribute(k)
}else{return undefined
}}else{for(var n=0;
n<this.length;
n++){if(arguments.length===2){this[n].setAttribute(k,o)
}else{for(var m in k){this[n][m]=k[m];
this[n].setAttribute(m,k[m])
}}}return this
}},removeAttr:function(k){for(var m=0;
m<this.length;
m++){this[m].removeAttribute(k)
}return this
},data:function(m,o){if(typeof o==="undefined"){if(this[0]){var p=this[0].getAttribute("data-"+m);
if(p){return p
}else{if(this[0].dom7ElementDataStorage&&(m in this[0].dom7ElementDataStorage)){return this[0].dom7ElementDataStorage[m]
}else{return undefined
}}}else{return undefined
}}else{for(var k=0;
k<this.length;
k++){var n=this[k];
if(!n.dom7ElementDataStorage){n.dom7ElementDataStorage={}
}n.dom7ElementDataStorage[m]=o
}return this
}},transform:function(k){for(var n=0;
n<this.length;
n++){var m=this[n].style;
m.webkitTransform=m.MsTransform=m.msTransform=m.MozTransform=m.OTransform=m.transform=k
}return this
},transition:function(n){if(typeof n!=="string"){n=n+"ms"
}for(var m=0;
m<this.length;
m++){var k=this[m].style;
k.webkitTransitionDuration=k.MsTransitionDuration=k.msTransitionDuration=k.MozTransitionDuration=k.OTransitionDuration=k.transitionDuration=n
}return this
},on:function(m,q,r,k){function s(w){var v=w.target;
if(h(v).is(q)){r.call(v,w)
}else{var u=h(v).parents();
for(var t=0;
t<u.length;
t++){if(h(u[t]).is(q)){r.call(u[t],w)
}}}}var p=m.split(" ");
var o,n;
for(o=0;
o<this.length;
o++){if(typeof q==="function"||q===false){if(typeof q==="function"){r=arguments[1];
k=arguments[2]||false
}for(n=0;
n<p.length;
n++){this[o].addEventListener(p[n],r,k)
}}else{for(n=0;
n<p.length;
n++){if(!this[o].dom7LiveListeners){this[o].dom7LiveListeners=[]
}this[o].dom7LiveListeners.push({listener:r,liveListener:s});
this[o].addEventListener(p[n],s,k)
}}}return this
},off:function(o,s,t,n){var r=o.split(" ");
for(var q=0;
q<r.length;
q++){for(var p=0;
p<this.length;
p++){if(typeof s==="function"||s===false){if(typeof s==="function"){t=arguments[1];
n=arguments[2]||false
}this[p].removeEventListener(r[q],t,n)
}else{if(this[p].dom7LiveListeners){for(var m=0;
m<this[p].dom7LiveListeners.length;
m++){if(this[p].dom7LiveListeners[m].listener===t){this[p].removeEventListener(r[q],this[p].dom7LiveListeners[m].liveListener,n)
}}}}}}return this
},once:function(m,o,p,k){var q=this;
if(typeof o==="function"){o=false;
p=arguments[1];
k=arguments[2]
}function n(r){p(r);
q.off(m,o,n,k)
}q.on(m,o,n,k)
},trigger:function(m,o){for(var n=0;
n<this.length;
n++){var k;
try{k=new window.CustomEvent(m,{detail:o,bubbles:true,cancelable:true})
}catch(p){k=document.createEvent("Event");
k.initEvent(m,true,true);
k.detail=o
}this[n].dispatchEvent(k)
}return this
},transitionEnd:function(q){var n=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],m,k,o=this;
function p(r){if(r.target!==this){return
}q.call(this,r);
for(m=0;
m<n.length;
m++){o.off(n[m],p)
}}if(q){for(m=0;
m<n.length;
m++){o.on(n[m],p)
}}return this
},width:function(){if(this[0]===window){return window.innerWidth
}else{if(this.length>0){return parseFloat(this.css("width"))
}else{return null
}}},outerWidth:function(k){if(this.length>0){if(k){return this[0].offsetWidth+parseFloat(this.css("margin-right"))+parseFloat(this.css("margin-left"))
}else{return this[0].offsetWidth
}}else{return null
}},height:function(){if(this[0]===window){return window.innerHeight
}else{if(this.length>0){return parseFloat(this.css("height"))
}else{return null
}}},outerHeight:function(k){if(this.length>0){if(k){return this[0].offsetHeight+parseFloat(this.css("margin-top"))+parseFloat(this.css("margin-bottom"))
}else{return this[0].offsetHeight
}}else{return null
}},offset:function(){if(this.length>0){var m=this[0];
var n=m.getBoundingClientRect();
var k=document.body;
var r=m.clientTop||k.clientTop||0;
var q=m.clientLeft||k.clientLeft||0;
var o=window.pageYOffset||m.scrollTop;
var p=window.pageXOffset||m.scrollLeft;
return{top:n.top+o-r,left:n.left+p-q}
}else{return null
}},css:function(m,n){var k;
if(arguments.length===1){if(typeof m==="string"){if(this[0]){return window.getComputedStyle(this[0],null).getPropertyValue(m)
}}else{for(k=0;
k<this.length;
k++){for(var o in m){this[k].style[o]=m[o]
}}return this
}}if(arguments.length===2&&typeof m==="string"){for(k=0;
k<this.length;
k++){this[k].style[m]=n
}return this
}return this
},each:function(m){for(var k=0;
k<this.length;
k++){m.call(this[k],k,this[k])
}return this
},html:function(m){if(typeof m==="undefined"){return this[0]?this[0].innerHTML:undefined
}else{for(var k=0;
k<this.length;
k++){this[k].innerHTML=m
}return this
}},text:function(m){if(typeof m==="undefined"){if(this[0]){return this[0].textContent.trim()
}else{return null
}}else{for(var k=0;
k<this.length;
k++){this[k].textContent=m
}return this
}},is:function(m){if(!this[0]){return false
}var k,n;
if(typeof m==="string"){var o=this[0];
if(o===document){return m===document
}if(o===window){return m===window
}if(o.matches){return o.matches(m)
}else{if(o.webkitMatchesSelector){return o.webkitMatchesSelector(m)
}else{if(o.mozMatchesSelector){return o.mozMatchesSelector(m)
}else{if(o.msMatchesSelector){return o.msMatchesSelector(m)
}else{k=h(m);
for(n=0;
n<k.length;
n++){if(k[n]===this[0]){return true
}}return false
}}}}}else{if(m===document){return this[0]===document
}else{if(m===window){return this[0]===window
}else{if(m.nodeType||m instanceof j){k=m.nodeType?[m]:m;
for(n=0;
n<k.length;
n++){if(k[n]===this[0]){return true
}}return false
}return false
}}}},index:function(){if(this[0]){var m=this[0];
var k=0;
while((m=m.previousSibling)!==null){if(m.nodeType===1){k++
}}return k
}else{return undefined
}},eq:function(m){if(typeof m==="undefined"){return this
}var n=this.length;
var k;
if(m>n-1){return new j([])
}if(m<0){k=n+m;
if(k<0){return new j([])
}else{return new j([this[k]])
}}return new j([this[m]])
},append:function(k){var o,n;
for(o=0;
o<this.length;
o++){if(typeof k==="string"){var m=document.createElement("div");
m.innerHTML=k;
while(m.firstChild){this[o].appendChild(m.firstChild)
}}else{if(k instanceof j){for(n=0;
n<k.length;
n++){this[o].appendChild(k[n])
}}else{this[o].appendChild(k)
}}}return this
},prepend:function(k){var o,n;
for(o=0;
o<this.length;
o++){if(typeof k==="string"){var m=document.createElement("div");
m.innerHTML=k;
for(n=m.childNodes.length-1;
n>=0;
n--){this[o].insertBefore(m.childNodes[n],this[o].childNodes[0])
}}else{if(k instanceof j){for(n=0;
n<k.length;
n++){this[o].insertBefore(k[n],this[o].childNodes[0])
}}else{this[o].insertBefore(k,this[o].childNodes[0])
}}}return this
},insertBefore:function(k){var o=h(k);
for(var n=0;
n<this.length;
n++){if(o.length===1){o[0].parentNode.insertBefore(this[n],o[0])
}else{if(o.length>1){for(var m=0;
m<o.length;
m++){o[m].parentNode.insertBefore(this[n].cloneNode(true),o[m])
}}}}},insertAfter:function(k){var o=h(k);
for(var n=0;
n<this.length;
n++){if(o.length===1){o[0].parentNode.insertBefore(this[n],o[0].nextSibling)
}else{if(o.length>1){for(var m=0;
m<o.length;
m++){o[m].parentNode.insertBefore(this[n].cloneNode(true),o[m].nextSibling)
}}}}},next:function(k){if(this.length>0){if(k){if(this[0].nextElementSibling&&h(this[0].nextElementSibling).is(k)){return new j([this[0].nextElementSibling])
}else{return new j([])
}}else{if(this[0].nextElementSibling){return new j([this[0].nextElementSibling])
}else{return new j([])
}}}else{return new j([])
}},nextAll:function(m){var k=[];
var o=this[0];
if(!o){return new j([])
}while(o.nextElementSibling){var n=o.nextElementSibling;
if(m){if(h(n).is(m)){k.push(n)
}}else{k.push(n)
}o=n
}return new j(k)
},prev:function(k){if(this.length>0){if(k){if(this[0].previousElementSibling&&h(this[0].previousElementSibling).is(k)){return new j([this[0].previousElementSibling])
}else{return new j([])
}}else{if(this[0].previousElementSibling){return new j([this[0].previousElementSibling])
}else{return new j([])
}}}else{return new j([])
}},prevAll:function(k){var n=[];
var m=this[0];
if(!m){return new j([])
}while(m.previousElementSibling){var o=m.previousElementSibling;
if(k){if(h(o).is(k)){n.push(o)
}}else{n.push(o)
}m=o
}return new j(n)
},parent:function(k){var m=[];
for(var n=0;
n<this.length;
n++){if(k){if(h(this[n].parentNode).is(k)){m.push(this[n].parentNode)
}}else{m.push(this[n].parentNode)
}}return h(h.unique(m))
},parents:function(k){var m=[];
for(var n=0;
n<this.length;
n++){var o=this[n].parentNode;
while(o){if(k){if(h(o).is(k)){m.push(o)
}}else{m.push(o)
}o=o.parentNode
}}return h(h.unique(m))
},find:function(k){var m=[];
for(var o=0;
o<this.length;
o++){var p=this[o].querySelectorAll(k);
for(var n=0;
n<p.length;
n++){m.push(p[n])
}}return new j(m)
},children:function(k){var o=[];
for(var n=0;
n<this.length;
n++){var p=this[n].childNodes;
for(var m=0;
m<p.length;
m++){if(!k){if(p[m].nodeType===1){o.push(p[m])
}}else{if(p[m].nodeType===1&&h(p[m]).is(k)){o.push(p[m])
}}}}return new j(h.unique(o))
},remove:function(){for(var k=0;
k<this.length;
k++){if(this[k].parentNode){this[k].parentNode.removeChild(this[k])
}}return this
},add:function(){var o=this;
var n,k;
for(n=0;
n<arguments.length;
n++){var m=h(arguments[n]);
for(k=0;
k<m.length;
k++){o[o.length]=m[k];
o.length++
}}return o
}};
h.fn=j.prototype;
h.unique=function(k){var n=[];
for(var m=0;
m<k.length;
m++){if(n.indexOf(k[m])===-1){n.push(k[m])
}}return n
};
return h
})();
var d=["jQuery","Zepto","Dom7"];
for(var c=0;
c<d.length;
c++){if(window[d[c]]){e(window[d[c]])
}}var b;
if(typeof g==="undefined"){b=window.Dom7||window.Zepto||window.jQuery
}else{b=g
}function e(h){h.fn.swiper=function(k){var j;
h(this).each(function(){var m=new a(this,k);
if(!j){j=m
}});
return j
}
}if(b){if(!("transitionEnd" in b.fn)){b.fn.transitionEnd=function(p){var m=["webkitTransitionEnd","transitionend","oTransitionEnd","MSTransitionEnd","msTransitionEnd"],k,h,n=this;
function o(j){if(j.target!==this){return
}p.call(this,j);
for(k=0;
k<m.length;
k++){n.off(m[k],o)
}}if(p){for(k=0;
k<m.length;
k++){n.on(m[k],o)
}}return this
}
}if(!("transform" in b.fn)){b.fn.transform=function(h){for(var k=0;
k<this.length;
k++){var j=this[k].style;
j.webkitTransform=j.MsTransform=j.msTransform=j.MozTransform=j.OTransform=j.transform=h
}return this
}
}if(!("transition" in b.fn)){b.fn.transition=function(k){if(typeof k!=="string"){k=k+"ms"
}for(var j=0;
j<this.length;
j++){var h=this[j].style;
h.webkitTransitionDuration=h.MsTransitionDuration=h.msTransitionDuration=h.MozTransitionDuration=h.OTransitionDuration=h.transitionDuration=k
}return this
}
}if(!("outerWidth" in b.fn)){b.fn.outerWidth=function(h){if(this.length>0){if(h){return this[0].offsetWidth+parseFloat(this.css("margin-right"))+parseFloat(this.css("margin-left"))
}else{return this[0].offsetWidth
}}else{return null
}}
}}window.Swiper=a
})();
if(typeof(module)!=="undefined"){module.exports=window.Swiper
}else{if(typeof define==="function"&&define.amd){define([],function(){return window.Swiper
})
}}
/*! A fix for the iOS orientationchange zoom bug.
 Script by @scottjehl, rebound by @wilto.
 MIT / GPLv2 License.
 https://github.com/scottjehl/iOS-Orientationchange-Fix/blob/master/ios-orientationchange-fix.js
*/
(function(p){var d=navigator.userAgent;
if(!(/iPhone|iPad|iPod/.test(navigator.platform)&&/OS [1-5]_[0-9_]* like Mac OS X/i.test(d)&&d.indexOf("AppleWebKit")>-1)){return
}var o=p.document;
if(!o.querySelector){return
}var q=o.querySelector("meta[name=viewport]"),a=q&&q.getAttribute("content"),n=a+",maximum-scale=1",e=a+",maximum-scale=10",h=true,m,k,j,c;
if(!q){return
}function g(){q.setAttribute("content",e);
h=true
}function b(){q.setAttribute("content",n);
h=false
}function f(r){c=r.accelerationIncludingGravity;
m=Math.abs(c.x);
k=Math.abs(c.y);
j=Math.abs(c.z);
if((!p.orientation||p.orientation===180)&&(m>7||((j>6&&k<8||j<8&&k>6)&&m>5))){if(h){b()
}}else{if(!h){g()
}}}p.addEventListener("orientationchange",g,false);
p.addEventListener("devicemotion",f,false);
$(window).on("load",function(){g()
})
})(this);
/*!
 * jQuery Cookie Plugin v1.4.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2006, 2014 Klaus Hartl
 * Released under the MIT license
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)
}else{if(typeof exports==="object"){a(require("jquery"))
}else{a(jQuery)
}}}(function(f){var a=/\+/g;
function d(j){return b.raw?j:encodeURIComponent(j)
}function g(j){return b.raw?j:decodeURIComponent(j)
}function h(j){return d(b.json?JSON.stringify(j):String(j))
}function c(j){if(j.indexOf('"')===0){j=j.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")
}try{j=decodeURIComponent(j.replace(a," "));
return b.json?JSON.parse(j):j
}catch(k){}}function e(k,j){var m=b.raw?k:c(k);
return f.isFunction(j)?j(m):m
}var b=f.cookie=function(q,p,v){if(arguments.length>1&&!f.isFunction(p)){v=f.extend({},b.defaults,v);
if(typeof v.expires==="number"){var r=v.expires,u=v.expires=new Date();
u.setTime(+u+r*86400000)
}return(document.cookie=[d(q),"=",h(p),v.expires?"; expires="+v.expires.toUTCString():"",v.path?"; path="+v.path:"",v.domain?"; domain="+v.domain:"",v.secure?"; secure":""].join(""))
}var w=q?undefined:{};
var s=document.cookie?document.cookie.split("; "):[];
for(var o=0,m=s.length;
o<m;
o++){var n=s[o].split("=");
var j=g(n.shift());
var k=n.join("=");
if(q&&q===j){w=e(k,p);
break
}if(!q&&(k=e(k))!==undefined){w[j]=k
}}return w
};
b.defaults={};
f.removeCookie=function(k,j){if(f.cookie(k)===undefined){return false
}f.cookie(k,"",f.extend({},j,{expires:-1}));
return !f.cookie(k)
}
}));
/*! http://mths.be/placeholder v2.1.0 by @mathias */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)
}else{a(jQuery)
}}(function(g){var b=Object.prototype.toString.call(window.operamini)=="[object OperaMini]";
var a="placeholder" in document.createElement("input")&&!b;
var h="placeholder" in document.createElement("textarea")&&!b;
var f=g.valHooks;
var c=g.propHooks;
var n;
var m;
if(a&&h){m=g.fn.placeholder=function(){return this
};
m.input=m.textarea=true
}else{var e={};
m=g.fn.placeholder=function(p){var r={customClass:"placeholder"};
e=g.extend({},r,p);
var q=this;
q.filter((a?"textarea":":input")+"[placeholder]").not("."+e.customClass).bind({"focus.placeholder":d,"blur.placeholder":j}).data("placeholder-enabled",true).trigger("blur.placeholder");
return q
};
m.input=a;
m.textarea=h;
n={get:function(q){var p=g(q);
var r=p.data("placeholder-password");
if(r){return r[0].value
}return p.data("placeholder-enabled")&&p.hasClass(e.customClass)?"":q.value
},set:function(q,s){var p=g(q);
var r=p.data("placeholder-password");
if(r){return r[0].value=s
}if(!p.data("placeholder-enabled")){return q.value=s
}if(s===""){q.value=s;
if(q!=o()){j.call(q)
}}else{if(p.hasClass(e.customClass)){d.call(q,true,s)||(q.value=s)
}else{q.value=s
}}return p
}};
if(!a){f.input=n;
c.value=n
}if(!h){f.textarea=n;
c.value=n
}g(function(){g(document).delegate("form","submit.placeholder",function(){var p=g("."+e.customClass,this).each(d);
setTimeout(function(){p.each(j)
},10)
})
});
g(window).bind("beforeunload.placeholder",function(){g("."+e.customClass).each(function(){this.value=""
})
})
}function k(q){var p={};
var r=/^jQuery\d+$/;
g.each(q.attributes,function(t,s){if(s.specified&&!r.test(s.name)){p[s.name]=s.value
}});
return p
}function d(q,r){var p=this;
var s=g(p);
if(p.value==s.attr("placeholder")&&s.hasClass(e.customClass)){if(s.data("placeholder-password")){s=s.hide().nextAll('input[type="password"]:first').show().attr("id",s.removeAttr("id").data("placeholder-id"));
if(q===true){return s[0].value=r
}s.focus()
}else{p.value="";
s.removeClass(e.customClass);
p==o()&&p.select()
}}}function j(){var t;
var p=this;
var s=g(p);
var r=this.id;
if(p.value===""){if(p.type==="password"){if(!s.data("placeholder-textinput")){try{t=s.clone().attr({type:"text"})
}catch(q){t=g("<input>").attr(g.extend(k(this),{type:"text"}))
}t.removeAttr("name").data({"placeholder-password":s,"placeholder-id":r}).bind("focus.placeholder",d);
s.data({"placeholder-textinput":t,"placeholder-id":r}).before(t)
}s=s.removeAttr("id").hide().prevAll('input[type="text"]:first').attr("id",r).show()
}s.addClass(e.customClass);
s[0].value=s.attr("placeholder")
}else{s.removeClass(e.customClass)
}}function o(){try{return document.activeElement
}catch(p){}}}));
/*!
 * Packery PACKAGED v1.3.2
 * bin-packing layout library
 * http://packery.metafizzy.co
 *
 * Commercial use requires one-time purchase of a commercial license
 * http://packery.metafizzy.co/license.html
 *
 * Non-commercial use is licensed under the GPL v3 License
 *
 * Copyright 2015 Metafizzy
 */
(function(c){var d=Array.prototype.slice;
function b(){}function a(f){if(!f){return
}function h(j){if(j.prototype.option){return
}j.prototype.option=function(k){if(!f.isPlainObject(k)){return
}this.options=f.extend(true,this.options,k)
}
}var e=typeof console==="undefined"?b:function(j){console.error(j)
};
function g(j,k){f.fn[j]=function(p){if(typeof p==="string"){var o=d.call(arguments,1);
for(var q=0,n=this.length;
q<n;
q++){var s=this[q];
var m=f.data(s,j);
if(!m){e("cannot call methods on "+j+" prior to initialization; attempted to call '"+p+"'");
continue
}if(!f.isFunction(m[p])||p.charAt(0)==="_"){e("no such method '"+p+"' for "+j+" instance");
continue
}var r=m[p].apply(m,o);
if(r!==undefined){return r
}}return this
}else{return this.each(function(){var t=f.data(this,j);
if(t){t.option(p);
t._init()
}else{t=new k(this,p);
f.data(this,j,t)
}})
}}
}f.bridget=function(j,k){h(k);
g(j,k)
};
return f.bridget
}if(typeof define==="function"&&define.amd){define("jquery-bridget/jquery.bridget",["jquery"],a)
}else{if(typeof exports==="object"){a(require("jquery"))
}else{a(c.jQuery)
}}})(window);
/*!
 * classie v1.0.1
 * class helper functions
 * from bonzo https://github.com/ded/bonzo
 * MIT license
 * 
 * classie.has( elem, 'my-class' ) -> true/false
 * classie.add( elem, 'my-new-class' )
 * classie.remove( elem, 'my-unwanted-class' )
 * classie.toggle( elem, 'my-class' )
 */
(function(e){function a(h){return new RegExp("(^|\\s+)"+h+"(\\s+|$)")
}var d,f,g;
if("classList" in document.documentElement){d=function(h,j){return h.classList.contains(j)
};
f=function(h,j){h.classList.add(j)
};
g=function(h,j){h.classList.remove(j)
}
}else{d=function(h,j){return a(j).test(h.className)
};
f=function(h,j){if(!d(h,j)){h.className=h.className+" "+j
}};
g=function(h,j){h.className=h.className.replace(a(j)," ")
}
}function b(j,k){var h=d(j,k)?g:f;
h(j,k)
}var c={hasClass:d,addClass:f,removeClass:g,toggleClass:b,has:d,add:f,remove:g,toggle:b};
if(typeof define==="function"&&define.amd){define("classie/classie",c)
}else{if(typeof exports==="object"){module.exports=c
}else{e.classie=c
}}})(window);
/*!
 * getStyleProperty v1.0.4
 * original by kangax
 * http://perfectionkills.com/feature-testing-css-properties/
 * MIT license
 */
(function(c){var d="Webkit Moz ms Ms O".split(" ");
var b=document.documentElement.style;
function a(h){if(!h){return
}if(typeof b[h]==="string"){return h
}h=h.charAt(0).toUpperCase()+h.slice(1);
var f;
for(var g=0,e=d.length;
g<e;
g++){f=d[g]+h;
if(typeof b[f]==="string"){return f
}}}if(typeof define==="function"&&define.amd){define("get-style-property/get-style-property",[],function(){return a
})
}else{if(typeof exports==="object"){module.exports=a
}else{c.getStyleProperty=a
}}})(window);
/*!
 * getSize v1.2.2
 * measure size of elements
 * MIT license
 */
(function(e,g){function b(k){var j=parseFloat(k);
var m=k.indexOf("%")===-1&&!isNaN(j);
return m&&j
}function d(){}var c=typeof console==="undefined"?d:function(j){console.error(j)
};
var a=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];
function f(){var m={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};
for(var k=0,j=a.length;
k<j;
k++){var n=a[k];
m[n]=0
}return m
}function h(q){var o=false;
var m,n,p;
function k(){if(o){return
}o=true;
var u=e.getComputedStyle;
m=(function(){var x=u?function(y){return u(y,null)
}:function(y){return y.currentStyle
};
return function w(z){var y=x(z);
if(!y){c("Style returned "+y+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1")
}return y
}
})();
n=q("boxSizing");
if(n){var v=document.createElement("div");
v.style.width="200px";
v.style.padding="1px 2px 3px 4px";
v.style.borderStyle="solid";
v.style.borderWidth="1px 2px 3px 4px";
v.style[n]="border-box";
var s=document.body||document.documentElement;
s.appendChild(v);
var t=m(v);
p=b(t.width)===200;
s.removeChild(v)
}}function r(H){k();
if(typeof H==="string"){H=document.querySelector(H)
}if(!H||typeof H!=="object"||!H.nodeType){return
}var F=m(H);
if(F.display==="none"){return f()
}var y={};
y.width=H.offsetWidth;
y.height=H.offsetHeight;
var G=y.isBorderBox=!!(n&&F[n]&&F[n]==="border-box");
for(var C=0,D=a.length;
C<D;
C++){var A=a[C];
var B=F[A];
B=j(H,B);
var s=parseFloat(B);
y[A]=!isNaN(s)?s:0
}var E=y.paddingLeft+y.paddingRight;
var x=y.paddingTop+y.paddingBottom;
var J=y.marginLeft+y.marginRight;
var v=y.marginTop+y.marginBottom;
var I=y.borderLeftWidth+y.borderRightWidth;
var u=y.borderTopWidth+y.borderBottomWidth;
var t=G&&p;
var w=b(F.width);
if(w!==false){y.width=w+(t?0:E+I)
}var z=b(F.height);
if(z!==false){y.height=z+(t?0:x+u)
}y.innerWidth=y.width-(E+I);
y.innerHeight=y.height-(x+u);
y.outerWidth=y.width+J;
y.outerHeight=y.height+v;
return y
}function j(v,w){if(e.getComputedStyle||w.indexOf("%")===-1){return w
}var u=v.style;
var x=u.left;
var t=v.runtimeStyle;
var s=t&&t.left;
if(s){t.left=v.currentStyle.left
}u.left=w;
w=u.pixelLeft;
u.left=x;
if(s){t.left=s
}return w
}return r
}if(typeof define==="function"&&define.amd){define("get-size/get-size",["get-style-property/get-style-property"],h)
}else{if(typeof exports==="object"){module.exports=h(require("desandro-get-style-property"))
}else{e.getSize=h(e.getStyleProperty)
}}})(window);
/*!
 * eventie v1.0.6
 * event binding helper
 *   eventie.bind( elem, 'click', myFn )
 *   eventie.unbind( elem, 'click', myFn )
 * MIT license
 */
(function(e){var b=document.documentElement;
var f=function(){};
function a(h){var g=e.event;
g.target=g.target||g.srcElement||h;
return g
}if(b.addEventListener){f=function(j,h,g){j.addEventListener(h,g,false)
}
}else{if(b.attachEvent){f=function(j,h,g){j[h+g]=g.handleEvent?function(){var k=a(j);
g.handleEvent.call(g,k)
}:function(){var k=a(j);
g.call(j,k)
};
j.attachEvent("on"+h,j[h+g])
}
}}var d=function(){};
if(b.removeEventListener){d=function(j,h,g){j.removeEventListener(h,g,false)
}
}else{if(b.detachEvent){d=function(k,h,g){k.detachEvent("on"+h,k[h+g]);
try{delete k[h+g]
}catch(j){k[h+g]=undefined
}}
}}var c={bind:f,unbind:d};
if(typeof define==="function"&&define.amd){define("eventie/eventie",c)
}else{if(typeof exports==="object"){module.exports=c
}else{e.eventie=c
}}})(window);
/*!
 * docReady v1.0.4
 * Cross browser DOMContentLoaded event emitter
 * MIT license
 */
(function(e){var b=e.document;
var a=[];
function d(h){if(typeof h!=="function"){return
}if(d.isReady){h()
}else{a.push(h)
}}d.isReady=false;
function g(j){var h=j.type==="readystatechange"&&b.readyState!=="complete";
if(d.isReady||h){return
}c()
}function c(){d.isReady=true;
for(var j=0,h=a.length;
j<h;
j++){var k=a[j];
k()
}}function f(h){if(b.readyState==="complete"){c()
}else{h.bind(b,"DOMContentLoaded",g);
h.bind(b,"readystatechange",g);
h.bind(e,"load",g)
}return d
}if(typeof define==="function"&&define.amd){define("doc-ready/doc-ready",["eventie/eventie"],f)
}else{if(typeof exports==="object"){module.exports=f(require("eventie"))
}else{e.docReady=f(e.eventie)
}}})(window);
/*!
 * EventEmitter v4.2.11 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - http://oli.me.uk/
 * @preserve
 */
;
(function(){function c(){}var n=c.prototype;
var x=this;
var z=x.EventEmitter;
function h(B,C){var A=B.length;
while(A--){if(B[A].listener===C){return A
}}return -1
}function k(A){return function B(){return this[A].apply(this,arguments)
}
}n.getListeners=function v(A){var D=this._getEvents();
var B;
var C;
if(A instanceof RegExp){B={};
for(C in D){if(D.hasOwnProperty(C)&&A.test(C)){B[C]=D[C]
}}}else{B=D[A]||(D[A]=[])
}return B
};
n.flattenListeners=function t(C){var A=[];
var B;
for(B=0;
B<C.length;
B+=1){A.push(C[B].listener)
}return A
};
n.getListenersAsObject=function e(A){var C=this.getListeners(A);
var B;
if(C instanceof Array){B={};
B[A]=C
}return B||C
};
n.addListener=function f(A,D){var C=this.getListenersAsObject(A);
var E=typeof D==="object";
var B;
for(B in C){if(C.hasOwnProperty(B)&&h(C[B],D)===-1){C[B].push(E?D:{listener:D,once:false})
}}return this
};
n.on=k("addListener");
n.addOnceListener=function a(A,B){return this.addListener(A,{listener:B,once:true})
};
n.once=k("addOnceListener");
n.defineEvent=function r(A){this.getListeners(A);
return this
};
n.defineEvents=function s(A){for(var B=0;
B<A.length;
B+=1){this.defineEvent(A[B])
}return this
};
n.removeListener=function b(A,E){var D=this.getListenersAsObject(A);
var B;
var C;
for(C in D){if(D.hasOwnProperty(C)){B=h(D[C],E);
if(B!==-1){D[C].splice(B,1)
}}}return this
};
n.off=k("removeListener");
n.addListeners=function o(A,B){return this.manipulateListeners(false,A,B)
};
n.removeListeners=function u(A,B){return this.manipulateListeners(true,A,B)
};
n.manipulateListeners=function g(B,C,E){var D;
var F;
var G=B?this.removeListener:this.addListener;
var A=B?this.removeListeners:this.addListeners;
if(typeof C==="object"&&!(C instanceof RegExp)){for(D in C){if(C.hasOwnProperty(D)&&(F=C[D])){if(typeof F==="function"){G.call(this,D,F)
}else{A.call(this,D,F)
}}}}else{D=E.length;
while(D--){G.call(this,C,E[D])
}}return this
};
n.removeEvent=function q(A){var D=typeof A;
var C=this._getEvents();
var B;
if(D==="string"){delete C[A]
}else{if(A instanceof RegExp){for(B in C){if(C.hasOwnProperty(B)&&A.test(B)){delete C[B]
}}}else{delete this._events
}}return this
};
n.removeAllListeners=k("removeEvent");
n.emitEvent=function w(A,C){var F=this.getListenersAsObject(A);
var G;
var E;
var D;
var B;
for(D in F){if(F.hasOwnProperty(D)){E=F[D].length;
while(E--){G=F[D][E];
if(G.once===true){this.removeListener(A,G.listener)
}B=G.listener.apply(this,C||[]);
if(B===this._getOnceReturnValue()){this.removeListener(A,G.listener)
}}}}return this
};
n.trigger=k("emitEvent");
n.emit=function m(A){var B=Array.prototype.slice.call(arguments,1);
return this.emitEvent(A,B)
};
n.setOnceReturnValue=function j(A){this._onceReturnValue=A;
return this
};
n._getOnceReturnValue=function p(){if(this.hasOwnProperty("_onceReturnValue")){return this._onceReturnValue
}else{return true
}};
n._getEvents=function d(){return this._events||(this._events={})
};
c.noConflict=function y(){x.EventEmitter=z;
return c
};
if(typeof define==="function"&&define.amd){define("eventEmitter/EventEmitter",[],function(){return c
})
}else{if(typeof module==="object"&&module.exports){module.exports=c
}else{x.EventEmitter=c
}}}.call(this));
(function(h){var f=(function(){if(h.matchesSelector){return"matchesSelector"
}var o=["webkit","moz","ms","o"];
for(var m=0,k=o.length;
m<k;
m++){var n=o[m];
var p=n+"MatchesSelector";
if(h[p]){return p
}}})();
function d(m,k){return m[f](k)
}function g(m){if(m.parentNode){return
}var k=document.createDocumentFragment();
k.appendChild(m)
}function e(p,m){g(p);
var n=p.parentNode.querySelectorAll(m);
for(var o=0,k=n.length;
o<k;
o++){if(n[o]===p){return true
}}return false
}function c(m,k){g(m);
return d(m,k)
}var j;
if(f){var a=document.createElement("div");
var b=d(a,"div");
j=b?d:c
}else{j=e
}if(typeof define==="function"&&define.amd){define("matches-selector/matches-selector",[],function(){return j
})
}else{if(typeof exports==="object"){module.exports=j
}else{window.matchesSelector=j
}}})(Element.prototype);
(function(c){var e=c.getComputedStyle;
var b=e?function(h){return e(h,null)
}:function(h){return h.currentStyle
};
function g(j,h){for(var k in h){j[k]=h[k]
}return j
}function a(h){for(var j in h){return false
}j=null;
return true
}function d(h){return h.replace(/([A-Z])/g,function(j){return"-"+j.toLowerCase()
})
}function f(x,w,m){var v=m("transition");
var s=m("transform");
var t=v&&s;
var q=!!m("perspective");
var h={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[v];
var o=["transform","transition","transitionDuration","transitionProperty"];
var u=(function(){var z={};
for(var A=0,y=o.length;
A<y;
A++){var C=o[A];
var B=m(C);
if(B&&B!==C){z[C]=B
}}return z
})();
function k(y,z){if(!y){return
}this.element=y;
this.layout=z;
this.position={x:0,y:0};
this._create()
}g(k.prototype,x.prototype);
k.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}};
this.css({position:"absolute"})
};
k.prototype.handleEvent=function(y){var z="on"+y.type;
if(this[z]){this[z](y)
}};
k.prototype.getSize=function(){this.size=w(this.element)
};
k.prototype.css=function(A){var y=this.element.style;
for(var B in A){var z=u[B]||B;
y[z]=A[B]
}};
k.prototype.getPosition=function(){var C=b(this.element);
var A=this.layout.options;
var F=A.isOriginLeft;
var E=A.isOriginTop;
var z=parseInt(C[F?"left":"right"],10);
var D=parseInt(C[E?"top":"bottom"],10);
z=isNaN(z)?0:z;
D=isNaN(D)?0:D;
var B=this.layout.size;
z-=F?B.paddingLeft:B.paddingRight;
D-=E?B.paddingTop:B.paddingBottom;
this.position.x=z;
this.position.y=D
};
k.prototype.layoutPosition=function(){var z=this.layout.size;
var y=this.layout.options;
var A={};
if(y.isOriginLeft){A.left=(this.position.x+z.paddingLeft)+"px";
A.right=""
}else{A.right=(this.position.x+z.paddingRight)+"px";
A.left=""
}if(y.isOriginTop){A.top=(this.position.y+z.paddingTop)+"px";
A.bottom=""
}else{A.bottom=(this.position.y+z.paddingBottom)+"px";
A.top=""
}this.css(A);
this.emitEvent("layout",[this])
};
var j=q?function(z,A){return"translate3d("+z+"px, "+A+"px, 0)"
}:function(z,A){return"translate("+z+"px, "+A+"px)"
};
k.prototype._transitionTo=function(I,H){this.getPosition();
var A=this.position.x;
var z=this.position.y;
var G=parseInt(I,10);
var F=parseInt(H,10);
var E=G===this.position.x&&F===this.position.y;
this.setPosition(I,H);
if(E&&!this.isTransitioning){this.layoutPosition();
return
}var D=I-A;
var C=H-z;
var B={};
var J=this.layout.options;
D=J.isOriginLeft?D:-D;
C=J.isOriginTop?C:-C;
B.transform=j(D,C);
this.transition({to:B,onTransitionEnd:{transform:this.layoutPosition},isCleaning:true})
};
k.prototype.goTo=function(z,A){this.setPosition(z,A);
this.layoutPosition()
};
k.prototype.moveTo=t?k.prototype._transitionTo:k.prototype.goTo;
k.prototype.setPosition=function(z,A){this.position.x=parseInt(z,10);
this.position.y=parseInt(A,10)
};
k.prototype._nonTransition=function(y){this.css(y.to);
if(y.isCleaning){this._removeStyles(y.to)
}for(var z in y.onTransitionEnd){y.onTransitionEnd[z].call(this)
}};
k.prototype._transition=function(y){if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(y);
return
}var A=this._transn;
for(var B in y.onTransitionEnd){A.onEnd[B]=y.onTransitionEnd[B]
}for(B in y.to){A.ingProperties[B]=true;
if(y.isCleaning){A.clean[B]=true
}}if(y.from){this.css(y.from);
var z=this.element.offsetHeight;
z=null
}this.enableTransition(y.to);
this.css(y.to);
this.isTransitioning=true
};
var n=s&&(d(s)+",opacity");
k.prototype.enableTransition=function(){if(this.isTransitioning){return
}this.css({transitionProperty:n,transitionDuration:this.layout.options.transitionDuration});
this.element.addEventListener(h,this,false)
};
k.prototype.transition=k.prototype[v?"_transition":"_nonTransition"];
k.prototype.onwebkitTransitionEnd=function(y){this.ontransitionend(y)
};
k.prototype.onotransitionend=function(y){this.ontransitionend(y)
};
var p={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};
k.prototype.ontransitionend=function(B){if(B.target!==this.element){return
}var A=this._transn;
var y=p[B.propertyName]||B.propertyName;
delete A.ingProperties[y];
if(a(A.ingProperties)){this.disableTransition()
}if(y in A.clean){this.element.style[B.propertyName]="";
delete A.clean[y]
}if(y in A.onEnd){var z=A.onEnd[y];
z.call(this);
delete A.onEnd[y]
}this.emitEvent("transitionEnd",[this])
};
k.prototype.disableTransition=function(){this.removeTransitionStyles();
this.element.removeEventListener(h,this,false);
this.isTransitioning=false
};
k.prototype._removeStyles=function(z){var y={};
for(var A in z){y[A]=""
}this.css(y)
};
var r={transitionProperty:"",transitionDuration:""};
k.prototype.removeTransitionStyles=function(){this.css(r)
};
k.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element);
this.emitEvent("remove",[this])
};
k.prototype.remove=function(){if(!v||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();
return
}var y=this;
this.on("transitionEnd",function(){y.removeElem();
return true
});
this.hide()
};
k.prototype.reveal=function(){delete this.isHidden;
this.css({display:""});
var y=this.layout.options;
this.transition({from:y.hiddenStyle,to:y.visibleStyle,isCleaning:true})
};
k.prototype.hide=function(){this.isHidden=true;
this.css({display:""});
var y=this.layout.options;
this.transition({from:y.visibleStyle,to:y.hiddenStyle,isCleaning:true,onTransitionEnd:{opacity:function(){if(this.isHidden){this.css({display:"none"})
}}}})
};
k.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})
};
return k
}if(typeof define==="function"&&define.amd){define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],f)
}else{if(typeof exports==="object"){module.exports=f(require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property"))
}else{c.Outlayer={};
c.Outlayer.Item=f(c.EventEmitter,c.getSize,c.getStyleProperty)
}}})(window);
/*!
 * Outlayer v1.3.0
 * the brains and guts of a layout library
 * MIT license
 */
(function(f){var j=f.document;
var c=f.console;
var q=f.jQuery;
var p=function(){};
function h(t,s){for(var u in s){t[u]=s[u]
}return t
}var r=Object.prototype.toString;
function d(s){return r.call(s)==="[object Array]"
}function a(v){var u=[];
if(d(v)){u=v
}else{if(v&&typeof v.length==="number"){for(var t=0,s=v.length;
t<s;
t++){u.push(v[t])
}}else{u.push(v)
}}return u
}var g=(typeof HTMLElement==="function"||typeof HTMLElement==="object")?function e(s){return s instanceof HTMLElement
}:function b(s){return s&&typeof s==="object"&&s.nodeType===1&&typeof s.nodeName==="string"
};
var k=Array.prototype.indexOf?function(s,t){return s.indexOf(t)
}:function(u,v){for(var t=0,s=u.length;
t<s;
t++){if(u[t]===v){return t
}}return -1
};
function n(u,t){var s=k(t,u);
if(s!==-1){t.splice(s,1)
}}function m(s){return s.replace(/(.)([A-Z])/g,function(u,t,v){return t+"-"+v
}).toLowerCase()
}function o(x,t,z,y,A,u){var w=0;
var s={};
function v(C,B){if(typeof C==="string"){C=j.querySelector(C)
}if(!C||!g(C)){if(c){c.error("Bad "+this.constructor.namespace+" element: "+C)
}return
}this.element=C;
this.options=h({},this.constructor.defaults);
this.option(B);
var D=++w;
this.element.outlayerGUID=D;
s[D]=this;
this._create();
if(this.options.isInitLayout){this.layout()
}}v.namespace="outlayer";
v.Item=u;
v.defaults={containerStyle:{position:"relative"},isInitLayout:true,isOriginLeft:true,isOriginTop:true,isResizeBound:true,isResizingContainer:true,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};
h(v.prototype,z.prototype);
v.prototype.option=function(B){h(this.options,B)
};
v.prototype._create=function(){this.reloadItems();
this.stamps=[];
this.stamp(this.options.stamp);
h(this.element.style,this.options.containerStyle);
if(this.options.isResizeBound){this.bindResize()
}};
v.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)
};
v.prototype._itemize=function(D){var G=this._filterFindItemElements(D);
var E=this.constructor.Item;
var C=[];
for(var F=0,B=G.length;
F<B;
F++){var I=G[F];
var H=new E(I,this);
C.push(H)
}return C
};
v.prototype._filterFindItemElements=function(B){B=a(B);
var C=this.options.itemSelector;
var G=[];
for(var F=0,H=B.length;
F<H;
F++){var D=B[F];
if(!g(D)){continue
}if(C){if(A(D,C)){G.push(D)
}var I=D.querySelectorAll(C);
for(var E=0,J=I.length;
E<J;
E++){G.push(I[E])
}}else{G.push(D)
}}return G
};
v.prototype.getItemElements=function(){var C=[];
for(var D=0,B=this.items.length;
D<B;
D++){C.push(this.items[D].element)
}return C
};
v.prototype.layout=function(){this._resetLayout();
this._manageStamps();
var B=this.options.isLayoutInstant!==undefined?this.options.isLayoutInstant:!this._isLayoutInited;
this.layoutItems(this.items,B);
this._isLayoutInited=true
};
v.prototype._init=v.prototype.layout;
v.prototype._resetLayout=function(){this.getSize()
};
v.prototype.getSize=function(){this.size=y(this.element)
};
v.prototype._getMeasurement=function(D,B){var C=this.options[D];
var E;
if(!C){this[D]=0
}else{if(typeof C==="string"){E=this.element.querySelector(C)
}else{if(g(C)){E=C
}}this[D]=E?y(E)[B]:C
}};
v.prototype.layoutItems=function(B,C){B=this._getItemsForLayout(B);
this._layoutItems(B,C);
this._postLayout()
};
v.prototype._getItemsForLayout=function(C){var F=[];
for(var D=0,B=C.length;
D<B;
D++){var E=C[D];
if(!E.isIgnored){F.push(E)
}}return F
};
v.prototype._layoutItems=function(I,H){var F=this;
function B(){F.emitEvent("layoutComplete",[F,I])
}if(!I||!I.length){B();
return
}this._itemsOn(I,"layout",B);
var E=[];
for(var C=0,G=I.length;
C<G;
C++){var J=I[C];
var D=this._getItemLayoutPosition(J);
D.item=J;
D.isInstant=H||J.isLayoutInstant;
E.push(D)
}this._processLayoutQueue(E)
};
v.prototype._getItemLayoutPosition=function(){return{x:0,y:0}
};
v.prototype._processLayoutQueue=function(C){for(var D=0,B=C.length;
D<B;
D++){var E=C[D];
this._positionItem(E.item,E.x,E.y,E.isInstant)
}};
v.prototype._positionItem=function(C,B,E,D){if(D){C.goTo(B,E)
}else{C.moveTo(B,E)
}};
v.prototype._postLayout=function(){this.resizeContainer()
};
v.prototype.resizeContainer=function(){if(!this.options.isResizingContainer){return
}var B=this._getContainerSize();
if(B){this._setContainerMeasure(B.width,true);
this._setContainerMeasure(B.height,false)
}};
v.prototype._getContainerSize=p;
v.prototype._setContainerMeasure=function(B,C){if(B===undefined){return
}var D=this.size;
if(D.isBorderBox){B+=C?D.paddingLeft+D.paddingRight+D.borderLeftWidth+D.borderRightWidth:D.paddingBottom+D.paddingTop+D.borderTopWidth+D.borderBottomWidth
}B=Math.max(B,0);
this.element.style[C?"width":"height"]=B+"px"
};
v.prototype._itemsOn=function(I,E,J){var B=0;
var H=I.length;
var G=this;
function D(){B++;
if(B===H){J.call(G)
}return true
}for(var C=0,F=I.length;
C<F;
C++){var K=I[C];
K.on(E,D)
}};
v.prototype.ignore=function(C){var B=this.getItem(C);
if(B){B.isIgnored=true
}};
v.prototype.unignore=function(C){var B=this.getItem(C);
if(B){delete B.isIgnored
}};
v.prototype.stamp=function(C){C=this._find(C);
if(!C){return
}this.stamps=this.stamps.concat(C);
for(var D=0,B=C.length;
D<B;
D++){var E=C[D];
this.ignore(E)
}};
v.prototype.unstamp=function(C){C=this._find(C);
if(!C){return
}for(var D=0,B=C.length;
D<B;
D++){var E=C[D];
n(E,this.stamps);
this.unignore(E)
}};
v.prototype._find=function(B){if(!B){return
}if(typeof B==="string"){B=this.element.querySelectorAll(B)
}B=a(B);
return B
};
v.prototype._manageStamps=function(){if(!this.stamps||!this.stamps.length){return
}this._getBoundingRect();
for(var D=0,B=this.stamps.length;
D<B;
D++){var C=this.stamps[D];
this._manageStamp(C)
}};
v.prototype._getBoundingRect=function(){var B=this.element.getBoundingClientRect();
var C=this.size;
this._boundingRect={left:B.left+C.paddingLeft+C.borderLeftWidth,top:B.top+C.paddingTop+C.borderTopWidth,right:B.right-(C.paddingRight+C.borderRightWidth),bottom:B.bottom-(C.paddingBottom+C.borderBottomWidth)}
};
v.prototype._manageStamp=p;
v.prototype._getElementOffset=function(E){var B=E.getBoundingClientRect();
var D=this._boundingRect;
var C=y(E);
var F={left:B.left-D.left-C.marginLeft,top:B.top-D.top-C.marginTop,right:D.right-B.right-C.marginRight,bottom:D.bottom-B.bottom-C.marginBottom};
return F
};
v.prototype.handleEvent=function(B){var C="on"+B.type;
if(this[C]){this[C](B)
}};
v.prototype.bindResize=function(){if(this.isResizeBound){return
}x.bind(f,"resize",this);
this.isResizeBound=true
};
v.prototype.unbindResize=function(){if(this.isResizeBound){x.unbind(f,"resize",this)
}this.isResizeBound=false
};
v.prototype.onresize=function(){if(this.resizeTimeout){clearTimeout(this.resizeTimeout)
}var C=this;
function B(){C.resize();
delete C.resizeTimeout
}this.resizeTimeout=setTimeout(B,100)
};
v.prototype.resize=function(){if(!this.isResizeBound||!this.needsResizeLayout()){return
}this.layout()
};
v.prototype.needsResizeLayout=function(){var C=y(this.element);
var B=this.size&&C;
return B&&C.innerWidth!==this.size.innerWidth
};
v.prototype.addItems=function(C){var B=this._itemize(C);
if(B.length){this.items=this.items.concat(B)
}return B
};
v.prototype.appended=function(C){var B=this.addItems(C);
if(!B.length){return
}this.layoutItems(B,true);
this.reveal(B)
};
v.prototype.prepended=function(C){var B=this._itemize(C);
if(!B.length){return
}var D=this.items.slice(0);
this.items=B.concat(D);
this._resetLayout();
this._manageStamps();
this.layoutItems(B,true);
this.reveal(B);
this.layoutItems(D)
};
v.prototype.reveal=function(C){var B=C&&C.length;
if(!B){return
}for(var D=0;
D<B;
D++){var E=C[D];
E.reveal()
}};
v.prototype.hide=function(C){var B=C&&C.length;
if(!B){return
}for(var D=0;
D<B;
D++){var E=C[D];
E.hide()
}};
v.prototype.getItem=function(E){for(var C=0,B=this.items.length;
C<B;
C++){var D=this.items[C];
if(D.element===E){return D
}}};
v.prototype.getItems=function(D){if(!D||!D.length){return
}var C=[];
for(var E=0,B=D.length;
E<B;
E++){var G=D[E];
var F=this.getItem(G);
if(F){C.push(F)
}}return C
};
v.prototype.remove=function(C){C=a(C);
var E=this.getItems(C);
if(!E||!E.length){return
}this._itemsOn(E,"remove",function(){this.emitEvent("removeComplete",[this,E])
});
for(var D=0,B=E.length;
D<B;
D++){var F=E[D];
F.remove();
n(F,this.items)
}};
v.prototype.destroy=function(){var D=this.element.style;
D.height="";
D.position="";
D.width="";
for(var C=0,B=this.items.length;
C<B;
C++){var E=this.items[C];
E.destroy()
}this.unbindResize();
var F=this.element.outlayerGUID;
delete s[F];
delete this.element.outlayerGUID;
if(q){q.removeData(this.element,this.constructor.namespace)
}};
v.data=function(B){var C=B&&B.outlayerGUID;
return C&&s[C]
};
v.create=function(E,C){function D(){v.apply(this,arguments)
}if(Object.create){D.prototype=Object.create(v.prototype)
}else{h(D.prototype,v.prototype)
}D.prototype.constructor=D;
D.defaults=h({},v.defaults);
h(D.defaults,C);
D.prototype.settings={};
D.namespace=E;
D.data=v.data;
D.Item=function B(){u.apply(this,arguments)
};
D.Item.prototype=new u();
t(function(){var L=m(E);
var F=j.querySelectorAll(".js-"+L);
var M="data-"+L+"-options";
for(var H=0,I=F.length;
H<I;
H++){var G=F[H];
var J=G.getAttribute(M);
var O;
try{O=J&&JSON.parse(J)
}catch(K){if(c){c.error("Error parsing "+M+" on "+G.nodeName.toLowerCase()+(G.id?"#"+G.id:"")+": "+K)
}continue
}var N=new D(G,O);
if(q){q.data(G,E,N)
}}});
if(q&&q.bridget){q.bridget(E,D)
}return D
};
v.Item=u;
return v
}if(typeof define==="function"&&define.amd){define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],o)
}else{if(typeof exports==="object"){module.exports=o(require("eventie"),require("doc-ready"),require("wolfy87-eventemitter"),require("get-size"),require("desandro-matches-selector"),require("./item"))
}else{f.Outlayer=o(f.eventie,f.docReady,f.EventEmitter,f.getSize,f.matchesSelector,f.Outlayer.Item)
}}})(window);
(function(b){var c=b.Packery=function(){};
function a(){function d(e){for(var f in d.defaults){this[f]=d.defaults[f]
}for(f in e){this[f]=e[f]
}}c.Rect=d;
d.defaults={x:0,y:0,width:0,height:0};
d.prototype.contains=function(g){var e=g.width||0;
var f=g.height||0;
return this.x<=g.x&&this.y<=g.y&&this.x+this.width>=g.x+e&&this.y+this.height>=g.y+f
};
d.prototype.overlaps=function(h){var j=this.x+this.width;
var e=this.y+this.height;
var f=h.x+h.width;
var g=h.y+h.height;
return this.x<f&&j>h.x&&this.y<g&&e>h.y
};
d.prototype.getMaximalFreeRects=function(k){if(!this.overlaps(k)){return false
}var g=[];
var f;
var m=this.x+this.width;
var e=this.y+this.height;
var h=k.x+k.width;
var j=k.y+k.height;
if(this.y<k.y){f=new d({x:this.x,y:this.y,width:this.width,height:k.y-this.y});
g.push(f)
}if(m>h){f=new d({x:h,y:this.y,width:m-h,height:this.height});
g.push(f)
}if(e>j){f=new d({x:this.x,y:j,width:this.width,height:e-j});
g.push(f)
}if(this.x<k.x){f=new d({x:this.x,y:this.y,width:k.x-this.x,height:this.height});
g.push(f)
}return g
};
d.prototype.canFit=function(e){return this.width>=e.width&&this.height>=e.height
};
return d
}if(typeof define==="function"&&define.amd){define("packery/js/rect",a)
}else{if(typeof exports==="object"){module.exports=a()
}else{b.Packery=b.Packery||{};
b.Packery.Rect=a()
}}})(window);
(function(a){function c(d){function f(h,g,j){this.width=h||0;
this.height=g||0;
this.sortDirection=j||"downwardLeftToRight";
this.reset()
}f.prototype.reset=function(){this.spaces=[];
this.newSpaces=[];
var g=new d({x:0,y:0,width:this.width,height:this.height});
this.spaces.push(g);
this.sorter=e[this.sortDirection]||e.downwardLeftToRight
};
f.prototype.pack=function(j){for(var h=0,g=this.spaces.length;
h<g;
h++){var k=this.spaces[h];
if(k.canFit(j)){this.placeInSpace(j,k);
break
}}};
f.prototype.placeInSpace=function(g,h){g.x=h.x;
g.y=h.y;
this.placed(g)
};
f.prototype.placed=function(m){var h=[];
for(var k=0,g=this.spaces.length;
k<g;
k++){var n=this.spaces[k];
var j=n.getMaximalFreeRects(m);
if(j){h.push.apply(h,j)
}else{h.push(n)
}}this.spaces=h;
this.mergeSortSpaces()
};
f.prototype.mergeSortSpaces=function(){f.mergeRects(this.spaces);
this.spaces.sort(this.sorter)
};
f.prototype.addSpace=function(g){this.spaces.push(g);
this.mergeSortSpaces()
};
f.mergeRects=function(r){for(var k=0,n=r.length;
k<n;
k++){var o=r[k];
if(!o){continue
}var g=r.slice(0);
g.splice(k,1);
var p=0;
for(var h=0,s=g.length;
h<s;
h++){var m=g[h];
var q=k>h?0:1;
if(o.contains(m)){r.splice(h+q-p,1);
p++
}}}return r
};
var e={downwardLeftToRight:function(h,g){return h.y-g.y||h.x-g.x
},rightwardTopToBottom:function(h,g){return h.x-g.x||h.y-g.y
}};
return f
}if(typeof define==="function"&&define.amd){define("packery/js/packer",["./rect"],c)
}else{if(typeof exports==="object"){module.exports=c(require("./rect"))
}else{var b=a.Packery=a.Packery||{};
b.Packer=c(b.Rect)
}}})(window);
(function(b){function a(h,f,e){var g=h("transform");
var d=function j(){f.Item.apply(this,arguments)
};
d.prototype=new f.Item();
var c=d.prototype._create;
d.prototype._create=function(){c.call(this);
this.rect=new e();
this.placeRect=new e()
};
d.prototype.dragStart=function(){this.getPosition();
this.removeTransitionStyles();
if(this.isTransitioning&&g){this.element.style[g]="none"
}this.getSize();
this.isPlacing=true;
this.needsPositioning=false;
this.positionPlaceRect(this.position.x,this.position.y);
this.isTransitioning=false;
this.didDrag=false
};
d.prototype.dragMove=function(k,n){this.didDrag=true;
var m=this.layout.size;
k-=m.paddingLeft;
n-=m.paddingTop;
this.positionPlaceRect(k,n)
};
d.prototype.dragStop=function(){this.getPosition();
var m=this.position.x!==this.placeRect.x;
var k=this.position.y!==this.placeRect.y;
this.needsPositioning=m||k;
this.didDrag=false
};
d.prototype.positionPlaceRect=function(k,n,m){this.placeRect.x=this.getPlaceRectCoord(k,true);
this.placeRect.y=this.getPlaceRectCoord(n,false,m)
};
d.prototype.getPlaceRectCoord=function(q,t,s){var k=t?"Width":"Height";
var u=this.size["outer"+k];
var p=this.layout[t?"columnWidth":"rowHeight"];
var m=this.layout.size["inner"+k];
if(!t){m=Math.max(m,this.layout.maxY);
if(!this.layout.rowHeight){m-=this.layout.gutter
}}var r;
if(p){p+=this.layout.gutter;
m+=t?this.layout.gutter:0;
q=Math.round(q/p);
var o;
if(this.layout.options.isHorizontal){o=!t?"floor":"ceil"
}else{o=t?"floor":"ceil"
}var n=Math[o](m/p);
n-=Math.ceil(u/p);
r=n
}else{r=m-u
}q=s?q:Math.min(q,r);
q*=p||1;
return Math.max(0,q)
};
d.prototype.copyPlaceRectPosition=function(){this.rect.x=this.placeRect.x;
this.rect.y=this.placeRect.y
};
d.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element);
this.layout.packer.addSpace(this.rect);
this.emitEvent("remove",[this])
};
return d
}if(typeof define==="function"&&define.amd){define("packery/js/item",["get-style-property/get-style-property","outlayer/outlayer","./rect"],a)
}else{if(typeof exports==="object"){module.exports=a(require("desandro-get-style-property"),require("outlayer"),require("./rect"))
}else{b.Packery.Item=a(b.getStyleProperty,b.Outlayer,b.Packery.Rect)
}}})(window);
/*!
 * Packery v1.3.2
 * bin-packing layout library
 * http://packery.metafizzy.co
 *
 * Commercial use requires one-time purchase of a commercial license
 * http://packery.metafizzy.co/license.html
 *
 * Non-commercial use is licensed under the GPL v3 License
 *
 * Copyright 2015 Metafizzy
 */
(function(b){function a(h,m,g,c,f,e){c.prototype.canFit=function(n){return this.width>=n.width-1&&this.height>=n.height-1
};
var k=g.create("packery");
k.Item=e;
k.prototype._create=function(){g.prototype._create.call(this);
this.packer=new f();
this.stamp(this.options.stamped);
var q=this;
this.handleDraggabilly={dragStart:function(r){q.itemDragStart(r.element)
},dragMove:function(r){q.itemDragMove(r.element,r.position.x,r.position.y)
},dragEnd:function(r){q.itemDragEnd(r.element)
}};
this.handleUIDraggable={start:function p(r){q.itemDragStart(r.currentTarget)
},drag:function o(r,s){q.itemDragMove(r.currentTarget,s.position.left,s.position.top)
},stop:function n(r){q.itemDragEnd(r.currentTarget)
}}
};
k.prototype._resetLayout=function(){this.getSize();
this._getMeasurements();
var n=this.packer;
if(this.options.isHorizontal){n.width=Number.POSITIVE_INFINITY;
n.height=this.size.innerHeight+this.gutter;
n.sortDirection="rightwardTopToBottom"
}else{n.width=this.size.innerWidth+this.gutter;
n.height=Number.POSITIVE_INFINITY;
n.sortDirection="downwardLeftToRight"
}n.reset();
this.maxY=0;
this.maxX=0
};
k.prototype._getMeasurements=function(){this._getMeasurement("columnWidth","width");
this._getMeasurement("rowHeight","height");
this._getMeasurement("gutter","width")
};
k.prototype._getItemLayoutPosition=function(n){this._packItem(n);
return n.rect
};
k.prototype._packItem=function(n){this._setRectSize(n.element,n.rect);
this.packer.pack(n.rect);
this._setMaxXY(n.rect)
};
k.prototype._setMaxXY=function(n){this.maxX=Math.max(n.x+n.width,this.maxX);
this.maxY=Math.max(n.y+n.height,this.maxY)
};
k.prototype._setRectSize=function(r,q){var o=m(r);
var n=o.outerWidth;
var p=o.outerHeight;
if(n||p){n=this._applyGridGutter(n,this.columnWidth);
p=this._applyGridGutter(p,this.rowHeight)
}q.width=Math.min(n,this.packer.width);
q.height=Math.min(p,this.packer.height)
};
k.prototype._applyGridGutter=function(o,n){if(!n){return o+this.gutter
}n+=this.gutter;
var q=o%n;
var p=q&&q<1?"round":"ceil";
o=Math[p](o/n)*n;
return o
};
k.prototype._getContainerSize=function(){if(this.options.isHorizontal){return{width:this.maxX-this.gutter}
}else{return{height:this.maxY-this.gutter}
}};
k.prototype._manageStamp=function(p){var o=this.getItem(p);
var n;
if(o&&o.isPlacing){n=o.placeRect
}else{var q=this._getElementOffset(p);
n=new c({x:this.options.isOriginLeft?q.left:q.right,y:this.options.isOriginTop?q.top:q.bottom})
}this._setRectSize(p,n);
this.packer.placed(n);
this._setMaxXY(n)
};
function j(o,n){return o.position.y-n.position.y||o.position.x-n.position.x
}function d(o,n){return o.position.x-n.position.x||o.position.y-n.position.y
}k.prototype.sortItemsByPosition=function(){var n=this.options.isHorizontal?d:j;
this.items.sort(n)
};
k.prototype.fit=function(p,n,q){var o=this.getItem(p);
if(!o){return
}this._getMeasurements();
this.stamp(o.element);
o.getSize();
o.isPlacing=true;
n=n===undefined?o.rect.x:n;
q=q===undefined?o.rect.y:q;
o.positionPlaceRect(n,q,true);
this._bindFitEvents(o);
o.moveTo(o.placeRect.x,o.placeRect.y);
this.layout();
this.unstamp(o.element);
this.sortItemsByPosition();
o.isPlacing=false;
o.copyPlaceRectPosition()
};
k.prototype._bindFitEvents=function(p){var q=this;
var o=0;
function n(){o++;
if(o!==2){return
}q.emitEvent("fitComplete",[q,p])
}p.on("layout",function(){n();
return true
});
this.on("layoutComplete",function(){n();
return true
})
};
k.prototype.resize=function(){var p=m(this.element);
var o=this.size&&p;
var n=this.options.isHorizontal?"innerHeight":"innerWidth";
if(o&&p[n]===this.size[n]){return
}this.layout()
};
k.prototype.itemDragStart=function(o){this.stamp(o);
var n=this.getItem(o);
if(n){n.dragStart()
}};
k.prototype.itemDragMove=function(q,n,s){var p=this.getItem(q);
if(p){p.dragMove(n,s)
}var r=this;
function o(){r.layout();
delete r.dragTimeout
}this.clearDragTimeout();
this.dragTimeout=setTimeout(o,40)
};
k.prototype.clearDragTimeout=function(){if(this.dragTimeout){clearTimeout(this.dragTimeout)
}};
k.prototype.itemDragEnd=function(p){var o=this.getItem(p);
var n;
if(o){n=o.didDrag;
o.dragStop()
}if(!o||(!n&&!o.needsPositioning)){this.unstamp(p);
return
}h.add(o.element,"is-positioning-post-drag");
var q=this._getDragEndLayoutComplete(p,o);
if(o.needsPositioning){o.on("layout",q);
o.moveTo(o.placeRect.x,o.placeRect.y)
}else{if(o){o.copyPlaceRectPosition()
}}this.clearDragTimeout();
this.on("layoutComplete",q);
this.layout()
};
k.prototype._getDragEndLayoutComplete=function(r,q){var p=q&&q.needsPositioning;
var n=0;
var o=p?2:1;
var t=this;
return function s(){n++;
if(n!==o){return true
}if(q){h.remove(q.element,"is-positioning-post-drag");
q.isPlacing=false;
q.copyPlaceRectPosition()
}t.unstamp(r);
t.sortItemsByPosition();
if(p){t.emitEvent("dragItemPositioned",[t,q])
}return true
}
};
k.prototype.bindDraggabillyEvents=function(n){n.on("dragStart",this.handleDraggabilly.dragStart);
n.on("dragMove",this.handleDraggabilly.dragMove);
n.on("dragEnd",this.handleDraggabilly.dragEnd)
};
k.prototype.bindUIDraggableEvents=function(n){n.on("dragstart",this.handleUIDraggable.start).on("drag",this.handleUIDraggable.drag).on("dragstop",this.handleUIDraggable.stop)
};
k.Rect=c;
k.Packer=f;
return k
}if(typeof define==="function"&&define.amd){define(["classie/classie","get-size/get-size","outlayer/outlayer","packery/js/rect","packery/js/packer","packery/js/item"],a)
}else{if(typeof exports==="object"){module.exports=a(require("desandro-classie"),require("get-size"),require("outlayer"),require("./rect"),require("./packer"),require("./item"))
}else{b.Packery=a(b.classie,b.getSize,b.Outlayer,b.Packery.Rect,b.Packery.Packer,b.Packery.Item)
}}})(window);
(function(){var a=typeof module!=="undefined"&&module.exports;
var b=typeof Element!=="undefined"&&"ALLOW_KEYBOARD_INPUT" in Element;
var c=(function(){var k;
var j;
var e=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];
var h=0;
var f=e.length;
var g={};
for(;
h<f;
h++){k=e[h];
if(k&&k[1] in document){for(h=0,j=k.length;
h<j;
h++){g[e[0][h]]=k[h]
}return g
}}return false
})();
var d={request:function(f){var e=c.requestFullscreen;
f=f||document.documentElement;
if(/5\.1[\.\d]* Safari/.test(navigator.userAgent)){f[e]()
}else{f[e](b&&Element.ALLOW_KEYBOARD_INPUT)
}},exit:function(){document[c.exitFullscreen]()
},toggle:function(e){if(this.isFullscreen){this.exit()
}else{this.request(e)
}},raw:c};
if(!c){if(a){module.exports=false
}else{window.screenfull=false
}return
}Object.defineProperties(d,{isFullscreen:{get:function(){return !!document[c.fullscreenElement]
}},element:{enumerable:true,get:function(){return document[c.fullscreenElement]
}},enabled:{enumerable:true,get:function(){return !!document[c.fullscreenEnabled]
}}});
if(a){module.exports=d
}else{window.screenfull=d
}})();
(function(h,q,g){var k={messages:{required:"The %s field is required.",matches:"Your %s entries do not match","default":"Please enter a valid %s.",valid_email:"The %s field must contain a valid email address.",valid_emails:"The %s field must contain all valid email addresses.",min_length:"Please enter a valid %s with a minimum of %s characters.",max_length:"The %s field must not exceed %s characters in length.",exact_length:"The %s field must be exactly %s characters in length.",greater_than:"The %s field must contain a number greater than %s.",less_than:"The %s field must contain a number less than %s.",alpha:"The %s field must only contain alphabetical characters.",alpha_numeric:"The %s field must only contain alpha-numeric characters.",alpha_dash:"The %s field must only contain alpha-numeric characters, underscores, and dashes.",numeric:"The %s field must contain only numbers.",integer:"The %s field must contain an integer.",decimal:"The %s field must contain a decimal number.",is_natural:"The %s field must contain only positive numbers.",is_natural_no_zero:"The %s field must contain a number greater than zero.",valid_ip:"The %s field must contain a valid IP.",valid_base64:"The %s field must contain a base64 string.",valid_credit_card:"The %s field must contain a valid credit card number.",is_file_type:"The %s field must contain only %s files.",valid_url:"The %s field must contain a valid URL."},callback:function(w){}};
var o=/^(.+?)\[(.+)\]$/,c=/^[0-9]+$/,a=/^\-?[0-9]+$/,v=/^\-?[0-9]*\.?[0-9]+$/,p=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,b=/^[a-z]+$/i,n=/^[a-z0-9]+$/i,r=/^[a-z0-9_\-]+$/i,s=/^[0-9]+$/i,m=/^[1-9][0-9]*$/i,u=/^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$/i,j=/[^a-zA-Z0-9\/\+=]/i,f=/^[\d\-\s]+$/,d=/^((http|https):\/\/(\w+:{0,1}\w*@)?(\S+)|)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/;
var t=function(w,A,E,D){this.callback=E||k.callback;
this.errors=[];
this.fields={};
this.form=this._formByNameOrNode(w)||{};
this.messages={};
this.handlers={};
this.conditionals={};
this.beforeCallback=D||function(){return true
};
for(var z=0,y=A.length;
z<y;
z++){var C=A[z];
if((!C.name&&!C.names)||!C.rules){continue
}if(C.names){for(var x=0,B=C.names.length;
x<B;
x++){this._addField(C,C.names[x])
}}else{this._addField(C,C.name)
}}this.originalSubmit=this.form.onsubmit;
this.form.onsubmit=$.proxy(this.submit,this)
},e=function(y,w){var x;
if((y.length>0)&&(y[0].type==="radio"||y[0].type==="checkbox")){for(x=0,elementLength=y.length;
x<elementLength;
x++){if(y[x].checked){return y[x][w]
}}return
}if(w==="value"){return $(y).val()
}return y[w]
};
t.prototype.submit=function(w){if(w&&w.preventDefault){w.preventDefault()
}else{if(event){event.returnValue=false
}}if(this.beforeCallback&&!this.beforeCallback()){return false
}try{return this._validateForm(w)&&(this.originalSubmit===g||this.originalSubmit())
}catch(x){}};
t.prototype.setMessage=function(x,w){this.messages[x]=w;
return this
};
t.prototype.AddField=function(y){if(y.names){for(var w=0,x=y.names.length;
w<x;
w++){this._addField(y,y.names[w])
}}else{this._addField(y,y.name)
}};
t.prototype.RemoveField=function(w){delete this.fields[w]
};
t.prototype.registerCallback=function(w,x){if(w&&typeof w==="string"&&x&&typeof x==="function"){this.handlers[w]=x
}return this
};
t.prototype.registerConditional=function(x,w){if(x&&typeof x==="string"&&w&&typeof w==="function"){this.conditionals[x]=w
}return this
};
t.prototype._formByNameOrNode=function(w){return(typeof w==="object")?w:q.forms[w]
};
t.prototype._addField=function(x,w){this.fields[w]={name:w,display:x.display||w,rules:x.rules,depends:x.depends,id:null,element:null,type:null,value:null,checked:null}
};
t.prototype._validateForm=function(w){this.errors=[];
for(var y in this.fields){if(this.fields.hasOwnProperty(y)){var z=this.fields[y]||{},x=this.form[z.name];
if(x&&x!==g){z.id=e(x,"id");
z.element=x;
z.type=(x.length>0)?x[0].type:x.type;
z.value=e(x,"value");
z.checked=e(x,"checked");
if(z.depends&&typeof z.depends==="function"){if(z.depends.call(this,z)){this._validateField(z)
}}else{if(z.depends&&typeof z.depends==="string"&&this.conditionals[z.depends]){if(this.conditionals[z.depends].call(this,z)){this._validateField(z)
}}else{this._validateField(z)
}}}}}if(typeof this.callback==="function"){this.callback(this.errors,w)
}if(this.errors.length>0){if(w&&w.preventDefault){w.preventDefault();
return false
}else{if(event){event.returnValue=false;
return false
}}}return true
};
t.prototype._validateField=function(F){var G=F.rules.split("|"),y=F.rules.indexOf("required"),C=(!F.value||F.value===""||F.value===g);
for(var D=0,z=G.length;
D<z;
D++){var x=G[D],A=null,E=false,B=o.exec(x);
if(y===-1&&x.indexOf("!callback_")===-1&&C){continue
}if(B){x=B[1];
A=B[2]
}if(x.charAt(0)==="!"){x=x.substring(1,x.length)
}if(typeof this._hooks[x]==="function"){if(!this._hooks[x].apply(this,[F,A])){E=true
}}else{if(x.substring(0,9)==="callback_"){x=x.substring(9,x.length);
if(typeof this.handlers[x]==="function"){if(this.handlers[x].apply(this,[F.value,A,F])===false){E=true
}}}}if(E){var w=this.messages[F.name+"."+x]||this.messages[x]||k.messages[x],H="An error has occurred with the "+F.display+" field.";
if(w){H=w.replace("%s",F.display);
if(A){H=H.replace("%s",(this.fields[A])?this.fields[A].display:A)
}}this.errors.push({id:F.id,element:F.element,name:F.name,message:H,rule:x});
break
}}};
t.prototype._hooks={required:function(x){var w=x.value;
if((x.type==="checkbox")||(x.type==="radio")){return(x.checked===true)
}return(w!==null&&w!=="")
},"default":function(x,w){return x.value!==w
},matches:function(y,x){var w=this.form[x];
if(w){return y.value===w.value
}return false
},valid_email:function(w){return p.test(w.value)
},valid_emails:function(y){var w=y.value.split(",");
for(var x=0,z=w.length;
x<z;
x++){if(!p.test(w[x])){return false
}}return true
},min_length:function(x,w){if(!c.test(w)){return false
}return(x.value.length>=parseInt(w,10))
},max_length:function(x,w){if(!c.test(w)){return false
}return(x.value.length<=parseInt(w,10))
},exact_length:function(x,w){if(!c.test(w)){return false
}return(x.value.length===parseInt(w,10))
},greater_than:function(w,x){if(!v.test(w.value)){return false
}return(parseFloat(w.value)>parseFloat(x))
},less_than:function(w,x){if(!v.test(w.value)){return false
}return(parseFloat(w.value)<parseFloat(x))
},alpha:function(w){return(b.test(w.value))
},alpha_numeric:function(w){return(n.test(w.value))
},alpha_dash:function(w){return(r.test(w.value))
},numeric:function(w){return(c.test(w.value))
},integer:function(w){return(a.test(w.value))
},decimal:function(w){return(v.test(w.value))
},is_natural:function(w){return(s.test(w.value))
},is_natural_no_zero:function(w){return(m.test(w.value))
},valid_ip:function(w){return(u.test(w.value))
},valid_base64:function(w){return(j.test(w.value))
},valid_url:function(w){return(d.test(w.value))
},valid_credit_card:function(w){w=w.value.toString().replace(/[.-\s]/g,"");
if(w.toString().length>19){return(false)
}sum=0;
mul=1;
l=w.length;
for(i=0;
i<l;
i++){digit=w.substring(l-i-1,l-i);
tproduct=parseInt(digit,10)*mul;
if(tproduct>=10){sum+=(tproduct%10)+1
}else{sum+=tproduct
}if(mul==1){mul++
}else{mul--
}}if((sum%10)==0){return(true)
}else{return(false)
}},is_file_type:function(B,z){if(B.type!=="file"){return true
}var y=B.value.substr((B.value.lastIndexOf(".")+1)),C=z.split(","),A=false,x=0,w=C.length;
for(x;
x<w;
x++){if(y==C[x]){A=true
}}return A
}};
h.FormValidator=t
})(window,document);
var swfobject=function(){var aq="undefined",aD="object",ab="Shockwave Flash",X="ShockwaveFlash.ShockwaveFlash",aE="application/x-shockwave-flash",ac="SWFObjectExprInst",ax="onreadystatechange",af=window,aL=document,aB=navigator,aa=false,Z=[aN],aG=[],ag=[],al=[],aJ,ad,ap,at,ak=false,aU=false,aH,an,aI=true,ah=function(){var a=typeof aL.getElementById!=aq&&typeof aL.getElementsByTagName!=aq&&typeof aL.createElement!=aq,e=aB.userAgent.toLowerCase(),c=aB.platform.toLowerCase(),h=c?/win/.test(c):/win/.test(e),k=c?/mac/.test(c):/mac/.test(e),g=/webkit/.test(e)?parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,d=!+"\v1",f=[0,0,0],m=null;
if(typeof aB.plugins!=aq&&typeof aB.plugins[ab]==aD){m=aB.plugins[ab].description;
if(m&&!(typeof aB.mimeTypes!=aq&&aB.mimeTypes[aE]&&!aB.mimeTypes[aE].enabledPlugin)){aa=true;
d=false;
m=m.replace(/^.*\s+(\S+\s+\S+$)/,"$1");
f[0]=parseInt(m.replace(/^(.*)\..*$/,"$1"),10);
f[1]=parseInt(m.replace(/^.*\.(.*)\s.*$/,"$1"),10);
f[2]=/[a-zA-Z]/.test(m)?parseInt(m.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0
}}else{if(typeof af.ActiveXObject!=aq){try{var j=new ActiveXObject(X);
if(j){m=j.GetVariable("$version");
if(m){d=true;
m=m.split(" ")[1].split(",");
f=[parseInt(m[0],10),parseInt(m[1],10),parseInt(m[2],10)]
}}}catch(b){}}}return{w3:a,pv:f,wk:g,ie:d,win:h,mac:k}
}(),aK=function(){if(!ah.w3){return
}if((typeof aL.readyState!=aq&&aL.readyState=="complete")||(typeof aL.readyState==aq&&(aL.getElementsByTagName("body")[0]||aL.body))){aP()
}if(!ak){if(typeof aL.addEventListener!=aq){aL.addEventListener("DOMContentLoaded",aP,false)
}if(ah.ie&&ah.win){aL.attachEvent(ax,function(){if(aL.readyState=="complete"){aL.detachEvent(ax,arguments.callee);
aP()
}});
if(af==top){(function(){if(ak){return
}try{aL.documentElement.doScroll("left")
}catch(a){setTimeout(arguments.callee,0);
return
}aP()
})()
}}if(ah.wk){(function(){if(ak){return
}if(!/loaded|complete/.test(aL.readyState)){setTimeout(arguments.callee,0);
return
}aP()
})()
}aC(aP)
}}();
function aP(){if(ak){return
}try{var b=aL.getElementsByTagName("body")[0].appendChild(ar("span"));
b.parentNode.removeChild(b)
}catch(a){return
}ak=true;
var d=Z.length;
for(var c=0;
c<d;
c++){Z[c]()
}}function aj(a){if(ak){a()
}else{Z[Z.length]=a
}}function aC(a){if(typeof af.addEventListener!=aq){af.addEventListener("load",a,false)
}else{if(typeof aL.addEventListener!=aq){aL.addEventListener("load",a,false)
}else{if(typeof af.attachEvent!=aq){aM(af,"onload",a)
}else{if(typeof af.onload=="function"){var b=af.onload;
af.onload=function(){b();
a()
}
}else{af.onload=a
}}}}}function aN(){if(aa){Y()
}else{am()
}}function Y(){var d=aL.getElementsByTagName("body")[0];
var b=ar(aD);
b.setAttribute("type",aE);
var a=d.appendChild(b);
if(a){var c=0;
(function(){if(typeof a.GetVariable!=aq){var e=a.GetVariable("$version");
if(e){e=e.split(" ")[1].split(",");
ah.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)]
}}else{if(c<10){c++;
setTimeout(arguments.callee,10);
return
}}d.removeChild(b);
a=null;
am()
})()
}else{am()
}}function am(){var g=aG.length;
if(g>0){for(var h=0;
h<g;
h++){var c=aG[h].id;
var n=aG[h].callbackFn;
var a={success:false,id:c};
if(ah.pv[0]>0){var j=aS(c);
if(j){if(ao(aG[h].swfVersion)&&!(ah.wk&&ah.wk<312)){ay(c,true);
if(n){a.success=true;
a.ref=av(c);
n(a)
}}else{if(aG[h].expressInstall&&au()){var e={};
e.data=aG[h].expressInstall;
e.width=j.getAttribute("width")||"0";
e.height=j.getAttribute("height")||"0";
if(j.getAttribute("class")){e.styleclass=j.getAttribute("class")
}if(j.getAttribute("align")){e.align=j.getAttribute("align")
}var f={};
var d=j.getElementsByTagName("param");
var m=d.length;
for(var k=0;
k<m;
k++){if(d[k].getAttribute("name").toLowerCase()!="movie"){f[d[k].getAttribute("name")]=d[k].getAttribute("value")
}}ae(e,f,c,n)
}else{aF(j);
if(n){n(a)
}}}}}else{ay(c,true);
if(n){var b=av(c);
if(b&&typeof b.SetVariable!=aq){a.success=true;
a.ref=b
}n(a)
}}}}}function av(b){var d=null;
var c=aS(b);
if(c&&c.nodeName=="OBJECT"){if(typeof c.SetVariable!=aq){d=c
}else{var a=c.getElementsByTagName(aD)[0];
if(a){d=a
}}}return d
}function au(){return !aU&&ao("6.0.65")&&(ah.win||ah.mac)&&!(ah.wk&&ah.wk<312)
}function ae(f,d,h,e){aU=true;
ap=e||null;
at={success:false,id:h};
var a=aS(h);
if(a){if(a.nodeName=="OBJECT"){aJ=aO(a);
ad=null
}else{aJ=a;
ad=h
}f.id=ac;
if(typeof f.width==aq||(!/%$/.test(f.width)&&parseInt(f.width,10)<310)){f.width="310"
}if(typeof f.height==aq||(!/%$/.test(f.height)&&parseInt(f.height,10)<137)){f.height="137"
}aL.title=aL.title.slice(0,47)+" - Flash Player Installation";
var b=ah.ie&&ah.win?"ActiveX":"PlugIn",c="MMredirectURL="+af.location.toString().replace(/&/g,"%26")+"&MMplayerType="+b+"&MMdoctitle="+aL.title;
if(typeof d.flashvars!=aq){d.flashvars+="&"+c
}else{d.flashvars=c
}if(ah.ie&&ah.win&&a.readyState!=4){var g=ar("div");
h+="SWFObjectNew";
g.setAttribute("id",h);
a.parentNode.insertBefore(g,a);
a.style.display="none";
(function(){if(a.readyState==4){a.parentNode.removeChild(a)
}else{setTimeout(arguments.callee,10)
}})()
}aA(f,d,h)
}}function aF(a){if(ah.ie&&ah.win&&a.readyState!=4){var b=ar("div");
a.parentNode.insertBefore(b,a);
b.parentNode.replaceChild(aO(a),b);
a.style.display="none";
(function(){if(a.readyState==4){a.parentNode.removeChild(a)
}else{setTimeout(arguments.callee,10)
}})()
}else{a.parentNode.replaceChild(aO(a),a)
}}function aO(b){var d=ar("div");
if(ah.win&&ah.ie){d.innerHTML=b.innerHTML
}else{var e=b.getElementsByTagName(aD)[0];
if(e){var a=e.childNodes;
if(a){var f=a.length;
for(var c=0;
c<f;
c++){if(!(a[c].nodeType==1&&a[c].nodeName=="PARAM")&&!(a[c].nodeType==8)){d.appendChild(a[c].cloneNode(true))
}}}}}return d
}function aA(e,g,c){var d,a=aS(c);
if(ah.wk&&ah.wk<312){return d
}if(a){if(typeof e.id==aq){e.id=c
}if(ah.ie&&ah.win){var f="";
for(var j in e){if(e[j]!=Object.prototype[j]){if(j.toLowerCase()=="data"){g.movie=e[j]
}else{if(j.toLowerCase()=="styleclass"){f+=' class="'+e[j]+'"'
}else{if(j.toLowerCase()!="classid"){f+=" "+j+'="'+e[j]+'"'
}}}}}var h="";
for(var k in g){if(g[k]!=Object.prototype[k]){h+='<param name="'+k+'" value="'+g[k]+'" />'
}}a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>";
ag[ag.length]=e.id;
d=aS(e.id)
}else{var b=ar(aD);
b.setAttribute("type",aE);
for(var m in e){if(e[m]!=Object.prototype[m]){if(m.toLowerCase()=="styleclass"){b.setAttribute("class",e[m])
}else{if(m.toLowerCase()!="classid"){b.setAttribute(m,e[m])
}}}}for(var n in g){if(g[n]!=Object.prototype[n]&&n.toLowerCase()!="movie"){aQ(b,n,g[n])
}}a.parentNode.replaceChild(b,a);
d=b
}}return d
}function aQ(b,d,c){var a=ar("param");
a.setAttribute("name",d);
a.setAttribute("value",c);
b.appendChild(a)
}function aw(a){var b=aS(a);
if(b&&b.nodeName=="OBJECT"){if(ah.ie&&ah.win){b.style.display="none";
(function(){if(b.readyState==4){aT(a)
}else{setTimeout(arguments.callee,10)
}})()
}else{b.parentNode.removeChild(b)
}}}function aT(a){var b=aS(a);
if(b){for(var c in b){if(typeof b[c]=="function"){b[c]=null
}}b.parentNode.removeChild(b)
}}function aS(a){var c=null;
try{c=aL.getElementById(a)
}catch(b){}return c
}function ar(a){return aL.createElement(a)
}function aM(a,c,b){a.attachEvent(c,b);
al[al.length]=[a,c,b]
}function ao(a){var b=ah.pv,c=a.split(".");
c[0]=parseInt(c[0],10);
c[1]=parseInt(c[1],10)||0;
c[2]=parseInt(c[2],10)||0;
return(b[0]>c[0]||(b[0]==c[0]&&b[1]>c[1])||(b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]))?true:false
}function az(b,f,a,c){if(ah.ie&&ah.mac){return
}var e=aL.getElementsByTagName("head")[0];
if(!e){return
}var g=(a&&typeof a=="string")?a:"screen";
if(c){aH=null;
an=null
}if(!aH||an!=g){var d=ar("style");
d.setAttribute("type","text/css");
d.setAttribute("media",g);
aH=e.appendChild(d);
if(ah.ie&&ah.win&&typeof aL.styleSheets!=aq&&aL.styleSheets.length>0){aH=aL.styleSheets[aL.styleSheets.length-1]
}an=g
}if(ah.ie&&ah.win){if(aH&&typeof aH.addRule==aD){aH.addRule(b,f)
}}else{if(aH&&typeof aL.createTextNode!=aq){aH.appendChild(aL.createTextNode(b+" {"+f+"}"))
}}}function ay(a,c){if(!aI){return
}var b=c?"visible":"hidden";
if(ak&&aS(a)){aS(a).style.visibility=b
}else{az("#"+a,"visibility:"+b)
}}function ai(b){var a=/[\\\"<>\.;]/;
var c=a.exec(b)!=null;
return c&&typeof encodeURIComponent!=aq?encodeURIComponent(b):b
}var aR=function(){if(ah.ie&&ah.win){window.attachEvent("onunload",function(){var a=al.length;
for(var b=0;
b<a;
b++){al[b][0].detachEvent(al[b][1],al[b][2])
}var d=ag.length;
for(var c=0;
c<d;
c++){aw(ag[c])
}for(var e in ah){ah[e]=null
}ah=null;
for(var f in swfobject){swfobject[f]=null
}swfobject=null
})
}}();
return{registerObject:function(a,e,c,b){if(ah.w3&&a&&e){var d={};
d.id=a;
d.swfVersion=e;
d.expressInstall=c;
d.callbackFn=b;
aG[aG.length]=d;
ay(a,false)
}else{if(b){b({success:false,id:a})
}}},getObjectById:function(a){if(ah.w3){return av(a)
}},embedSWF:function(m,e,h,f,c,a,b,j,g,k){var d={success:false,id:e};
if(ah.w3&&!(ah.wk&&ah.wk<312)&&m&&e&&h&&f&&c){ay(e,false);
aj(function(){h+="";
f+="";
var s={};
if(g&&typeof g===aD){for(var q in g){s[q]=g[q]
}}s.data=m;
s.width=h;
s.height=f;
var p={};
if(j&&typeof j===aD){for(var r in j){p[r]=j[r]
}}if(b&&typeof b===aD){for(var n in b){if(typeof p.flashvars!=aq){p.flashvars+="&"+n+"="+b[n]
}else{p.flashvars=n+"="+b[n]
}}}if(ao(c)){var o=aA(s,p,e);
if(s.id==e){ay(e,true)
}d.success=true;
d.ref=o
}else{if(a&&au()){s.data=a;
ae(s,p,e,k);
return
}else{ay(e,true)
}}if(k){k(d)
}})
}else{if(k){k(d)
}}},switchOffAutoHideShow:function(){aI=false
},ua:ah,getFlashPlayerVersion:function(){return{major:ah.pv[0],minor:ah.pv[1],release:ah.pv[2]}
},hasFlashPlayerVersion:ao,createSWF:function(a,b,c){if(ah.w3){return aA(a,b,c)
}else{return undefined
}},showExpressInstall:function(b,a,d,c){if(ah.w3&&au()){ae(b,a,d,c)
}},removeSWF:function(a){if(ah.w3){aw(a)
}},createCSS:function(b,a,c,d){if(ah.w3){az(b,a,c,d)
}},addDomLoadEvent:aj,addLoadEvent:aC,getQueryParamValue:function(b){var a=aL.location.search||aL.location.hash;
if(a){if(/\?/.test(a)){a=a.split("?")[1]
}if(b==null){return ai(a)
}var c=a.split("&");
for(var d=0;
d<c.length;
d++){if(c[d].substring(0,c[d].indexOf("="))==b){return ai(c[d].substring((c[d].indexOf("=")+1)))
}}}return""
},expressInstallCallback:function(){if(aU){var a=aS(ac);
if(a&&aJ){a.parentNode.replaceChild(aJ,a);
if(ad){ay(ad,true);
if(ah.ie&&ah.win){aJ.style.display="block"
}}if(ap){ap(at)
}}aU=false
}}}
}();
if(typeof JSON!=="object"){JSON={}
}(function(){function f(n){return n<10?"0"+n:n
}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null
};
String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()
}
}var cx,escapable,gap,indent,meta,rep;
function quote(string){escapable.lastIndex=0;
return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];
return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)
})+'"':'"'+string+'"'
}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];
if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)
}if(typeof rep==="function"){value=rep.call(holder,key,value)
}switch(typeof value){case"string":return quote(value);
case"number":return isFinite(value)?String(value):"null";
case"boolean":case"null":return String(value);
case"object":if(!value){return"null"
}gap+=indent;
partial=[];
if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;
for(i=0;
i<length;
i+=1){partial[i]=str(i,value)||"null"
}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";
gap=mind;
return v
}if(rep&&typeof rep==="object"){length=rep.length;
for(i=0;
i<length;
i+=1){if(typeof rep[i]==="string"){k=rep[i];
v=str(k,value);
if(v){partial.push(quote(k)+(gap?": ":":")+v)
}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);
if(v){partial.push(quote(k)+(gap?": ":":")+v)
}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";
gap=mind;
return v
}}if(typeof JSON.stringify!=="function"){escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};
JSON.stringify=function(value,replacer,space){var i;
gap="";
indent="";
if(typeof space==="number"){for(i=0;
i<space;
i+=1){indent+=" "
}}else{if(typeof space==="string"){indent=space
}}rep=replacer;
if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")
}return str("",{"":value})
}
}if(typeof JSON.parse!=="function"){cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
JSON.parse=function(text,reviver){var j;
function walk(holder,key){var k,v,value=holder[key];
if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);
if(v!==undefined){value[k]=v
}else{delete value[k]
}}}}return reviver.call(holder,key,value)
}text=String(text);
cx.lastIndex=0;
if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)
})
}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");
return typeof reviver==="function"?walk({"":j},""):j
}throw new SyntaxError("JSON.parse")
}
}}());
var Events=[{city:"Melbourne",local:"Your Time",startDate:20180101,endDate:20180325,offset:10,dst:"AUSTRALIA"},{city:"Sakhir",local:"Your Time",startDate:20180326,endDate:20180408,offset:3,dst:0},{city:"Shanghai",local:"Your Time",startDate:20180409,endDate:20180415,offset:8,dst:0},{city:"Baku",local:"Your Time",startDate:20180416,endDate:20180429,offset:4,dst:0},{city:"Catalunya",local:"Your Time",startDate:20180430,endDate:20180513,offset:1,dst:"EUROPE"},{city:"Monte Carlo",local:"Your Time",startDate:20180514,endDate:20180527,offset:1,dst:"EUROPE"},{city:"Montral",local:"Your Time",startDate:20180528,endDate:20180610,offset:-5,dst:"USA"},{city:"Le Castellet",local:"Your Time",startDate:20180611,endDate:20180624,offset:1,dst:"EUROPE"},{city:"Spielberg",local:"Your Time",startDate:20180625,endDate:20180701,offset:1,dst:"EUROPE"},{city:"Silverstone",local:"Your Time",startDate:20180702,endDate:20180708,offset:1,dst:0},{city:"Hockenheim",local:"Your Time",startDate:20160709,endDate:20160722,offset:1,dst:"EUROPE"},{city:"Budapest",local:"Your Time",startDate:20180723,endDate:20180729,offset:1,dst:"EUROPE"},{city:"Spa-Francorchamps",local:"Your Time",startDate:20180730,endDate:20180826,offset:1,dst:"EUROPE"},{city:"Monza",local:"Your Time",startDate:20180827,endDate:20180902,offset:1,dst:"EUROPE"},{city:"Singapore",local:"Your Time",startDate:20180903,endDate:20180916,offset:8,dst:0},{city:"Sochi",local:"Your Time",startDate:20180917,endDate:20180930,offset:2,dst:"EUROPE"},{city:"Suzuka",local:"Your Time",startDate:20181001,endDate:20181007,offset:9,dst:0},{city:"Austin",local:"Your Time",startDate:20181008,endDate:20181021,offset:-6,dst:"USA"},{city:"Mexico City",local:"Your Time",startDate:20181022,endDate:20181028,offset:-6,dst:"MEXICO"},{city:"So Paulo",local:"Your Time",startDate:20181029,endDate:20181111,offset:-3,dst:"BRAZIL"},{city:"Yas Marina",local:"Your Time",startDate:20181112,endDate:20181125,offset:4,dst:0}];
"use strict";
var SUN=0;
var MON=1;
var TUE=2;
var WED=3;
var THU=4;
var FRI=5;
var SAT=6;
var EUROPE=10;
var USA=20;
var MEXICO=21;
var GUATEMALA=22;
var CUBA=23;
var BRAZIL=30;
var CHILE=31;
var PARAGUAY=32;
var URUGUAY=33;
var ARGENTINA=34;
var EGYPT=40;
var NAMIBIA=41;
var MOROCCO=42;
var JORDAN=50;
var SYRIA=51;
var IRAQ=52;
var ISRAEL=53;
var PAKISTAN=54;
var AUSTRALIA=60;
var AUSTRALIA_WESTERN=61;
var NEW_ZEALAND=62;
function TimezoneUtil(){}function dstToComponents(a){var c={hour:0,minute:0,minutes:0};
if(a!==null){var e=Math.floor(Math.abs(a)/100);
if(a<0){e=-e
}var b=a%100;
var d=e*60+b;
c={hour:e,minute:b,minutes:d}
}return c
}function firstWeekday(d,c){var e=null;
if((c!==null)&&(d!==null)&&(d>=0)){d=d%7;
var b=new Date(c.getFullYear(),c.getMonth(),1);
var a=b.getDay();
e=b.getDate();
if(a!==d){if(a>d){a-=7
}e-=(a-d)
}}return e
}function lastWeekday(e,d){var a=null;
if((d!==null)&&(e!==null)&&(e>=0)){e=e%7;
var c=new Date(d.getFullYear(),d.getMonth()+1,0);
var b=c.getDay();
a=c.getDate();
if(b!==e){if(b<e){b+=7
}a-=(b-e)
}}return a
}function getDST(c,a){var e=0;
var d=c.getUTCMonth()+1;
var b=c.getUTCDate();
switch(a){case"EUROPE":if((d>3)&&(d<10)){e=+100
}else{if((d===3)&&(b>=lastWeekday(SUN,c))){e=+100
}else{if((d===10)&&(b<lastWeekday(SUN,c))){e=+100
}}}break;
case"USA":if((d>3)&&(d<11)){e=+100
}else{if((d===3)&&(b>=firstWeekday(SUN,c)+7)){e=+100
}else{if((d===11)&&(b<firstWeekday(SUN,c))){e=+100
}}}break;
case"MEXICO":if((d>4)&&(d<10)){e=+100
}else{if((d===4)&&(b>=firstWeekday(SUN,c))){e=+100
}else{if((d===10)&&(b<lastWeekday(SUN,c))){e=+100
}}}break;
case"GUATEMALA":break;
case"CUBA":if((d>3)&&(d<10)){e=+100
}else{if((d===3)&&(b>=firstWeekday(SUN,c)+7)){e=+100
}else{if((d===10)&&(b<lastWeekday(SUN,c))){e=+100
}}}break;
case"BRAZIL":if((d>10)||(d<2)){e=+100
}else{if((d===10)&&(b>=firstWeekday(SUN,c)+14)){e=+100
}else{if((d===2)&&(b<firstWeekday(SUN,c)+14)){e=+100
}}}break;
case"CHILE":if((d>10)||(d<4)){e=+100
}else{if((d===10)&&(b>=firstWeekday(SUN,c)+7)){e=+100
}else{if((d===4)&&(b<firstWeekday(SUN,c))){e=+100
}}}break;
case"PARAGUAY":if((d>10)||(d<4)){e=+100
}else{if((d===10)&&(b>=firstWeekday(SUN,c))){e=+100
}else{if((d===4)&&(b<firstWeekday(SUN,c)+7)){e=+100
}}}break;
case"URUGUAY":if((d>10)||(d<3)){e=+100
}else{if((d===10)&&(b>=firstWeekday(SUN,c))){e=+100
}else{if((d===3)&&(b<firstWeekday(SUN,c)+7)){e=+100
}}}break;
case"ARGENTINA":break;
case"EGYPT":if((d>4)&&(d<8)){e=+100
}else{if((d===4)&&(b>=lastWeekday(FRI,c))){e=+100
}else{if((d===8)&&(b<firstWeekday(FRI,c))){e=+100
}}}break;
case"NAMIBIA":if((d>9)||(d<4)){e=+100
}else{if((d===9)&&(b>=firstWeekday(SUN,c))){e=+100
}else{if((d===4)&&(b<firstWeekday(SUN,c))){e=+100
}}}break;
case"MOROCCO":break;
case"JORDAN":if((d>3)&&(d<10)){e=+100
}else{if((d===3)&&(b>=lastWeekday(FRI,c))){e=+100
}else{if((d===10)&&(b<lastWeekday(FRI,c))){e=+100
}}}break;
case"SYRIA":if((d>4)&&(d<10)){e=+100
}else{if((d===4)&&(b>=firstWeekday(FRI,c))){e=+100
}else{if((d===10)&&(b<lastWeekday(FRI,c))){e=+100
}}}break;
case"IRAQ":break;
case"ISRAEL":switch(c.getUTCFullYear()){case 2010:if((d>3)&&(d<9)){e=+100
}else{if((d===3)&&(b>=26)){e=+100
}else{if((d===9)&&(b<12)){e=+100
}}}break;
case 2011:if((d>4)&&(d<10)){e=+100
}else{if((d===4)&&(b>=1)){e=+100
}else{if((d===10)&&(b<2)){e=+100
}}}break;
case 2012:if((d>3)&&(d<9)){e=+100
}else{if((d===3)&&(b>=30)){e=+100
}else{if((d===9)&&(b<23)){e=+100
}}}break;
case 2013:if((d>3)&&(d<9)){e=+100
}else{if((d===3)&&(b>=29)){e=+100
}else{if((d===9)&&(b<8)){e=+100
}}}break;
case 2014:if((d>3)&&(d<9)){e=+100
}else{if((d===3)&&(b>=28)){e=+100
}else{if((d===9)&&(b<28)){e=+100
}}}break;
case 2015:if((d>3)&&(d<9)){e=+100
}else{if((d===3)&&(b>=27)){e=+100
}else{if((d===9)&&(b<20)){e=+100
}}}break;
default:if((d>3)&&(d<9)){e=+100
}else{if((d===3)&&(b>=lastWeekday(FRI,c))){e=+100
}else{if((d===9)&&(b<20)){e=+100
}}}break
}break;
case"PAKISTAN":if((d>4)&&(d<11)){e=+100
}else{if((d===4)&&(b>=firstWeekday(THU,c)+14)){e=+100
}else{if((d===11)&&(b<firstWeekday(MON,c))){e=+100
}}}break;
case"AUSTRALIA":if((d>10)||(d<4)){e=+100
}else{if((d===10)&&(b>=firstWeekday(SUN,c))){e=+100
}else{if((d===4)&&(b<firstWeekday(SUN,c))){e=+100
}}}break;
case"AUSTRALIA_WESTERN":break;
case"NEW_ZEALAND":if((d>9)||(d<4)){e=+100
}else{if((d===9)&&(b>=lastWeekday(SUN,c))){e=+100
}else{if((d===4)&&(b<firstWeekday(SUN,c))){e=+100
}}}break
}return e
}function foreignToLocal(d,b,c){var a=dstToComponents(b+getDST(d,c));
return new Date(d.getTime()-((d.getTimezoneOffset()+a.minutes)*60000))
}function localToForeign(d,b,c){var a=dstToComponents(b+getDST(d,c));
return new Date(d.getTime()+((d.getTimezoneOffset()+a.minutes)*60000))
}
/*!
 * AKQA patched version for use in the Race calendar component. Deviations in
 * the code are marked as below and fix issues regarding memory leaks when
 * removing the plugin
 *
 *    [AKQA]-------------------------------------------------------------------
 *    // Original code commented out at top of block
 *    ...additional code statements...
 *    [/AKQA]------------------------------------------------------------------
 */
(function($){var imgFolder="img";
if(Modernizr.retina==true){}var imageExtension="png";
if(Modernizr.svg==true){imageExtension="svg"
}$.fn.rolexClock=function(options,theCityId){var __killSwitches={to_raf_shim:0,to_time_display:0,to_engine:0,to_static_watch:0,raf_engine:0,raf_round_time:0};
var params={LANG:"en",contentWidth:0,contentHeight:0,flashname:"",fallback:"",trackingurl:"",leadingZeros:true,amPm:false,time24hours:true,showText:true,showTime:false,showDay:false,selectedCityId:theCityId,clockWidth:0,clockHeight:0,globalXcenter:0,globalYcenter:0,globalXscale:0,globalYscale:0,handsFolder:"css/images/hands/green/",watchContainerID:"clock",handsParams:{svg:{hour:{width:3},minute:{width:3},second:{width:2,xrotation:2}},png:{hour:{width:5},minute:{width:5},second:{width:3,xrotation:1.5}}},forceFlash:false,forceFallback:false,clocktimeAtEvent:false,isCountdownClock:false,countdownNumbersOnly:false,onclickCity:function(){},onclickYourtime:function(){},showDefaultCity:false,showLocalOnly:false,dateList:Events,isCompetitionWithCarousel:false,competitionParams:{interval:1000,tag:"div"},blockClass:"block",activeClass:"active"};
var methods={activeBlock:function(){if(typeof arguments[0]==="string"){var target=$(".block#"+arguments[0]);
if(target.length>0){target.trigger("click")
}}}};
var _competition={index:-1,isAnimationActive:true,timer:undefined,data:[]};
if(options&&typeof options==="string"&&methods[options]){return methods[options].apply(this,Array.prototype.slice.call(arguments,1))
}else{if(options&&typeof options==="object"){params=$.extend({},params,options)
}}function init(){var defaultEvent;
if(params.isCountdownClock){defaultEvent={city:params.selectedCityId,local:"Your Time",startDate:"19700101",endDate:"99990101",offset:0,dst:"EUROPE",cdtext:"ROLEX COUNTDOWN",cdyear:"1970",cdmonth:"11",cdday:"29",cdhour:"09",cdmin:"00"}
}else{defaultEvent={city:params.selectedCityId,local:"Your Time",startDate:"19700101",endDate:"99990101",offset:0,dst:"EUROPE"}
}if(params.isCompetitionWithCarousel){defaultEvent.competition={}
}if(params.dateList===undefined){params.dateList=[defaultEvent]
}else{params.dateList.push(defaultEvent)
}}init();
function showClock(){$(".ui-loader").hide();
$("#fallback").hide();
$(".content").show()
}window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){__killSwitches.to_raf_shim=window.setTimeout(callback,1000/10)
}
})();
var image_folder=params.handsFolder;
var all_parts=new Array("hours","minutes","seconds","top_center");
var hours_p=new Array;
hours_p.url="hours."+imageExtension+"";
hours_p.update_mode="hours_base_12";
hours_p.width=params.handsParams[imageExtension].hour.width;
hours_p.height=25;
hours_p.xrotation=2;
hours_p.yrotation=20;
hours_p.xcenteroffset=0;
hours_p.ycenteroffset=0;
var minutes_p=new Array;
minutes_p.url="minutes."+imageExtension+"";
minutes_p.update_mode="minutes_base_60";
minutes_p.width=params.handsParams[imageExtension].minute.width;
minutes_p.height=32;
minutes_p.xrotation=1.5;
minutes_p.yrotation=27;
minutes_p.xcenteroffset=0;
minutes_p.ycenteroffset=0;
var seconds_p=new Array;
seconds_p.url="seconds."+imageExtension+"";
seconds_p.update_mode="seconds_base_60";
seconds_p.width=params.handsParams[imageExtension].second.width;
seconds_p.height=39;
seconds_p.xrotation=params.handsParams[imageExtension].second.xrotation;
seconds_p.yrotation=31;
seconds_p.xcenteroffset=0;
seconds_p.ycenteroffset=0;
seconds_p.watch_x_center=0;
seconds_p.watch_y_center=0;
var top_center_p=new Array;
top_center_p.url="center.png";
top_center_p.width=5;
top_center_p.height=5;
top_center_p.xcenteroffset=-2.5;
top_center_p.ycenteroffset=-2.5;
var cyclop_mask_p=new Array;
var global_watch_p=new Array;
global_watch_p.rotation_angle=0;
global_watch_p.width=params.clockWidth;
global_watch_p.height=params.clockHeight;
global_watch_p.xscale=params.globalXscale;
global_watch_p.yscale=params.globalYscale;
function countProperties(a){var b=0;
for(var c in a){if(a.hasOwnProperty(c)){++b
}}return b
}var partsContainer=document.createElement("div");
partsContainer.style.position="absolute";
partsContainer.style.width="1px";
partsContainer.style.height="1px";
partsContainer.style.padding="0";
partsContainer.style.margin="-1px";
partsContainer.style.overflow="hidden";
partsContainer.style.clip="rect(0, 0, 0, 0)";
partsContainer.style.border="0";
document.getElementsByTagName("body")[0].appendChild(partsContainer);
var loadSpriteErrors=[];
function loadSprite(i,src){var deferred=$.Deferred();
all_p[i]["image"]=document.createElement("img");
all_p[i]["image"].id="p_"+all_parts[i];
all_p[i]["image"].onload=function(){deferred.resolve()
};
all_p[i]["image"].onerror=function(){loadSpriteErrors.push(src);
$(".content").hide();
$(".fallback").show()
};
partsContainer.appendChild(all_p[i]["image"]);
all_p[i]["image"].src=src;
return deferred.promise()
}var all_p=new Array;
var all_p_to_be_loaded=all_parts.length;
for(i=0;
i<all_parts.length;
i++){all_p[i]=eval(all_parts[i]+"_p")
}var loaders=[];
for(var i=0;
i<all_parts.length;
i++){if(all_p[i]["url"]!=null){loaders.push(loadSprite(i,image_folder+all_p[i]["url"]));
if(!all_p[i]["fileformat"]){all_p[i]["fileformat"]=all_p[i]["url"].substring(all_p[i]["url"].length-3,all_p[i]["url"].length)
}}else{all_p_to_be_loaded--
}if(!all_p[i]["xcenteroffset"]){all_p[i]["xcenteroffset"]=0
}if(!all_p[i]["ycenteroffset"]){all_p[i]["ycenteroffset"]=0
}if(!all_p[i]["xoriginoffset"]){all_p[i]["xoriginoffset"]=null
}if(!all_p[i]["yoriginoffset"]){all_p[i]["yoriginoffset"]=null
}if(!all_p[i]["xcenter"]){all_p[i]["xcenter"]=0
}if(!all_p[i]["ycenter"]){all_p[i]["ycenter"]=0
}if(!all_p[i]["update_mode"]){all_p[i]["update_mode"]=null
}if(!all_p[i]["watch_x_center"]){all_p[i]["offset_alternate_x_center"]=0
}else{all_p[i]["offset_alternate_x_center"]=global_watch_p[all_p[i]["watch_x_center"]]-global_watch_p.xcenter
}if(!all_p[i]["watch_y_center"]){all_p[i]["offset_alternate_y_center"]=0
}else{all_p[i]["offset_alternate_y_center"]=global_watch_p[all_p[i]["watch_y_center"]]-global_watch_p.ycenter
}}$.when.apply(null,loaders).done(function(){all_p_to_be_loaded-=loaders.length
});
function f_calculate_additional_vars(){if(GLOBAL_LIGHT_SOURCE!=undefined){TOP_LIGHT_START=GLOBAL_LIGHT_SOURCE-90;
TOP_LIGHT_END=GLOBAL_LIGHT_SOURCE+90;
BOTTOM_LIGHT_START=GLOBAL_LIGHT_SOURCE-90;
BOTTOM_LIGHT_END=GLOBAL_LIGHT_SOURCE+90;
TOP_SHADE_START=GLOBAL_LIGHT_SOURCE+90;
TOP_SHADE_END=GLOBAL_LIGHT_SOURCE-90;
BOTTOM_SHADE_START=GLOBAL_LIGHT_SOURCE+90;
BOTTOM_SHADE_END=GLOBAL_LIGHT_SOURCE-90;
LEFT_LIGHT_START=GLOBAL_LIGHT_SOURCE;
LEFT_LIGHT_END=GLOBAL_LIGHT_SOURCE+180;
RIGHT_LIGHT_START=GLOBAL_LIGHT_SOURCE+180;
RIGHT_LIGHT_END=GLOBAL_LIGHT_SOURCE;
LEFT_SHADE_START=GLOBAL_LIGHT_SOURCE+180;
LEFT_SHADE_END=GLOBAL_LIGHT_SOURCE;
RIGHT_SHADE_START=GLOBAL_LIGHT_SOURCE;
RIGHT_SHADE_END=GLOBAL_LIGHT_SOURCE+180
}if(GLOBAL_MIN_ALPHA!=undefined){TOP_LIGHT_MIN=BOTTOM_LIGHT_MIN=TOP_SHADE_MIN=BOTTOM_SHADE_MIN=LEFT_LIGHT_MIN=RIGHT_LIGHT_MIN=LEFT_SHADE_MIN=RIGHT_SHADE_MIN=GLOBAL_MIN_ALPHA
}if(GLOBAL_MAX_ALPHA!=undefined){TOP_LIGHT_MAX=BOTTOM_LIGHT_MAX=TOP_SHADE_MAX=BOTTOM_SHADE_MAX=LEFT_LIGHT_MAX=RIGHT_LIGHT_MAX=LEFT_SHADE_MAX=RIGHT_SHADE_MAX=GLOBAL_MAX_ALPHA
}while(TOP_LIGHT_START>TOP_LIGHT_END){TOP_LIGHT_END+=360
}while(BOTTOM_LIGHT_START>BOTTOM_LIGHT_END){BOTTOM_LIGHT_END+=360
}while(TOP_SHADE_START>TOP_SHADE_END){TOP_SHADE_END+=360
}while(BOTTOM_SHADE_START>BOTTOM_SHADE_END){BOTTOM_SHADE_END+=360
}while(LEFT_LIGHT_START>LEFT_LIGHT_END){LEFT_LIGHT_END+=360
}while(RIGHT_LIGHT_START>RIGHT_LIGHT_END){RIGHT_LIGHT_END+=360
}while(LEFT_SHADE_START>LEFT_SHADE_END){LEFT_SHADE_END+=360
}while(RIGHT_SHADE_START>RIGHT_SHADE_END){RIGHT_SHADE_END+=360
}while(TOP_LIGHT_END>360){TOP_LIGHT_START-=360;
TOP_LIGHT_END-=360
}while(BOTTOM_LIGHT_END>360){BOTTOM_LIGHT_START-=360;
BOTTOM_LIGHT_END-=360
}while(TOP_SHADE_END>360){TOP_SHADE_START-=360;
TOP_SHADE_END-=360
}while(BOTTOM_SHADE_END>360){BOTTOM_SHADE_START-=360;
BOTTOM_SHADE_END-=360
}while(LEFT_LIGHT_END>360){LEFT_LIGHT_START-=360;
LEFT_LIGHT_END-=360
}while(RIGHT_LIGHT_END>360){RIGHT_LIGHT_START-=360;
RIGHT_LIGHT_END-=360
}while(LEFT_SHADE_END>360){LEFT_SHADE_START-=360;
LEFT_SHADE_END-=360
}while(RIGHT_SHADE_END>360){RIGHT_SHADE_START-=360;
RIGHT_SHADE_END-=360
}if(TOP_LIGHT_START<TOP_LIGHT_END){top_light_max_point=(TOP_LIGHT_START+TOP_LIGHT_END)/2%360;
top_light_range=TOP_LIGHT_END-TOP_LIGHT_START
}else{top_light_max_point=(TOP_LIGHT_START+TOP_LIGHT_END)%360/2;
top_light_range=360+TOP_LIGHT_END-TOP_LIGHT_START
}top_light_mid_range=top_light_range/2;
if(BOTTOM_LIGHT_START<BOTTOM_LIGHT_END){bottom_light_max_point=(BOTTOM_LIGHT_START+BOTTOM_LIGHT_END)/2%360;
bottom_light_range=BOTTOM_LIGHT_END-BOTTOM_LIGHT_START
}else{bottom_light_max_point=(BOTTOM_LIGHT_START+BOTTOM_LIGHT_END)%360/2;
bottom_light_range=360+BOTTOM_LIGHT_END-BOTTOM_LIGHT_START
}bottom_light_mid_range=bottom_light_range/2;
if(TOP_SHADE_START<TOP_SHADE_END){top_shade_max_point=(TOP_SHADE_START+TOP_SHADE_END)/2%360;
top_shade_range=TOP_SHADE_END-TOP_SHADE_START
}else{top_shade_max_point=(TOP_SHADE_START+TOP_SHADE_END)%360/2;
top_shade_range=360+TOP_SHADE_END-TOP_SHADE_START
}top_shade_mid_range=top_shade_range/2;
if(BOTTOM_SHADE_START<BOTTOM_SHADE_END){bottom_shade_max_point=(BOTTOM_SHADE_START+BOTTOM_SHADE_END)/2%360;
bottom_shade_range=BOTTOM_SHADE_END-BOTTOM_SHADE_START
}else{bottom_shade_max_point=(BOTTOM_SHADE_START+BOTTOM_SHADE_END)%360/2;
bottom_shade_range=360+BOTTOM_SHADE_END-BOTTOM_SHADE_START
}bottom_shade_mid_range=bottom_shade_range/2;
if(LEFT_LIGHT_START<LEFT_LIGHT_END){left_light_max_point=(LEFT_LIGHT_START+LEFT_LIGHT_END)/2%360;
left_light_range=LEFT_LIGHT_END-LEFT_LIGHT_START
}else{left_light_max_point=(LEFT_LIGHT_START+LEFT_LIGHT_END)%360/2;
left_light_range=360+LEFT_LIGHT_END-LEFT_LIGHT_START
}left_light_mid_range=left_light_range/2;
if(RIGHT_LIGHT_START<RIGHT_LIGHT_END){right_light_max_point=(RIGHT_LIGHT_START+RIGHT_LIGHT_END)/2%360;
right_light_range=RIGHT_LIGHT_END-RIGHT_LIGHT_START
}else{right_light_max_point=(RIGHT_LIGHT_START+RIGHT_LIGHT_END)%360/2;
right_light_range=360+RIGHT_LIGHT_END-RIGHT_LIGHT_START
}right_light_mid_range=right_light_range/2;
if(LEFT_SHADE_START<LEFT_SHADE_END){left_shade_max_point=(LEFT_SHADE_START+LEFT_SHADE_END)/2%360;
left_shade_range=LEFT_SHADE_END-LEFT_SHADE_START
}else{left_shade_max_point=(LEFT_SHADE_START+LEFT_SHADE_END)%360/2;
left_shade_range=360+LEFT_SHADE_END-LEFT_SHADE_START
}left_shade_mid_range=left_shade_range/2;
if(RIGHT_SHADE_START<RIGHT_SHADE_END){right_shade_max_point=(RIGHT_SHADE_START+RIGHT_SHADE_END)/2%360;
right_shade_range=RIGHT_SHADE_END-RIGHT_SHADE_START
}else{right_shade_max_point=(RIGHT_SHADE_START+RIGHT_SHADE_END)%360/2;
right_shade_range=360+RIGHT_SHADE_END-RIGHT_SHADE_START
}right_shade_mid_range=right_shade_range/2
}function getAlphaForRotation(a,b,c){b=180*b/Math.PI+90;
subf_find_distance_to_max_point=function(a){var c=Math.abs(a-b);
if(c>180){c=Math.abs(180-(c-180))
}return c
};
var d;
if(a=="top_light"){if(c=="reverse"){this_hand_distance_to_top_light_point=subf_find_distance_to_max_point(-top_light_max_point)
}else{this_hand_distance_to_top_light_point=subf_find_distance_to_max_point(top_light_max_point)
}if(this_hand_distance_to_top_light_point<=top_light_mid_range){d=TOP_LIGHT_MIN+(1-this_hand_distance_to_top_light_point/top_light_mid_range)*(TOP_LIGHT_MAX-TOP_LIGHT_MIN)
}else{d=TOP_LIGHT_MIN
}}else{if(a=="bottom_light"){if(c=="reverse"){this_hand_distance_to_bottom_light_point=subf_find_distance_to_max_point(-bottom_light_max_point)
}else{this_hand_distance_to_bottom_light_point=subf_find_distance_to_max_point(bottom_light_max_point)
}if(180-this_hand_distance_to_bottom_light_point<=bottom_light_mid_range){d=BOTTOM_LIGHT_MIN+(1-(180-this_hand_distance_to_bottom_light_point)/bottom_light_mid_range)*(BOTTOM_LIGHT_MAX-BOTTOM_LIGHT_MIN)
}else{d=BOTTOM_LIGHT_MIN
}}else{if(a=="top_shade"){if(c=="reverse"){this_hand_distance_to_top_shade_point=subf_find_distance_to_max_point(-top_shade_max_point)
}else{this_hand_distance_to_top_shade_point=subf_find_distance_to_max_point(top_shade_max_point)
}if(this_hand_distance_to_top_shade_point<=top_shade_mid_range){d=TOP_SHADE_MIN+(1-this_hand_distance_to_top_shade_point/top_shade_mid_range)*(TOP_SHADE_MAX-TOP_SHADE_MIN)
}else{d=TOP_SHADE_MIN
}}else{if(a=="bottom_shade"){if(c=="reverse"){this_hand_distance_to_bottom_shade_point=subf_find_distance_to_max_point(-bottom_shade_max_point)
}else{this_hand_distance_to_bottom_shade_point=subf_find_distance_to_max_point(bottom_shade_max_point)
}if(180-this_hand_distance_to_bottom_shade_point<=bottom_shade_mid_range){d=BOTTOM_SHADE_MIN+(1-(180-this_hand_distance_to_bottom_shade_point)/bottom_shade_mid_range)*(BOTTOM_SHADE_MAX-BOTTOM_SHADE_MIN)
}else{d=BOTTOM_SHADE_MIN
}}}}}if(c=="reverse"){if(a=="left_light"){this_hand_distance_to_left_light_point=subf_find_distance_to_max_point(-left_light_max_point);
if(this_hand_distance_to_left_light_point<=left_light_mid_range){d=LEFT_LIGHT_MIN+(1-this_hand_distance_to_left_light_point/left_light_mid_range)*(LEFT_LIGHT_MAX-LEFT_LIGHT_MIN)
}else{d=LEFT_LIGHT_MIN
}}else{if(a=="right_light"){if(this_hand_distance_to_right_light_point<=right_light_mid_range){d=RIGHT_LIGHT_MIN+(1-this_hand_distance_to_right_light_point/right_light_mid_range)*(RIGHT_LIGHT_MAX-RIGHT_LIGHT_MIN)
}else{d=RIGHT_LIGHT_MIN
}}else{if(a=="left_shade"){this_hand_distance_to_left_shade_point=subf_find_distance_to_max_point(-left_shade_max_point);
if(this_hand_distance_to_left_shade_point<=left_shade_mid_range){d=(1-this_hand_distance_to_left_shade_point/left_shade_mid_range)*(LEFT_SHADE_MAX-LEFT_SHADE_MIN)
}else{d=LEFT_SHADE_MIN
}}else{if(a=="right_shade"){this_hand_distance_to_right_shade_point=subf_find_distance_to_max_point(-right_shade_max_point);
if(this_hand_distance_to_right_shade_point<=right_shade_mid_range){d=(1-this_hand_distance_to_right_shade_point/right_shade_mid_range)*(RIGHT_SHADE_MAX-RIGHT_SHADE_MIN)
}else{d=RIGHT_SHADE_MIN
}}}}}}else{if(a=="left_light"){this_hand_distance_to_left_light_point=subf_find_distance_to_max_point(left_light_max_point);
if(this_hand_distance_to_left_light_point<=left_light_mid_range){d=LEFT_LIGHT_MIN+(1-this_hand_distance_to_left_light_point/left_light_mid_range)*(LEFT_LIGHT_MAX-LEFT_LIGHT_MIN)
}else{d=LEFT_LIGHT_MIN
}}else{if(a=="right_light"){this_hand_distance_to_right_light_point=subf_find_distance_to_max_point(-right_light_max_point);
this_hand_distance_to_right_light_point=subf_find_distance_to_max_point(right_light_max_point);
if(this_hand_distance_to_right_light_point<=right_light_mid_range){d=RIGHT_LIGHT_MIN+(1-this_hand_distance_to_right_light_point/right_light_mid_range)*(RIGHT_LIGHT_MAX-RIGHT_LIGHT_MIN)
}else{d=RIGHT_LIGHT_MIN
}}else{if(a=="left_shade"){this_hand_distance_to_left_shade_point=subf_find_distance_to_max_point(left_shade_max_point);
if(this_hand_distance_to_left_shade_point<=left_shade_mid_range){d=LEFT_SHADE_MIN+(1-this_hand_distance_to_left_shade_point/left_shade_mid_range)*(LEFT_SHADE_MAX-LEFT_SHADE_MIN)
}else{d=LEFT_SHADE_MIN
}}else{if(a=="right_shade"){this_hand_distance_to_right_shade_point=subf_find_distance_to_max_point(right_shade_max_point);
if(this_hand_distance_to_right_shade_point<=right_shade_mid_range){d=RIGHT_SHADE_MIN+(1-this_hand_distance_to_right_shade_point/right_shade_mid_range)*(RIGHT_SHADE_MAX-RIGHT_SHADE_MIN)
}else{d=RIGHT_SHADE_MIN
}}}}}}return d/100
}var GLOBAL_LIGHT_SOURCE=360;
var GLOBAL_MIN_ALPHA=0;
var GLOBAL_MAX_ALPHA=100;
var TOP_LIGHT_START=0;
var TOP_LIGHT_END=0;
var BOTTOM_LIGHT_START=0;
var BOTTOM_LIGHT_END=0;
var TOP_SHADE_START=0;
var TOP_SHADE_END=0;
var BOTTOM_SHADE_START=0;
var BOTTOM_SHADE_END=0;
var LEFT_LIGHT_START=0;
var LEFT_LIGHT_END=0;
var RIGHT_LIGHT_START=0;
var RIGHT_LIGHT_END=0;
var LEFT_SHADE_START=0;
var LEFT_SHADE_END=0;
var RIGHT_SHADE_START=0;
var RIGHT_SHADE_END=0;
var TOP_LIGHT_MIN=0;
var TOP_LIGHT_MAX=0;
var BOTTOM_LIGHT_MIN=0;
var BOTTOM_LIGHT_MAX=0;
var TOP_SHADE_MIN=0;
var TOP_SHADE_MAX=0;
var BOTTOM_SHADE_MIN=0;
var BOTTOM_SHADE_MAX=0;
var LEFT_LIGHT_MIN=0;
var LEFT_LIGHT_MAX=0;
var RIGHT_LIGHT_MIN=0;
var RIGHT_LIGHT_MAX=0;
var LEFT_SHADE_MIN=0;
var LEFT_SHADE_MAX=0;
var RIGHT_SHADE_MIN=0;
var RIGHT_SHADE_MAX=0;
var top_light_max_point=0;
var top_light_range=0;
var top_light_mid_range=0;
var bottom_light_max_point=0;
var bottom_light_range=0;
var bottom_light_mid_range=0;
var top_shade_max_point=0;
var top_shade_range=0;
var top_shade_mid_range=0;
var bottom_shade_max_point=0;
var bottom_shade_range=0;
var bottom_shade_mid_range=0;
f_calculate_additional_vars();
var updated;
function getHiddenProp(){var prefixes=["webkit","moz","ms","o"];
if("hidden" in document){return"hidden"
}for(var i=0;
i<prefixes.length;
i++){if((prefixes[i]+"Hidden") in document){return prefixes[i]+"Hidden"
}}return null
}function isHidden(){var prop=getHiddenProp();
if(!prop){return false
}return document[prop]
}var visProp=getHiddenProp();
if(visProp){var evtname=visProp.replace(/[H|h]idden/,"")+"visibilitychange";
document.addEventListener(evtname,visChange)
}function visChange(){if(isHidden()){updated=false
}else{updateTime()
}}function updateTime(){if(params.isCountdownClock){if(updated==true){current_seconds+=1000/10;
if(current_seconds>=60){currentTime=new Date;
currentTime.setHours(currentTime.getHours()+hoursOffset);
currentTime.setMinutes(currentTime.getMinutes()+minutesOffset);
currentTime.setSeconds(currentTime.getSeconds()+secondsOffset);
current_hours=currentTime.getHours();
current_minutes=currentTime.getMinutes();
current_seconds=currentTime.getSeconds();
current_milliseconds=currentTime.getMilliseconds()
}}else{currentTime=new Date;
currentTime.setHours(currentTime.getHours()+hoursOffset);
currentTime.setMinutes(currentTime.getMinutes()+minutesOffset);
currentTime.setSeconds(currentTime.getSeconds()+secondsOffset);
monthdate=currentTime.getDate();
weekday_num=currentTime.getDay();
current_hours=currentTime.getHours();
current_minutes=currentTime.getMinutes();
current_seconds=currentTime.getSeconds();
current_milliseconds=currentTime.getMilliseconds();
updated=true
}}else{currentTime=new Date;
currentTime.setHours(currentTime.getHours()+hoursOffset);
currentTime.setMinutes(currentTime.getMinutes()+minutesOffset);
currentTime.setSeconds(currentTime.getSeconds()+secondsOffset);
monthdate=currentTime.getDate();
weekday_num=currentTime.getDay();
current_seconds=currentTime.getSeconds();
current_minutes=currentTime.getMinutes();
current_hours=currentTime.getHours();
current_milliseconds=currentTime.getMilliseconds()
}}function setTimeToDefaultTime(){currentTime=new Date;
currentTime.setHours(10);
currentTime.setMinutes(11);
currentTime.setSeconds(31);
monthdate=currentTime.getDate();
weekday_num=currentTime.getDay();
current_seconds=currentTime.getSeconds();
current_minutes=currentTime.getMinutes();
current_hours=currentTime.getHours();
current_milliseconds=currentTime.getMilliseconds()
}function updateTimeCalculations(){var a=current_hours;
weekday_num++;
if(a>12){a-=12
}display_calculation.seconds_base_60=current_seconds*timeSlice;
display_calculation.seconds_base_60+=current_milliseconds*timeSlice/1000;
display_calculation.seconds_base_60+=rotCorrect;
display_calculation.minutes_base_60=current_minutes*timeSlice;
display_calculation.minutes_base_60+=current_seconds*timeSlice/60;
display_calculation.minutes_base_60+=rotCorrect;
display_calculation.minutes_base_30=current_minutes*timeSlice*2;
display_calculation.minutes_base_30+=current_seconds*timeSlice*2/60;
display_calculation.minutes_base_30+=rotCorrect;
display_calculation.hours_base_12=a*timeSlice*5;
display_calculation.hours_base_12+=current_minutes*timeSlice/12;
display_calculation.hours_base_12+=rotCorrect;
display_calculation.monthdate_base_31=monthdate*(timeSlice/6)*(360/31);
display_calculation.monthdate_base_31+=rotCorrect
}function easeInOutQuad(a,b,c,d){if(a<d/2){return 2*c*a*a/(d*d)+b
}ts=a-d/2;
return -2*c*ts*ts/(d*d)+2*c*ts/d+c/2+b
}function setHoursOffset(a){hoursOffset=a
}function setMinutesOffset(a){minutesOffset=a
}function setSecondsOffset(a){secondsOffset=a
}function getCurrentShownTime(){var a="";
if(current_hours<10){a+="0"
}a+=current_hours;
a+=":";
if(current_minutes<10){a+="0"
}a+=current_minutes;
return a
}function updateOnTimeDisplayOnce(){updateTimeCalculations();
updateDisplay()
}function updateOnTimeDisplayOvertime(){updateTime();
updateOnTimeDisplayOnce();
__killSwitches.to_time_display=setTimeout(updateOnTimeDisplayOvertime,tickDelay)
}var ticks_per_seconds=10;
var parts_starting_z_index=23;
var tickDelay=1000/ticks_per_seconds;
var timeSlice=Math.PI*2/60;
var rotCorrect=global_watch_p.rotation_angle*(timeSlice/6);
var display_calculation=new Array;
var currentTime=null;
var hoursOffset=0;
var minutesOffset=0;
var secondsOffset=0;
var monthdate=null;
var weekday_num=null;
var current_seconds=null;
var current_minutes=null;
var current_hours=null;
var current_milliseconds=null;
var canvasId="regular_timepiece_canvas";
var watchContainer=params.watchContainerID;
var canvasParent=document.getElementById(canvasId);
function prepareTimepieceElements(){if(prepareTimepieceElementsIsDone==false){for(i=0;
i<all_parts.length;
i++){if(all_p[i]["update_mode"]=="monthdate"||all_p[i]["update_mode"]=="weekday"){if(all_p[i]["url"]==null){var a=document.createElement("DIV")
}else{var a=document.createElement("CANVAS")
}document.getElementById(watchContainer).appendChild(a);
if(typeof G_vmlCanvasManager!="undefined"){a=G_vmlCanvasManager.initElement(a)
}a.setAttribute("id",all_parts[i]+"_div");
a.style.position="absolute";
a.style.width=all_p[i]["width"]+"px";
a.style.height=all_p[i]["height"]+"px";
a.style.left=all_p[i]["xoriginoffset"]+"px";
a.style.top=all_p[i]["yoriginoffset"]+"px";
if(all_p[i]["url"]==null){a.style.color="#"+all_p[i]["txt_color"];
a.style.fontSize=all_p[i]["txt_fontSize"];
a.style.fontFamily="Arial";
a.style.textAlign="center"
}parts_starting_z_index+=i;
a.style.zIndex=parts_starting_z_index
}}var b=document.createElement("CANVAS");
document.getElementById(watchContainer).appendChild(b);
if(typeof G_vmlCanvasManager!="undefined"){b=G_vmlCanvasManager.initElement(b)
}b.setAttribute("id","regular_timepiece_canvas");
b.style.position="absolute";
b.setAttribute("width",global_watch_p.width);
b.setAttribute("height",global_watch_p.height);
b.style.zIndex=parts_starting_z_index;
if(cyclop_mask_p.url){var b=document.createElement("CANVAS");
document.getElementById(watchContainer).appendChild(b);
if(typeof G_vmlCanvasManager!="undefined"){b=G_vmlCanvasManager.initElement(b)
}b.setAttribute("id","magnified_timepiece_canvas");
b.style.position="absolute";
b.setAttribute("width",global_watch_p.width);
b.setAttribute("height",global_watch_p.height);
b.style.zIndex=parts_starting_z_index+1
}prepareTimepieceElementsIsDone=true
}}function placeCanvas(a,b,c){a.clearRect(-global_watch_p.width,-global_watch_p.height,global_watch_p.width*2,global_watch_p.height*2);
if(b==false){}else{a.save();
if(c){a.translate(global_watch_p[c.watch_x_center],global_watch_p[c.watch_y_center])
}else{a.translate(global_watch_p.xcenter,global_watch_p.ycenter)
}}}function updateDisplay(){if(cyclop_mask_p.url){var a=document.getElementById(canvasId);
var b=a.getContext("2d");
placeCanvas(b,true);
drawTimepiece(b,true);
b.save();
b.translate(-global_watch_p.xcenter,-global_watch_p.ycenter);
b.globalCompositeOperation="destination-in";
b.drawImage(cyclop_mask_p.image,0,0,cyclop_mask_p.width,cyclop_mask_p.height);
b.restore();
b.restore()
}var a=document.getElementById(canvasId);
if(a.getContext){var b=a.getContext("2d");
placeCanvas(b,true);
drawTimepiece(b,false);
if(cyclop_mask_p.url){b.save();
b.translate(-global_watch_p.xcenter,-global_watch_p.ycenter);
b.globalCompositeOperation="destination-out";
b.drawImage(cyclop_mask_p.image,0,0,cyclop_mask_p.width,cyclop_mask_p.height);
b.restore()
}b.restore()
}else{}}function drawTimepiece(a,b){magnify_x_offset=0;
magnify_y_offset=0;
magnify_x_scale=1;
magnify_y_scale=1;
if(b==true){magnify_x_offset=cyclop_mask_p.xcenteroffset;
magnify_y_offset=cyclop_mask_p.ycenteroffset;
magnify_x_scale=cyclop_mask_p.xscale;
magnify_y_scale=cyclop_mask_p.yscale
}a.globalCompositeOperation="source-over";
for(var i=0;
i<all_parts.length;
i++){var c=all_p[i];
a.save();
if(all_p[i]["update_mode"]!=null){if(all_p[i]["update_mode"]=="monthdate"){if(all_p[i]["url"]==null){document.getElementById(all_parts[i]+"_div").innerHTML=monthdate
}else{document.getElementById(all_parts[i]+"_div").style.background="url('"+image_folder+"num_"+monthdate+"."+all_p[i]["fileformat"]+"')"
}}else{if(all_p[i]["update_mode"]=="weekday"){document.getElementById(all_parts[i]+"_div").style.background="url('"+image_folder+"weekday_"+weekday_num+"."+all_p[i]["fileformat"]+"')"
}else{a.translate(c.xcenteroffset,c.ycenteroffset);
a.translate(magnify_x_offset,magnify_y_offset);
a.translate(c.offset_alternate_x_center,c.offset_alternate_y_center);
a.scale(global_watch_p.xscale*magnify_x_scale,global_watch_p.yscale*magnify_y_scale);
a.rotate(display_calculation[c.update_mode]);
a.translate(-c.xrotation,-c.yrotation);
var img=document.getElementById("p_"+all_parts[i]);
a.drawImage(img,0,0,c.width,c.height);
for(var d in all_p[i]["__lightEffects"]){if(all_p[i]["__lightEffects"][d].height>0){a.globalAlpha=getAlphaForRotation(d,display_calculation[c.update_mode],"normal");
a.drawImage(c.__lightEffects[d],0,0,c.width,c.height)
}}}}}else{a.translate(all_p[i]["xcenteroffset"],all_p[i]["ycenteroffset"]);
a.translate(-all_p[i]["xcenter"],-all_p[i]["ycenter"]);
a.drawImage(all_p[i]["image"],0,0,all_p[i]["width"],all_p[i]["height"])
}a.restore()
}}function startWatchEngineWhenReady(){if(all_p_to_be_loaded<1){prepareTimepieceElements();
__killSwitches.to_engine=window.setTimeout(updateOnTimeDisplayOvertime,0)
}else{__killSwitches.raf_engine=requestAnimFrame(startWatchEngineWhenReady)
}}function startWatchEngine(){startWatchEngineWhenReady()
}function showStaticWatchOnTime(){if(all_p_to_be_loaded<1){prepareTimepieceElements();
setTimeToDefaultTime();
updateOnTimeDisplayOnce()
}else{__killSwitches.to_static_watch=timeoutID=window.setTimeout(showStaticWatchOnTime,tickDelay)
}}function spinToCurrentTimeAfterDelay(a){}var prepareTimepieceElementsIsDone=false;
var weekday_displayed=false;
var magnify_x_offset=0;
var magnify_y_offset=0;
var blockLocal=document.getElementById("yourtime");
var blockCity=document.getElementById("city");
var oldIE;
if($("html").is(".ie6, .ie7, .ie8")){oldIE=true
}var liftoffTime=new Date();
liftoffTime.setDate(liftoffTime.getDate());
var rolexClockCountdownCalc;
function removeElement(id){var element=document.getElementById(id);
element.parentNode.removeChild(element)
}function loadListofdates(){var language=params.LANG;
var language=language.toLowerCase();
var now_date=new Date();
var year=now_date.getFullYear();
var month=now_date.getMonth()+1;
var day=now_date.getDate();
if(month<10){month="0"+month
}if(day<10){day="0"+day
}var names=[];
var timezones=[];
var timezone_dst=[];
var timeText=[];
var cdYear=[];
var cdMonth=[];
var cdDay=[];
var cdHour=[];
var cdMin=[];
var ClockRacetext=[];
var todayfull=Number(year+""+month+""+day);
var index=null;
for(var i=0;
i<params.dateList.length;
i++){if(i==params.selectedCityId){index=i;
if(language==""||i==params.dateList.length-1){names.push(params.dateList[index].city);
timeText.push(params.dateList[index].local)
}else{names.push(params.dateList[index].city);
timeText.push(params.dateList[index].local)
}timezones.push(params.dateList[index].offset);
timezone_dst.push(params.dateList[index].dst);
if(params.isCountdownClock){cdYear.push(params.dateList[index].cdyear);
cdMonth.push(params.dateList[index].cdmonth);
cdDay.push(params.dateList[index].cdday);
cdHour.push(params.dateList[index].cdhour);
cdMin.push(params.dateList[index].cdmin);
ClockRacetext.push(params.dateList[index].cdtext)
}if(params.isCompetitionWithCarousel){_competition.data.push(params.dateList[index])
}}}return{names:names,timezones:timezones,timezone_dst:timezone_dst,timeText:timeText,cdYear:cdYear,cdMonth:cdMonth,cdDay:cdDay,cdHour:cdHour,cdMin:cdMin,ClockRacetext:ClockRacetext}
}var competitionBlock=document.getElementById("competition");
function updateCompetition(){if(_competition.isAnimationActive){var index=_competition.index>=(_competition.data.length-2)?0:_competition.index+1;
var cur=_competition.data[index];
if(cur){_competition.index=index;
while(competitionBlock.lastChild){competitionBlock.removeChild(competitionBlock.lastChild)
}var c=cur.competition;
for(var n in c){var e=document.createElement(params.competitionParams.tag);
e.className="competition-"+n;
e.innerHTML=c[n];
competitionBlock.appendChild(e)
}updateClock(cur);
updateAllTextBlock();
__killSwitchs.to_competition=_competition.timer=window.setTimeout(updateCompetition,params.competitionParams.interval)
}}}function activateCompetition(flag){flag=(typeof flag=="boolean")?flag:false;
_competition.isAnimationActive=flag
}function updateClock(data){params.theLocalText=data.timeText[params.LANG];
params.theCityText=data.city[params.LANG];
params.customOffset=data.timezone;
params.theCity=((data.city[params.LANG]).toLowerCase()).trim();
params.customDST=data.dst;
if($(blockCity).hasClass(params.activeClass)){showTimeIn("city",params.theCity,params.customOffset,params.customDST)
}}function updateAllTextBlock(){document.getElementById("cityText").innerHTML=params.theCityText;
document.getElementById("cityText").setAttribute("zone",params.customDST);
document.getElementById("localtext").innerHTML=params.theLocalText;
document.getElementById("city-link").title=params.theCityText.toString().replace('"',"&quot;");
document.getElementById("local-link").title=params.theLocalText.replace('"',"&quot;");
document.getElementById("city-link").href="#"+params.theCityText.toString().replace('"',"&quot;").replace(" ","_");
document.getElementById("local-link").href="#"+params.theLocalText.replace('"',"&quot;").replace(" ","_")
}var _cityParam={tempOffset:0,cityOffset:0};
function showTimeIn(selectorID,cityname,offset,timezone,cdYear,cdMonth,cdDay,cdHour,cdMin){if(params.isCountdownClock){if(cityname!==""){var now=new Date;
var tempOffset=now.getTimezoneOffset();
tempOffset+=60*offset;
var gettimezoneDST=getDST(new Date(),timezone);
if(gettimezoneDST==100){tempOffset+=60
}if(params.clocktimeAtEvent){var dstMinutes=now.dst()?60:0;
rolexClockCountdown=new Date(cdYear,parseInt(cdMonth)-1,cdDay,parseInt(cdHour),parseInt(cdMin)+dstMinutes);
_cityParam.tempOffset=tempOffset;
_cityParam.cityOffset=offset;
cityTime();
rolexClockCountdownCalc=foreignToLocal(rolexClockCountdown,offset*100,timezone);
setMinutesOffset(_cityParam.tempOffset)
}else{var event=foreignToLocal(new Date(cdYear,parseInt(cdMonth)-1,cdDay,parseInt(cdHour),parseInt(cdMin)),offset*100,timezone);
var dstMinutes=now.dst()&&!event.dst()?-60:!now.dst()&&event.dst()?-60:0;
_cityParam.tempOffset=tempOffset;
_cityParam.cityOffset=offset;
cityTime();
rolexClockCountdownCalc=foreignToLocal(new Date(cdYear,parseInt(cdMonth)-1,cdDay,parseInt(cdHour),parseInt(cdMin)+dstMinutes),offset*100,timezone);
setMinutesOffset(_cityParam.tempOffset)
}}}else{var now=new Date;
var tempOffset=now.getTimezoneOffset();
if(params.theCityText!==""){if(cityname){tempOffset+=60*offset;
var gettimezoneDST=getDST(new Date(),timezone);
if(gettimezoneDST==100){tempOffset+=60
}setMinutesOffset(tempOffset);
_cityParam.tempOffset=tempOffset;
_cityParam.cityOffset=offset;
cityTime()
}}}}function yourTime(){var a=new Date;
a.setHours(a.getHours());
a.setMinutes(a.getMinutes());
a.setSeconds(a.getSeconds());
var b=a.getSeconds();
var c=a.getMinutes();
var d=a.getHours();
var e=a.getDay();
if(e==0){var f="Sun"
}else{if(e==1){var f="Mon"
}else{if(e==2){var f="Tue"
}else{if(e==3){var f="Wed"
}else{if(e==4){var f="Thu"
}else{if(e==5){var f="Fri"
}else{if(e==6){var f="Sat"
}}}}}}}if(params.amPm==true){var g=" ";
if(d>=12){g=" PM"
}else{g=" AM"
}}else{g=""
}if(params.time24hours==true){g=""
}else{if(d>=13){d-=12
}}if(params.leadingZeros==true){if(d<10){d="0"+d
}}if(c<10){c="0"+c
}if(params.showText==true){if(params.showDay==true){f=f
}else{f=""
}if(!params.showTime){update=document.getElementById("rolexClockYourTime").innerHTML=f+" "+d+":"+c+""+g
}}}function cityTime(){var cityTime=new Date();
cityTime.setHours(cityTime.getHours());
cityTime.setMinutes(cityTime.getMinutes()+_cityParam.tempOffset);
cityTime.setSeconds(cityTime.getSeconds());
var cityTime_millisecondes=cityTime.getMilliseconds();
var cityTime_seconds=cityTime.getSeconds();
var cityTime_minutes=cityTime.getMinutes();
var cityTime_hours=cityTime.getHours();
var cityTime_day=cityTime.getDay();
if(cityTime_day==0){var f="Sun"
}else{if(cityTime_day==1){var f="Mon"
}else{if(cityTime_day==2){var f="Tue"
}else{if(cityTime_day==3){var f="Wed"
}else{if(cityTime_day==4){var f="Thu"
}else{if(cityTime_day==5){var f="Fri"
}else{if(cityTime_day==6){var f="Sat"
}}}}}}}if(params.amPm==true){var g=" ";
if(cityTime_hours>=12){g=" PM"
}else{g=" AM"
}}else{g=""
}if(params.time24hours==true){g=""
}else{if(cityTime_hours>=13){cityTime_hours-=12
}else{if(cityTime_hours==0){cityTime_hours=12
}}}if(params.leadingZeros==true){if(cityTime_hours<10){cityTime_hours="0"+cityTime_hours
}}if(cityTime_minutes<10){cityTime_minutes="0"+cityTime_minutes
}if(params.showText==true){if(params.showDay==true){f=f
}else{f=""
}}if(cityTime_seconds>=0&&cityTime_seconds<1){update=document.getElementById("rolexClockCityTime").innerHTML=f+" "+cityTime_hours+":"+cityTime_minutes+""+g
}else{if(checked===undefined&&params.showTime==false){update=document.getElementById("rolexClockCityTime").innerHTML=f+" "+cityTime_hours+":"+cityTime_minutes+""+g;
var checked=1
}}}function roundTime(){cityTime();
yourTime();
__killSwitches.raf_round_time=requestAnimFrame(roundTime)
}function getOffsetBase10(offset){var hours=parseInt(offset);
var decimal=offset-hours;
var newDecimal=decimal/0.6;
return hours+newDecimal
}var flashMode=false;
function buildClock(){$("body").addClass(params.LANG);
$(".image-fallback").attr("src","img/"+params.fallback);
var container=document.getElementById("rolexClockWim-container");
if(Modernizr.retina==true){}var blockLocal=document.getElementById("local");
var blockCity=document.getElementById("city");
function changeBg(bg){if(params.isCountdownClock){if(bg=="full"){global_watch_p.xcenter=params.globalXcenter;
global_watch_p.ycenter=params.globalYcenter;
if(Modernizr.retina==true){}}else{global_watch_p.xcenter=params.globalXcenter;
global_watch_p.ycenter=params.globalYcenter;
if(Modernizr.retina==true){}}}else{global_watch_p.xscale=params.globalXscale;
global_watch_p.yscale=params.globalYscale;
global_watch_p.xcenter=params.globalXcenter;
global_watch_p.ycenter=params.globalYcenter;
if(bg=="full"){if(Modernizr.retina==true){}}else{blockLocal.style.display="none";
blockCity.style.display="none";
if(Modernizr.retina==true){}}}}if(!params.forceFallback&&!params.forceFlash&&Modernizr.canvas==true&&document.compatMode!="Quirks"&&oldIE!=true){$(".fallback").remove();
$(".tracker").attr("href",params.trackingurl);
if(!params.showText){$(blockCity).hide();
$(blockLocal).hide();
changeBg("full")
}else{var e=loadListofdates();
var names=e.names,timezones=e.timezones,timezone_dst=e.timezone_dst,timeText=e.timeText;
var cdYear=e.cdYear,cdMonth=e.cdMonth,cdDay=e.cdDay,cdHour=e.cdHour,cdMin=e.cdMin,ClockRacetext=e.ClockRacetext;
if(names.length>0){if(params.isCountdownClock){rolexClockRacetext=ClockRacetext[0];
$("#racetext").html(rolexClockRacetext)
}changeBg("full");
if(params.isCompetitionWithCarousel){if(names.length>1){updateCompetition()
}else{$(".ui-loader").hide();
$(".fallback").show();
return
}}else{params.theLocalText=timeText[0];
params.theCityText=names[0];
params.customOffset=getOffsetBase10(timezones[0]);
params.theCity=(names[0].toString().toLowerCase()).trim();
params.customDST=timezone_dst[0]
}updateAllTextBlock()
}else{if(params.isCompetitionWithCarousel){competitionBlock.style.display="none"
}else{if(params.isCountdownClock){document.getElementById("cityText").innerHTML="&nbsp;";
document.getElementById("cityText").setAttribute("zone","");
document.getElementById("localtext").innerHTML="&nbsp;";
document.getElementById("city-link").title="&nbsp;";
document.getElementById("local-link").title="&nbsp;";
document.getElementById("city-link").href="#";
document.getElementById("local-link").href="#"
}else{changeBg();
if(params.showTime==true){document.getElementById("block-control").removeChild(blockCity);
document.getElementById("block-control").removeChild(blockLocal)
}else{document.getElementById("cityText").innerHTML=params.theCityText;
document.getElementById("cityText").setAttribute("zone",params.customDST);
document.getElementById("localtext").innerHTML=params.theLocalText;
document.getElementById("city-link").title=params.theCityText.toString().replace('"',"&quot;");
document.getElementById("local-link").title=params.theLocalText.replace('"',"&quot;");
document.getElementById("city-link").href="#"+params.theCityText.toString().replace('"',"&quot;").replace(" ","_");
document.getElementById("local-link").href="#"+params.theLocalText.replace('"',"&quot;").replace(" ","_")
}}}}var thenewOffset,customOffset,elem;
blockLocal.onclick=function(){$("."+params.blockClass+"."+params.activeClass).removeClass(params.activeClass);
$(this).addClass(params.activeClass);
showCurrentTime();
return params.onclickYourtime(_cityParam.tempOffset)
};
blockCity.onclick=function(){$("."+params.blockClass+"."+params.activeClass).removeClass(params.activeClass);
$(this).addClass(params.activeClass);
showTimeIn("city",params.theCity,params.customOffset,params.customDST,cdYear,cdMonth,cdDay,cdHour,cdMin);
return params.onclickCity()
};
function updateShownTimeInHTMLComponentOvertime(){updateShownTimeInHTMLComponent();
requestAnimFrame(updateShownTimeInHTMLComponentOvertime())
}function showCurrentTime(){setMinutesOffset(0)
}function updateShownTimeInHTMLComponent(){tempString=getCurrentShownTime()
}if(params.theCity!=""){if(params.isCountdownClock){showTimeIn("city",params.theCity,params.customOffset,params.customDST,cdYear[0],cdMonth[0],cdDay[0],cdHour[0],cdMin[0]);
startCountdownPlugin(rolexClockLanguage,rolexClockCountdownCalc)
}else{showTimeIn("city",params.theCity,params.customOffset,params.customDST)
}}if(params.showLocalOnly){showCurrentTime()
}roundTime()
}startWatchEngine();
showClock()
}}function expiration(){if(!flashMode){$(".countdown").hide()
}$(".content").removeClass("has-countdown").addClass("no-countdown")
}function startCountdownPlugin(lang,expirationTime){if(lang=="fr"){$.countdown.regional.fr={labels:["Annes","Mois","Semaines","Jours","Heures","Min","Sec"],labels1:["Anne","Mois","Semaine","Jour","Heure","Min","Sec"],compactLabels:["a","m","s","j"],whichLabels:function(amount){return(amount>1?0:1)
},timeSeparator:":",isRTL:false};
$.countdown.setDefaults($.countdown.regional.fr)
}else{if(lang=="zhs"){$.countdown.regional["zh-CN"]={labels:["","","","","","",""],labels1:["","","","","","",""],compactLabels:["","","",""],compactLabels1:["","","",""],whichLabels:null,timeSeparator:":",isRTL:false};
$.countdown.setDefaults($.countdown.regional["zh-CN"])
}else{if(lang=="ja"){$.countdown.regional.ja={labels:["","","","","","",""],labels1:["","","","","","",""],compactLabels:["","","",""],whichLabels:null,digits:["0","1","2","3","4","5","6","7","8","9"],timeSeparator:":",isRTL:false};
$.countdown.setDefaults($.countdown.regional.ja)
}else{if(lang=="de"){$.countdown.regional.de={labels:["Jahre","Monate","Wochen","Tage","Stunden","Min","Sek"],labels1:["Jahr","Monat","Woche","Tag","Stunde","Min","Sek"],compactLabels:["J","M","W","T"],whichLabels:null,digits:["0","1","2","3","4","5","6","7","8","9"],timeSeparator:":",isRTL:false};
$.countdown.setDefaults($.countdown.regional.de)
}else{if(lang=="ru"){$.countdown.regional.ru={labels:["???","???????","??????","????","?????","?????","??????"],labels1:["???","?????","??????","????","???","??????","???????"],labels2:["????","??????","??????","???","????","??????","???????"],compactLabels:["?","?","?","?"],compactLabels1:["?","?","?","?"],whichLabels:function(amount){var units=amount%10;
var tens=Math.floor((amount%100)/10);
return(amount==1?1:(units>=2&&units<=4&&tens!=1?2:(units==1&&tens!=1?1:0)))
},digits:["0","1","2","3","4","5","6","7","8","9"],timeSeparator:":",isRTL:false};
$.countdown.setDefaults($.countdown.regional.ru)
}else{if(lang=="es"){$.countdown.regional.es={labels:["Aos","Meses","Semanas","Das","Horas","Minutos","Segundos"],labels1:["Ao","Mes","Semana","Da","Hora","Minuto","Segundo"],compactLabels:["a","m","s","g"],whichLabels:null,digits:["0","1","2","3","4","5","6","7","8","9"],timeSeparator:":",isRTL:false};
$.countdown.setDefaults($.countdown.regional.es)
}else{}}}}}}if(expirationTime!==undefined){$(".content").addClass("has-countdown").removeClass("no-countdown");
var tpl="";
if(params.countdownNumbersOnly){tpl='<ul class="cd-listview">{y<}<li class="cd-years"><span></span>{yn} </li>{y>}{o<}<li class="cd-months"><span></span>{on} </li>{o>}{d<}<li class="cd-days"><span></span>{dnnn} </li>{d>}{h<}<li class="cd-hours"><span></span>{hnn} </li>{h>}{m<}<li class="cd-minutes"><span></span>{mnn} </li>{m>}{s<}<li class="cd-seconds"><span></span>{snn} </li>{s>}</ul>'
}else{tpl='<ul class="cd-listview">{y<}<li class="cd-years"><span></span>{yn} {yl}</li>{y>}{o<}<li class="cd-month"><span></span>{on} {ol}</li>{o>}{d<}<li class="cd-days"><span></span>{dnnn} {dl}</li>{d>}{h<}<li class="cd-hours"><span></span>{hnn} {hl}</li>{h>}{m<}<li class="cd-minutes"><span></span>{mnn} {ml}</li>{m>}{s<}<li class="cd-seconds"><span></span>{snn} {sl}</li>{s>}</ul>'
}$("#watch_countdown").countdown({until:expirationTime,significant:0,format:"DHMS",alwaysExpire:true,layout:tpl,onExpiry:expiration})
}}buildClock(params);
var _cancelAnimationFrame=(function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame
}());
return function(){blockCity=null;
blockLocal=null;
for(var timer in __killSwitches){if(/^to_/.test(timer)){clearTimeout(__killSwitches[timer])
}else{try{_cancelAnimationFrame(__killSwitches[timer])
}catch(ex){}}}}
}
}(jQuery));
Date.prototype.stdTimezoneOffset=function(){var a=new Date(this.getFullYear(),0,1);
var b=new Date(this.getFullYear(),6,1);
return Math.max(a.getTimezoneOffset(),b.getTimezoneOffset())
};
Date.prototype.dst=function(){return this.getTimezoneOffset()<this.stdTimezoneOffset()
};
/*! jPlayer 2.9.2 for jQuery ~ (c) 2009-2014 Happyworm Ltd ~ MIT License */
;
!function(d,c){"function"==typeof define&&define.amd?define(["jquery"],c):c("object"==typeof exports?require("jquery"):d.jQuery?d.jQuery:d.Zepto)
}(this,function(j,h){j.fn.jPlayer=function(s){var r="jPlayer",q="string"==typeof s,b=Array.prototype.slice.call(arguments,1),a=this;
return s=!q&&b.length?j.extend.apply(null,[!0,s].concat(b)):s,q&&"_"===s.charAt(0)?a:(this.each(q?function(){var d=j(this).data(r),c=d&&j.isFunction(d[s])?d[s].apply(d,b):d;
return c!==d&&c!==h?(a=c,!1):void 0
}:function(){var c=j(this).data(r);
c?c.option(s||{}):j(this).data(r,new j.jPlayer(s,this))
}),a)
},j.jPlayer=function(a,f){if(arguments.length){this.element=j(f),this.options=j.extend(!0,{},this.options,a);
var e=this;
this.element.bind("remove.jPlayer",function(){e.destroy()
}),this._init()
}},"function"!=typeof j.fn.stop&&(j.fn.stop=function(){}),j.jPlayer.emulateMethods="load play pause",j.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate",j.jPlayer.emulateOptions="muted volume",j.jPlayer.reservedEvent="ready flashreset resize repeat error warning",j.jPlayer.event={},j.each(["ready","setmedia","flashreset","resize","repeat","click","error","warning","loadstart","progress","suspend","abort","emptied","stalled","play","pause","loadedmetadata","loadeddata","waiting","playing","canplay","canplaythrough","seeking","seeked","timeupdate","ended","ratechange","durationchange","volumechange"],function(){j.jPlayer.event[this]="jPlayer_"+this
}),j.jPlayer.htmlEvent=["loadstart","abort","emptied","stalled","loadedmetadata","canplay","canplaythrough"],j.jPlayer.pause=function(){j.jPlayer.prototype.destroyRemoved(),j.each(j.jPlayer.prototype.instances,function(d,c){c.data("jPlayer").status.srcSet&&c.jPlayer("pause")
})
},j.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""};
var p=function(){this.init()
};
p.prototype={init:function(){this.options={timeFormat:j.jPlayer.timeFormat}
},time:function(y){y=y&&"number"==typeof y?y:0;
var x=new Date(1000*y),w=x.getUTCHours(),v=this.options.timeFormat.showHour?x.getUTCMinutes():x.getUTCMinutes()+60*w,u=this.options.timeFormat.showMin?x.getUTCSeconds():x.getUTCSeconds()+60*v,t=this.options.timeFormat.padHour&&10>w?"0"+w:w,s=this.options.timeFormat.padMin&&10>v?"0"+v:v,r=this.options.timeFormat.padSec&&10>u?"0"+u:u,q="";
return q+=this.options.timeFormat.showHour?t+this.options.timeFormat.sepHour:"",q+=this.options.timeFormat.showMin?s+this.options.timeFormat.sepMin:"",q+=this.options.timeFormat.showSec?r+this.options.timeFormat.sepSec:""
}};
var o=new p;
j.jPlayer.convertTime=function(b){return o.time(b)
},j.jPlayer.uaBrowser=function(r){var q=r.toLowerCase(),w=/(webkit)[ \/]([\w.]+)/,v=/(opera)(?:.*version)?[ \/]([\w.]+)/,u=/(msie) ([\w.]+)/,t=/(mozilla)(?:.*? rv:([\w.]+))?/,s=w.exec(q)||v.exec(q)||u.exec(q)||q.indexOf("compatible")<0&&t.exec(q)||[];
return{browser:s[1]||"",version:s[2]||"0"}
},j.jPlayer.uaPlatform=function(r){var q=r.toLowerCase(),x=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/,w=/(ipad|playbook)/,v=/(android)/,u=/(mobile)/,t=x.exec(q)||[],s=w.exec(q)||!u.exec(q)&&v.exec(q)||[];
return t[1]&&(t[1]=t[1].replace(/\s/g,"_")),{platform:t[1]||"",tablet:s[1]||""}
},j.jPlayer.browser={},j.jPlayer.platform={};
var n=j.jPlayer.uaBrowser(navigator.userAgent);
n.browser&&(j.jPlayer.browser[n.browser]=!0,j.jPlayer.browser.version=n.version);
var m=j.jPlayer.uaPlatform(navigator.userAgent);
m.platform&&(j.jPlayer.platform[m.platform]=!0,j.jPlayer.platform.mobile=!m.tablet,j.jPlayer.platform.tablet=!!m.tablet),j.jPlayer.getDocMode=function(){var a;
return j.jPlayer.browser.msie&&(document.documentMode?a=document.documentMode:(a=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(a=7))),a
},j.jPlayer.browser.documentMode=j.jPlayer.getDocMode(),j.jPlayer.nativeFeatures={init:function(){var y,x,w,v=document,u=v.createElement("video"),t={w3c:["fullscreenEnabled","fullscreenElement","requestFullscreen","exitFullscreen","fullscreenchange","fullscreenerror"],moz:["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],webkit:["","webkitCurrentFullScreenElement","webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange",""],webkitVideo:["webkitSupportsFullscreen","webkitDisplayingFullscreen","webkitEnterFullscreen","webkitExitFullscreen","",""],ms:["","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"]},s=["w3c","moz","webkit","webkitVideo","ms"];
for(this.fullscreen=y={support:{w3c:!!v[t.w3c[0]],moz:!!v[t.moz[0]],webkit:"function"==typeof v[t.webkit[3]],webkitVideo:"function"==typeof u[t.webkitVideo[2]],ms:"function"==typeof u[t.ms[2]]},used:{}},x=0,w=s.length;
w>x;
x++){var r=s[x];
if(y.support[r]){y.spec=r,y.used[r]=!0;
break
}}if(y.spec){var q=t[y.spec];
y.api={fullscreenEnabled:!0,fullscreenElement:function(b){return b=b?b:v,b[q[1]]
},requestFullscreen:function(b){return b[q[2]]()
},exitFullscreen:function(b){return b=b?b:v,b[q[3]]()
}},y.event={fullscreenchange:q[4],fullscreenerror:q[5]}
}else{y.api={fullscreenEnabled:!1,fullscreenElement:function(){return null
},requestFullscreen:function(){},exitFullscreen:function(){}},y.event={}
}}},j.jPlayer.nativeFeatures.init(),j.jPlayer.focus=null,j.jPlayer.keyIgnoreElementNames="A INPUT TEXTAREA SELECT BUTTON";
var k=function(a){var f,e=j.jPlayer.focus;
e&&(j.each(j.jPlayer.keyIgnoreElementNames.split(/\s+/g),function(b,c){return a.target.nodeName.toUpperCase()===c.toUpperCase()?(f=!0,!1):void 0
}),f||j.each(e.options.keyBindings,function(d,b){return b&&j.isFunction(b.fn)&&("number"==typeof b.key&&a.which===b.key||"string"==typeof b.key&&a.key===b.key)?(a.preventDefault(),b.fn(e),!1):void 0
}))
};
j.jPlayer.keys=function(a){var d="keydown.jPlayer";
j(document.documentElement).unbind(d),a&&j(document.documentElement).bind(d,k)
},j.jPlayer.keys(!0),j.jPlayer.prototype={count:0,version:{script:"2.9.2",needFlash:"2.9.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",auroraFormats:"wav",preload:"metadata",volume:0.8,muted:!1,remainingDuration:!1,toggleDuration:!1,captureDuration:!0,playbackRate:1,defaultPlaybackRate:1,minPlaybackRate:0.5,maxPlaybackRate:4,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",playbackRateBar:".jp-playback-rate-bar",playbackRateBarValue:".jp-playback-rate-bar-value",currentTime:".jp-current-time",duration:".jp-duration",title:".jp-title",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},stateClass:{playing:"jp-state-playing",seeking:"jp-state-seeking",muted:"jp-state-muted",looped:"jp-state-looped",fullScreen:"jp-state-full-screen",noVolume:"jp-state-no-volume"},useStateClassSkin:!1,autoBlur:!0,smoothPlayBar:!1,fullScreen:!1,fullWindow:!1,autohide:{restored:!1,full:!0,fadeIn:200,fadeOut:600,hold:1000},loop:!1,repeat:function(a){a.jPlayer.options.loop?j(this).unbind(".jPlayerRepeat").bind(j.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){j(this).jPlayer("play")
}):j(this).unbind(".jPlayerRepeat")
},nativeVideoControls:{},noFullWindow:{msie:/msie [0-6]\./,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/(?=.*android)(?!.*chrome)(?=.*mobile)/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/},noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/,playbook:/playbook/},timeFormat:{},keyEnabled:!1,audioFullScreen:!1,keyBindings:{play:{key:80,fn:function(b){b.status.paused?b.play():b.pause()
}},fullScreen:{key:70,fn:function(b){(b.status.video||b.options.audioFullScreen)&&b._setOption("fullScreen",!b.options.fullScreen)
}},muted:{key:77,fn:function(b){b._muted(!b.options.muted)
}},volumeUp:{key:190,fn:function(b){b.volume(b.options.volume+0.1)
}},volumeDown:{key:188,fn:function(b){b.volume(b.options.volume-0.1)
}},loop:{key:76,fn:function(b){b._loop(!b.options.loop)
}}},verticalVolume:!1,verticalPlaybackRate:!1,globalVolume:!1,idPrefix:"jp",noConflict:"jQuery",emulateHtml:!1,consoleAlerts:!0,errorAlerts:!1,warningAlerts:!1},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,remaining:0,videoWidth:0,videoHeight:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:!1},solution:{html:!0,aurora:!0,flash:!0},format:{mp3:{codec:"audio/mpeg",flashCanPlay:!0,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},m3u8a:{codec:'application/vnd.apple.mpegurl; codecs="mp4a.40.2"',flashCanPlay:!1,media:"audio"},m3ua:{codec:"audio/mpegurl",flashCanPlay:!1,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis, opus"',flashCanPlay:!1,media:"audio"},flac:{codec:"audio/x-flac",flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},m3u8v:{codec:'application/vnd.apple.mpegurl; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!1,media:"video"},m3uv:{codec:"audio/mpegurl",flashCanPlay:!1,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"video"}},_init:function(){var u=this;
if(this.element.empty(),this.status=j.extend({},this.status),this.internal=j.extend({},this.internal),this.options.timeFormat=j.extend({},j.jPlayer.timeFormat,this.options.timeFormat),this.internal.cmdsIgnored=j.jPlayer.platform.ipad||j.jPlayer.platform.iphone||j.jPlayer.platform.ipod,this.internal.domNode=this.element.get(0),this.options.keyEnabled&&!j.jPlayer.focus&&(j.jPlayer.focus=this),this.androidFix={setMedia:!1,play:!1,pause:!1,time:0/0},j.jPlayer.platform.android&&(this.options.preload="auto"!==this.options.preload?"metadata":"auto"),this.formats=[],this.solutions=[],this.require={},this.htmlElement={},this.html={},this.html.audio={},this.html.video={},this.aurora={},this.aurora.formats=[],this.aurora.properties=[],this.flash={},this.css={},this.css.cs={},this.css.jq={},this.ancestorJq=[],this.options.volume=this._limitValue(this.options.volume,0,1),j.each(this.options.supplied.toLowerCase().split(","),function(c,w){var v=w.replace(/^\s+|\s+$/g,"");
if(u.format[v]){var g=!1;
j.each(u.formats,function(e,d){return v===d?(g=!0,!1):void 0
}),g||u.formats.push(v)
}}),j.each(this.options.solution.toLowerCase().split(","),function(c,w){var v=w.replace(/^\s+|\s+$/g,"");
if(u.solution[v]){var g=!1;
j.each(u.solutions,function(e,d){return v===d?(g=!0,!1):void 0
}),g||u.solutions.push(v)
}}),j.each(this.options.auroraFormats.toLowerCase().split(","),function(c,w){var v=w.replace(/^\s+|\s+$/g,"");
if(u.format[v]){var g=!1;
j.each(u.aurora.formats,function(e,d){return v===d?(g=!0,!1):void 0
}),g||u.aurora.formats.push(v)
}}),this.internal.instance="jp_"+this.count,this.instances[this.internal.instance]=this.element,this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count),this.internal.self=j.extend({},{id:this.element.attr("id"),jq:this.element}),this.internal.audio=j.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:h}),this.internal.video=j.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:h}),this.internal.flash=j.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:h,swf:this.options.swfPath+(".swf"!==this.options.swfPath.toLowerCase().slice(-4)?(this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"jquery.jplayer.swf":"")}),this.internal.poster=j.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:h}),j.each(j.jPlayer.event,function(c,e){u.options[c]!==h&&(u.element.bind(e+".jPlayer",u.options[c]),u.options[c]=h)
}),this.require.audio=!1,this.require.video=!1,j.each(this.formats,function(d,c){u.require[u.format[c].media]=!0
}),this.options=this.require.video?j.extend(!0,{},this.optionsVideo,this.options):j.extend(!0,{},this.optionsAudio,this.options),this._setSize(),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this.status.noVolume=this._uaBlocklist(this.options.noVolume),j.jPlayer.nativeFeatures.fullscreen.api.fullscreenEnabled&&this._fullscreenAddEventListeners(),this._restrictNativeVideoControls(),this.htmlElement.poster=document.createElement("img"),this.htmlElement.poster.id=this.internal.poster.id,this.htmlElement.poster.onload=function(){(!u.status.video||u.status.waitForPlay)&&u.internal.poster.jq.show()
},this.element.append(this.htmlElement.poster),this.internal.poster.jq=j("#"+this.internal.poster.id),this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),this.internal.poster.jq.hide(),this.internal.poster.jq.bind("click.jPlayer",function(){u._trigger(j.jPlayer.event.click)
}),this.html.audio.available=!1,this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio)),this.html.video.available=!1,this.require.video&&(this.htmlElement.video=document.createElement("video"),this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video)),this.flash.available=this._checkForFlash(10.1),this.html.canPlay={},this.aurora.canPlay={},this.flash.canPlay={},j.each(this.formats,function(c,e){u.html.canPlay[e]=u.html[u.format[e].media].available&&""!==u.htmlElement[u.format[e].media].canPlayType(u.format[e].codec),u.aurora.canPlay[e]=j.inArray(e,u.aurora.formats)>-1,u.flash.canPlay[e]=u.format[e].flashCanPlay&&u.flash.available
}),this.html.desired=!1,this.aurora.desired=!1,this.flash.desired=!1,j.each(this.solutions,function(c,w){if(0===c){u[w].desired=!0
}else{var v=!1,g=!1;
j.each(u.formats,function(e,d){u[u.solutions[0]].canPlay[d]&&("video"===u.format[d].media?g=!0:v=!0)
}),u[w].desired=u.require.audio&&!v||u.require.video&&!g
}}),this.html.support={},this.aurora.support={},this.flash.support={},j.each(this.formats,function(d,c){u.html.support[c]=u.html.canPlay[c]&&u.html.desired,u.aurora.support[c]=u.aurora.canPlay[c]&&u.aurora.desired,u.flash.support[c]=u.flash.canPlay[c]&&u.flash.desired
}),this.html.used=!1,this.aurora.used=!1,this.flash.used=!1,j.each(this.solutions,function(c,e){j.each(u.formats,function(f,d){return u[e].support[d]?(u[e].used=!0,!1):void 0
})
}),this._resetActive(),this._resetGate(),this._cssSelectorAncestor(this.options.cssSelectorAncestor),this.html.used||this.aurora.used||this.flash.used?this.css.jq.noSolution.length&&this.css.jq.noSolution.hide():(this._error({type:j.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:j.jPlayer.errorMsg.NO_SOLUTION,hint:j.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show()),this.flash.used){var t,s="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;
if(j.jPlayer.browser.msie&&(Number(j.jPlayer.browser.version)<9||j.jPlayer.browser.documentMode<9)){var r='<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0" tabindex="-1"></object>',q=['<param name="movie" value="'+this.internal.flash.swf+'" />','<param name="FlashVars" value="'+s+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];
t=document.createElement(r);
for(var b=0;
b<q.length;
b++){t.appendChild(document.createElement(q[b]))
}}else{var a=function(f,e,v){var g=document.createElement("param");
g.setAttribute("name",e),g.setAttribute("value",v),f.appendChild(g)
};
t=document.createElement("object"),t.setAttribute("id",this.internal.flash.id),t.setAttribute("name",this.internal.flash.id),t.setAttribute("data",this.internal.flash.swf),t.setAttribute("type","application/x-shockwave-flash"),t.setAttribute("width","1"),t.setAttribute("height","1"),t.setAttribute("tabindex","-1"),a(t,"flashvars",s),a(t,"allowscriptaccess","always"),a(t,"bgcolor",this.options.backgroundColor),a(t,"wmode",this.options.wmode)
}this.element.append(t),this.internal.flash.jq=j(t)
}this.status.playbackRateEnabled=this.html.used&&!this.flash.used?this._testPlaybackRate("audio"):!1,this._updatePlaybackRate(),this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=j("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),this.element.append(this.htmlElement.video),this.internal.video.jq=j("#"+this.internal.video.id),this.internal.video.jq.css(this.status.nativeVideoControls?{width:this.status.width,height:this.status.height}:{width:"0px",height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(){u._trigger(j.jPlayer.event.click)
}))),this.aurora.used,this.options.emulateHtml&&this._emulateHtmlBridge(),!this.html.used&&!this.aurora.used||this.flash.used||setTimeout(function(){u.internal.ready=!0,u.version.flash="n/a",u._trigger(j.jPlayer.event.repeat),u._trigger(j.jPlayer.event.ready)
},100),this._updateNativeVideoControls(),this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),j.jPlayer.prototype.count++
},destroy:function(){this.clearMedia(),this._removeUiClass(),this.css.jq.currentTime.length&&this.css.jq.currentTime.text(""),this.css.jq.duration.length&&this.css.jq.duration.text(""),j.each(this.css.jq,function(d,c){c.length&&c.unbind(".jPlayer")
}),this.internal.poster.jq.unbind(".jPlayer"),this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer"),this._fullscreenRemoveEventListeners(),this===j.jPlayer.focus&&(j.jPlayer.focus=null),this.options.emulateHtml&&this._destroyHtmlBridge(),this.element.removeData("jPlayer"),this.element.unbind(".jPlayer"),this.element.empty(),delete this.instances[this.internal.instance]
},destroyRemoved:function(){var a=this;
j.each(this.instances,function(b,d){a.element!==d&&(d.data("jPlayer")||(d.jPlayer("destroy"),delete a.instances[b]))
})
},enable:function(){},disable:function(){},_testCanPlayType:function(d){try{return d.canPlayType(this.format.mp3.codec),!0
}catch(c){return !1
}},_testPlaybackRate:function(f){var e,q=0.5;
f="string"==typeof f?f:"audio",e=document.createElement(f);
try{return"playbackRate" in e?(e.playbackRate=q,e.playbackRate===q):!1
}catch(g){return !1
}},_uaBlocklist:function(a){var f=navigator.userAgent.toLowerCase(),e=!1;
return j.each(a,function(d,c){return c&&c.test(f)?(e=!0,!1):void 0
}),e
},_restrictNativeVideoControls:function(){this.require.audio&&this.status.nativeVideoControls&&(this.status.nativeVideoControls=!1,this.status.noFullWindow=!0)
},_updateNativeVideoControls:function(){this.html.video.available&&this.html.used&&(this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",height:"0px"})))
},_addHtmlEventListeners:function(a,f){var e=this;
a.preload=this.options.preload,a.muted=this.options.muted,a.volume=this.options.volume,this.status.playbackRateEnabled&&(a.defaultPlaybackRate=this.options.defaultPlaybackRate,a.playbackRate=this.options.playbackRate),a.addEventListener("progress",function(){f.gate&&(e.internal.cmdsIgnored&&this.readyState>0&&(e.internal.cmdsIgnored=!1),e._getHtmlStatus(a),e._updateInterface(),e._trigger(j.jPlayer.event.progress))
},!1),a.addEventListener("loadeddata",function(){f.gate&&(e.androidFix.setMedia=!1,e.androidFix.play&&(e.androidFix.play=!1,e.play(e.androidFix.time)),e.androidFix.pause&&(e.androidFix.pause=!1,e.pause(e.androidFix.time)),e._trigger(j.jPlayer.event.loadeddata))
},!1),a.addEventListener("timeupdate",function(){f.gate&&(e._getHtmlStatus(a),e._updateInterface(),e._trigger(j.jPlayer.event.timeupdate))
},!1),a.addEventListener("durationchange",function(){f.gate&&(e._getHtmlStatus(a),e._updateInterface(),e._trigger(j.jPlayer.event.durationchange))
},!1),a.addEventListener("play",function(){f.gate&&(e._updateButtons(!0),e._html_checkWaitForPlay(),e._trigger(j.jPlayer.event.play))
},!1),a.addEventListener("playing",function(){f.gate&&(e._updateButtons(!0),e._seeked(),e._trigger(j.jPlayer.event.playing))
},!1),a.addEventListener("pause",function(){f.gate&&(e._updateButtons(!1),e._trigger(j.jPlayer.event.pause))
},!1),a.addEventListener("waiting",function(){f.gate&&(e._seeking(),e._trigger(j.jPlayer.event.waiting))
},!1),a.addEventListener("seeking",function(){f.gate&&(e._seeking(),e._trigger(j.jPlayer.event.seeking))
},!1),a.addEventListener("seeked",function(){f.gate&&(e._seeked(),e._trigger(j.jPlayer.event.seeked))
},!1),a.addEventListener("volumechange",function(){f.gate&&(e.options.volume=a.volume,e.options.muted=a.muted,e._updateMute(),e._updateVolume(),e._trigger(j.jPlayer.event.volumechange))
},!1),a.addEventListener("ratechange",function(){f.gate&&(e.options.defaultPlaybackRate=a.defaultPlaybackRate,e.options.playbackRate=a.playbackRate,e._updatePlaybackRate(),e._trigger(j.jPlayer.event.ratechange))
},!1),a.addEventListener("suspend",function(){f.gate&&(e._seeked(),e._trigger(j.jPlayer.event.suspend))
},!1),a.addEventListener("ended",function(){f.gate&&(j.jPlayer.browser.webkit||(e.htmlElement.media.currentTime=0),e.htmlElement.media.pause(),e._updateButtons(!1),e._getHtmlStatus(a,!0),e._updateInterface(),e._trigger(j.jPlayer.event.ended))
},!1),a.addEventListener("error",function(){f.gate&&(e._updateButtons(!1),e._seeked(),e.status.srcSet&&(clearTimeout(e.internal.htmlDlyCmdId),e.status.waitForLoad=!0,e.status.waitForPlay=!0,e.status.video&&!e.status.nativeVideoControls&&e.internal.video.jq.css({width:"0px",height:"0px"}),e._validString(e.status.media.poster)&&!e.status.nativeVideoControls&&e.internal.poster.jq.show(),e.css.jq.videoPlay.length&&e.css.jq.videoPlay.show(),e._error({type:j.jPlayer.error.URL,context:e.status.src,message:j.jPlayer.errorMsg.URL,hint:j.jPlayer.errorHint.URL})))
},!1),j.each(j.jPlayer.htmlEvent,function(c,b){a.addEventListener(this,function(){f.gate&&e._trigger(j.jPlayer.event[b])
},!1)
})
},_addAuroraEventListeners:function(a,f){var e=this;
a.volume=100*this.options.volume,a.on("progress",function(){f.gate&&(e.internal.cmdsIgnored&&this.readyState>0&&(e.internal.cmdsIgnored=!1),e._getAuroraStatus(a),e._updateInterface(),e._trigger(j.jPlayer.event.progress),a.duration>0&&e._trigger(j.jPlayer.event.timeupdate))
},!1),a.on("ready",function(){f.gate&&e._trigger(j.jPlayer.event.loadeddata)
},!1),a.on("duration",function(){f.gate&&(e._getAuroraStatus(a),e._updateInterface(),e._trigger(j.jPlayer.event.durationchange))
},!1),a.on("end",function(){f.gate&&(e._updateButtons(!1),e._getAuroraStatus(a,!0),e._updateInterface(),e._trigger(j.jPlayer.event.ended))
},!1),a.on("error",function(){f.gate&&(e._updateButtons(!1),e._seeked(),e.status.srcSet&&(e.status.waitForLoad=!0,e.status.waitForPlay=!0,e.status.video&&!e.status.nativeVideoControls&&e.internal.video.jq.css({width:"0px",height:"0px"}),e._validString(e.status.media.poster)&&!e.status.nativeVideoControls&&e.internal.poster.jq.show(),e.css.jq.videoPlay.length&&e.css.jq.videoPlay.show(),e._error({type:j.jPlayer.error.URL,context:e.status.src,message:j.jPlayer.errorMsg.URL,hint:j.jPlayer.errorHint.URL})))
},!1)
},_getHtmlStatus:function(q,g){var u=0,t=0,s=0,r=0;
isFinite(q.duration)&&(this.status.duration=q.duration),u=q.currentTime,t=this.status.duration>0?100*u/this.status.duration:0,"object"==typeof q.seekable&&q.seekable.length>0?(s=this.status.duration>0?100*q.seekable.end(q.seekable.length-1)/this.status.duration:100,r=this.status.duration>0?100*q.currentTime/q.seekable.end(q.seekable.length-1):0):(s=100,r=t),g&&(u=0,r=0,t=0),this.status.seekPercent=s,this.status.currentPercentRelative=r,this.status.currentPercentAbsolute=t,this.status.currentTime=u,this.status.remaining=this.status.duration-this.status.currentTime,this.status.videoWidth=q.videoWidth,this.status.videoHeight=q.videoHeight,this.status.readyState=q.readyState,this.status.networkState=q.networkState,this.status.playbackRate=q.playbackRate,this.status.ended=q.ended
},_getAuroraStatus:function(q,g){var u=0,t=0,s=0,r=0;
this.status.duration=q.duration/1000,u=q.currentTime/1000,t=this.status.duration>0?100*u/this.status.duration:0,q.buffered>0?(s=this.status.duration>0?q.buffered*this.status.duration/this.status.duration:100,r=this.status.duration>0?u/(q.buffered*this.status.duration):0):(s=100,r=t),g&&(u=0,r=0,t=0),this.status.seekPercent=s,this.status.currentPercentRelative=r,this.status.currentPercentAbsolute=t,this.status.currentTime=u,this.status.remaining=this.status.duration-this.status.currentTime,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1
},_resetStatus:function(){this.status=j.extend({},this.status,j.jPlayer.prototype.status)
},_trigger:function(a,q,g){var f=j.Event(a);
f.jPlayer={},f.jPlayer.version=j.extend({},this.version),f.jPlayer.options=j.extend(!0,{},this.options),f.jPlayer.status=j.extend(!0,{},this.status),f.jPlayer.html=j.extend(!0,{},this.html),f.jPlayer.aurora=j.extend(!0,{},this.aurora),f.jPlayer.flash=j.extend(!0,{},this.flash),q&&(f.jPlayer.error=j.extend({},q)),g&&(f.jPlayer.warning=j.extend({},g)),this.element.trigger(f)
},jPlayerFlashEvent:function(a,q){if(a===j.jPlayer.event.ready){if(this.internal.ready){if(this.flash.gate){if(this.status.srcSet){var g=this.status.currentTime,f=this.status.paused;
this.setMedia(this.status.media),this.volumeWorker(this.options.volume),g>0&&(f?this.pause(g):this.play(g))
}this._trigger(j.jPlayer.event.flashreset)
}}else{this.internal.ready=!0,this.internal.flash.jq.css({width:"0px",height:"0px"}),this.version.flash=q.version,this.version.needFlash!==this.version.flash&&this._error({type:j.jPlayer.error.VERSION,context:this.version.flash,message:j.jPlayer.errorMsg.VERSION+this.version.flash,hint:j.jPlayer.errorHint.VERSION}),this._trigger(j.jPlayer.event.repeat),this._trigger(a)
}}if(this.flash.gate){switch(a){case j.jPlayer.event.progress:this._getFlashStatus(q),this._updateInterface(),this._trigger(a);
break;
case j.jPlayer.event.timeupdate:this._getFlashStatus(q),this._updateInterface(),this._trigger(a);
break;
case j.jPlayer.event.play:this._seeked(),this._updateButtons(!0),this._trigger(a);
break;
case j.jPlayer.event.pause:this._updateButtons(!1),this._trigger(a);
break;
case j.jPlayer.event.ended:this._updateButtons(!1),this._trigger(a);
break;
case j.jPlayer.event.click:this._trigger(a);
break;
case j.jPlayer.event.error:this.status.waitForLoad=!0,this.status.waitForPlay=!0,this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"}),this._validString(this.status.media.poster)&&this.internal.poster.jq.show(),this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show(),this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media),this._updateButtons(!1),this._error({type:j.jPlayer.error.URL,context:q.src,message:j.jPlayer.errorMsg.URL,hint:j.jPlayer.errorHint.URL});
break;
case j.jPlayer.event.seeking:this._seeking(),this._trigger(a);
break;
case j.jPlayer.event.seeked:this._seeked(),this._trigger(a);
break;
case j.jPlayer.event.ready:break;
default:this._trigger(a)
}}return !1
},_getFlashStatus:function(b){this.status.seekPercent=b.seekPercent,this.status.currentPercentRelative=b.currentPercentRelative,this.status.currentPercentAbsolute=b.currentPercentAbsolute,this.status.currentTime=b.currentTime,this.status.duration=b.duration,this.status.remaining=b.duration-b.currentTime,this.status.videoWidth=b.videoWidth,this.status.videoHeight=b.videoHeight,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1
},_updateButtons:function(b){b===h?b=!this.status.paused:this.status.paused=!b,b?this.addStateClass("playing"):this.removeStateClass("playing"),!this.status.noFullWindow&&this.options.fullWindow?this.addStateClass("fullScreen"):this.removeStateClass("fullScreen"),this.options.loop?this.addStateClass("looped"):this.removeStateClass("looped"),this.css.jq.play.length&&this.css.jq.pause.length&&(b?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide())),this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):this.options.fullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide())),this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))
},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%"),this.css.jq.playBar.length&&(this.options.smoothPlayBar?this.css.jq.playBar.stop().animate({width:this.status.currentPercentAbsolute+"%"},250,"linear"):this.css.jq.playBar.width(this.status.currentPercentRelative+"%"));
var f="";
this.css.jq.currentTime.length&&(f=this._convertTime(this.status.currentTime),f!==this.css.jq.currentTime.text()&&this.css.jq.currentTime.text(this._convertTime(this.status.currentTime)));
var e="",q=this.status.duration,g=this.status.remaining;
this.css.jq.duration.length&&("string"==typeof this.status.media.duration?e=this.status.media.duration:("number"==typeof this.status.media.duration&&(q=this.status.media.duration,g=q-this.status.currentTime),e=this.options.remainingDuration?(g>0?"-":"")+this._convertTime(g):this._convertTime(q)),e!==this.css.jq.duration.text()&&this.css.jq.duration.text(e))
},_convertTime:p.prototype.time,_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg"),this.addStateClass("seeking")
},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg"),this.removeStateClass("seeking")
},_resetGate:function(){this.html.audio.gate=!1,this.html.video.gate=!1,this.aurora.gate=!1,this.flash.gate=!1
},_resetActive:function(){this.html.active=!1,this.aurora.active=!1,this.flash.active=!1
},_escapeHtml:function(b){return b.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")
},_qualifyURL:function(d){var c=document.createElement("div");
return c.innerHTML='<a href="'+this._escapeHtml(d)+'">x</a>',c.firstChild.href
},_absoluteMediaUrls:function(a){var d=this;
return j.each(a,function(b,c){c&&d.format[b]&&"data:"!==c.substr(0,5)&&(a[b]=d._qualifyURL(c))
}),a
},addStateClass:function(b){this.ancestorJq.length&&this.ancestorJq.addClass(this.options.stateClass[b])
},removeStateClass:function(b){this.ancestorJq.length&&this.ancestorJq.removeClass(this.options.stateClass[b])
},setMedia:function(a){var q=this,g=!1,f=this.status.media.poster!==a.poster;
this._resetMedia(),this._resetGate(),this._resetActive(),this.androidFix.setMedia=!1,this.androidFix.play=!1,this.androidFix.pause=!1,a=this._absoluteMediaUrls(a),j.each(this.formats,function(d,c){var b="video"===q.format[c].media;
return j.each(q.solutions,function(u,t){if(q[t].support[c]&&q._validString(a[c])){var s="html"===t,r="aurora"===t;
return b?(s?(q.html.video.gate=!0,q._html_setVideo(a),q.html.active=!0):(q.flash.gate=!0,q._flash_setVideo(a),q.flash.active=!0),q.css.jq.videoPlay.length&&q.css.jq.videoPlay.show(),q.status.video=!0):(s?(q.html.audio.gate=!0,q._html_setAudio(a),q.html.active=!0,j.jPlayer.platform.android&&(q.androidFix.setMedia=!0)):r?(q.aurora.gate=!0,q._aurora_setAudio(a),q.aurora.active=!0):(q.flash.gate=!0,q._flash_setAudio(a),q.flash.active=!0),q.css.jq.videoPlay.length&&q.css.jq.videoPlay.hide(),q.status.video=!1),g=!0,!1
}}),g?!1:void 0
}),g?(this.status.nativeVideoControls&&this.html.video.gate||this._validString(a.poster)&&(f?this.htmlElement.poster.src=a.poster:this.internal.poster.jq.show()),"string"==typeof a.title&&(this.css.jq.title.length&&this.css.jq.title.html(a.title),this.htmlElement.audio&&this.htmlElement.audio.setAttribute("title",a.title),this.htmlElement.video&&this.htmlElement.video.setAttribute("title",a.title)),this.status.srcSet=!0,this.status.media=j.extend({},a),this._updateButtons(!1),this._updateInterface(),this._trigger(j.jPlayer.event.setmedia)):this._error({type:j.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:j.jPlayer.errorMsg.NO_SUPPORT,hint:j.jPlayer.errorHint.NO_SUPPORT})
},_resetMedia:function(){this._resetStatus(),this._updateButtons(!1),this._updateInterface(),this._seeked(),this.internal.poster.jq.hide(),clearTimeout(this.internal.htmlDlyCmdId),this.html.active?this._html_resetMedia():this.aurora.active?this._aurora_resetMedia():this.flash.active&&this._flash_resetMedia()
},clearMedia:function(){this._resetMedia(),this.html.active?this._html_clearMedia():this.aurora.active?this._aurora_clearMedia():this.flash.active&&this._flash_clearMedia(),this._resetGate(),this._resetActive()
},load:function(){this.status.srcSet?this.html.active?this._html_load():this.aurora.active?this._aurora_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")
},focus:function(){this.options.keyEnabled&&(j.jPlayer.focus=this)
},play:function(d){var c="object"==typeof d;
c&&this.options.useStateClassSkin&&!this.status.paused?this.pause(d):(d="number"==typeof d?d:0/0,this.status.srcSet?(this.focus(),this.html.active?this._html_play(d):this.aurora.active?this._aurora_play(d):this.flash.active&&this._flash_play(d)):this._urlNotSetError("play"))
},videoPlay:function(){this.play()
},pause:function(b){b="number"==typeof b?b:0/0,this.status.srcSet?this.html.active?this._html_pause(b):this.aurora.active?this._aurora_pause(b):this.flash.active&&this._flash_pause(b):this._urlNotSetError("pause")
},tellOthers:function(a,s){var r=this,q="function"==typeof s,g=Array.prototype.slice.call(arguments);
"string"==typeof a&&(q&&g.splice(1,1),j.jPlayer.prototype.destroyRemoved(),j.each(this.instances,function(){r.element!==this&&(!q||s.call(this.data("jPlayer"),r))&&this.jPlayer.apply(this,g)
}))
},pauseOthers:function(b){this.tellOthers("pause",function(){return this.status.srcSet
},b)
},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.aurora.active?this._aurora_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")
},playHead:function(b){b=this._limitValue(b,0,100),this.status.srcSet?this.html.active?this._html_playHead(b):this.aurora.active?this._aurora_playHead(b):this.flash.active&&this._flash_playHead(b):this._urlNotSetError("playHead")
},_muted:function(b){this.mutedWorker(b),this.options.globalVolume&&this.tellOthers("mutedWorker",function(){return this.options.globalVolume
},b)
},mutedWorker:function(a){this.options.muted=a,this.html.used&&this._html_setProperty("muted",a),this.aurora.used&&this._aurora_mute(a),this.flash.used&&this._flash_mute(a),this.html.video.gate||this.html.audio.gate||(this._updateMute(a),this._updateVolume(this.options.volume),this._trigger(j.jPlayer.event.volumechange))
},mute:function(b){var d="object"==typeof b;
d&&this.options.useStateClassSkin&&this.options.muted?this._muted(!1):(b=b===h?!0:!!b,this._muted(b))
},unmute:function(b){b=b===h?!0:!!b,this._muted(!b)
},_updateMute:function(b){b===h&&(b=this.options.muted),b?this.addStateClass("muted"):this.removeStateClass("muted"),this.css.jq.mute.length&&this.css.jq.unmute.length&&(this.status.noVolume?(this.css.jq.mute.hide(),this.css.jq.unmute.hide()):b?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))
},volume:function(b){this.volumeWorker(b),this.options.globalVolume&&this.tellOthers("volumeWorker",function(){return this.options.globalVolume
},b)
},volumeWorker:function(a){a=this._limitValue(a,0,1),this.options.volume=a,this.html.used&&this._html_setProperty("volume",a),this.aurora.used&&this._aurora_volume(a),this.flash.used&&this._flash_volume(a),this.html.video.gate||this.html.audio.gate||(this._updateVolume(a),this._trigger(j.jPlayer.event.volumechange))
},volumeBar:function(a){if(this.css.jq.volumeBar.length){var v=j(a.currentTarget),u=v.offset(),t=a.pageX-u.left,s=v.width(),r=v.height()-a.pageY+u.top,q=v.height();
this.volume(this.options.verticalVolume?r/q:t/s)
}this.options.muted&&this._muted(!1)
},_updateVolume:function(b){b===h&&(b=this.options.volume),b=this.options.muted?0:b,this.status.noVolume?(this.addStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.hide(),this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.removeStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](100*b+"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())
},volumeMax:function(){this.volume(1),this.options.muted&&this._muted(!1)
},_cssSelectorAncestor:function(a){var d=this;
this.options.cssSelectorAncestor=a,this._removeUiClass(),this.ancestorJq=a?j(a):[],a&&1!==this.ancestorJq.length&&this._warning({type:j.jPlayer.warning.CSS_SELECTOR_COUNT,context:a,message:j.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:j.jPlayer.warningHint.CSS_SELECTOR_COUNT}),this._addUiClass(),j.each(this.options.cssSelector,function(e,c){d._cssSelector(e,c)
}),this._updateInterface(),this._updateButtons(),this._updateAutohide(),this._updateVolume(),this._updateMute()
},_cssSelector:function(a,q){var g=this;
if("string"==typeof q){if(j.jPlayer.prototype.options.cssSelector[a]){if(this.css.jq[a]&&this.css.jq[a].length&&this.css.jq[a].unbind(".jPlayer"),this.options.cssSelector[a]=q,this.css.cs[a]=this.options.cssSelectorAncestor+" "+q,this.css.jq[a]=q?j(this.css.cs[a]):[],this.css.jq[a].length&&this[a]){var f=function(b){b.preventDefault(),g[a](b),g.options.autoBlur?j(this).blur():j(this).focus()
};
this.css.jq[a].bind("click.jPlayer",f)
}q&&1!==this.css.jq[a].length&&this._warning({type:j.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[a],message:j.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[a].length+" found for "+a+" method.",hint:j.jPlayer.warningHint.CSS_SELECTOR_COUNT})
}else{this._warning({type:j.jPlayer.warning.CSS_SELECTOR_METHOD,context:a,message:j.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:j.jPlayer.warningHint.CSS_SELECTOR_METHOD})
}}else{this._warning({type:j.jPlayer.warning.CSS_SELECTOR_STRING,context:q,message:j.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:j.jPlayer.warningHint.CSS_SELECTOR_STRING})
}},duration:function(b){this.options.toggleDuration&&(this.options.captureDuration&&b.stopPropagation(),this._setOption("remainingDuration",!this.options.remainingDuration))
},seekBar:function(a){if(this.css.jq.seekBar.length){var u=j(a.currentTarget),t=u.offset(),s=a.pageX-t.left,r=u.width(),q=100*s/r;
this.playHead(q)
}},playbackRate:function(b){this._setOption("playbackRate",b)
},playbackRateBar:function(x){if(this.css.jq.playbackRateBar.length){var w,v,u=j(x.currentTarget),t=u.offset(),s=x.pageX-t.left,r=u.width(),q=u.height()-x.pageY+t.top,a=u.height();
w=this.options.verticalPlaybackRate?q/a:s/r,v=w*(this.options.maxPlaybackRate-this.options.minPlaybackRate)+this.options.minPlaybackRate,this.playbackRate(v)
}},_updatePlaybackRate:function(){var d=this.options.playbackRate,c=(d-this.options.minPlaybackRate)/(this.options.maxPlaybackRate-this.options.minPlaybackRate);
this.status.playbackRateEnabled?(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.show(),this.css.jq.playbackRateBarValue.length&&(this.css.jq.playbackRateBarValue.show(),this.css.jq.playbackRateBarValue[this.options.verticalPlaybackRate?"height":"width"](100*c+"%"))):(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.hide(),this.css.jq.playbackRateBarValue.length&&this.css.jq.playbackRateBarValue.hide())
},repeat:function(d){var c="object"==typeof d;
this._loop(c&&this.options.useStateClassSkin&&this.options.loop?!1:!0)
},repeatOff:function(){this._loop(!1)
},_loop:function(a){this.options.loop!==a&&(this.options.loop=a,this._updateButtons(),this._trigger(j.jPlayer.event.repeat))
},option:function(v,u){var t=v;
if(0===arguments.length){return j.extend(!0,{},this.options)
}if("string"==typeof v){var s=v.split(".");
if(u===h){for(var r=j.extend(!0,{},this.options),q=0;
q<s.length;
q++){if(r[s[q]]===h){return this._warning({type:j.jPlayer.warning.OPTION_KEY,context:v,message:j.jPlayer.warningMsg.OPTION_KEY,hint:j.jPlayer.warningHint.OPTION_KEY}),h
}r=r[s[q]]
}return r
}t={};
for(var b=t,a=0;
a<s.length;
a++){a<s.length-1?(b[s[a]]={},b=b[s[a]]):b[s[a]]=u
}}return this._setOptions(t),this
},_setOptions:function(a){var d=this;
return j.each(a,function(e,c){d._setOption(e,c)
}),this
},_setOption:function(a,q){var g=this;
switch(a){case"volume":this.volume(q);
break;
case"muted":this._muted(q);
break;
case"globalVolume":this.options[a]=q;
break;
case"cssSelectorAncestor":this._cssSelectorAncestor(q);
break;
case"cssSelector":j.each(q,function(d,c){g._cssSelector(d,c)
});
break;
case"playbackRate":this.options[a]=q=this._limitValue(q,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("playbackRate",q),this._updatePlaybackRate();
break;
case"defaultPlaybackRate":this.options[a]=q=this._limitValue(q,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("defaultPlaybackRate",q),this._updatePlaybackRate();
break;
case"minPlaybackRate":this.options[a]=q=this._limitValue(q,0.1,this.options.maxPlaybackRate-0.1),this._updatePlaybackRate();
break;
case"maxPlaybackRate":this.options[a]=q=this._limitValue(q,this.options.minPlaybackRate+0.1,16),this._updatePlaybackRate();
break;
case"fullScreen":if(this.options[a]!==q){var f=j.jPlayer.nativeFeatures.fullscreen.used.webkitVideo;
(!f||f&&!this.status.waitForPlay)&&(f||(this.options[a]=q),q?this._requestFullscreen():this._exitFullscreen(),f||this._setOption("fullWindow",q))
}break;
case"fullWindow":this.options[a]!==q&&(this._removeUiClass(),this.options[a]=q,this._refreshSize());
break;
case"size":this.options.fullWindow||this.options[a].cssClass===q.cssClass||this._removeUiClass(),this.options[a]=j.extend({},this.options[a],q),this._refreshSize();
break;
case"sizeFull":this.options.fullWindow&&this.options[a].cssClass!==q.cssClass&&this._removeUiClass(),this.options[a]=j.extend({},this.options[a],q),this._refreshSize();
break;
case"autohide":this.options[a]=j.extend({},this.options[a],q),this._updateAutohide();
break;
case"loop":this._loop(q);
break;
case"remainingDuration":this.options[a]=q,this._updateInterface();
break;
case"toggleDuration":this.options[a]=q;
break;
case"nativeVideoControls":this.options[a]=j.extend({},this.options[a],q),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this._restrictNativeVideoControls(),this._updateNativeVideoControls();
break;
case"noFullWindow":this.options[a]=j.extend({},this.options[a],q),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this._restrictNativeVideoControls(),this._updateButtons();
break;
case"noVolume":this.options[a]=j.extend({},this.options[a],q),this.status.noVolume=this._uaBlocklist(this.options.noVolume),this._updateVolume(),this._updateMute();
break;
case"emulateHtml":this.options[a]!==q&&(this.options[a]=q,q?this._emulateHtmlBridge():this._destroyHtmlBridge());
break;
case"timeFormat":this.options[a]=j.extend({},this.options[a],q);
break;
case"keyEnabled":this.options[a]=q,q||this!==j.jPlayer.focus||(j.jPlayer.focus=null);
break;
case"keyBindings":this.options[a]=j.extend(!0,{},this.options[a],q);
break;
case"audioFullScreen":this.options[a]=q;
break;
case"autoBlur":this.options[a]=q
}return this
},_refreshSize:function(){this._setSize(),this._addUiClass(),this._updateSize(),this._updateButtons(),this._updateAutohide(),this._trigger(j.jPlayer.event.resize)
},_setSize:function(){this.options.fullWindow?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,this.status.height=this.options.size.height,this.status.cssClass=this.options.size.cssClass),this.element.css({width:this.status.width,height:this.status.height})
},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)
},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)
},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),!this.status.waitForPlay&&this.html.active&&this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})
},_updateAutohide:function(){var g=this,f="mousemove.jPlayer",s=".jPlayerAutohide",r=f+s,q=function(a){var v,u,t=!1;
"undefined"!=typeof g.internal.mouse?(v=g.internal.mouse.x-a.pageX,u=g.internal.mouse.y-a.pageY,t=Math.floor(v)>0||Math.floor(u)>0):t=!0,g.internal.mouse={x:a.pageX,y:a.pageY},t&&g.css.jq.gui.fadeIn(g.options.autohide.fadeIn,function(){clearTimeout(g.internal.autohideId),g.internal.autohideId=setTimeout(function(){g.css.jq.gui.fadeOut(g.options.autohide.fadeOut)
},g.options.autohide.hold)
})
};
this.css.jq.gui.length&&(this.css.jq.gui.stop(!0,!0),clearTimeout(this.internal.autohideId),delete this.internal.mouse,this.element.unbind(s),this.css.jq.gui.unbind(s),this.status.nativeVideoControls?this.css.jq.gui.hide():this.options.fullWindow&&this.options.autohide.full||!this.options.fullWindow&&this.options.autohide.restored?(this.element.bind(r,q),this.css.jq.gui.bind(r,q),this.css.jq.gui.hide()):this.css.jq.gui.show())
},fullScreen:function(d){var c="object"==typeof d;
c&&this.options.useStateClassSkin&&this.options.fullScreen?this._setOption("fullScreen",!1):this._setOption("fullScreen",!0)
},restoreScreen:function(){this._setOption("fullScreen",!1)
},_fullscreenAddEventListeners:function(){var a=this,d=j.jPlayer.nativeFeatures.fullscreen;
d.api.fullscreenEnabled&&d.event.fullscreenchange&&("function"!=typeof this.internal.fullscreenchangeHandler&&(this.internal.fullscreenchangeHandler=function(){a._fullscreenchange()
}),document.addEventListener(d.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1))
},_fullscreenRemoveEventListeners:function(){var a=j.jPlayer.nativeFeatures.fullscreen;
this.internal.fullscreenchangeHandler&&document.removeEventListener(a.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1)
},_fullscreenchange:function(){this.options.fullScreen&&!j.jPlayer.nativeFeatures.fullscreen.api.fullscreenElement()&&this._setOption("fullScreen",!1)
},_requestFullscreen:function(){var a=this.ancestorJq.length?this.ancestorJq[0]:this.element[0],d=j.jPlayer.nativeFeatures.fullscreen;
d.used.webkitVideo&&(a=this.htmlElement.video),d.api.fullscreenEnabled&&d.api.requestFullscreen(a)
},_exitFullscreen:function(){var a,d=j.jPlayer.nativeFeatures.fullscreen;
d.used.webkitVideo&&(a=this.htmlElement.video),d.api.fullscreenEnabled&&d.api.exitFullscreen(a)
},_html_initMedia:function(a){var d=j(this.htmlElement.media).empty();
j.each(a.track||[],function(e,c){var f=document.createElement("track");
f.setAttribute("kind",c.kind?c.kind:""),f.setAttribute("src",c.src?c.src:""),f.setAttribute("srclang",c.srclang?c.srclang:""),f.setAttribute("label",c.label?c.label:""),c.def&&f.setAttribute("default",c.def),d.append(f)
}),this.htmlElement.media.src=this.status.src,"none"!==this.options.preload&&this._html_load(),this._trigger(j.jPlayer.event.timeupdate)
},_html_setFormat:function(a){var d=this;
j.each(this.formats,function(b,c){return d.html.support[c]&&a[c]?(d.status.src=a[c],d.status.format[c]=!0,d.status.formatType=c,!1):void 0
})
},_html_setAudio:function(b){this._html_setFormat(b),this.htmlElement.media=this.htmlElement.audio,this._html_initMedia(b)
},_html_setVideo:function(b){this._html_setFormat(b),this.status.nativeVideoControls&&(this.htmlElement.video.poster=this._validString(b.poster)?b.poster:""),this.htmlElement.media=this.htmlElement.video,this._html_initMedia(b)
},_html_resetMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id!==this.internal.video.id||this.status.nativeVideoControls||this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause())
},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.src="about:blank",this.htmlElement.media.load())
},_html_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.htmlElement.media.load()),clearTimeout(this.internal.htmlDlyCmdId)
},_html_play:function(f){var e=this,q=this.htmlElement.media;
if(this.androidFix.pause=!1,this._html_load(),this.androidFix.setMedia){this.androidFix.play=!0,this.androidFix.time=f
}else{if(isNaN(f)){q.play()
}else{this.internal.cmdsIgnored&&q.play();
try{if(q.seekable&&!("object"==typeof q.seekable&&q.seekable.length>0)){throw 1
}q.currentTime=f,q.play()
}catch(g){return void (this.internal.htmlDlyCmdId=setTimeout(function(){e.play(f)
},250))
}}}this._html_checkWaitForPlay()
},_html_pause:function(f){var e=this,q=this.htmlElement.media;
if(this.androidFix.play=!1,f>0?this._html_load():clearTimeout(this.internal.htmlDlyCmdId),q.pause(),this.androidFix.setMedia){this.androidFix.pause=!0,this.androidFix.time=f
}else{if(!isNaN(f)){try{if(q.seekable&&!("object"==typeof q.seekable&&q.seekable.length>0)){throw 1
}q.currentTime=f
}catch(g){return void (this.internal.htmlDlyCmdId=setTimeout(function(){e.pause(f)
},250))
}}}f>0&&this._html_checkWaitForPlay()
},_html_playHead:function(f){var e=this,q=this.htmlElement.media;
this._html_load();
try{if("object"==typeof q.seekable&&q.seekable.length>0){q.currentTime=f*q.seekable.end(q.seekable.length-1)/100
}else{if(!(q.duration>0)||isNaN(q.duration)){throw"e"
}q.currentTime=f*q.duration/100
}}catch(g){return void (this.internal.htmlDlyCmdId=setTimeout(function(){e.playHead(f)
},250))
}this.status.waitForLoad||this._html_checkWaitForPlay()
},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))
},_html_setProperty:function(d,c){this.html.audio.available&&(this.htmlElement.audio[d]=c),this.html.video.available&&(this.htmlElement.video[d]=c)
},_aurora_setAudio:function(a){var d=this;
j.each(this.formats,function(b,c){return d.aurora.support[c]&&a[c]?(d.status.src=a[c],d.status.format[c]=!0,d.status.formatType=c,!1):void 0
}),this.aurora.player=new AV.Player.fromURL(this.status.src),this._addAuroraEventListeners(this.aurora.player,this.aurora),"auto"===this.options.preload&&(this._aurora_load(),this.status.waitForLoad=!1)
},_aurora_resetMedia:function(){this.aurora.player&&this.aurora.player.stop()
},_aurora_clearMedia:function(){},_aurora_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.aurora.player.preload())
},_aurora_play:function(a){this.status.waitForLoad||isNaN(a)||this.aurora.player.seek(a),this.aurora.player.playing||this.aurora.player.play(),this.status.waitForLoad=!1,this._aurora_checkWaitForPlay(),this._updateButtons(!0),this._trigger(j.jPlayer.event.play)
},_aurora_pause:function(a){isNaN(a)||this.aurora.player.seek(1000*a),this.aurora.player.pause(),a>0&&this._aurora_checkWaitForPlay(),this._updateButtons(!1),this._trigger(j.jPlayer.event.pause)
},_aurora_playHead:function(b){this.aurora.player.duration>0&&this.aurora.player.seek(b*this.aurora.player.duration/100),this.status.waitForLoad||this._aurora_checkWaitForPlay()
},_aurora_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1)
},_aurora_volume:function(b){this.aurora.player.volume=100*b
},_aurora_mute:function(b){b?(this.aurora.properties.lastvolume=this.aurora.player.volume,this.aurora.player.volume=0):this.aurora.player.volume=this.aurora.properties.lastvolume,this.aurora.properties.muted=b
},_flash_setAudio:function(a){var f=this;
try{j.each(this.formats,function(b,c){if(f.flash.support[c]&&a[c]){switch(c){case"m4a":case"fla":f._getMovie().fl_setAudio_m4a(a[c]);
break;
case"mp3":f._getMovie().fl_setAudio_mp3(a[c]);
break;
case"rtmpa":f._getMovie().fl_setAudio_rtmp(a[c])
}return f.status.src=a[c],f.status.format[c]=!0,f.status.formatType=c,!1
}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)
}catch(e){this._flashError(e)
}},_flash_setVideo:function(a){var f=this;
try{j.each(this.formats,function(b,c){if(f.flash.support[c]&&a[c]){switch(c){case"m4v":case"flv":f._getMovie().fl_setVideo_m4v(a[c]);
break;
case"rtmpv":f._getMovie().fl_setVideo_rtmp(a[c])
}return f.status.src=a[c],f.status.format[c]=!0,f.status.formatType=c,!1
}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)
}catch(e){this._flashError(e)
}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"}),this._flash_pause(0/0)
},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()
}catch(b){this._flashError(b)
}},_flash_load:function(){try{this._getMovie().fl_load()
}catch(b){this._flashError(b)
}this.status.waitForLoad=!1
},_flash_play:function(d){try{this._getMovie().fl_play(d)
}catch(c){this._flashError(c)
}this.status.waitForLoad=!1,this._flash_checkWaitForPlay()
},_flash_pause:function(d){try{this._getMovie().fl_pause(d)
}catch(c){this._flashError(c)
}d>0&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())
},_flash_playHead:function(d){try{this._getMovie().fl_play_head(d)
}catch(c){this._flashError(c)
}this.status.waitForLoad||this._flash_checkWaitForPlay()
},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))
},_flash_volume:function(d){try{this._getMovie().fl_volume(d)
}catch(c){this._flashError(c)
}},_flash_mute:function(d){try{this._getMovie().fl_mute(d)
}catch(c){this._flashError(c)
}},_getMovie:function(){return document[this.internal.flash.id]
},_getFlashPluginVersion:function(){var f,e=0;
if(window.ActiveXObject){try{if(f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){var q=f.GetVariable("$version");
q&&(q=q.split(" ")[1].split(","),e=parseInt(q[0],10)+"."+parseInt(q[1],10))
}}catch(g){}}else{navigator.plugins&&navigator.mimeTypes.length>0&&(f=navigator.plugins["Shockwave Flash"],f&&(e=navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1")))
}return 1*e
},_checkForFlash:function(d){var c=!1;
return this._getFlashPluginVersion()>=d&&(c=!0),c
},_validString:function(b){return b&&"string"==typeof b
},_limitValue:function(e,d,f){return d>e?d:e>f?f:e
},_urlNotSetError:function(a){this._error({type:j.jPlayer.error.URL_NOT_SET,context:a,message:j.jPlayer.errorMsg.URL_NOT_SET,hint:j.jPlayer.errorHint.URL_NOT_SET})
},_flashError:function(a){var d;
d=this.internal.ready?"FLASH_DISABLED":"FLASH",this._error({type:j.jPlayer.error[d],context:this.internal.flash.swf,message:j.jPlayer.errorMsg[d]+a.message,hint:j.jPlayer.errorHint[d]}),this.internal.flash.jq.css({width:"1px",height:"1px"})
},_error:function(a){this._trigger(j.jPlayer.event.error,a),this.options.errorAlerts&&this._alert("Error!"+(a.message?"\n"+a.message:"")+(a.hint?"\n"+a.hint:"")+"\nContext: "+a.context)
},_warning:function(a){this._trigger(j.jPlayer.event.warning,h,a),this.options.warningAlerts&&this._alert("Warning!"+(a.message?"\n"+a.message:"")+(a.hint?"\n"+a.hint:"")+"\nContext: "+a.context)
},_alert:function(d){var c="jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+d;
this.options.consoleAlerts?window.console&&window.console.log&&window.console.log(c):alert(c)
},_emulateHtmlBridge:function(){var a=this;
j.each(j.jPlayer.emulateMethods.split(/\s+/g),function(b,d){a.internal.domNode[d]=function(c){a[d](c)
}
}),j.each(j.jPlayer.event,function(g,f){var b=!0;
j.each(j.jPlayer.reservedEvent.split(/\s+/g),function(d,c){return c===g?(b=!1,!1):void 0
}),b&&a.element.bind(f+".jPlayer.jPlayerHtml",function(){a._emulateHtmlUpdate();
var c=document.createEvent("Event");
c.initEvent(g,!1,!0),a.internal.domNode.dispatchEvent(c)
})
})
},_emulateHtmlUpdate:function(){var a=this;
j.each(j.jPlayer.emulateStatus.split(/\s+/g),function(b,d){a.internal.domNode[d]=a.status[d]
}),j.each(j.jPlayer.emulateOptions.split(/\s+/g),function(b,d){a.internal.domNode[d]=a.options[d]
})
},_destroyHtmlBridge:function(){var a=this;
this.element.unbind(".jPlayerHtml");
var d=j.jPlayer.emulateMethods+" "+j.jPlayer.emulateStatus+" "+j.jPlayer.emulateOptions;
j.each(d.split(/\s+/g),function(b,e){delete a.internal.domNode[e]
})
}},j.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"},j.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+j.jPlayer.prototype.version.script+" needs Jplayer.swf version "+j.jPlayer.prototype.version.needFlash+" but found "},j.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."},j.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"},j.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."},j.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}
});
fom.tracking=(function(c){function b(d){if(typeof dataLayer!=="undefined"&&c.isArray(dataLayer)){return dataLayer.push({event:d})
}}function a(d){if(typeof dataLayer!=="undefined"&&c.isArray(dataLayer)){return dataLayer.push(d)
}}return{fireCustomEvent:b,addProperty:a}
})($);
fom.utils=(function(w,x,E){var d={WIDEST_LAYOUT:1440,MEDIUM_LAYOUT:768,TRANSITION_END_EVENT:"webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend"},v=x.flexbox,m=x.touch,o=x.cssvhunit,r=x.picture,Q=w(".js-main-logo").first().attr("href")||"",F=(function(){return location.port=="3000"||location.port=="3001"||location.hostname.indexOf("static-frontend")!==-1
})(),p=(function(){return("platform" in navigator&&(/iphone|ipod|ipad/gi).test(navigator.platform))
})(),K=(function(){var S=E.navigator,R=S.appVersion.match(/OS (\d+_\d+)/i);
R=R&&R[1]?+R[1].replace("_","."):null;
return R||null
})(),L=(function(){return(/android (\d+\.\d+)/i.test(navigator.userAgent))
})(),M=(function(){var R=E.navigator.userAgent;
if(R.indexOf("Android")>=0){return parseFloat(R.slice(R.indexOf("Android")+8))
}else{return null
}})(),B=(function(){return(/IEMobile/.test(navigator.userAgent))
})(),h=(function(){return(/win/i.test(E.navigator.platform))
})(),q=(function(){var T=0,R,S;
if(navigator.appName==="Microsoft Internet Explorer"){R=navigator.userAgent;
S=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");
if(S.exec(R)!==null){T=parseFloat(RegExp.$1)
}}else{if(navigator.userAgent.indexOf("Trident")>0){T=parseFloat(11)
}}return T
})(),N=w("html").hasClass("editmode-true")||false,u=function(){return x.touch||"ontouchstart" in E||(E.DocumentTouch&&document instanceof DocumentTouch)
},J=function(){return x.mq("only screen and (max-width: 767px)")
},G=function(){return x.mq("only screen and (min-width: 768px) and (max-width: 1023px)")
},D=function(){return x.mq("only screen and (min-width: 1024px)")
},g=function(){return x.csstransitions
},j="",O=function(){var R={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};
if(!j.length){j=R[x.prefixed("transition")]
}return j
},n=function(S,R){R=R||document;
if(R.getElementsByClassName){return R.getElementsByClassName(S)
}else{return(function T(ab,Z){if(!Z){Z=E.document
}var Y=[],X=Z.getElementsByTagName("*"),U=X.length,aa=new RegExp("(^|\\s)"+ab+"(\\s|$)"),W,V;
for(W=0,V=0;
W<U;
W++){if(aa.test(X[W].className)){Y[V]=X[W];
V++
}}return Y
})(S,R)
}},c=(function(){var U,S,W,R=[{name:"loader",selector:"#tmpl-loader",preload:true}],T={},V=function(Y){var X=this,aa="",Z=function(){aa=w(X.selector).html()||""
};
X.name=Y.name;
X.selector=Y.selector;
X.preload=Y.preload;
X.get=function(){if(aa!==""){return aa
}else{Z();
return aa
}};
if(X.preload){Z()
}};
for(U=0,S=R.length;
U<S;
U++){W=R[U];
T[W.name]=new V(W)
}return T
})(),f=(function(){function S(){this.size=this.getSizeCategory();
this._events={};
this._$window=w(E);
this.prevRatio=1;
this._$window.on("resize",w.proxy(this.onResize,this));
this._$window.on("ontouchend",w.proxy(this.onZoom,this))
}var R=S.prototype;
R.sizes={NARROW:"narrow",MEDIUM:"medium",WIDE:"wide"};
R.events={RESIZE:"resize",CHANGE:"change",ZOOM:"zoom"};
R.on=function(V,U,T){if(!U||!V){return
}if(!this._events[V]){this._events[V]=[]
}this._events[V].push({event:V,handler:U,scope:T})
};
R.off=function(W,V){if(!W||!V){return
}var U=this._events[W];
if(!U){return
}var T=U.length,X;
while(T--){X=U[T];
if(X.handler===V){this._events[W].splice(T,1)
}}};
R.onResize=function(){var T=this.size;
this.size=this.getSizeCategory();
this.trigger(R.events.RESIZE,[this.size]);
if(T!==this.size){this.onChange()
}};
R.onZoom=function(){this.currentRatio=this.getZoomRatio();
this.size=this.getSizeCategory();
if(this.prevRatio!==this.currentRatio){this.prevRatio=_playersthis.currentRatio;
this.trigger(R.events.ZOOM,[this.size]);
this.trigger(R.events.RESIZE,[this.size])
}};
R.getSizeCategory=function(){if(J()){return R.sizes.NARROW
}else{if(G()){return R.sizes.MEDIUM
}else{return R.sizes.WIDE
}}};
R.getZoomRatio=function(){return document.documentElement.clientWidth/E.innerWidth
};
R.onChange=function(){this.trigger(R.events.CHANGE,[this.size])
};
R.trigger=function(V,X){var U=this._events[V];
if(!U){return
}var T=U.length,W;
while(T--){W=U[T];
W.handler.apply(W.scope,X)
}};
R.isNarrow=function(){return this.size===this.sizes.NARROW
};
R.isMedium=function(){return this.size===this.sizes.MEDIUM
};
R.isWide=function(){return this.size===this.sizes.WIDE
};
return new S()
})(),I=function(R){R.filter(".swiper-slide-duplicate").remove();
R.removeClass(function(S,T){var U=[];
w.each(T.split(" "),function(V,W){if(/swiper-slide-.*/.test(W)){U.push(W)
}});
return U.join(" ")
}).removeAttr("style");
return R
},e=function(){return !(this.ieVersion&&this.ieVersion<=9)||!(this.androidVersion&&parseFloat(this.androidVersion)<=4.3)
},H=function(){var S=null,R=500,U=5000,V=".parbase.teaser";
function T(){return clearInterval(S)
}return{elements:V,update:function(W,Y){var X=0;
if(typeof CQ_Analytics==="object"&&CQ_Analytics.hasOwnProperty("CCM")){if(CQ_Analytics.CCM.areStoresInitialized){Y.call()
}else{CQ_Analytics.CCM.addListener("storesinitialize",function(){S=setInterval(function(){if(X>=U){T()
}else{if(w(W).length>0){Y.call();
T()
}X+=R
}},R)
})
}}}}
},k=function(T,V,S){var R;
var U=null;
return function(){var Z=this,Y=arguments;
var X=function(){U=null;
if(!S){R=T.apply(Z,Y)
}};
var W=S&&!U;
clearTimeout(U);
U=setTimeout(X,V);
if(W){R=T.apply(Z,Y)
}return R
}
},b=function(R){return R.replace(/-|\s|\(|\)/g,"")
},P=function(R){return R.replace(/\D/ig,"")
},s=function(S,R){R||(R="-");
return(S+"").toLowerCase().replace(/\s+/g,R)
},a={location:{get:function(){return E.location
},set:function(R){E.location=R
},search:{get:function(){return E.location.search
},set:function(R){var S;
if(R!==""){E.location.search=R
}else{S=E.location.href;
E.location=S.substring(0,S.indexOf("?"))
}}}}},y=(function(){var S={},T={},R="",U=function(){R=decodeURI(a.location.search.get());
if(R){R=R.substring(1);
var W=R.split("&");
for(var V=0;
V<W.length;
V++){var X=W[V].split("=");
T[X[0]]=X[1]
}}};
S.toString=function(){var W="";
for(var V in T){if(T.hasOwnProperty(V)){W=W+(W!==""?"&":"?");
W=W+V+"="+T[V]
}}return W
};
S.get=function(V){if(V){return T[V]?T[V]:null
}else{return T
}};
S.remove=function(aa,Y){var W;
aa=aa||"";
W=aa.constructor===Array;
if(W){for(var X=0,V=aa.length;
X<V;
X++){var Z=aa[X];
if(T[Z]){delete T[Z]
}}}else{if(T[aa]){delete T[aa]
}}if(Y){S.reload()
}};
S.clear=function(V){T={};
if(V){S.reload()
}};
S.add=function(X,W){X=X||{};
for(var V in X){if(X.hasOwnProperty(V)){T[V]=X[V]
}}if(W){S.reload()
}};
S.reload=function(){a.location.search.set(S.toString())
};
U();
return S
})(),t=function(R,U){var T,V,S;
if(R.indexOf("?")===0){R=R.substr(1)
}T=R.split("&");
for(S=0;
S<T.length;
S+=1){V=T[S].split("=");
if(V[0]===U){return V[1]
}}return null
},A=function(V){var U={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},R=U.parser[U.strictMode?"strict":"loose"].exec(V),T={},S=14;
while(S--){T[U.key[S]]=R[S]||""
}T[U.q.name]={};
T[U.key[12]].replace(U.q.parser,function(X,W,Y){if(W){T[U.q.name][W]=Y
}});
T.extention="."+T.file.split(".").pop();
T.filename=T.file.replace(T.extention,"");
return T
},z=function(){return w.ajax({url:"//web.archive.org/web/20180902030509/https://www.softpauer.com/whereami.html",dataType:"html"})
},C=w("html");
if(h){C.addClass("is-win")
}else{C.addClass("not-win")
}if(p){C.addClass("ios ios-"+String(K).replace(".","-"))
}if(L){C.addClass("android android-"+String(M).replace(".","-"))
}if(q){C.addClass("ie")
}return{window:a,isTouch:m,hasCssvhunit:o,hasFlexbox:v,hasPictureElement:r,isStaticServer:F,isIOS:p,iosVersion:K,isAndroid:L,androidVersion:M,isWindowsPhone:B,isWindows:h,ieVersion:q,isEditMode:N,homeUrl:Q,getTransitionEndEventName:O,hasCssTransitions:g,isMobile:u,isNarrowLayout:J,isMediumLayout:G,isWideLayout:D,removeSwiperClasses:I,getElementsByClassName:n,resizeManager:f,adobeCampaignManager:H,debounce:k,stripSpacesHyphensBrackets:b,formatPhoneNumber:P,slugify:s,queryString:y,getQueryStringVariable:t,parseUri:A,browserSupportsPremium:e,CONST:d,templates:c,getISO2:z,interpolate:function(S,R){return S.replace(/\{:([\w\d-]+)\}/g,function(U,T){return R[T]
})
},getNonCachedScript:function(R,S){w.ajax({type:"GET",url:R,success:S,dataType:"script",cache:false})
}}
})($,Modernizr,window);
(function(n){var c=[],b=$(window),m=false,f=0;
function e(){if(!m){m=true;
b.on("scroll",d)
}}function j(){m=false;
b.off("scroll",d)
}function g(){if(c.length===0){j()
}}function d(){clearTimeout(f);
f=setTimeout(a,20)
}function a(){var o=0,r=b.scrollTop(),q=r+b.innerHeight(),p;
while(o<c.length){p=c[o];
if(h(p,q,r)){c.splice(o,1);
continue
}o+=1
}g()
}function h(o,p,q){return o.checkScrollIntoView(p,q)
}function k(p,o){p=$.isArray(p)?p:[p];
[].push.apply(c,p);
e()
}n.scrollWatcher={add:function(o){k(o,false);
a()
},remove:function(p){var o=$.inArray(p,c);
if(o!==-1){c.splice(o,1);
g()
}}}
}(fom.utils));
(function(a){var c=typeof window.JSON!=="undefined",b=function(){var g="test",f=window.localStorage;
try{f.setItem(g,"1");
f.removeItem(g);
return true
}catch(e){return false
}},d=b()?window.localStorage:(function(){var e={};
return{getItem:function(f){return e[f]
},setItem:function(f,g){e[f]=g
},removeItem:function(f){delete e[f]
},clear:function(){e={}
}}
}());
a.localStorage={setItem:function(e,f){if(c){d.setItem(e,JSON.stringify(f))
}},getItem:function(e){if(c){return JSON.parse(d.getItem(e))
}},removeItem:$.proxy(d.removeItem,d),clear:$.proxy(d.clear,d)}
}(fom.utils));
(function(b){var a={AUD:"AUD $",CAD:"CAD $",DKK:"kr",EUR:"",GBP:"",JPY:"",USD:"$"};
b.getCurrencySymbol=function(c){return a[c]||c
}
})(fom.utils);
(function(c){function e(){}e.prototype.on=a;
e.prototype.off=d;
e.prototype.trigger=b;
var f={on:a,off:d,trigger:b};
function a(j,h,g){if(!this._events){this._events={}
}if(!h||!j){return
}if(!this._events[j]){this._events[j]=[]
}this._events[j].push({event:j,handler:h,scope:g});
return this
}function b(j,m){if(!this._events){this._events={}
}var h=this._events[j];
if(!h){return
}var g=h.length,k;
while(g--){k=h[g];
k.handler.apply(k.scope,m)
}}function d(k,j){if(!this._events){this._events={}
}if(!k){this._events={};
return
}if(!j){this._events[k]=[];
return this
}var h=this._events[k];
if(!h){return
}var g=h.length,m;
while(g--){m=h[g];
if(m.handler===j){this._events[k].splice(g,1)
}}}c.eventDispatcher={prototypal:e,object:f}
})(fom.utils);
(function(b,d,a){fom.modules.modal=function c(m,y,u){var t=m||{},v=y||[],e=u||{},f={SHIM:".fom-modal-shim",MODAL:".fom-modal",HEADER:".premium-title",FOOTER:"footer",BODY:".content",CLOSE:".icon-close",DOC_BODY:"body"},w={OPEN:"is-visible",SUCCESS:"icon-tick",INFO:"icon-info-on",WARN:"icon-error",TALLFIX:"turnoff-fixed",MODAL_ACTIVE:"modal_active"},M,O,D,n,C,B,H;
function g(){I();
P();
q();
N()
}function L(){D.empty();
C.empty();
n.empty()
}function I(){if(t.onlyBodyContent){D.parent("header").hide();
return
}return D.html(t.header||"")
}function P(){C.html(p());
if(t.title){C.prepend('<h5 class="sml-title">'+r()+t.title+"</h5>")
}}function p(){var S,Q,R=[];
if(d.isArray(t.content)){Q=t.content.length;
for(S=0;
S<Q;
S+=1){R.push("<p>"+t.content[S]+"</p>")
}return R.join("")
}else{if(typeof(t.content)==="string"){return("<p>"+t.content+"</p>")
}}return""
}function q(){if(t.onlyBodyContent){return
}var R=v.length,T,S,U,Q;
if(R===0){return
}S=C.append('<p class="btns"></p>').find("p.btns");
for(T=0;
T<R;
T+=1){Q=v[T];
U=d("<a/>").attr({href:Q.url||"#",target:Q.target||"_self","class":E(Q.css,T)}).text(k(Q.text,T));
U.on("click",(Q.callback&&typeof(Q.callback)==="function")?Q.callback:G);
S.append(U)
}}function N(){if(t.onlyBodyContent){n.hide();
return
}if(t.footer){n.html("<p>"+t.footer+"</p>");
n.show()
}else{n.hide()
}return n
}function k(R,Q){if(R){return R
}else{if(Q<2){return["OK","Cancel"][Q]
}}return"Button"
}function E(S,Q){var R=(Q===0)?"btn":"";
if(S){R+=(" "+S)
}return R
}function A(){H.one("click",function(Q){Q.preventDefault();
G();
if(e.xclose&&e.xclose.callback){x(e.xclose.callback)
}})
}function J(){if(e.xclose&&e.xclose.disable){H.hide()
}else{H.show()
}}function r(){var Q;
if(e.messagetype){Q=e.messagetype.toUpperCase();
if(w[Q]){return'<span class="'+w[Q]+'"></span>'
}}return""
}function x(U,Q,S){var T=Q||null,R=S||[];
if(U&&typeof(U)==="function"){return U.apply(T,R)
}}function F(){return(O.height()>d(b).height())
}function o(){if(F()){O.addClass(w.TALLFIX).css("top",d(b).scrollTop())
}}function h(){return O.removeClass(w.TALLFIX).removeAttr("style")
}function z(){var Q="reloadicons";
if(a.ieVersion==8){O.addClass(Q);
setTimeout(function(){O.removeClass(Q)
},10)
}}function s(S,Q,R){L();
A();
J();
if(t.content){g();
z();
o();
M.addClass(w.OPEN);
O.addClass(w.OPEN);
B.addClass(w.MODAL_ACTIVE)
}x(S,Q,R)
}function G(S,Q,R){O.removeClass(w.OPEN);
M.removeClass(w.OPEN);
B.removeClass(w.MODAL_ACTIVE);
setTimeout(function(){h();
x(S,Q,R)
},600)
}function j(){return((O.hasClass(w.OPEN))?"open":"closed")
}function K(){M=d(f.SHIM);
O=d(f.MODAL);
D=d(f.HEADER,O);
n=d(f.FOOTER,O);
C=d(f.BODY,O);
H=d(f.CLOSE,O);
B=d(f.DOC_BODY)
}K();
return{open:s,close:G,status:j}
}
}(window,jQuery,fom.utils));
fom.modules.modals=function(d,b,a,c){return{loginServerBusy:function(e){var g=function(){f.close()
},f=b({content:"We're sorry, but the servers are experiencing heavy traffic at the moment. Please try again later.",title:"Login currently unavailable",header:"F1Access"},[],{xclose:{disable:false},messagetype:"warn"});
f.open()
},expiredPremium:function(e){if(e){e.preventDefault();
e.stopPropagation()
}var j={DATA_LOCATION:".site-header"},f={ACCOUNTPAGE:"data-accountmanagement",PREMIUMPAGE:"data-premiumsales",PREMIUMPAGE_TARGET:"data-premiumsalestarget"},h=["There is a problem with your F1 Access account which may be due to entering incorrect payment details or your account may have expired.","Please go to Account Management and update your details.",'If this problem continues after updating your details, please contact <a href="mailto:billing@formula1.com">billing@formula1.com</a> or continue to browse the rest of formula1.com'],g;
g=b({content:h,title:"There is an issue with your account",header:"F1Access"},[{text:"Account Management",url:d(j.DATA_LOCATION).attr(f.ACCOUNTPAGE)},{text:"Continue"}],{messagetype:"warn"});
g.open()
},loginThrottled:function(f){var g=function(){e.close()
},e=b({content:"Sorry, but we are experiencing high volumes of logins. Please try again at "+f+".",title:"Login currently unavailable",header:"F1Access"},[{text:"Ok",callback:d.proxy(g,this)}],{xclose:{disable:false},messagetype:"warn"});
e.open()
},unsupportedBrowser:function(g){var f=function(){e.close();
if(g){g()
}},e=b({content:"F1 Access is not supported in your browser, please upgrade to view the full experience.",title:"Browser not supported",header:"F1Access"},[{text:"Back",callback:d.proxy(f,this)}],{xclose:{disable:true},messagetype:"warn"});
if((c.androidVersion&&parseFloat(c.androidVersion)<=4.3)){window.location=a.siteStructure.unsupportedBrowserPage
}else{e.open()
}},confirmCancelSubscription:function(g){var e=function(){f.close();
if(g.confirm){g.confirm()
}},h=function(){f.close();
if(g.cancel){g.cancel()
}},f=b({title:"Sorry to see you go",content:["Are you sure you want to cancel your subscription?","Turning off 'Auto-renew' means we will no longer bill your preferred method of payment. You will continue to have access to premium content until your current subscription period ends."],header:"F1Access"},[{text:"Yes, cancel it",callback:d.proxy(e,this)},{text:"No, keep it",callback:d.proxy(h,this)}],{messagetype:"warn"});
f.open();
return f
}}
}(jQuery,fom.modules.modal,fom.config,fom.utils);
(function(e,m,b,q,c){var h=b(e),f="simpleParallax",t=!q.isTouch&&(q.resizeManager.size===q.resizeManager.sizes.WIDE),r=[],a=0,s=h.height(),p="background-position",n="background-position-y",o="top";
function d(){if(t){a=h.scrollTop();
e.requestAnimationFrame(g)
}}function u(){q.resizeManager.on(q.resizeManager.events.RESIZE,function(){s=h.height()
});
q.resizeManager.on(q.resizeManager.events.CHANGE,function(){if(q.isTouch||q.resizeManager.size!==q.resizeManager.sizes.WIDE){t=false;
g(0,true)
}else{t=true;
g()
}})
}function g(y,A){var w,v=0,x=r.length,z;
for(;
v<x;
v++){w=r[v];
if(typeof A!=="undefined"){z=0
}else{if(w.bg){z=Math.round(w.top+((a-w.offsetTop)*w.speed))+"px"
}else{z=Math.round(w.top+((a-w.offsetTop)*w.speed))
}}if(w.offsetTop<a+s&&w.offsetTop+w.elem.height()>a){if(w.bg&&typeof w.left!=="undefined"){w.elem.css(p,w.left+" "+z)
}else{if(w.bg){w.elem.css(n,z)
}else{w.elem.css(o,z)
}}}}}function k(v){r.push(v);
if(!q.isTouch){d()
}}function j(K,w){var y=b(K),x=w.bg,G=(x?y.css(n):y.css(o))||0,C=y.css("backgroundImage").replace(/(url\()|(\))/g,""),M,B=y.height(),I=y.offset().top,z=B+I,v,H,E=x?y:y.parent(),F=y.is("img"),L=y.attr("src"),J=(w.scrollFactor||0.2)*(-10);
if(x&&typeof G==="undefined"){H=y.css(p).split(" ");
G=H.pop();
v=H.pop()
}function D(Q,O,P,N){M=new Image();
M.onload=function(){A(Q,O,N,this)
};
M.src=P
}function A(X,S,V,P){var T=P?P.width:S.width(),R=P?P.height:S.height(),U=V?S.width():X.width(),Y=V?S.height():X.height(),Q=U/T,N=Y/R,O=Q>N?Q:N,W={};
R=parseInt(R*O,10);
I=X.offset().top;
G=G.indexOf("%")>=0?-parseInt(+G.replace("%","")/100*(V?(R-Y):(P?Y:R)),10):+G.replace("px","");
if(G===0){G=-(R-Y)/2
}W={elem:S,bg:V,top:G,offsetTop:I,height:B,bottom:z,left:v,speed:J*(G/R)};
k(W)
}if(x){D(E,y,C,true)
}else{if(F){D(E,y,L,false)
}else{h.on("load",function(){A(E,y,false,null)
})
}}return{options:w}
}h.on("scroll",d);
u();
b.fn[f]=function(v){v=v||{bg:true};
b(this).each(function(){this[f]=new j(this,v)
})
}
}(window,document,window.jQuery,fom.utils));
var gigya=gigya||{accounts:{addEventHandlers:function(){}}};
fom.modules.gigyaRaas=(function(f,q,a,j){this.isShowingModal=false;
var z=this,G="signInLoad",k="signInSubmit",y="signInSuccess",F="signInFail",g="forgotPasswordLoad",n="forgotPasswordSubmit",E="forgotPasswordSuccess",b="forgotPasswordFail",w=function(){},t=function(){f("#raas-modal").removeClass("md-show");
setTimeout(function(){gigya.accounts.hideScreenSet({screenSet:"Responsive-RegistrationLogin",containerID:"screen"})
},1000)
},D=function(H){},e=function(H){},v=function(H){if(H&&H.length>0){var I=H.find("[data-switch-screen='gigya-login-screen']");
I.off("click");
I.on("click",function(J){J.preventDefault();
fom.modules.user.login()
})
}},C=function(H){if(f("#raas-modal").hasClass("md-show")){f("#raas-modal").removeClass("md-show");
setTimeout(function(){f("#raas-modal").addClass("md-show")
},500)
}else{f("#raas-modal").addClass("md-show")
}},h=function(K){var J=f("#"+K.currentScreen),L=o();
if(K.currentScreen==="gigya-login-screen"||K.currentScreen=="gigya-forgot-password-screen"){var H="";
try{H=K.response.requestParams.loginID
}catch(I){H=""
}if(H!==""){J.find("input.gigya-input-text.email").val(H)
}}if(L){J.find('input[name="passwordResetToken"]').val(L)
}if(K.currentScreen==="gigya-custom-error-screen"&&K.context){r(K,K.context)
}v(J);
if(K.currentScreen){switch(K.currentScreen){case"gigya-login-screen":j.fireCustomEvent(G);
break;
case"gigya-forgot-password-screen":j.fireCustomEvent(g);
break
}}},p=function(H){f("#raas-modal").removeClass("md-show");
z.isShowingModal=false;
if(z.onCloseHandler){z.onCloseHandler()
}},r=function(M,J){var N="hidden",L="",K=f("#"+M.currentScreen),I=K.find(".backlink"),H=I.filter('a[data-switch-screen="'+J.screen+'"]');
switch(String(J.errorCode)){case"403042":L="The email address and password that you entered have not been recognised, please review your details and try again.";
break;
case"403047":L="The email address that you entered has not been recognised, please review your details and try again.";
break;
default:L=J.errorMessage;
break
}if(L!==""){K.find("h5").after('<label class="gigya-label"><span class="gigya-label-text">'+L+"</span></label>")
}I.addClass(N);
H.removeClass(N)
},B=function(H){if(H.response.errorCode!=0&&(H.screen==="gigya-login-screen"||H.screen==="gigya-forgot-password-screen")){gigya.accounts.showScreenSet({context:H,screenSet:"Responsive-RegistrationLogin",startScreen:"gigya-custom-error-screen",containerID:"screen",onBeforeScreenLoad:C,onAfterScreenLoad:h,onHide:p,onError:B,onBeforeSubmit:d,onAfterSubmit:c});
return false
}},d=function(I){var H=f("#"+I.screen);
if(I.screen){switch(I.screen){case"gigya-login-screen":j.fireCustomEvent(k);
break;
case"gigya-forgot-password-screen":j.fireCustomEvent(n);
break
}}if(!s(I.formData.loginID)){f("#"+I.screen+" span.gigya-error-display.email").addClass("gigya-error-display-active");
f("#"+I.screen+" input.gigya-input-text.email").addClass("gigya-error");
return false
}else{f("#"+I.screen+" span.gigya-error-display.email").removeClass("gigya-error-display-active");
f("#"+I.screen+" input.gigya-input-text.email").removeClass("gigya-error")
}},c=function(J){var I="",H=false;
J.response.sessionInfo;
if(J.screen){H=(J.response.status.toLowerCase()==="fail");
switch(J.screen){case"gigya-login-screen":I=H?F:y;
j.fireCustomEvent(I);
break;
case"gigya-forgot-password-screen":I=H?b:E;
j.fireCustomEvent(I);
break
}}if(J.response.errorCode!=0){gigya.accounts.showScreenSet({screenSet:"Responsive-RegistrationLogin",startScreen:"gigya-custom-error-screen",containerID:"screen",onBeforeScreenLoad:C,onAfterScreenLoad:h,onHide:p,onError:B,onBeforeSubmit:d,onAfterSubmit:c})
}},A=function(){f("span.gigya-error-msg").each(function(){if(f(this).hasClass("gigya-error-msg-active")){f(this).siblings(".gigya-label-text").hide()
}else{f(this).siblings(".gigya-label-text").show()
}});
f("span.gigya-error-display").each(function(){if(f(this).hasClass("gigya-error-display-active")){f(this).siblings(".gigya-label-text").hide()
}else{f(this).siblings(".gigya-label-text").show()
}});
setTimeout(A,100)
},s=function(I){var H=new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);
return H.test(I)
},o=function(){return a.queryString.get("pwrt")
},u=function(I,P){var O=I.split("#");
var K=O[0].split("?");
if(K.length>=2){var M=K.shift();
var H=K.join("?");
var N=encodeURIComponent(P)+"=";
var J=H.split(/[&;]/g);
for(var L=J.length;
L-->0;
){if(J[L].lastIndexOf(N,0)!==-1){J.splice(L,1)
}}I=M+"?"+J.join("&");
if(O[1]){I+="#"+O[1]
}}return I
},m=function(){var H=f("#gigya-reset-password-screen"),J=H.find('input[name="newPassword"]'),I=H.find('input[name="passwordRetype"]');
if(J.val()==""||I.val()==""||(J.val()!==I.val())){return false
}gigya.accounts.resetPassword({passwordResetToken:o(),newPassword:J.val(),callback:x})
},x=function(J){var P=J.errorCode;
if(P!=0){var L="gigya-reset-password-custom-error-screen";
var I="";
var O=J.errorDetails;
var N=J.errorMessage;
var M=Math.round(P/1000);
var K=(O!=null&&O.length>0)?O:N;
var H={screenSet:"Responsive-RegistrationLogin",screen:L,containerID:"screen"};
if(K.indexOf("invalid password - minimum length")>-1){K="Please enter a password with a minimum of 8 characters.";
I="invalid"
}if(K.indexOf("Reset password link expired")>-1){K="The reset password link has expired. Please request the password to be reset again to receive a new link.";
I="expired"
}gigya.accounts.switchScreen(H);
if(K!=""){f("#"+L+" h5").after('<label class="gigya-label"><span class="gigya-label-text">'+K+"</span></label>")
}if(I==="expired"){f('[data-switch-screen="gigya-reset-password-screen"]').attr("data-switch-screen","gigya-forgot-password-screen")
}}else{var H={screenSet:"Responsive-RegistrationLogin",screen:"gigya-reset-password-success-screen",containerID:"screen"};
gigya.accounts.switchScreen(H)
}};
q.hideModal=t;
q.resetPassword=m;
f("#loginButton").click(function(){gigya.accounts.showScreenSet({screenSet:"Responsive-RegistrationLogin",containerID:"screen",onBeforeScreenLoad:C,onAfterScreenLoad:h,onHide:p,onError:B,onBeforeSubmit:d,onAfterSubmit:c})
});
f("#logoutButton").click(function(){gigya.accounts.logout()
});
f(A);
if(o()){gigya.accounts.showScreenSet({screenSet:"Responsive-RegistrationLogin",startScreen:"gigya-reset-password-screen",containerID:"screen",onBeforeScreenLoad:C,onAfterScreenLoad:h,onHide:p,onError:B,onBeforeSubmit:d,onAfterSubmit:c})
}gigya.accounts.addEventHandlers({onLogin:D,onLogout:e});
return{instance:this,hideModal:t,resetPassword:m,onBeforeScreenLoadHandler:C,onAfterScreenLoadHandler:h,onBeforeSubmitHandler:d,onAfterSubmitHandler:c,onHideHandler:p,onErrorHandler:B,onCloseHandler:w}
})(jQuery,window,fom.utils,fom.tracking);
fom.modules.gigya=(function(e,h,a,b,c){var g="styles/component.min.css",j="Responsive-RegistrationLogin",d=e(".site-header").attr("data-accountloginpage"),f=e.extend({init:function(){var k=h.createElement("link");
k.type="text/css";
k.rel="stylesheet";
k.href=g;
h.querySelector("head").appendChild(k);
return this
},initAccount:function(k){if(!window.gigyaOverrideCalled){return console.error("Error: SPLogin not loaded in the browser!")
}},createAccount:function(k){if(!window.gigyaOverrideCalled){return console.error("Error: SPLogin not loaded in the browser!")
}},setAccountInfo:function(k){if(!window.gigyaOverrideCalled){return console.error("Error: SPLogin not loaded in the browser!")
}},getAccountInfo:function(k){if(!window.gigyaOverrideCalled){return console.error("Error: SPLogin not loaded in the browser!")
}},login:function(k){window.location.href=d+"?redirect="+encodeURIComponent(window.location.href);
return false
},showScreenSet:function(k){a.accounts.showScreenSet({screenSet:k,containerID:"screen",onBeforeScreenLoad:b.onBeforeScreenLoadHandler,onAfterScreenLoad:b.onAfterScreenLoadHandler,onHide:b.onHideHandler,onError:b.onErrorHandler,onBeforeSubmit:b.onBeforeSubmitHandler,onAfterSubmit:b.onAfterSubmitHandler})
},logout:function(k){if(!window.gigyaOverrideCalled){return console.error("Error: SPLogin not loaded in the browser!")
}}},c.object);
return f.init()
})(jQuery,document,window.gigya,fom.modules.gigyaRaas,fom.utils.eventDispatcher);
if(window.overrideGigya){window.overrideGigya(fom.modules.gigya,fom.modules.gigyaRaas)
}fom.modules.csg=(function(x,B){var y="/bin/fom-website/mpp/create_id_existing_user",H="/bin/fom-website/mpp/create_id_add_subscription",c=x.trim(x(".js-csg-system-id").val()),L=x.trim(x(".js-csg-channel-id").val()),C=x.trim(x(".js-csg-language").val()),A=x.trim(x(".js-csg-service-api-url").val()),t=x.trim(x(".js-csg-metadata-api-url").val()),k=x.trim(x(".js-csg-f1-access-monthly-external-reference-id").val()),o=x.trim(x(".js-csg-f1-access-annual-external-reference-id").val()),u=function(){var O="test",N=window.sessionStorage;
try{N.setItem(O,"1");
N.removeItem(O);
return true
}catch(M){return false
}},d=(function(){var M={};
return{getItem:function(N){return M[N]
},setItem:function(N,O){M[N]=O
},removeItem:function(N){delete M[N]
},clear:function(){M={}
}}
}()),s="",h=u()?window.sessionStorage:d,I={},D=false,F=[],m=false,b=false,q=function(){console.error("cancelSubscription method called")
},z=function(M){if(!M||!M.PaymentInstruments){return false
}M=M.PaymentInstruments;
return x.grep(M,function(O,N){return O.Default==true
})
},E=function(O){var M=function(Q,P){return Q.ServicePriceId.toString()===O.toString()
};
var N=JSON.parse(h.getItem("serviceInfoParsed"));
if(!N){return false
}if(x.grep(N.month.SentinelRolePriceMaps["SentinelRolePriceMap"],M).length){return"month"
}else{if(x.grep(N.year.SentinelRolePriceMaps["SentinelRolePriceMap"],M).length){return"year"
}}},G=function(M){console.error("getCategoryById method called",M)
},r=function(){var M=t+"/Product/";
M+="SystemId/"+c+"/";
M+="Language/"+C+"/";
M+="ProductExternalReferenceType/Product Reference/ProductExternalReference/";
return M
},n=function(Q){var P=function(U){m=true;
b=true;
x.each(U,function(W,X){if(X.Product.ExternalReferences["0"].Value===k){h.setItem("productInfoMonthlyAll",JSON.stringify(X));
I.productInfoMonthlyAll=X
}if(X.Product.ExternalReferences["0"].Value===o){h.setItem("productInfoYearlyAll",JSON.stringify(X));
I.productInfoYearlyAll=X
}});
var V=F.length;
while(V--){F[V].onSuccess()
}},T=function(U){var V=F.length;
m=true;
while(V--){F[V].onFail(U)
}},O=h.getItem("productInfoMonthlyAll"),N=h.getItem("productInfoYearlyAll");
if(O&&N){I.productInfoMonthlyAll=JSON.parse(O);
I.productInfoYearlyAll=JSON.parse(N);
P([I.productInfoMonthlyAll,I.productInfoYearlyAll]);
return I
}else{var R=[];
R.push(x.ajax({dataType:"json",type:"GET",url:r()+k}));
R.push(x.ajax({dataType:"json",type:"GET",url:r()+o}));
Promise.all(R).then(M,S);
function M(U){P(U)
}function S(U){console.error("Promise Failed : ",U)
}}},w=function(M,Q){if(!h.getItem("productInfoMonthlyAll")||!h.getItem("productInfoYearlyAll")){throw new Error("fom.modules.csg - Trying to call getPrice before productInfoMonthlyAll and productInfoYearlyAll");
return false
}if(!Q){throw new Error("fom.modules.csg.getPrice - requires category as a month, year");
return false
}var S,O="F1_Access_";
if(Q==="month"){S=JSON.parse(h.getItem("productInfoMonthlyAll")).Product.PricingPlans;
O+="Monthly_"+M
}if(Q==="year"){S=JSON.parse(h.getItem("productInfoYearlyAll")).Product.PricingPlans;
O+="Annual_"+M
}var N=B.getCurrencySymbol(M),P=x.grep(S,function(V,T){if(V.Currency===M&&V.ExternalReferences){var U=0;
for(U;
U<V.ExternalReferences.length;
U++){if(V.ExternalReferences[U]["ExternalId"]==="Subscription"&&V.ExternalReferences[U]["Value"]===O){return V
}}}})[0],R=x.grep(P.ExternalReferences,function(U,T){return U.ExternalId==="Subscription"
})[0];
return{string:N+String(P.ChargeAmount.toFixed(2)),symbol:N,price:P.ChargeAmount,data:P,serviceId:R.Value}
},a=function(M){return M.replace(/\'|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\!|\|\$|\%|\&|\|\(|\)|\*|\+|\,|\:|\;|\<|\=|\>|\?|\[|\\|\]|\`|\{|\||\}|\~|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\|\/g,"")
},K=function(O,Q){var N=Q.data,S=Q.onSuccess,T=Q.onFail,M={},R=x.cookie("account-info");
if(R){var P=JSON.parse(R);
if(P.csgSessionToken){M.SessionId=P.csgSessionToken;
h.setItem("sessionId",M.SessionId)
}}else{M.sessionId=h.getItem("sessionId")
}return S(M)
},j=function(M){return typeof M==="string"?M:JSON.stringify(M)
},J=function(){return C
},f=function(P){var M=P.methodName,N=j(P.requestData),R=P.onSuccess,T=P.onFail,Q={"cd-sessionid":h.getItem("sessionId"),"cd-systemid":c,"Content-Type":"application/json"},O=function(U){if(typeof U==="object"){if(U.GUID){h.setItem("sessionId",U.GUID)
}if(U.Fault){return T(U)
}return R(U)
}else{return T(U)
}},S=function(U){return T(U)
};
if(!s){s=A
}if(!s||s===""){throw new Error("fom.modules.csg - CSG API URL not set");
return S()
}if(!h.getItem("sessionId")){throw new Error("fom.modules.csg - createSession must be called before an API call can be made");
return S()
}x.ajax({type:"POST",url:s+M,data:N,error:S,headers:Q,success:O,dataType:"json"})
},e=function(M){switch(M.toString()){case"1":return"Visa";
case"2":return"Master Card";
case"8":return"Maestro";
default:return"Card Type"
}},p=function(M,N){h.setItem(M,N)
},v=function(M){return h.getItem(M)
},g=function(M){if(m){if(b){M.onSuccess()
}else{M.onFail()
}}else{if(!m&&!D){F.push(M);
D=true;
n()
}else{if(D){F.push(M)
}}}};
return{getServiceIdFromServicePriceId:G,cancelSubscription:q,cleanIllegalCharacters:a,getCategoryById:E,getProductInfoAll:n,hasActiveSubscription:z,sessionStorage:I,getPrice:w,createSession:K,CREATE_SESSION_NEW_USER_URL:H,CREATE_SESSION_EXISTING_USER_URL:y,api:f,ready:g,getCreditCardType:e,setSessionItem:p,getSessionItem:v,getLanguageCode:J}
})(jQuery,fom.utils);
fom.modules.responsiveElements=(function(h,k,o,u){var e="responsive-element",v="data-respond",p=5,m={start:256,end:1024,interval:32},d={},t,f=function(y){var A=y.split(/\s+/),x=[];
for(var z=0,w=A.length;
z<w;
z++){if(A[z].match(/^gt\d+|lt\d+$/)){x.push(A[z])
}}return x
},a=function(A){var x=f(A.getAttribute("class")),z=h(A);
for(var y=0,w=x.length;
y<w;
y++){z.removeClass(x[y])
}},n=function(B,y){var C=y.start,w=y.end,x=y.interval,A=x>C?x:~~(C/x)*x,z=[];
while(A<=w){if(A>B){z.push("lt"+A)
}else{if(A===B){z.push("is"+A)
}}A+=x
}return z
},c=function(z){var x=[],y={};
if(!z){return false
}t=t||{};
if(t[z]){return t[z]
}x=z.replace(/\s+/g,"").split(";");
for(var C=0,w=x.length;
C<w;
C++){if(!x[C]){continue
}var B=x[C].split(":"),A=B[0],D=B[1];
D=D.replace("px","");
if(!isNaN(D)){D=parseInt(D,10)
}y[A]=D
}t[z]=y;
return y
},j=function(C){var x=C.getAttribute(v),y=c(x)||m,B=n(C.clientWidth,y),A=h(C);
a(C);
for(var z=0,w=B.length;
z<w;
z++){A.addClass(B[z])
}},g=function(){for(var x=0,w=d.responsive_elements.length;
x<w;
x++){j(d.responsive_elements[x])
}},s=function(w){j(w)
},r=function(w){w.each(function(){s(h(this).get(0))
})
},b=function(){g();
k.onresize=u.debounce(g,p)
},q=function(){function w(){d.responsive_elements=u.getElementsByClassName(e);
b()
}h(o).ready(function(){w()
})
};
q();
return{recalculate:s,recalculate$Elements:r}
})($,window,window.document,fom.utils);
fom.modules.tabGroups=(function(b){var e="data-tab-title",d="data-id",c="active",a=$(".tab-group"),h=function(k){var j=$('<nav class="tab-group-nav group"></nav>'),m=function(n){var q=n.attr(d),o=n.attr(e),p=n.hasClass(c)?" "+c:"";
return $('<a href="#'+q+'" title="'+o+'" class="tab-'+q+p+'">'+o+"</a>")
};
k.each(function(){var o=$(this),n=m(o);
j.append(n)
});
return j
},f=function(m){var k=m.children(),j=h(k);
m.prepend(j);
j.on("click","a",function(q){var p=$(this),n=p.attr("href").substring(1),o=m.find('[data-id="'+n+'"]'),r=o.find(".responsive-element");
q.preventDefault();
m.find("."+c).removeClass(c);
p.addClass(c);
o.addClass(c);
if(r.length>0){r.each(function(){b.responsiveElements.recalculate($(this)[0])
})
}})
},g=function(){a.each(function(){var j=$(this);
f(j)
})
};
g();
return{$elems:a}
})(fom.modules);
fom.modules.videoPlayer=(function(g,e,h,k){var m={autoplay:false,controls:true,elapsed:0,isMuted:false,loop:false,preload:true,disableDiscovery:false};
var b=[],j=(function(){var n=0;
return function(o){var p=++n+"";
return o?o+p:p
}
})(),f=false;
function a(n,p,o){this.$elem=n;
this.id=p;
this.settings=g.extend({},m,o);
this.elapsed=0;
this.init()
}a.events={ON_PLAY:"onPlay",ON_PAUSE:"onPause",ON_TIME_CHANGED:"onTimeChanged"};
a.prototype={init:function(){OO.ready(g.proxy(function(){this.setPlayerDimensions();
h.on(h.events.RESIZE,this.setPlayerDimensions,this);
this.getToken(this.settings.videoid);
this.cacheElements();
this._events=[]
},this))
},setPlayerDimensions:function(){var p=16/9;
var n=0;
var o="100%";
this.$elem.css("width",o);
o=this.$elem.width();
n=Math.ceil(o/p);
this.$elem.css("height",n)
},createPlayer:function(r,o){var n=this;
var t=this.$elem.parent();
var p=g('input[name="ooyala-player-id"]').val();
var q=(n.settings.disablediscovery==true)?{config:"/etc/designs/fom-website/ooyala/skin-config/skin-no-discovery.json"}:{config:"/etc/designs/fom-website/ooyala/skin-config/skin-no-discovery.json"};
var s=null;
if(k.isIOS||k.isAndroid||k.isWindowsPhone){s={level:0.4,duration:4}
}else{s={level:0.8,duration:2}
}n.player=OO.Player.create(n.id,r,{pcode:"tudTgyOkO_Oa2kec6fNFnApvZ8ig",playerBrandingId:p,skin:q,autoplay:n.settings.autoplay,embedToken:o,initialTime:n.duration,initialBitrate:s,layout:"chromeless",prebuffering:n.settings.preload,wmode:"opaque",onCreate:function(u){u.subscribe(OO.EVENTS.PLAYER_CREATED,"customUi",function(){n.onPlayerCreated()
});
u.subscribe(OO.EVENTS.PLAYBACK_READY,"customUi",function(v,w){if(n.settings.autoplay){n.playVideo()
}n.$elem.removeClass("hide-controls")
});
u.subscribe(OO.EVENTS.SEEKED,"customUi",function(v,w){if(n.player.isPlaying()&&w>0){n.playVideo()
}if(!n.$elem.is(":visible")){n.pauseVideo()
}});
u.subscribe(OO.EVENTS.VC_PLAYED,"customUi",function(v,w){n.pauseVideo();
if(k.isIOS){if(!n.player.fullscreen){n.showPreview()
}}});
u.subscribe(OO.EVENTS.SET_TARGET_BITRATE,"customUi",function(z,y,w,v){var B=n.player.getPlayheadTime(),A=n.player.getDuration();
if(!w&&(A-B)>2&&B>3){n.player.seek(B-1)
}})
}})
},getToken:function(r){var o=this,q=o.$elem.attr("data-path"),n=(typeof CQ!="undefined"&&CQ.WCM)?CQ.WCM.isPreviewMode():g("#previewMode").length>0,p=(typeof CQ!="undefined"&&CQ.WCM)?CQ.WCM.isEditMode():k.isEditMode;
if(q.indexOf("/content/fom-website")==0&&!n&&!p){q=q.replace("/content/fom-website","")
}g.post(q+".token.html?embedCodes="+r).done(function(s){s=g.trim(s);
if(s.length>0){o.createPlayer(r,s)
}else{o.showError("TOKEN-EMPTY")
}}).fail(function(s){o.showError("NO-TOKEN")
})
},hidePreview:function(){this.$preview.hide();
this.$partnerPreview.hide();
this.$display.show()
},showPreview:function(){this.$preview.show();
this.$partnerPreview.show();
this.$display.hide()
},setPreview:function(){if(this.settings.autoplay){this.playVideo(true)
}else{this.showPreview()
}},showError:function(o){var n=this.$elem.find(".video-error");
this.$preview.hide();
this.$partnerPreview.hide();
n.show();
n.append("<p>Unfortunately, we are unable to play the video at this time.</p>",'<p>Error Code: <span class="error-code">UNKNOWN</span></p>');
n.find(".error-code").text(o)
},playVideo:function(n){var o=g(window);
this.hidePreview();
if(!this.player.isPlaying()){this.player.play()
}o.trigger("video-playing",{id:this.id})
},pauseVideo:function(){this.player.pause()
},resetVideoPlayback:function(){if(this.player){this.player.seek(0);
this.pauseVideo()
}},attachPlayButton:function(){var n=this;
n.$preview.find("a").on("click",function(o){o.preventDefault();
n.playVideo.call(n)
});
n.$partnerPreview.find("a").on("click",function(o){o.preventDefault();
if(n.player.isPlaying()){n.pauseVideo()
}else{n.playVideo()
}})
},attachControls:function(){this.attachPlayButton()
},subscribe:function(){var n=this;
var o=g(window);
o.on("video-playing",function(q,p){if(n.id!==p.id){n.pauseVideo()
}})
},cacheElements:function(){this.$preview=this.$elem.find(".video-preview");
this.$partnerPreview=this.$elem.find(".partner-video-preview");
this.$display=this.$elem.find(".video-display")
},onPlayerCreated:function(){this.attachControls();
this.setPreview();
this.subscribe()
},on:function(p,o,n){if(!this._events[p]){this._events[p]=[]
}this._events[p].push({scope:n,fn:o})
},trigger:function(o,p){var n=0;
if(!this._events[o]){return
}n=this._events[o].length;
while(n--){this._events[o][n].fn.apply(this._events[o][n].scope,p)
}}};
function d(n){if(!f){f=true;
if(n){n()
}}else{if(n){n()
}}}function c(o,n,p){d(g.proxy(function(){if(typeof OO!=="undefined"){OO.ready(function(){var q={};
o.each(function(){var t=j("video-player-");
var r={};
var s=g(this);
n=g.extend({},n,s.data());
s.children(".video-display").attr("id",t);
r=new a(s,t,n);
r.holderId=t;
b.push(r);
q[t]=r
});
p(q)
})
}},this))
}c(g(".video-player.js-init"));
return{Player:a,players:b,initPlayers:c}
})(jQuery,Modernizr,fom.utils.resizeManager,fom.utils);
fom.modules.breakouts=(function(h,m,e,j){var o={PULLQUOTE_MAX_OFFSET:38},d=false,k=[],f=m.CONST.WIDEST_LAYOUT,b=function(p,q){k.push({el:p,direction:q,justQuote:p.hasClass("quote")?p.find("img").length?false:p.find("blockquote"):false})
},a=function(){var q=e(h).width(),p;
for(p=0;
p<k.length;
p++){c(k[p],q)
}},c=function(q,r){var p=q.el;
if(r>=m.CONST.MEDIUM_LAYOUT){if(q.justQuote){q.justQuote.css({margin:25+"px"})
}if(r>f){p.css(q.direction,-((p.parent().offset().left))+(Math.floor((r-f)/2))+"px")
}else{p.css(q.direction,-(p.parent().offset().left)+"px")
}}else{p.attr("style","")
}},g=function(){j.off(j.events.RESIZE,a);
e(".breakout-left").attr("style","");
e(".breakout-right").attr("style","");
k=[];
d=true
},n=function(){var p=e("main");
d=!(p.hasClass("go-full-width"));
if(!d){e(".breakout-left").each(function(){b(e(this),"marginLeft")
});
e(".breakout-right").each(function(){b(e(this),"marginRight")
});
if(k.length){a=m.debounce(a,50);
j.on(j.events.RESIZE,a);
j.on(j.events.ZOOM,a);
a()
}}return{disableBreakouts:g}
};
return n()
}(window,fom.utils,jQuery,fom.utils.resizeManager));
fom.modules.authenticator=(function(b,a,e,c){var d=b.extend({opts:{AUTH_URL:"/authentication/login",AUTH_VALIDATOR_URL:"/bin/fom-website/login_status",COOKIE_AEM_SESSION:"login-token",COOKIE_NO_AUTH_RETRY:"noauthretry"},init:function(){var f=b.cookie(this.opts.COOKIE_AEM_SESSION);
this.hasLoginToken=(f&&f!=="");
return this
},authenticate:function(g,h,f){if(b.cookie(this.opts.COOKIE_NO_AUTH_RETRY)){return
}g=g||fom.modules.user.accountInfo;
b.ajax({complete:b.proxy(function(j){if(!f){return this._refreshCSRFToken().then(function(){return h(j)
})
}switch(j.status){case 503:return setTimeout(b.proxy(function(){this.authenticate(g,h,f*2)
},this),f);
case 403:return b.cookie(this.opts.COOKIE_NO_AUTH_RETRY,"true",{path:"/",expires:1});
case 307:default:return this._refreshCSRFToken().then(function(){return h(j)
})
}},this),data:this._getAuthObjectFromAccountInfo(g),dataType:"json",type:"POST",url:this.opts.AUTH_URL})
},deauthenticate:function(){b.removeCookie(this.opts.COOKIE_NO_AUTH_RETRY,{path:"/"});
b.removeCookie(this.opts.COOKIE_AEM_SESSION,{path:"/"})
},validate:function(h){var g=b.cookie(this.opts.COOKIE_AEM_SESSION),f=function(j){this._parseAuthenticatorResponseAndCallback(j,h)
};
if(!g||g===""){return h(false)
}b.ajax({complete:b.proxy(f,this),dataType:"json",type:"GET",url:this.opts.AUTH_VALIDATOR_URL})
},_parseAuthenticatorResponseAndCallback:function(f,h){var g=f.responseText?b.trim(f.responseText):"";
switch(g){case"subscribed":case"notsubscribed":h(true,g);
break;
case"anonymous":case"session_timed_out":default:h(false,g)
}},_getAuthObjectFromAccountInfo:function(f){return{data:JSON.stringify({data:{subscriptionStatus:f.data.subscriptionStatus,subscriptionToken:f.data.subscriptionToken}})}
},_refreshCSRFToken:function(){if(c&&c.csrf){return c.csrf.refreshToken()
}else{return Promise.resolve()
}}},a.object);
return d.init()
})(jQuery,fom.utils.eventDispatcher,fom.modules.user,window.Granite);
fom.modules.user=(function(k,u,a,f,x,B,w,e,p,m,r,n){var A="account-info",h="throttle-login",v="/etc/designs/fom-website/static/status.json",d="/system/sling/logout?resource=",y="signInThrottled",q=3,g="expiry-account-info",t="resend-email-info",s=1,c="/content/fom-website/en/validation-error.html",o=".sp_modalDismiss",j=k(".site-header").attr("data-accountloginpage"),z=k(".site-header").attr("data-accountLogoutPage"),b=k.extend({login:function(F,E,D,C){r.location.href=j+"?redirect="+encodeURIComponent(r.location.href);
return false
},logout:function(E){this.accountInfo=false;
this.isLoggedIn=false;
this.isPremium=false;
k.removeCookie(m.opts.COOKIE_NO_AUTH_RETRY,{path:"/"});
if(r.sessionStorage){r.sessionStorage.removeItem("promptedAccountExpiration")
}var C=d+k(".site-header .sign-out").first().data("redirect");
var D=encodeURIComponent(r.location.origin+C);
e.window.location.set(z+"?redirect="+D)
},get:function(C){switch(C){case"fullName":return[this.accountInfo.profile.firstName,this.accountInfo.profile.lastName].join(" ")
}},setAccountInfoGigya:function(C){u.setAccountInfo(C)
},setAccountInfoMPP:function(C){x.api({methodName:"/Subscriber/UpdateSubscriber",onSuccess:C.success,onFail:C.fail,requestData:C.data})
},addSubscription:function(C){x.api({methodName:"/Subscriber/SubmitOrder",onSuccess:C.success,onFail:C.fail,requestData:C.data})
},manageCardDetails:function(D){var C=D.data;
if(typeof C.CreditDebitCardDetails!=="undefined"){C.CreditDebitCardDetails.SkipPreauth=true
}x.api({methodName:"/Subscriber/CreatePaymentInstrument",onSuccess:D.success,onFail:D.fail,requestData:C})
},updateCardDetails:function(D){var C=D.data;
if(typeof C.CreditDebitCardDetails!=="undefined"){C.CreditDebitCardDetails.SkipPreauth=true
}x.api({methodName:"/Subscriber/UpdatePaymentInstrument",onSuccess:D.success,onFail:D.fail,requestData:C})
},setAccountInfoCookie:function(K,C){if(K.sessionInfo){k.cookie(K.sessionInfo.cookieName,K.sessionInfo.cookieValue,{path:"/"})
}K=this._parseAccountInfoObject(K);
this.accountInfo=K;
if(C&&C.setCookieExpiry&&C.setCookieExpiry==true&&K.data&&K.data.validated=="0"){var G=new Date();
var F=k(".site-header").attr("data-registrationCookieExpiry");
var L=F?F:q;
var J=G.getTime()+(L*24*60*60*1000);
G.setTime(J);
k.cookie(A,JSON.stringify(K),{path:"/",expires:G});
k.cookie(g,G.getTime(),{path:"/",expires:G})
}else{var D,I=new Date();
if(k.cookie(g)!=null&&K.data&&K.data.validated=="0"){D=k.cookie(g);
I.setTime(D)
}else{D=-1;
if(K.data&&K.data.subscriptionStatus=="inactive"){D=I.getTime()+(25*365*24*60*60*1000);
I.setTime(D)
}else{if(K.data&&K.data.subscriptionStatus=="active"){var E=new Date(K.data.subscriptionExpiry),H=new Date();
if(E>H){D=new Date(E).getTime();
I.setTime(D)
}else{I.setHours(23,59,59,999)
}}}}k.cookie(A,JSON.stringify(K),{path:"/",expires:I})
}},updateAccountInfo:function(C){u.getAccountInfo({complete:k.proxy(function(D){this.setAccountInfoCookie(D);
C(D)
},this)})
},_init:function(){u.on("onLogoutGigya",this._onLogoutGigya,this);
this.setUserProperties();
if(this.isLoggedIn){this._refreshLoginToken()
}return this
},setUserProperties:function(){if(!k.cookie(A)){this.isLoggedIn=false;
this.isPremium=false;
this.accountInfo=false;
this.subscriptionSource=false;
if(!e.isEditMode){m.deauthenticate()
}}else{this.isLoggedIn=true;
this.accountInfo=JSON.parse(k.cookie(A));
this.isPremium=(this.accountInfo.data&&this.accountInfo.data.subscriptionStatus&&this.accountInfo.data.subscriptionStatus==="active");
if(this.accountInfo.data&&this.accountInfo.data.subscriptionSource&&this.accountInfo.data.subscriptionSource==="subscriptionSourceApp"){this.subscriptionSource="app"
}else{this.subscriptionSource="web"
}}},_refreshLoginToken:function(){if(!m.hasLoginToken){m.authenticate(this.accountInfo,function(C){if(C.status>399||C.status<500){return
}else{r.location.reload()
}},500)
}else{m.validate(k.proxy(function(C){if(!C){m.deauthenticate();
m.authenticate(this.accountInfo,function(){r.location.reload()
},500)
}},this))
}},_serverStatusCheck:function(E){var C=function(F){if(!F){E(false)
}F.canLogin=F.canLogin==="true";
if(F.canLogin){E(true)
}else{if(F.blockProportion&&Math.random()>F.blockProportion){E(true)
}else{E(false,F)
}}},D=function(F){E(false)
};
if(k.cookie(h)){return E(false)
}k.ajax({dataType:"json",error:D,success:C,type:"GET",url:v})
},_setLoginThrottleCookie:function(D,E){var C=new Date(),G=C.getTime(),F=0;
if(k.cookie(h)){return false
}D=D||0;
E=E||D;
D*=1000;
E*=1000;
if(D===E){C.setTime(G+D)
}else{F=Math.floor(Math.random()*(E-D+1))+D;
C.setTime(G+F)
}k.cookie(h,this._getDigitalTimeFromDate(C),{path:"/",expires:C})
},_getDigitalTimeFromDate:function(D){var C=D.getUTCHours(),E=D.getUTCMinutes();
if(C<10){C=["0",C].join("")
}if(E<10){E=["0",E].join("")
}return[C,E].join(":")
},_parseAccountInfoObject:function(C){var D={data:{subscriptionStatus:C.data.subscriptionStatus,subscriptionToken:C.data.subscriptionToken},profile:{country:C.profile.country,firstName:C.profile.firstName,subscriberId:C.profile.SubscriberId}};
if(C.csgSessionToken){D.csgSessionToken=C.csgSessionToken
}else{}if(C.data.phoneNumber){D.data.phoneNumber=C.data.phoneNumber
}else{}return D
},_onLoginAuthSuccess:function(){this._onLoginAuthComplete()
},_onLoginAuthFail:function(){this._doPageReload=false;
this._onLoginAuthComplete(false)
},_onLoginGigya:function(D){if(D&&D.data&&D.data.validated=="0"){this.setResendEmailInfoCookie(D);
var C=k(".site-header").attr("data-emailvalidationerrorpage");
return r.location=C?C:c
}this.setAccountInfoCookie(D);
this._authLogin()
},setResendEmailInfoCookie:function(C){var D={UID:C.UID,UIDSignature:C.UIDSignature,signatureTimestamp:C.signatureTimestamp};
var E=new Date();
E.setTime(E.getTime()+(s*24*60*60*1000));
k.cookie(t,JSON.stringify(D),{path:"/",expires:E})
},_authLogin:function(){m.authenticate(this.accountInfo,k.proxy(this._onLoginAuthComplete,this))
},_onLoginAuthComplete:function(C){if(C.status===503){w.loginServerBusy();
this._doPageReload=false;
this.logout();
return
}if(this._doPageReload){this._pageReload()
}else{if(!this._doPageReload){if(this._onLoginUrl){r.location=this._onLoginUrl
}else{r.location.reload()
}}}},_onLogoutGigya:function(C){r.location=e.homeUrl
},_pageReload:function(){if(e.queryString.get("pwrt")){e.queryString.remove(["apiKey","pwrt"],true)
}else{r.location.reload()
}}},B.object);
return u?b._init():{}
})(jQuery,fom.modules.gigya,fom.modules.gigyaRaas,fom.modules.mpp,fom.modules.csg,fom.utils.eventDispatcher,fom.modules.modals,fom.utils,fom.tracking,fom.modules.authenticator,window);
fom.modules.premiumOverlay=(function(g,h){var e={},a=false,d={BODY:"body",PREMIUM_CONTENT:".is-premium-content",FREEMIUM_CONTENT:".is-freemium-content",FREEMIUM_OVERLAY:".freemium-overlay",FREEMIUM_LINK:".article-freemium-link",VIDEO_FREEMIUM_LINK:".video-freemium-link",SIGNIN_LINK:".sign-in",PROMOTED_ARTICLES:".promoted-articles"},c={IS_PREMIUM_USER:"is-premium-user",IS_FREEMIUM_USER:"is-freemium-user",IS_FREEMIUM_CONTENT:"is-freemium-content",VIDEO_CONTENT:"video-teaser",SHOW_OVERLAY:"showOverlay",CLICK_READY:"clickready"},b={CLICK:"click"},f=g(d.BODY);
e.Init=function(){if(h.isLoggedIn){g(d.FREEMIUM_OVERLAY).remove();
g(d.FREEMIUM_CONTENT).removeClass(c.IS_FREEMIUM_CONTENT)
}else{g(".is-freemium-content").find(".video-teaser-link").removeClass("video-teaser-link").addClass("is-freemium-link");
g(".is-freemium-content").removeClass("animate");
g(document).on("click",d.FREEMIUM_CONTENT+" "+d.SIGNIN_LINK,function(){var m,j,k=g(this).closest(d.FREEMIUM_CONTENT);
if(k.hasClass(c.CLICK_READY)){if(k.hasClass(c.VIDEO_CONTENT)){j=d.VIDEO_FREEMIUM_LINK
}else{j=d.FREEMIUM_LINK
}m=k.find(j);
if(!m.length){m=g(this).closest(j);
if(!m.length){m=g(this).closest("a")
}}h.login(false,{},m.attr("href"))
}});
g(document).on("click",d.FREEMIUM_CONTENT+" .register",function(){if(g(this).closest(d.FREEMIUM_CONTENT).hasClass(c.CLICK_READY)){var j=g(".site-header").attr("data-premiumsales");
if(j){window.location=j
}}});
g(document).on("mouseenter",d.FREEMIUM_CONTENT,function(){var j=g(this);
g(this).addClass(c.SHOW_OVERLAY);
if(g(this).hasClass("imgpanel")){g(this).closest(".promoted-item").find(".textpanel").addClass(c.SHOW_OVERLAY).addClass(c.CLICK_READY)
}if(g(this).closest(".swiper-wrapper").length){g(".promoted-articles").find(".accordion .stack-item").eq(g(this).closest(".swiper-slide").index()).find(d.FREEMIUM_CONTENT).addClass(c.SHOW_OVERLAY).addClass(c.CLICK_READY)
}setTimeout(function(){j.addClass(c.CLICK_READY)
},100)
}).on("mouseleave",d.FREEMIUM_CONTENT,function(m){g(this).removeClass(c.SHOW_OVERLAY).removeClass(c.CLICK_READY);
var k,j=g(m.relatedTarget);
if(j!=undefined&&j.attr("class")!=undefined){k=(j.hasClass("sign-in")||j.hasClass("register"))
}if(g(this).hasClass("imgpanel")&&!k){g(".promoted-item").find(".textpanel").removeClass(c.SHOW_OVERLAY)
}if(g(this).closest(".swiper-wrapper").length){g(".promoted-articles .accordion .stack-item").find(d.FREEMIUM_CONTENT).removeClass(c.SHOW_OVERLAY)
}});
g(document).on("mouseleave",".promoted-item",function(){g(this).find(".textpanel").removeClass(c.CLICK_READY)
});
g(document).on("click",d.FREEMIUM_CONTENT,function(j){j.preventDefault();
return false
});
g(document).on("click",d.FREEMIUM_LINK,function(j){j.preventDefault();
return false
})
}};
e.applyTo=function(j){if(h.isLoggedIn){if(h.isPremium){j.addClass(c.IS_PREMIUM_USER);
g(d.PROMOTED_ARTICLES).find(d.PREMIUM_CONTENT).addClass(c.IS_PREMIUM_USER)
}else{j.addClass(c.IS_FREEMIUM_USER)
}}};
e.Init();
return e
}(jQuery,fom.modules.user));
fom.modules.autosetprice=(function(e,u,r){var m=e(".autosetprice"),b=["","$","",""],s,h,x,v=e.cookie("CountryCode"),n=0,p=function(z){return e.trim(z)
},g=function(B){for(var A=0,z=b.length;
A<z;
A++){x=B.indexOf(b[A]);
if(x>-1){return(B.split(b[A])).slice(-1).pop()
}}},t=function(A,C){var z=g(A)*12,D=g(C),B=(z-D).toFixed(2);
return(C).charAt(x)+B
},c=function(B,C){if(!C){C=m
}var A=r.getPrice(B,"month"),F=r.getPrice(B,"year"),z=p(A.string),D=p(F.string),E=t(A.string,F.string);
if(!C.hasClass("upgrade")){z=e.trim(z).replace(" ","<br/>");
D=e.trim(D).replace(" ","<br/>")
}e(".monthly .price",C).html(z);
e(".yearly .price",C).html(D);
e(".yearly .saved",C).html(E)
},f=function(z,A){return false;
n=z;
w(s,A)
},w=function(E,H,B){if(!B){B=m
}var C=r.getPrice(E,"month"),z=r.getPrice(E,"year"),A=C.price-(C.price*(n/100)),G=z.price-(z.price*(n/100));
C.string=C.symbol+String(A.toFixed(2));
z.string=z.symbol+String(G.toFixed(2));
var F=p(C.string),D=p(z.string);
e(".price-month-discounted",B).html(F);
e(".price-year-discounted",B).html(D);
e(".monthly").addClass("discounted");
e(".yearly").addClass("discounted");
if(H&&H.indexOf(MPP.getServiceIdFromServicePriceId(C.data.ServicePriceId))===-1){e(".monthly").parent().parent().remove();
e(".yearly").parent().find("input[type=radio]").prop("checked",true)
}if(H&&H.indexOf(MPP.getServiceIdFromServicePriceId(z.data.ServicePriceId))===-1){e(".yearly").parent().parent().remove();
e(".monthly").parent().find("input[type=radio]").prop("checked",true)
}},y=function(A,z){if(!z){z=m
}z.find('.country-dropdown .form-input--select option[value="'+A+'"]').prop("selected",true);
z.find(".country-dropdown .form-input--select").trigger("change")
},a=function(){console.error("Failed to load autosetprice")
},d=function(C){if(C){var z=new Date(),D=30,B=C.trim(),A=B;
z.setTime(z.getTime()+(D*24*60*60*1000));
e.cookie("CountryCode",B,{path:"/",expires:z})
}},k=function(B,C){var A=B.find('option[data-iso2="'+C+'"]');
var z=e("select[name='js-country-hidden']");
if(A.length==0&&z){A=z.find('option[data-iso2="'+C+'"]')
}return A
},j=function(B,z){var C=z.trim();
var A=k(B,C);
s="GBP";
h="Other";
if(A.length>0){h=e(A[0]).val();
s=e(A[0]).data("currency")
}else{console.log("fom.modules.autosetprice.setPriceAndCountry: Not able to set country and currency")
}if(!B.hasClass("custom")){c(s,B);
y(h,B)
}},q=function(z){for(var A=0;
A<m.length;
A++){var B=e(m[A]);
j(B,z)
}},o=function(){if(!m.length){return
}else{if(!v){u.getISO2().done(function(z){d(z);
q(z)
}).fail(function(){q("GB")
})
}else{q(v)
}}};
e(window).on("load",function(){if(m.length){r.ready({onSuccess:o,onFail:a})
}});
return{setPrice:c,setDiscount:f}
})(jQuery,fom.utils,fom.modules.csg);
fom.components.adaptiveimage={config:{mediaQueries:[{name:"thin.medium",src:".img.320.medium.",media:"(min-width: 1px)"},{name:"thin.high",src:".img.320.medium.",media:"(min-width: 320px)"},{name:"thinX2.medium",src:".img.640.medium.",media:"(min-width: 320px)"},{name:"medium.medium",src:".img.768.medium.",media:"(min-width: 768px)"},{name:"mediumX2.medium",src:".img.1536.medium.",media:"(min-width: 768px)"},{name:"wide.medium",src:".img.1024.medium.",media:"(min-width: 1024px)"},{name:"full.medium",src:".img.1920.medium.",media:"(min-width: 1440px)"},{name:"xwide.medium",src:".img.2048.medium.",media:"(min-width: 1921px)"}]}};
(function(d){var b=d.event,a,c;
a=b.special.debouncedresize={setup:function(){d(this).on("resize",a.handler)
},teardown:function(){d(this).off("resize",a.handler)
},handler:function(j,e){var h=this,g=arguments,f=function(){j.type="debouncedresize";
b.dispatch.apply(h,g)
};
if(c){clearTimeout(c)
}e?f():c=setTimeout(f,a.threshold)
},threshold:150}
})(jQuery);
/*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas. Dual MIT/BSD license */
;
if(!window.matchMedia||!(window.matchMedia.toString().indexOf("[native code]")>-1)){window.matchMedia=(function(j,d){var c=j.documentElement,g=c.firstElementChild||c.firstChild,e=j.createElement("body"),a=j.createElement("div");
a.id="mq-test-1";
a.style.cssText="position:absolute;top:-100em";
e.style.background="none";
e.appendChild(a);
var f=function(m){a.innerHTML='&shy;<style media="'+m+'"> #mq-test-1 { width: 42px; }</style>';
c.insertBefore(e,g);
bool=a.offsetWidth===42;
c.removeChild(e);
return{matches:bool,media:m}
},h=function(){var o,m=c.body,n=false;
a.style.cssText="position:absolute;font-size:1em;width:1em";
if(!m){m=n=j.createElement("body");
m.style.background="none"
}m.appendChild(a);
c.insertBefore(m,c.firstChild);
if(n){c.removeChild(m)
}else{m.removeChild(a)
}o=k=parseFloat(a.offsetWidth);
return o
},k,b=f("(min-width: 0px)").matches;
return function(r){if(b){return f(r)
}else{var q=r.match(/\(min\-width[\s]*:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||""),o=r.match(/\(max\-width[\s]*:[\s]*([\s]*[0-9\.]+)(px|em)[\s]*\)/)&&parseFloat(RegExp.$1)+(RegExp.$2||""),s=q===null,n=o===null,m=j.body.offsetWidth,p="em";
if(!!q){q=parseFloat(q)*(q.indexOf(p)>-1?(k||h()):1)
}if(!!o){o=parseFloat(o)*(o.indexOf(p)>-1?(k||h()):1)
}bool=(!s||!n)&&(s||m>=q)&&(n||m<=o);
return{matches:bool,media:r}
}}
}(document))
}(function(c,b){function a(f){var h=fom.components.adaptiveimage.config.mediaQueries,j=h.length,d,g="",e;
for(e=0;
e<j;
e+=1){d=h[e];
g+=('<span data-name="'+d.name+'" data-src="'+d.src+'" data-media="'+d.media+'"></span>')
}f.append(g);
return f
}b.picturefill=function(d){if(typeof d==="undefined"){d=c("body")
}c(".fom-adaptiveimage",d).each(function(n,g){var k=this,m=c(this),r=m.parents(".manual-gallery").length,j=[],h=m.data("alt")||"",o=m.data("path")||"",q=m.data("extension")||"",p=m.data("suffix")||"",s=m.data("class")||"",e=c("<img/>"),f={};
if(!m.find("span").length){a(m)
}f=c("span[data-media]",k);
if(f.length===0){return
}f.each(function(){var t=c(this).attr("data-media");
if(!t||(b.matchMedia&&b.matchMedia(t).matches)){j.push(this)
}});
if(j.length&&r&&!m.find("img").hasClass("swiper-lazy-loaded")&&m.parent().parent().index()>4){e.attr({"data-src":o+j.pop().getAttribute("data-src")+q+p,alt:h}).addClass(s).addClass("swiper-lazy")
}else{if(j.length){e.attr({src:o+j.pop().getAttribute("data-src")+q+p,alt:h}).addClass(s)
}}m.find("img").remove();
m.prepend(e);
m.find("img").removeAttr("width height")
})
};
c(function(){b.picturefill()
});
c(b).on("debouncedresize",function(){b.picturefill()
})
}(jQuery,this));
fom.components.siteheader=fom.components.siteheader||{};
fom.components.siteheader.views=fom.components.siteheader.views||{};
fom.components.siteheader.views.base=(function(){var d=function(){},e=d.prototype,c={PREMIUM:".premium",NAVIGATION:".navigation-component",BODY:"body"},b={CLICK:"click",OPEN:"menu-open",CLOSE:"menu-close"},a={SITEHEADER_OPEN:"siteheader-open",OPEN:"open",ANIMATE:"animate"};
e.$elements={};
e.animate=true;
e.init=function(){this.cacheElements();
this.setAnimation(this.animate);
this.close();
this.attachListeners()
};
e.cacheElements=function(){this.$elems={premium:$(c.PREMIUM),body:$(c.BODY),navigation:$(c.NAVIGATION)}
};
e.attachListeners=function(){if(!this.$elems.premium.hasClass(a.ANIMATE)){this.clearListeners();
this.$elems.premium.on(b.CLICK,$.proxy(this.toggleMenu,this));
this.$elems.premium.on(b.OPEN,$.proxy(this.onOpenComplete,this));
this.$elems.premium.on(b.CLOSE,$.proxy(this.onCloseComplete,this))
}};
e.clearListeners=function(){if(this.$elems.premium.length>0){if($._data(this.$elems.premium[0],"events")){this.$elems.premium.off(b.CLICK,$.proxy(this.toggleMenu,this));
this.$elems.premium.off(b.OPEN,$.proxy(this.onOpenComplete,this));
this.$elems.premium.off(b.CLOSE,$.proxy(this.onCloseComplete,this))
}}};
e.open=function(){this.$elems.navigation.trigger(b.CLOSE);
this.$elems.premium.trigger(b.OPEN)
};
e.close=function(){this.$elems.premium.trigger(b.CLOSE)
};
e.toggleMenu=function(f){if(this.$elems.premium.hasClass(a.OPEN)){this.close()
}else{this.open()
}};
e.onOpenComplete=function(){this.$elems.premium.addClass(a.OPEN);
this.$elems.body.addClass(a.SITEHEADER_OPEN)
};
e.onCloseComplete=function(){this.$elems.premium.removeClass(a.OPEN);
this.$elems.body.removeClass(a.SITEHEADER_OPEN)
};
e.setAnimation=function(f){if(!f){this.$elems.premium.removeClass(a.ANIMATE)
}else{this.$elems.premium.addClass(a.ANIMATE)
}};
e.destroy=function(){this.clearListeners()
};
return d
})();
fom.components.siteheader=fom.components.siteheader||{};
fom.components.siteheader.views=fom.components.siteheader.views||{};
fom.components.siteheader.views.desktop=(function(c,b){var a=function(){};
a.prototype=c.extend({},new b());
return a
})(jQuery,fom.components.siteheader.views.base);
fom.components.siteheader=fom.components.siteheader||{};
fom.components.siteheader.views=fom.components.siteheader.views||{};
fom.components.siteheader.views.mobile=(function(c,a){var b=function(){};
b.prototype=c.extend(new a(),{animate:false});
return b
})(jQuery,fom.components.siteheader.views.base);
fom.components.siteheader=(function(e,j,f,c,d,h,a){var k={HOLDER:".site-header",ACCESS_TOGGLE:".f1-access-toggle",PREMIUM:".premium",PREMIUM_EXPAND:".premium-expanded",SIGN_IN:".sign-in",SIGN_OUT:".sign-out",USERNAME:".username"},b={IS_VISIBLE:"is-visible",IS_SIGNED_IN:"is-signed-in",IS_PREMIUM_CONTENT:"is-premium-content",IS_LIVE_SESSION:"is-live-session",OPEN:"open",ANIMATE:"animate",SITEHEADER_OPEN:"siteheader-open"},g={},m={init:function(){if(this.cacheElements()){this.initPremium();
this.switchView();
this.attachListeners()
}return this
},cacheElements:function(){var n=e(k.HOLDER);
if(n.length<=0){return false
}return this._elements={$holder:n,$premium:n.find(k.PREMIUM),$username:n.find(k.USERNAME)}
},initPremium:function(){this._elements.$premium.addClass(b.IS_VISIBLE);
if(j.isLoggedIn){this._elements.$premium.addClass(b.IS_SIGNED_IN);
if(j.accountInfo.profile&&j.accountInfo.profile.firstName){this._elements.$username.text(j.accountInfo.profile.firstName)
}}if(j.isPremium){this._elements.$premium.addClass(b.IS_PREMIUM_CONTENT)
}if(j.isLiveSession){this._elements.$premium.addClass(b.IS_LIVE_SESSION)
}},attachListeners:function(){this._elements.$holder.on("click",k.SIGN_IN,e.proxy(this.onSignInClick,this));
this._elements.$holder.on("click",k.SIGN_OUT,e.proxy(this.onSignOutClick,this));
c.on("change",this.switchView,this);
var n=e(this._elements.$holder).data("blacklistcountrypage");
e(".invalid-country a").attr("href",n)
},onSignInClick:function(n){n.preventDefault();
j.login()
},onSignOutClick:function(n){n.preventDefault();
j.logout()
},switchView:function(){var n=a.width();
if(g&&g.destroy){g.destroy()
}if(n>1024){g=new h();
g.init()
}else{g=new d();
g.init()
}}};
return m.init()
})(jQuery,fom.modules.user,fom.modules.gigya,fom.utils.resizeManager,fom.components.siteheader.views.mobile,fom.components.siteheader.views.desktop,$(window));
fom.components.searchbar=(function(c,b,d){var a=[],f={};
f.OPEN_CLASS="open";
f.selectors={COMPONENT:".searchbar",TOGGLE:".navigation-toggle--search",FORM:".searchbar-form",INPUT:".searchbar-form-input",SUBMIT:".searchbar-form-submit"};
f.init=function(g){this._$holder=c(g);
this._$toggle=this._$holder.find(this.selectors.TOGGLE);
this._$form=this._$holder.find(this.selectors.FORM);
this._$input=this._$holder.find(this.selectors.INPUT);
this._$submit=this._$holder.find(this.selectors.SUBMIT);
this.attachListeners()
};
f.attachListeners=function(){this._$holder.on("click"+this.selectors.TOGGLE,this.selectors.TOGGLE,c.proxy(this.onToggleClick,this));
this._$input.on("keyup blur",c.proxy(this.validateInputField,this))
};
f.validateInputField=function(){var g=this._$input.val().length,h=(g>=2);
if(h){this._$submit.removeProp("disabled")
}else{this._$submit.prop("disabled","disabled")
}};
f.onToggleClick=function(){if(this._$holder.hasClass(this.OPEN_CLASS)){return this.close()
}this.open()
};
f.open=function(){this.onOpen(c.proxy(function(){this.isOpen=true;
this._$holder.addClass(this.OPEN_CLASS)
},this))
};
f.onOpen=function(g){g()
};
f.close=function(){var g=c.proxy(function(){this._$holder.off(b.CONST.TRANSITION_END_EVENT);
this.isOpen=false;
if(this.onCloseComplete){this.onCloseComplete();
this.onCloseComplete=undefined
}},this);
if(d.csstransitions){this._$holder.on(b.CONST.TRANSITION_END_EVENT,g)
}else{g()
}this._$holder.removeClass(this.OPEN_CLASS);
this._$toggle.blur()
};
(function e(){c(f.selectors.COMPONENT).each(function(h,j){var g=c.extend({},f);
g.init(j);
a.push(g)
})
})();
return a[0]
})(jQuery,fom.utils,Modernizr);
fom.components.cookieNotification=(function(h,s,b,d,e){var o={COOKIE_NOTIFICATION_DELAY:2000,COOKIE_NAME:"cookies_accepted"},f=b("#cookie-notification-wrapper"),j=b(f).data("version"),q=b(".site-header"),a=b(".page-header"),t=a.find(".breadcrumb"),n=b(".site-header-navigation"),c=false,g=function(){b("body").trigger("notifyNavOfScreenChange")
},m=function(){f.remove();
g()
},k=function(){b.cookie(o.COOKIE_NAME,j,{expires:364,path:"/"})
},p=function(){var u=b.cookie(o.COOKIE_NAME);
if(!b.cookie(o.COOKIE_NAME)||u!=j){b("body").prepend(f);
h.setTimeout(function(){if(!e.csstransitions){f.css({display:"block"});
f.css({marginTop:-(f.outerHeight())+"px"});
f.animate({marginTop:0},{duration:"slow",complete:g})
}else{f.css({display:"block",position:"absolute"});
f.css({marginTop:-(f.outerHeight())+"px"});
f.one(s.CONST.TRANSITION_END_EVENT,g);
setTimeout(function(){f.attr("style","display: block");
f.addClass("animate show-cookie")
},1)
}},o.COOKIE_NOTIFICATION_DELAY)
}else{b.removeCookie(o.COOKIE_NAME,{path:"/"});
k();
return f.remove()
}b(".close-notification").click(function(v){v.preventDefault();
if(!e.csstransitions){f.animate({marginTop:-(f.outerHeight())+"px"},{duration:"slow",complete:m})
}else{f.css({marginTop:-(f.outerHeight())+"px"});
f.one(s.CONST.TRANSITION_END_EVENT,m)
}k()
})
},r=function(){c=true
};
b(h).on("load",function(){if(!c){p()
}});
return{disableCookie:r}
}(window,fom.utils,jQuery,fom.utils.resizeManager,Modernizr));
fom.components.login=(function(d,g,f,c,a){var b={COMPONENT:".login-component"},e={init:function(){if(!this.cacheElements()){return false
}if(!a){setTimeout(d.proxy(function(){this.init()
},this),1000);
return
}if(g.isLoggedIn){g.logout(this.onReady)
}else{f.deauthenticate();
this.onReady()
}return this
},onReady:function(){var h=c.getQueryStringVariable(window.location.href,"resource")||c.homeUrl;
h=decodeURIComponent(h);
setTimeout(function(){g.login(false,{},h,function(){window.location=c.homeUrl
})
},500)
},cacheElements:function(){var h=d(b.COMPONENT);
if(!h.length){return false
}return this._elements={$component:h}
}};
e.init();
return e
})(jQuery,fom.modules.user,fom.modules.authenticator,fom.utils,window.gigya);
fom.components.navigation||(fom.components.navigation={});
fom.components.navigation.BaseView=(function(c,b){var a={OPEN_SPEED:500,OPEN_CLASS:"open",EXPANDABLE_CLASS:"expandable",selectors:{COMPONENT:".navigation-component",PREMIUM:".premium",NAVIGATION_WRAP:".navigation-list-wrap",MOBILE_WRAP:".navigation-wrap",PARENT_LIST:".navigation-list--parent",PARENT_ITEM:".navigation-list-item--parent",PARENT_LINK:".navigation-list-link--parent",CHILD_WRAP:".navigation-list-wrap--child",CHILD_LIST:".navigation-list--child",CHILD_ITEM:".navigation-list-item--child",CHILD_LINK:".navigation-list-link--child",MENU_TOGGLE:".navigation-toggle--nav",SEARCH_TOGGLE:".navigation-toggle--search"}};
a.init=function(d,e){this._$holder=c(d);
this._$menuToggle=this._$holder.find(this.selectors.MENU_TOGGLE);
this._$navigation=this._$holder.find(this.selectors.MOBILE_WRAP);
this._$body=c("body");
this._$html=c("html");
this._openOnHover=!b.isTouch;
if(!e){this.cacheElements()
}else{this._elements=e
}this.attachListeners()
};
a.cacheElements=function(){var d;
this._elements=[];
d=c.proxy(function(e,f){var g=c(f);
return{$firstLevelItem:g,$firstLevelLink:g.find(this.selectors.PARENT_LINK),$secondLevelWrap:g.find(this.selectors.CHILD_WRAP)}
},this);
this._elements=this._$holder.find(this.selectors.PARENT_ITEM).map(d)
};
a.attachListeners=function(){throw new Error("fom.components.navigation.BaseView.attachListeners() should be overidden")
};
a.close=function(e,d){this._currentlyOpen=undefined;
this._currentlyClosing=e;
if(this.onClose){this.onClose(e)
}};
a.open=function(e,d){if(e.$secondLevelWrap.length<=0){return true
}if(this.onShow){this.onShow(e)
}this._currentlyOpen=e
};
a.onFirstLevelClick=function(d){var e=this.getMenuItemFromFirstLevelLink(d.target);
if(e.$secondLevelWrap.length>0){if(this._currentlyOpen){if(this._currentlyOpen===e){this.close(e)
}else{this.close(this._currentlyOpen,c.proxy(this.open,this,e))
}}else{this.open(e)
}d.preventDefault();
d.stopPropagation();
return false
}return true
};
a.getMenuItemFromFirstLevelLink=function(f){var d=this._elements.length;
while(d--){var g=this._elements[d];
for(var e=0;
e<g.$firstLevelLink.length;
e++){if(g.$firstLevelLink[e]===f){return g
}}}};
a.getMenuItemFromSecondLevelWrap=function(e){var d=this._elements.length;
while(d--){if(this._elements[d].$secondLevelWrap[0]===e){return this._elements[d]
}}};
a.destroy=function(){this._$holder.off(this.selectors.PARENT_LINK);
this._$holder.off(this.selectors.PARENT_ITEM)
};
return a
})(jQuery,fom.utils);
fom.components.navigation||(fom.components.navigation={});
fom.components.navigation.NarrowView=(function(d,f,e,c){var a=f.extend({ACTIVE_CLASS:"active",BODY_MENU_OPEN_CLASS:"main-navigation-open",MENU_ITEM_IS_EXPANDED:"menu-item-is-expanded",EXPANDED:"expanded",REFRESH_RATE:100},d),b=0;
a.init=function(g,h){d.init.call(this,g,h);
this._isOpen=false
};
a.attachListeners=function(){this._$holder.on("menu-open",f.proxy(this.openMenu,this));
this._$holder.on("menu-close",f.proxy(this.closeMenu,this));
this._$holder.on("click"+this.selectors.MENU_TOGGLE,this.selectors.MENU_TOGGLE,f.proxy(this.onHamburgerClick,this));
this._$holder.on("click"+this.selectors.PARENT_LINK,"."+this.EXPANDABLE_CLASS+" "+this.selectors.PARENT_LINK,f.proxy(this.onFirstLevelClick,this))
};
a.onHamburgerClick=function(g){this._$holder.off(e.CONST.TRANSITION_END_EVENT);
this._$navigation.css("opacity","");
if(this._isOpen){this._$holder.trigger("menu-close")
}else{this._$holder.trigger("menu-open")
}};
a.resizeScrollArea=function(){var g=20+this._$navigation.offset().top;
this._elements[this._elements.length-1].$firstLevelItem.css("paddingBottom",g)
};
a.openMenu=function(){var h=f(window).width(),g=f(this.selectors.PREMIUM);
this.resizeScrollArea();
this._$body.on("notifyNavOfScreenChange",f.proxy(function(j){this.resizeScrollArea()
},this));
this._isOpen=true;
this._$menuToggle.addClass(this.ACTIVE_CLASS);
this._$holder.on(e.CONST.TRANSITION_END_EVENT,f.proxy(function(j){if(j.target!==this._$navigation[0]){return
}this._$holder.off(e.CONST.TRANSITION_END_EVENT);
this._$body.addClass(this.BODY_MENU_OPEN_CLASS);
b=this._$body.scrollTop();
this._$body.css({width:h+"px",top:-b+"px"})
},this));
this._$navigation.addClass(this.OPEN_CLASS);
this.windowResized=e.debounce(this.windowResized,this.REFRESH_RATE);
c.on(c.events.RESIZE,this.windowResized,this);
this.windowResized();
g.removeClass(this.OPEN_CLASS)
};
a.closeMenu=function(g){this._isOpen=false;
this._$menuToggle.removeClass(this.ACTIVE_CLASS);
if(g){return this.onCloseMenuComplete()
}this._$holder.on(e.CONST.TRANSITION_END_EVENT,f.proxy(function(h){if(h.target!==this._$navigation[0]){return
}this.onCloseMenuComplete()
},this));
this._$navigation.css("opacity","0")
};
a.onCloseMenuComplete=function(){this._$holder.off(e.CONST.TRANSITION_END_EVENT);
if(this._currentlyOpen){this._currentlyOpen.$secondLevelWrap.removeClass(this.OPEN_CLASS).css("max-height","").css("opacity","")
}this._$body.removeClass(this.BODY_MENU_OPEN_CLASS);
this._$navigation.removeClass(this.OPEN_CLASS).css("opacity","");
c.off(c.events.RESIZE,this.windowResized);
this.closeParents();
this._$body.scrollTop(b);
this._$body.attr("style","");
this._$body.off("notifyNavOfScreenChange")
};
a.close=function(j,h){var k=f.proxy(function(){this._currentlyClosing=undefined;
j.$secondLevelWrap.removeClass(this.OPEN_CLASS).css("max-height","").css("opacity","");
if(h){h()
}},this),g=j.$firstLevelItem.parent();
d.close.call(this,j,h);
j.$secondLevelWrap.css("max-height",j.$secondLevelWrap[0].scrollHeight+"px");
j.$secondLevelWrap.animate({"max-height":0,opacity:0},k);
j.$firstLevelItem.removeClass(this.EXPANDED);
g.removeClass(this.MENU_ITEM_IS_EXPANDED)
};
a.open=function(k,j){var h=f.proxy(function(){k.$secondLevelWrap.addClass(this.OPEN_CLASS).css("max-height","").css("opacity","")
},this),g=k.$firstLevelItem.parent();
d.open.call(this,k,j);
k.$secondLevelWrap.animate({"max-height":k.$secondLevelWrap[0].scrollHeight+"px",opacity:1},h);
k.$firstLevelItem.addClass(this.EXPANDED);
g.addClass(this.MENU_ITEM_IS_EXPANDED)
};
a.closeParents=function(){var g;
if(this._currentlyOpen){g=this._currentlyOpen.$firstLevelItem.parent();
this._currentlyOpen.$secondLevelWrap.removeClass(this.OPEN_CLASS).css("max-height","").css("opacity","");
this._currentlyOpen.$firstLevelItem.removeClass(this.EXPANDED);
g.removeClass(this.MENU_ITEM_IS_EXPANDED);
this._currentlyOpen=undefined
}};
a.destroy=function(){d.destroy.call(this);
this._$holder.off(this.selectors.MENU_TOGGLE);
this._$holder.off(e.CONST.TRANSITION_END_EVENT);
this.closeParents();
this.closeMenu(true)
};
a.windowResized=function(){var g=f(window).width();
if(!e.hasCssvhunit){this._$navigation.css({height:f(window).height()+"px"})
}this._$body.css({width:g+"px"})
};
return a
})(fom.components.navigation.BaseView,jQuery,fom.utils,fom.utils.resizeManager);
fom.components.navigation||(fom.components.navigation={});
fom.components.navigation.MediumView=(function(a,c,b,e){var d=c.extend({ACTIVE_CLASS:"active",MENU_ITEM_IS_EXPANDED:"menu-item-is-expanded",EXPANDED:"expanded"},a);
d.init=function(f,g){a.init.call(this,f,g);
e.onOpen=c.proxy(this.onSearchBarOpen,this)
};
d.attachListeners=function(){this._$body.on("click"+this.selectors.COMPONENT,c.proxy(this.onBodyClick,this));
if(this._openOnHover){this.attachHoverListeners()
}else{this.attachClickListeners()
}};
d.attachHoverListeners=function(){this._$holder.on("mouseleave"+this.selectors.PARENT_ITEM,this.selectors.PARENT_ITEM,c.proxy(this.onFirstLevelMouseOut,this));
this._$holder.on("mouseenter"+this.selectors.PARENT_LINK,this.selectors.PARENT_LINK,c.proxy(this.onFirstLevelMouseOver,this))
};
d.attachClickListeners=function(){this._$holder.on("click"+this.selectors.PARENT_LINK,this.selectors.PARENT_LINK,c.proxy(this.onFirstLevelClick,this))
};
d.onBodyClick=function(f){if(this._editMode||c(f.target).parents(this.selectors.COMPONENT).length>0){return
}if(this._currentlyOpen){this.close(this._currentlyOpen)
}else{if(e.isOpen){e.close()
}}};
d.onFirstLevelMouseOut=function(f){if(this._currentlyOpen){this.close(this._currentlyOpen)
}};
d.onSearchBarOpen=function(f){if(this._currentlyOpen){this.close(this._currentlyOpen,f)
}else{f()
}};
d.onFirstLevelMouseOver=function(f){var g=this.getMenuItemFromFirstLevelLink(f.target);
if(g.$secondLevelWrap.length>0){if(this._currentlyClosing){this.onItemCloseComplete=c.proxy(this.open,this,g)
}else{this.open(g)
}}};
d.open=function(h,g){a.open.call(this,h,g);
var f=c.proxy(function(){this.onItemCloseComplete=undefined;
h.$secondLevelWrap.stop().animate({height:h.$secondLevelWrap[0].scrollHeight+"px"},250,c.proxy(this.onTransitionComplete,this,h.$secondLevelWrap,g))
},this);
h.$firstLevelItem.addClass(this.ACTIVE_CLASS);
h.$firstLevelItem.addClass(this.EXPANDED).parent().addClass(this.MENU_ITEM_IS_EXPANDED);
if(this._currentlyClosing){return
}if(e.isOpen){e.onCloseComplete=c.proxy(f,this);
e.close()
}else{f()
}};
d.close=function(g,f){a.close.call(this,g,f);
g.$firstLevelItem.removeClass(this.ACTIVE_CLASS);
g.$secondLevelWrap.stop().css("height",g.$secondLevelWrap.height()+"px").animate({height:"0"},250,c.proxy(this.onTransitionComplete,this,g.$secondLevelWrap,f));
g.$firstLevelItem.removeClass(this.EXPANDED).parent().removeClass(this.MENU_ITEM_IS_EXPANDED)
};
d.onTransitionComplete=function(f,h){var g;
if(f){f.css("height","");
f.css("opacity","")
}if(this._currentlyOpen){this._currentlyOpen.$firstLevelItem.addClass(this.OPEN_CLASS);
this._currentlyOpen.$secondLevelWrap.addClass(this.OPEN_CLASS)
}else{g=this._currentlyClosing;
g.$firstLevelItem.removeClass(this.OPEN_CLASS);
g.$secondLevelWrap.removeClass(this.OPEN_CLASS)
}if(this._currentlyClosing){this._currentlyClosing=undefined;
if(this.onItemCloseComplete){this.onItemCloseComplete()
}}if(h){h()
}};
d.destroy=function(){a.destroy.call(this);
this._$body.off(this.selectors.COMPONENT);
if(this._currentlyOpen){this._currentlyOpen.$secondLevelWrap.removeClass(this.OPEN_CLASS).css("height","");
this._currentlyOpen.$firstLevelItem.removeClass([this.ACTIVE_CLASS,this.OPEN_CLASS,this.EXPANDED].join(" ")).parent().removeClass(this.MENU_ITEM_IS_EXPANDED)
}};
return d
})(fom.components.navigation.BaseView,jQuery,fom.utils,fom.components.searchbar);
fom.components.navigation||(fom.components.navigation={});
fom.components.navigation.controller=(function(c,b){var a={events:{VIEW_CHANGE:"viewChange"},selectors:{COMPONENT:".navigation-component"}};
a.init=function(){var e=this.getView(),d,f;
this._components=[];
f=c.proxy(function(g,h){d=c.extend({},e);
d.init(h);
this._components.push({view:d,element:h})
},this);
c(this.selectors.COMPONENT).each(f);
b.on(b.events.CHANGE,this.updateViews,this);
return this
};
a.updateViews=function(){var f=this._components.length,g=this.getView(),e,h,d;
while(f--){d=this._components[f];
e=d.view;
h=c.extend({},g);
e.destroy();
h.init(d.element);
this._components[f].view=h
}this.trigger(this.events.VIEW_CHANGE)
};
a.getView=function(){switch(b.size){case b.sizes.NARROW:return fom.components.navigation.NarrowView;
default:return fom.components.navigation.MediumView
}};
a.on=function(f,e,d){this._events=this._events||[];
if(!this._events[f]){this._events[f]=[]
}this._events[f].push({handler:e,scope:d})
};
a.trigger=function(e){var d=0;
if(!this._events||!this._events[e]){return
}d=this._events[e].length;
while(d--){this._events[e][d].handler.call(this._events[e][d].scope)
}};
return a.init()
})(jQuery,fom.utils.resizeManager);
fom.components.pageHeaderImage=(function(b){var a=b(".page-header-image");
a.find(".parallax").simpleParallax({scrollFactor:0.5,bg:false});
return{}
})(jQuery);
(function(m,k,e,d,g,j,c){var f=g(),h=".advertisingimage picture",n=".advertisingimage .advertisingimage-link",a;
function b(q){a.map(function(){var t=e("source[data-viewport="+q+"]",this).attr("srcset"),r=e("img",this),s=r.attr("src");
if(s!==t){return r.attr("src",t)
}})
}function p(){var q=e(n);
q.on("click",function(r){c.fireCustomEvent("adClicked")
})
}function o(){a=e(h);
if(a.length>0){p();
if(!j.hasPictureElement){b(d.size);
d.on(d.events.CHANGE,b)
}}}o();
f.update(h,function(){o()
})
}(window,window.document,jQuery,fom.utils.resizeManager,fom.utils.adobeCampaignManager,fom.utils,fom.tracking));
(function(k,d,t,n,f){var h=n(),o={component:".advertisingimageextended",ad:{img:".img-advert",swf:".swf-advert"},swf:"div.swf-target",img:{expanded:".expanded-image",minimised:".minimised-image"},iconlink:".adcontrol",adlinks:".img-advert, .swf-link"},m={ad:{opened:"opened"},icon:{open:"expand",close:"collapse"}},b={version:"16.0.0",params:{menu:"false",wmode:"transparent",allowFullScreen:"false"},attributes:{styleclass:"swf-target",align:"center"}},r;
function c(C){var y={},A,B,w,z;
A=(C&&typeof(C)==="string")?C.split(","):"";
w=A.length;
if(w>0){for(z=0;
z<w;
z+=1){B=A[z].split(":");
y[B[0]]=B[1]
}}return y
}function e(w){if(w===t.sizes.WIDE){d(o.component).map(function(){var B=d(o.swf,this),z=c(B.data("attrs")),A=B.data("width"),y=B.data("height");
swfobject.embedSWF(B.data("src"),B.attr("id"),A,y,b.version,null,z,b.params,b.attributes)
})
}}function a(){r.map(function(){d(o.img.expanded+","+o.img.minimised,this).addClass("desktop-flash")
})
}function v(w){if(w.hasClass("swf-link")){return w.closest(o.component).find(o.ad.swf+","+o.ad.img)
}return w
}function s(w){v(w).addClass(m.ad.opened);
f.fireCustomEvent("extendedAdOpened")
}function x(w){v(w).removeClass(m.ad.opened);
f.fireCustomEvent("extendedAdClosed")
}function p(w){return v(w).hasClass(m.ad.opened)
}function j(w){if(w.hasClass(m.icon.open)){w.removeClass(m.icon.open).addClass(m.icon.close)
}else{w.addClass(m.icon.open).removeClass(m.icon.close)
}}function q(){var w=d(o.iconlink,r),z,y;
w.on("click",function(A){z=d(this);
y=z.closest(o.component).find(o.adlinks);
A.preventDefault();
j(z);
if(p(y)){x(y)
}else{s(y)
}})
}function g(){var z=d(o.adlinks,r),y,w;
z.on("click",function(A){y=d(this);
w=y.closest(o.component).find(o.iconlink);
if(!p(y)){A.preventDefault();
s(y);
j(w)
}else{f.fireCustomEvent("extendedAdClicked")
}})
}function u(w){r=(w)?d(o.component,w):d(o.component);
if(r.length>0){q();
g();
if(d(o.swf,r).length>0){a();
if(k.swfobject&&k.swfobject.getFlashPlayerVersion().major>0){e(t.size);
t.on(t.events.CHANGE,e)
}}}}u();
h.update(o.component,function(){u(h.elements)
})
}(window,jQuery,fom.utils.resizeManager,fom.utils.adobeCampaignManager,fom.tracking));
fom.components.countryDropdown=(function(d,g,f,b){var c=function(){},a=function(){};
c.prototype=new f.eventDispatcher.prototypal();
c.prototype.selectors={HOLDER:".country-dropdown",SELECT:".form-input--select",INVALID_COUNTRY:".invalid-country"};
c.prototype.classes={HIDE:"hide",ERROR:"error",OTHER:"Other"};
c.prototype.events={CHANGE:"change",INVALID_COUNTRY_SELECT:"invalidCountry"};
c.prototype.init=function(h){this.cacheElements(h);
this.attachListeners();
return this
};
c.prototype.cacheElements=function(h){var j=g(h);
this._elements={$holder:j,$select:j.find(this.selectors.SELECT),$error:j.find(this.selectors.INVALID_COUNTRY)}
};
c.prototype.attachListeners=function(){this._elements.$select.on("onchange change",g.proxy(this.onCountryChange,this))
};
c.prototype.onCountryChange=function(){var h=this._elements.$select.find(":selected").data("currency");
this.trigger(this.events.CHANGE,[h]);
if(this._elements.$select.val()===this.classes.OTHER){this.trigger(this.events.INVALID_COUNTRY_SELECT);
this._elements.$select.parent().addClass(this.classes.ERROR);
this._elements.$error.removeClass(this.classes.HIDE);
if(g(".template-registration-forms").length>0){this._elements.$select.parent().parent().addClass(this.classes.ERROR)
}}else{this._elements.$error.addClass(this.classes.HIDE);
if(g(".template-registration-forms").length>0){this._elements.$select.parent().removeClass(this.classes.ERROR);
this._elements.$select.parent().parent().removeClass(this.classes.ERROR)
}}};
a.prototype=new f.eventDispatcher.prototypal();
a.prototype.init=function(){var j=g(c.prototype.selectors.HOLDER),h=function(){this.onCountryDropdownChange(dropdown)
},k=function(n){var o=g(c.prototype.selectors.HOLDER),p=[];
o.each(g.proxy(function(q,r){var s=new c();
s.on(c.prototype.events.CHANGE,g.proxy(function(){this.onCountryDropdownChange(s)
},this),this);
s.on(c.prototype.events.INVALID_COUNTRY_SELECT,g.proxy(function(){this.onInvalidCountrySelect()
},this),this);
s.init(r);
p.push(s)
},this));
this._controllers=p;
if(this._initPriceCallback){this.onPriceInit(this._initPriceCallback);
this._initPriceCallback=null
}},m=function(n){if(this._initPriceCallback){this.onPriceInit(this._initPriceCallback);
this._initPriceCallback=null
}};
if(j.length>0){b.ready({onSuccess:g.proxy(k,this),onFail:g.proxy(m,this)})
}return this
};
a.prototype.onInvalidCountrySelect=function(){this.trigger(c.prototype.events.INVALID_COUNTRY_SELECT)
};
a.prototype.onCountryDropdownChange=function(m){var n={currency:e(m),target:m},k=m._elements.$select.val(),j=this._controllers.length,h={};
this.trigger(c.prototype.events.CHANGE,[n])
};
a.prototype.onPriceInit=function(h){if(this._controllers&&this._controllers.length>0){b.ready({onSuccess:g.proxy(function(){h({currency:e(this._controllers[0]),target:this._controllers[0]})
},this),onFail:g.proxy(function(){},this)})
}else{this._initPriceCallback=h
}};
function e(h){return h._elements.$select.find(":selected").data("currency")
}return new a().init()
})(fom.components,jQuery,fom.utils,fom.modules.csg);
fom.components.manualGallery=(function(c,g){var e={autoplay:0,changeSpeed:500,easing:"linear",previewSpeed:500,previewWidth:90,loop:true,isAdBlock:false};
function b(N,h){var P=200;
var S=0;
var C=false;
var w=false;
var j={};
var O;
var n={};
var o={};
var m={};
var v={};
var V={};
var q={};
function J(Y){var X=Y.length;
if(X>1){N.addClass("multi-image")
}else{N.addClass("single-image")
}return X
}function Q(){var Y={};
var Z={};
var X=0;
Y=N.find(".gallery-descriptions-container");
Z=Y.find(".gallery-description");
setTimeout(function(){Z.each(function(){var aa=$(this).height();
if(aa>X){X=aa
}});
Y.height(X)
},1)
}function p(){if(!W()&&B()){T()
}G();
Q()
}function E(){A()
}function u(X){X.preventDefault();
if(C){return
}C=true;
O.stopAutoplay();
if($(X.target).hasClass("gallery-next")){O.slideNext()
}else{O.slidePrev()
}}function x(Y){var X=$(Y.target);
if(!X.hasClass("mousein")){X.addClass("mousein");
j=setTimeout(function(){M(X.hasClass("gallery-next"))
},P)
}}function I(Y){var X=$(Y.target);
clearTimeout(j);
if(X.hasClass("mousein")){X.removeClass("mousein");
t()
}}function G(){var X=0;
var Z=16/9;
var Y=0;
Y=n.width();
X=Math.floor(Y/Z);
n.css("height",X);
if(V.length){V.css("height",X)
}if(O){O.onResize();
K()
}}function A(X){o=q.children(".swiper-slide");
o.each(function(){var aa=0;
var Z=0;
var Y=0;
var ac=0;
var ab={};
var ad=$(this);
if(X||typeof ad.data("adjusted")==="undefined"){ab=ad.children(".image");
Y=parseInt(ad.height(),10);
aa=parseInt(ab.data("height"),10);
Z=parseInt(ab.data("width"),10);
if(Z>aa){ad.addClass("landscape");
if(!c.hasCssTransitions){ac=-Math.round(Y/4);
ab.css(ac,ac+"px")
}}else{ad.addClass("portrait")
}ad.data("adjusted",ac)
}})
}function F(){var X=0;
o.children(".image").each(function(){var Y=$(this);
X=parseInt(Y.data("width"),10)/parseInt(Y.data("height"),10);
if(X>1){Y.css("width",n.width()+"px")
}else{Y.css("height",n.height()+"px")
}});
if(O){O.onResize()
}}function L(){if(!O){return
}C=true;
U();
if(!c.hasCssTransitions()){q.animate({marginLeft:0},h.previewSpeed)
}}function z(){if(!O){return
}K();
O.startAutoplay();
C=false;
setTimeout(function(){if(C){return
}if(m.filter(".gallery-next").hasClass("mousein")){M(true)
}if(m.filter(".gallery-prev").hasClass("mousein")){M(false)
}},150)
}function U(){var Z={};
var Y={};
var X={};
Z=N.find(".gallery-caption");
Z.find(".current-image-num").text(O.realIndex+1);
X=Z.find(".gallery-description");
if(X.length){X.removeClass("current").addClass("hidden");
Y=X.eq(O.realIndex);
Y.removeClass("hidden");
window.requestAnimationFrame(function(){setTimeout(function(){Y.addClass("current")
},0)
})
}}function K(){S=O.getWrapperTranslate("x")
}function s(X,Y){X.css("transition-duration",Y+"ms")
}function B(){return $("main").hasClass("go-full-width")
}function W(){return(!N.hasClass("breakout-none"))
}function T(){var Z=1440;
var Y=0;
var ab=N.find(".swiper-container");
var X=$("html");
var aa=$(window);
Y=Math.min(aa.width(),Z);
V=N.find(".image-placeholder");
if(!V.length){V=$('<div class="image-placeholder"></div>')
}ab.addClass("full-width");
if($("main").hasClass("template-informationfeature")||$("main").hasClass("template-feature")||$("main").hasClass("template-article")){ab.css("width","100%")
}else{ab.css("width",Y)
}if(X.hasClass("lt-ie10")){ab.css({marginLeft:-Math.ceil(Y/2)+"px","ms-transform":"translate(0,0)"})
}V.css("height",ab.height());
ab.after(V)
}function H(Z){var Y={};
var X=O.aciveIndex;
Y=O.slides-O.realIndex;
if(!Y){O.slideTo(O.realIndex,0,false);
K()
}}function M(Z){var aa=0;
var X={};
var Y={};
if(C){return
}O.stopAutoplay();
O.onResize();
K();
aa=(Z)?-h.previewWidth:h.previewWidth;
if(c.hasCssTransitions()){aa+=S;
s(q,h.previewSpeed);
q.one(c.getTransitionEndEventName(),function(){s(q,0)
});
O.setWrapperTranslate(aa)
}else{q.animate({marginLeft:aa+"px"},h.previewSpeed)
}}function t(X){if(C){return
}O.setWrapperTranslate(S);
if(c.hasCssTransitions()){s(q,h.previewSpeed);
q.one(c.getTransitionEndEventName(),function(){s(q,0);
O.startAutoplay()
})
}else{q.animate({marginLeft:0},h.previewSpeed,function(){O.startAutoplay()
})
}}function y(){c.resizeManager.on(c.resizeManager.events.RESIZE,function(){p();
A(true);
F()
})
}function r(){v.on("play",O.startAutoplay);
v.on("stop",O.stopAutoplay);
v.on("caption",Q)
}function D(){var X=N.find(".gallery-enlarge");
if(m.length){m.on("click",u);
if(!c.isTouch){m.on({mouseover:x,mouseout:I})
}}if(h.enlarge){X.on("click",function(Y){Y.preventDefault();
if(O){v.trigger("open-modal",O.realIndex)
}else{v.trigger("open-modal",1)
}})
}else{X.remove()
}}function k(){v=N.parent(".manual-gallery");
n=N.find(".swiper-container");
q=n.find(".swiper-wrapper");
o=q.children(".swiper-slide");
m=n.children(".gallery-next, .gallery-prev")
}function R(){var X=0;
k();
X=J(o);
if(X>1){w=true;
O=new Swiper(n[0],{autoplay:h.autoplay,mode:"horizontal",setWrapperSize:true,keyboardControl:true,loop:(X>1)?h.loop:false,onTransitionEnd:z,onTransitionStart:L,simulateTouch:false,speed:h.changeSpeed,preloadImages:X===1,lazyLoading:X>1,lazyLoadingInPrevNext:X>1,lazyLoadingInPrevNextAmount:4,lazyLoadingOnTransitionStart:true});
window.swipertest=O;
K();
r()
}else{w=false
}p();
F();
E();
D();
y()
}R();
return $.extend(O,{isCarousel:w,updateGalleryCaption:U,updateCarouselPosition:K})
}function a(k,B){var j={};
var w=$("body");
var p={};
var n={};
var x={};
var y={};
var u={};
function E(){y.find("picture div").each(function(){var F={};
$.each($(this)[0].attributes,function(H,G){F[G.nodeName]=G.value||G.nodeValue
});
$(this).replaceWith(function(){F.text=$(this).text();
return $("<source />",F)
})
})
}function v(F){if(j.isCarousel){j.slideTo(F,0,false);
j.updateGalleryCaption();
k.one(c.getTransitionEndEventName(),function(){j.updateCarouselPosition()
}).addClass("gallery-modal-open")
}else{k.addClass("gallery-modal-open")
}setTimeout(function(){k.addClass("gallery-mobile-open-animate")
},1)
}function s(G,F){u.trigger("stop");
v(F);
w.addClass("modal_active")
}function t(F){if(F&&F.preventDefault){F.preventDefault()
}k.removeClass("gallery-modal-open gallery-mobile-open-animate");
u.trigger("start");
w.removeClass("modal_active")
}function C(F){if(F&&F.preventDefault){F.preventDefault()
}if(x.hasClass("icon-info-off")){x.addClass("icon-info-on").removeClass("icon-info-off");
u.trigger("caption");
p.addClass("visible")
}else{x.addClass("icon-info-off").removeClass("icon-info-on");
p.removeClass("visible")
}}function o(){if(c.resizeManager.isNarrow()){A()
}else{r()
}}function r(){var F=y.find(".gallery-modal-wrapper");
n.prependTo(F);
p.appendTo(F)
}function A(){n.prependTo(y);
p.appendTo(k)
}function h(){y=k.find(".gallery-modal-container");
p=y.find(".gallery-caption");
n=y.find(".gallery-modal-close-link");
x=y.find(".gallery-modal-info-link");
u=k.parent(".manual-gallery")
}function q(){u.on("open-modal",s)
}function D(){c.resizeManager.on(c.resizeManager.events.CHANGE,function(){o()
})
}function m(){n.on("click",t);
x.on("click",C);
k.on("click",function(F){if($(F.target).hasClass("gallery-modal")){t()
}})
}function z(){j=new b(k,$.extend({},B,{autoplay:0,enlarge:false,fullWidth:false}));
h();
E();
o();
m();
D();
q()
}z();
return{init:z}
}function d(j,m){function h(n,o){n.html(o.html())
}function k(){var q={};
var o={};
var n=j.find(".gallery-inpage");
var p={};
if(!n.length&&!n.hasClass("size-1")){return
}if(m.enlarge){p=j.find(".gallery-modal");
h(p.find(".gallery-modal-wrapper"),n)
}o=new b(n,m);
if(m.enlarge){q=new a(p,m)
}}return{init:k}
}$.fn.manualGallery=function(h){h=$.extend({},e,h);
this.each(function(){var j=new d($(this),h);
j.init()
});
return this
};
(function f(){var h=$(".manual-gallery");
h.each(function(){var j=$(this);
j.manualGallery({autoplay:5000,changeSpeed:700,enlarge:!!(j.children(".gallery-modal").length),previewSpeed:300})
})
}());
return{SlideShow:b,Modal:a,ManualGallery:d}
})(fom.utils);
fom.components.logo=(function(c,d){var b="/etc/designs/fom-website/images/f1_logo_fallback.png",a="/etc/designs/fom-website/images/logo-tata.png";
if(!d.svg){c(".logo img").attr("src",b);
c(".logo-tata img").attr("src",a)
}})($,Modernizr,window);
fom.components.tabs=(function(d,b,a,h){var m=300,f=function(q,p){var o,n=function(){q.hide();
p()
};
q.addClass("transparent");
if(a.csstransitions){o=setTimeout(n,m)
}else{n()
}},j=function(n){var o=n.find(".responsive-element").get(0);
n.show();
if(o){b.responsiveElements.recalculate(o)
}n.removeClass("transparent")
},g=function(q,o,n){var p;
n=n||0,p=o.eq(n);
f(o,function(){j(p)
});
q.removeClass("selected");
q.eq(n).addClass("selected")
},c=function(t,s,p){var r,q,o,n;
p.each(function(u){n=d(this);
r=n.data("tab-title");
q=n.data("tab-title-mobile")||r;
o=['<a class="desktop ',h.slugify(r),'-link" href="#">',r,'</a><a class="mobile ',h.slugify(r),'-link" href="#">',q,"</a>"].join("");
s.eq(u).append(o)
});
t.on("click",{tabItems:s,contentSections:p},e)
},e=function(o){o.preventDefault();
o.stopPropagation();
var n=d(o.target).closest("li").index();
g(o.data.tabItems,o.data.contentSections,n,o.data.$responsiveElems);
return false
},k=function(){var n=d(".tab-wrapper");
n.each(function(p){var s=d(this),r=s.find(".tab-list"),q=s.find(".tab"),o=s.find(".tab-content");
c(r,q,o);
g(q,o)
})
};
k();
return{}
})(jQuery,fom.modules,Modernizr,fom.utils);
(function(){var a=function(){};
a.VISIBLE_CLASSNAME="isVisible";
a.OBSCURED_CLASSNAME="obscured";
a.ANIMATION_OFFSET=75;
a.SCROLL_TOLERANCE=200;
a.prototype={checkScrollIntoView:function(b){var c=b-a.SCROLL_TOLERANCE;
this.obscuredComponents().each($.proxy(function(e,g){var d=$(g),f=d.offset().top,h;
if(c>=f){h=d.find("."+a.OBSCURED_CLASSNAME).filter($.proxy(this.scrollAnimationFilter,this));
d.addClass(a.VISIBLE_CLASSNAME);
this.animateObscuredItems(h)
}},this));
return this.hasNoRemainingItems()
},obscuredComponents:function(){return this.$components.not("."+a.VISIBLE_CLASSNAME)
},hasNoRemainingItems:function(){return this.obscuredComponents().length===0
},animateObscuredItems:function(b){this.shuffle(b).each(function(c){(function(d,e){setTimeout(function(){d.removeClass(a.OBSCURED_CLASSNAME)
},e)
}($(this),a.ANIMATION_OFFSET*c))
})
},scrollAnimationFilter:function(){return true
},shuffle:function(b){return b
},destroy:function(){}};
fom.components.latestNews||(fom.components.latestNews={});
fom.components.latestNews.BaseView=a
}());
(function(){var b=fom.components.latestNews.BaseView;
var a=function(d){var c=$.proxy(this.showMore,this);
this.$components=d;
this.$components.each(function(){var e=$(this);
e.one("click",".show-more a",e,c)
})
};
a.ADDITIONAL_CLASSNAME="additional";
a.MORE_CLASSNAME="more";
a.FOLLOW_CLASSNAME="follow";
a.prototype=$.extend(new b(),{showMore:function(e){var d=$(e.currentTarget),c=e.data,f;
d.find("."+a.MORE_CLASSNAME).hide();
d.find("."+a.FOLLOW_CLASSNAME).show();
f=c.find("."+a.ADDITIONAL_CLASSNAME).removeClass(a.ADDITIONAL_CLASSNAME);
setTimeout($.proxy(this.animateObscuredItems,this,f),a.ANIMATION_OFFSET);
e.preventDefault()
},scrollAnimationFilter:function(c,d){return !$(d).hasClass(a.ADDITIONAL_CLASSNAME)
},destroy:function(){this.$components.off("click")
}});
fom.components.latestNews||(fom.components.latestNews={});
fom.components.latestNews.DesktopView=a
}());
(function(){var a=fom.components.latestNews.BaseView;
var b=function(d,c){this.$components=d;
this.initializeSwiper(c||b.SWIPER)
};
b.SWIPER="tablet-swiper";
b.SWIPER_WRAPPER="articles";
b.SWIPER_SLIDE="tablet-swiper-slide";
b.prototype=$.extend(new a(),{initializeSwiper:function(c){this.swipers=[];
this.$components.each($.proxy(function(f,g){var e=$(g),d=e.find("."+c).get(0);
this.swipers.push({plugin:new Swiper(d,this.swiperOptions()),container:d})
},this));
this.fixAdditionalItems()
},fixAdditionalItems:function(c){this.$components.filter("."+a.VISIBLE_CLASSNAME).find("."+a.OBSCURED_CLASSNAME).removeClass(a.OBSCURED_CLASSNAME)
},swiperOptions:function(){return{scrollContainer:true,setWrapperSize:true,wrapperClass:b.SWIPER_WRAPPER,slideClass:b.SWIPER_SLIDE}
},destroy:function(){$.each(this.swipers,$.proxy(function(d,c){c.plugin.destroy();
this.resetSwiper(c)
},this));
this.swipers.length=0
},resetSwiper:function(c){var d=$(c.container),e=this.swiperOptions();
d.removeClass("swiper-free-mode");
d.find("."+e.slideClass).removeClass(function(f,g){var h=[];
$.each(g.split(" "),function(j,k){if(/swiper-slide-.*/.test(k)){h.push(k)
}});
return h.join(" ")
});
d.find(["."+e.wrapperClass,"."+e.slideClass].join(",")).removeAttr("style")
},shuffle:function(g){var c=[g.get(0)],f=g.length-1,e=1,d=Math.ceil((f/2)+1);
while(d<=f){c.push(g.get(e));
c.push(g.get(d));
e+=1;
d+=1
}return $(c)
}});
fom.components.latestNews||(fom.components.latestNews={});
fom.components.latestNews.TabletView=b
}());
(function(a){var d=fom.components.latestNews.TabletView;
var c=a.resizeManager;
var b=function(e){d.call(this,e,b.SWIPER)
};
b.SWIPER="mobile-swiper";
b.SWIPER_WRAPPER="mobile-swiper-wrapper";
b.SWIPER_SLIDE="mobile-swiper-slide";
b.prototype=$.extend({},d.prototype,{shuffle:function(e){return e
},swiperOptions:function(){if($(".template-home").length>0){return{centeredSlides:false,slidesPerView:"auto",slidesPerViewFit:false,wrapperClass:b.SWIPER_WRAPPER,slideClass:b.SWIPER_SLIDE}
}else{return{centeredSlides:true,slidesPerView:1,wrapperClass:b.SWIPER_WRAPPER,slideClass:b.SWIPER_SLIDE}
}}});
fom.components.latestNews||(fom.components.latestNews={});
fom.components.latestNews.MobileView=b
}(fom.utils));
(function(c){var b=fom.components.latestNews;
var f=c.resizeManager;
var e=$(".latest-news");
function a(g){switch(g){case f.sizes.NARROW:return b.MobileView;
case f.sizes.MEDIUM:if($(".template-home").length>0){return b.MobileView
}else{return b.TabletView
}default:return b.DesktopView
}}function d(h){var g;
if(b.activeView){b.activeView.destroy();
c.scrollWatcher.remove(b.activeView)
}g=a(h);
b.activeView=new g(e);
c.scrollWatcher.add(b.activeView)
}if(e.length){f.on("change",d);
d(f.size)
}}(fom.utils));
fom.components.tweetembed=(function(d){var b={apiUri:"//web.archive.org/web/20180902030509/https://platform.twitter.com/widgets.js",element:".tweet"},a;
function e(){a=d(b.element+" blockquote");
if(a.length>0){c()
}}function c(g){var f;
f=document.createElement("script");
f.id="twitter-wjs";
f.type="text/javascript";
f.src=b.apiUri;
f.charset="utf-8";
document.body.appendChild(f)
}return e()
}(jQuery));
fom.components.filter||(fom.components.filter={});
fom.components.filter.BaseView=(function(c){var a=function(){},b=a.prototype;
a.SHOW_CLASS="show";
a.HIDE_CLASS="hide";
a.SELECTED_CLASS="selected";
a.selectors={TOGGLE:".filter-toggle",filters:{CATEGORY:"filter-wrapper--type",DATE:"filter-wrapper--date"},filterLists:{YEAR_LIST:".filter-list.year",MONTH_LIST:".filter-list.month",TYPE_LIST:".filter-list.type"},LIST:".filter-list",LIST_ITEM:".filter-list-item",LIST_ITEM_BUTTON:".filter-list-item-button",EARLIER_BUTTON:".filter-list-item--earlier",formFields:{YEAR:"#year",MONTH:"#month",DATE:"#date",TYPE:"#type"},FORM:".filter-form",SELECT:".filter-select"};
b.init=function(d){this._$element=c(d);
this._elements=this.cacheElements();
this.attachListeners()
};
b.cacheElements=function(){throw new Error("fom.components.filter.BaseView.cacheElements() must be overidden.")
};
b.attachListeners=function(){throw new Error("fom.components.filter.BaseView.attachListeners() must be overidden.")
};
b.destroy=function(){throw new Error("fom.components.filter.BaseView.destroy() must be overidden.")
};
return a
})(jQuery);
fom.components.filter||(fom.components.filter={});
fom.components.filter.WideView=(function(e){var a=function(){},b=fom.components.filter.BaseView,c=a.prototype=new b(),d=b.prototype;
a.OPEN_SPEED=500;
a.ITEM_SHOW_DELAY=40;
a.ANIMATE_BETWEEN_FILTERS=true;
c.init=function(g,f,h){d.init.call(this,g);
if(this._elements[b.selectors.filters.CATEGORY].$toggle.hasClass(b.SHOW_CLASS)){this._openTarget=this._elements[b.selectors.filters.CATEGORY]
}else{if(this._elements[b.selectors.filters.DATE].$toggle.hasClass(b.SHOW_CLASS)){this._openTarget=this._elements[b.selectors.filters.DATE]
}else{this._openTarget=undefined
}}this._rowCount=0;
this._columnCount=h;
if(this._elements[b.selectors.filters.DATE].$holder){this.initialiseRows(f)
}};
c.cacheElements=function(){var h,g={},f;
for(f in b.selectors.filters){if(b.selectors.filters.hasOwnProperty(f)){h=this._$element.find("."+b.selectors.filters[f]);
g[b.selectors.filters[f]]={$holder:h,$list:h.find(b.selectors.LIST),$select:h.find(b.selectors.SELECT),$toggle:this._$element.find("[data-target="+b.selectors.filters[f]+"]"),$earlierButton:h.find(b.selectors.EARLIER_BUTTON)}
}}return g
};
c.attachListeners=function(){this._$element.on(["click",b.selectors.TOGGLE].join(""),b.selectors.TOGGLE,e.proxy(this.onToggleClick,this));
this._$element.on(["click",b.selectors.EARLIER_BUTTON].join(""),b.selectors.EARLIER_BUTTON,e.proxy(this.onEarlierButtonClick,this));
this._$element.on(["click",b.selectors.LIST_ITEM_BUTTON].join(""),b.selectors.LIST_ITEM_BUTTON,e.proxy(this.onListItemClick,this))
};
c.onListItemClick=function(t){var h=e(t.currentTarget),s=h.closest("ol"),v=s.find("span"),f=h.find("span").eq(h.index()),w=e(b.selectors.FORM),j=e(b.selectors.formFields.DATE),m=e(b.selectors.formFields.TYPE),k="",n="",p="",r="",u={},q={},g=[];
if(h.parent().hasClass("filter-list-item--earlier")){return
}v.removeClass(b.SELECTED_CLASS);
f.addClass(b.SELECTED_CLASS);
for(var o in b.selectors.filterLists){u=e(b.selectors.filterLists[o]);
q=u.find("."+b.SELECTED_CLASS);
p=q.data("value");
g.push(p)
}k=g[0];
n=g[1];
r=g[2];
j.val(k+"-"+n);
m.val(r);
w.submit()
};
c.onEarlierButtonClick=function(){this._openTarget.$earlierButton.addClass(b.HIDE_CLASS);
this._rowCount++;
this.fillMissingColumns()
};
c.onToggleClick=function(f){var h=this._elements[f.target.getAttribute("data-target")],g;
if(this._openTarget===h){this.close(h)
}else{if(this._openTarget&&this._openTarget!==h){this._openTarget.$toggle.removeClass(b.SHOW_CLASS);
g=function(){this.open(h,!a.ANIMATE_BETWEEN_FILTERS)
};
this.close(this._openTarget,!a.ANIMATE_BETWEEN_FILTERS,e.proxy(g,this))
}else{this.open(h)
}}};
c.initialiseRows=function(g){var h=this._elements[b.selectors.filters.DATE].$list.first(),f=this._elements[b.selectors.filters.DATE].$yearItems=h.children(b.selectors.LIST_ITEM);
if(g){this.initialiseDOM(f)
}else{this.updateInitialisedDOM(f)
}};
c.initialiseDOM=function(h){var g,f,j;
g=h.find("."+b.SELECTED_CLASS).parent().index();
f=Math.floor(g/this._columnCount);
if((g+1)%this._columnCount===0){f++
}if((f+1)*this._columnCount>h.length-1){this._elements[b.selectors.filters.DATE].$earlierButton.hide()
}j=(this._columnCount*f)+this._columnCount-1;
h.slice(j).addClass(b.HIDE_CLASS);
this._rowCount=f
};
c.updateInitialisedDOM=function(g){var f;
f=(g.length)-g.filter("."+b.HIDE_CLASS).length;
this._rowCount=(f+1)/this._columnCount;
if(this._rowCount%1!==0){this.fillMissingColumns();
this._rowCount=Math.ceil(this._rowCount)
}this._rowCount-=1
};
c.fillMissingColumns=function(){var f=this._elements[b.selectors.filters.DATE].$yearItems,h=(this._rowCount*this._columnCount)-1,g=((Math.floor(this._rowCount)+1)*this._columnCount)-1;
if(g>=f.length-1){this._elements[b.selectors.filters.DATE].$earlierButton.hide();
g++
}this.animateListItems(f,h,g)
};
c.animateListItems=function(k,j,h){var g,f;
f=function(m,n){if(m===0){e(n).removeClass(b.HIDE_CLASS)
}else{setTimeout(function(){e(n).removeClass(b.HIDE_CLASS)
},m*a.ITEM_SHOW_DELAY)
}};
g=function(){if(this._openTarget&&this._openTarget.$earlierButton){this._openTarget.$earlierButton.removeClass(b.HIDE_CLASS)
}};
k=k.slice(j,h);
k.each(e.proxy(f,this));
setTimeout(e.proxy(g,this),k.length*a.ITEM_SHOW_DELAY)
};
c.open=function(h,g,f){this._openTarget=h;
h.$toggle.addClass(b.SHOW_CLASS);
if(g){this.onTransitionComplete(h.$holder,f)
}else{this.transitionToHeight(h.$holder,h.$holder[0].scrollHeight,f)
}};
c.close=function(h,g,f){this._openTarget.$holder.stop();
this._openTarget=undefined;
h.$toggle.removeClass(b.SHOW_CLASS).blur();
if(g){this.onTransitionComplete(h.$holder,f)
}else{this.transitionToHeight(h.$holder,0,f)
}};
c.transitionToHeight=function(h,g,m){var j=Math.abs(h.height()-g),f=(j/a.OPEN_SPEED)*1000,n=[g,"px"].join(""),k=e.proxy(this.onTransitionComplete,this,h,m);
h.stop().animate({height:n},f,"swing",k)
};
c.onTransitionComplete=function(f,g){if(g){g()
}if(this._openTarget&&this._openTarget.$holder===f){f.addClass(b.SHOW_CLASS)
}else{f.removeClass(b.SHOW_CLASS)
}f.css("height","")
};
c.destroy=function(){if(this._openTarget){this._openTarget.$holder.stop();
this.onTransitionComplete(this._openTarget.$holder)
}this._$element.off(b.selectors.TOGGLE);
this._$element.off(b.selectors.EARLIER_BUTTON)
};
return a
})(jQuery);
fom.components.filter||(fom.components.filter={});
fom.components.filter.NarrowView=(function(){var a=function(){},b=fom.components.filter.BaseView,c=a.prototype=new b();
c.cacheElements=function(){return{$form:this._$element.find(b.selectors.FORM),$yearSelectField:this._$element.find(b.selectors.formFields.YEAR),$monthSelectField:this._$element.find(b.selectors.formFields.MONTH),$dateInputField:this._$element.find(b.selectors.formFields.DATE)}
};
c.attachListeners=function(){this._elements.$form.on("change",$.proxy(this.onFormChange,this))
};
c.onFormChange=function(d){var f=this._elements.$yearSelectField.val(),e=this._elements.$monthSelectField.val();
this._elements.$dateInputField.val(f+"-"+e);
this._elements.$form.submit()
};
c.destroy=function(){this._elements.$form.off("change")
};
return a
})();
fom.components.filter||(fom.components.filter={});
fom.components.filter.controller=(function(d,c){var a=function(){this._components=[];
this._isFirstInit=true;
this.init()
},b=a.prototype;
a.WIDE_COLUMN_COUNT=12;
a.MEDIUM_COLUMN_COUNT=6;
a.selectors={COMPONENT:".filter-component"};
b.init=function(){var g=this.getView(),e,h,f;
h=function(j,k){e=new g();
e.init(k,this._isFirstInit,this.getColumnCount());
this._components.push({view:e,element:k})
};
f=d(a.selectors.COMPONENT);
if(f.length<=0){return false
}f.each(d.proxy(h,this));
if(g===fom.components.filter.WideView){this._isFirstInit=false
}c.on(c.events.CHANGE,this.updateViews,this)
};
b.updateViews=function(){var f=this._components.length,h=this.getView(),g,j,e;
while(f--){e=this._components[f];
g=e.view;
j=new h();
g.destroy();
j.init(e.element,this._isFirstInit,this.getColumnCount());
this._components[f].view=j
}if(h===fom.components.filter.WideView){this._isFirstInit=false
}};
b.getColumnCount=function(){if(c.size===c.sizes.MEDIUM){return a.MEDIUM_COLUMN_COUNT
}return a.WIDE_COLUMN_COUNT
};
b.getView=function(){switch(c.size){case c.sizes.NARROW:return fom.components.filter.NarrowView;
default:return fom.components.filter.WideView
}};
return new a()
})(jQuery,fom.utils.resizeManager);
fom.components.articleSelection=(function(h,j,g){var e={wrapperClass:"js-swipe-wrap",slideClass:"js-slide"};
var k,u,a,n,q,t,o=function(w){k=new Swiper(t[0],w);
k.slideTo(0)
},m=function(){return(h.extend({},e,{scrollContainer:true,setWrapperSize:true,freeMode:true,freeModeMomentum:true,slidesPerView:"auto"}))
},f=function(){return(h.extend({},e,{visibilityFullFit:true,slidesPerView:"auto",autoResize:false}))
},p=function(w){if(k){k.destroy(true);
k=undefined
}if(w===j.sizes.MEDIUM){o(m());
b();
return
}if(w===j.sizes.NARROW){d(w);
o(f());
return
}b();
n.removeAttr("style")
},d=function(w){var x=0;
if(w===j.sizes.NARROW){x=parseInt(q.innerWidth()*0.9,10);
u.css({height:x,width:x});
n.css({height:"auto",width:x*(u.length+1)});
if(k){k.onResize()
}}else{n.css("height",parseInt(u.height(),10))
}},b=function(){u.add(n).css({height:"",width:""})
},v=function(){fom.utils.resizeManager.on(j.events.CHANGE,p,this);
fom.utils.resizeManager.on(j.events.RESIZE,d,this)
},r=function(){if(g.isLoggedIn){if(g.isPremium){a.addClass("is-premium-user")
}}},c=function(){q=h(window);
t=h(".js-slide-container");
n=t.find("."+e.wrapperClass);
u=t.find("."+e.slideClass);
a=h(".selected-article-container")
},s=function(){c();
r();
if(t.length&&u.length>1){p(j.size);
v()
}};
return s()
}(jQuery,fom.utils.resizeManager,fom.modules.user));
fom.components.teaser=(function(f,g,b,c){var e=f(".fom-teaser"),h=function(){a();
d();
c.applyTo(e)
},a=function(){if(b.isTouch){e.removeClass("animate")
}},d=function(){if(b.ieVersion===8){e.addClass("lt480")
}};
h();
return{}
}(jQuery,Modernizr,fom.utils,fom.modules.premiumOverlay));
fom.components.videoTeaser=(function(j,k,g,c,n){var d="video-teaser",e="."+d,q=function(){return this
},b=[],h=j(document.body);
q.prototype.init=function(){this.updateTeasers();
if(k.isTouch){this.initModalPlayers();
this.initModalPlayersNonAggregator()
}this.handleTeaserImageQuality();
this.handleHomePageLayout();
if(k.ieVersion==8){return false
}this._players={};
this.attachListeners();
return this
};
q.prototype.get$teasers=function(){return b
};
q.prototype.cacheTeasers=function(){b=j(e)
};
q.prototype.updateTeasers=function(){var r=this;
r.cacheTeasers();
r.initEmbeddedPlayers();
r.handlePremiumVideoTeasers()
};
q.prototype.handleHomePageLayout=function(){g.on("resize",a);
a()
};
q.prototype.handleTeaserImageQuality=function(){p();
g.on("change",p)
};
function a(r){var u=j(".video-teaser.latest"),s=j(".video-teaser-tile"),t=u.width();
s.height(t)
}function p(){if(!m(b)){return
}var t=j(".video-teaser.embed"),u=t.find(".video-preview"),r=u.css("background-image"),s="";
switch(g.size){case g.sizes.WIDE:s=r.replace("img.320.high","img.768.medium");
u.css("background-image",s);
break;
case g.sizes.MEDIUM:s=r.replace("img.768.medium","img.320.high");
u.css("background-image",s);
break
}}function f(r){return j(".video-aggregator").find(r).find(".video-player").not(".initialised")
}q.prototype.initEmbeddedPlayers=function(){var r=f(".embed");
this.initTeaserVideoPlayers(r,false,true)
};
q.prototype.initModalPlayers=function(){var r=f(".standard, .highlight");
this.initTeaserVideoPlayers(r,false,false)
};
q.prototype.initModalPlayersNonAggregator=function(){var r=b.find(".video-player").not(".js-init").not(".initialised");
this.initTeaserVideoPlayers(r,false,true)
};
q.prototype.initTeaserVideoPlayers=function(t,s,r){if(k.ieVersion==8){return false
}t.addClass("initialised");
c.initPlayers(t,{autoplay:s,preload:r},j.proxy(function(v){j.extend(this._players,v);
var u=c.players.length;
while(u--){c.players[u].on("video-playing",this.onPlay,this)
}},this))
};
q.prototype.attachListeners=function(){var s=".video-teaser-link";
var r=".close-btn";
h.on("click"+s,s,j.proxy(this.onTeaserClick,this));
h.on("click"+r,r,j.proxy(this.onTeaserClose,this))
};
q.prototype.onPlay=function(s){var r=s.parents(".video-teaser");
r.addClass("video-is-playing")
};
q.prototype.handlePremiumVideoTeasers=function(){if(n.isLoggedIn&&n.isPremium){b.addClass("is-premium-user")
}};
q.prototype.onTeaserClick=function(w){var r={},x={},v={},u={},t={},s=0;
r=j(w.currentTarget);
x=r.parents(".video-teaser");
if(!n.isLoggedIn&&r.parent().hasClass("is-freemium-content")){w.preventDefault();
return false
}if(!n.isPremium&&r.hasClass("video-premium-link")){return true
}if(r.parents(".js-swipe-wrap").length){return true
}switch(g.size){case g.sizes.NARROW:return true;
case g.sizes.MEDIUM:case g.sizes.WIDE:if(!j(".template-home").length){if(m(x)&&(g.size==g.sizes.WIDE)){s=o(x);
t=this._players[s];
t.hidePreview();
t.playVideo();
return false
}else{if(k.ieVersion==9){return true
}}}x.css("transform","");
u=x.find(".video-modal-window");
v=u.find(".video-player").not(".initialised");
if(v.length>0){this.initTeaserVideoPlayers(v,true)
}else{if(this._players){s=o(u);
t=this._players[s];
t.playVideo()
}}u.addClass("isVisible");
return false
}};
q.prototype.onTeaserClose=function(t){var u=j(t.currentTarget).parents(".video-teaser"),s=u.find(".video-modal-window"),r=this._players[o(s)];
if(r){r.resetVideoPlayback()
}s.removeClass("isVisible")
};
function o(r){return r.find(".video-player").find(".video-display").first().attr("id")
}function m(r){return r.hasClass("embed")
}return new q().init()
})(jQuery,fom.utils,fom.utils.resizeManager,fom.modules.videoPlayer,fom.modules.user);
(function(e,C,u,g,o){var q={aggregator:".article-aggregator",container:".promoted-articles",wrapper:".swiper-wrapper",slide:".slide",imgpanel:".imgpanel",loadmore:".load-more",timedelay:"data-carouseltime"},G={animationspeed:1000,slidedelay:5000,nudgeTimeout:250,nudgeDistance:90},E={START:16,COUNT:4},j,F,A,f=e(q.aggregator),n=e(q.loadmore,f),s=e(q.imgpanel),p=2,z,m=true,r;
fom.components.articleaggregator={};
function k(){var K=n.attr("data-linktext")||"Load more",I=n.attr("data-errormessage")||"Something went wrong. Try again later",J='<p><a href="#load-more">'+K+'<span class="errormessage">'+I+'</span><span class="icon-arrow"></span></a></p>';
c(n);
n.append(J);
z=n.height();
r=e("a",n).on("click",function(L){L.preventDefault();
L.stopPropagation();
x();
return false
})
}function c(J){var I=J.attr("data-globalpartnerblockenabled");
if(typeof I!==typeof undefined&&I!==false){E.START=E.START-1
}E.currentStart=E.START;
E.TOTAL_RESULTS=J.attr("data-totalresults")||E.START;
E.NODEPATH=J.attr("data-ajax-path");
E.COUNT=parseInt(J.attr("data-loadnum"),10)||E.COUNT;
j=h()
}function h(){return(E.NODEPATH+".more.html")
}function b(I){if(I){n.addClass("loading").removeClass("error")
}else{n.removeClass("loading")
}}function t(){if(E.TOTAL_RESULTS>E.currentStart){n.hide().appendTo(f).fadeIn("fast")
}}function v(L){var J=100,I=e(".loaded-item",L).not(".in-view"),K;
I.each(function(){K=e(this);
K.css({"-webkit-transition-delay":J+"ms","transition-delay":J+"ms"});
J+=100
});
setTimeout(function(){I.addClass("in-view")
},10);
setTimeout(function(){t()
},(J*E.COUNT)-J)
}function x(){var I="start="+E.currentStart+"&count="+E.COUNT+"&date="+C.queryString.get("date")+"&type="+C.queryString.get("type");
b(true);
e.ajax({type:"GET",url:j,processData:false,data:I}).done(function(K,J,L){H(a(L))
}).fail(function(J){d(J)
})
}function H(I){b(false);
n.detach();
E.currentStart+=E.COUNT;
w(I)
}function d(I){b(false);
n.addClass("error");
throw new Error("Load more failed: "+I.statusText)
}function w(K){var J=e(".article-columns .column",f).last(),L=e(".loaded-item",K).length/p,I;
I=(L>=2)?J.height()*L:J.height();
if(E.TOTAL_RESULTS>E.currentStart){if(m){I+=z
}m=false
}f.animate({height:"+="+I},function(){f.append(K);
o.recalculate$Elements(e(".loaded-item").find(".fom-teaser"));
v(e(".loaded-group",f).last())
})
}function a(J){var I=e(J.responseText);
I.find("script, .editmode-helper, .editmode").remove();
return I
}function B(I){if(I==="narrow"||I==="medium"){if(A){A.destroy();
A=null
}if(!F){F=fom.components.articleaggregator.mobile;
F.setOptions(q,G);
F.init()
}}if(I==="wide"){if(F){F.destroy();
F=null
}if(!A){A=fom.components.articleaggregator.desktop;
A.setOptions(q,G);
A.init()
}}}function y(){if(n.length>0){k()
}if(e(q.container).length>0){B(fom.utils.resizeManager.size);
fom.utils.resizeManager.on(fom.utils.resizeManager.events.CHANGE,B)
}g.applyTo(s)
}function D(){p=u.isWide()?2:1
}u.on("change",D);
D();
e(document).ready(function(){return y()
})
}(jQuery,fom.utils,fom.utils.resizeManager,fom.modules.premiumOverlay,fom.modules.responsiveElements));
fom.components.articleaggregator.mobile=(function(h){var k={},j={},t={},b,a={mode:"horizontal",loop:true,loopAdditionalSlides:0,centeredSlides:true,slidesPerView:1,initialSlide:0,grabCursor:false,keyboardControl:true,setWrapperSize:true,autoplayDisableOnInteraction:true,pagination:".js-pagination",paginationElement:"div",createPagination:true},m,o,p,u=false;
function q(v,w){h.extend(j,v);
h.extend(t,w);
m=h(j.container);
o=h(j.wrapper,m);
p=h(j.slide,m);
t.slidedelay=parseInt(m.attr(j.timedelay),10)||t.slidedelay;
a.speed=t.animationspeed;
a.autoplay=t.slidedelay
}function r(v){o.animate({marginLeft:v},t.animationspeed*0.5)
}function e(){b.stopAutoplay();
setTimeout(function(){r((t.nudgeDistance*-1))
},t.nudgeTimeout)
}function f(){if(!u){b.startAutoplay()
}setTimeout(function(){r(0)
},t.nudgeTimeout)
}function c(){b.stopAutoplay();
setTimeout(function(){r(t.nudgeDistance)
},t.nudgeTimeout)
}function d(){if(!u){b.startAutoplay()
}setTimeout(function(){r(0)
},t.nudgeTimeout)
}function g(){if(h(".slide-btn",m).length===0){m.append('<p class="slide-btn btn-prev"><a href="#prev"><span>Previous</span></a></p><p class="slide-btn btn-next"><a href="#next"><span>Next</span></a></p>');
h(".btn-next a, .btn-prev a",m).css("width",t.nudgeDistance).on({click:function(w){var v=h(w.target);
w.preventDefault();
r(0);
u=true;
if(v.closest(".btn-next").length>0){b.slideNext()
}if(v.closest(".btn-prev").length>0){b.slidePrev()
}}});
h(".btn-next span",m).on({mouseenter:function(v){e()
},mouseleave:function(v){f()
}});
h(".btn-prev span",m).on({mouseenter:function(v){c()
},mouseleave:function(v){d()
}})
}}function n(){var v=p.length;
if(!fom.utils.isEditMode){if(v>1){m.addClass("swiper-container slides-"+v);
b=new Swiper(".swiper-container",a),g()
}}}function s(){if(b){b.destroy()
}fom.utils.removeSwiperClasses(p);
o.removeAttr("style");
m.removeClass("swiper-container")
}k.setOptions=q;
k.init=n;
k.destroy=s;
return k
}(jQuery));
fom.components.articleaggregator.desktop=(function(e,q){var p={},m={},F={},c=4,t,A,B,d,x,E,r,C,g=0,s,f;
function z(I,J){e.extend(m,I);
e.extend(F,J);
m.accordion=".accordion ul";
m.modifier="desktop";
m.promoArticles="promoted-articles";
m.premiumOverlayText=".imgpanel .premium-overlay p";
m.isFreemium="is-freemium-content";
m.item="stack-item";
m.textpanel="textpanel";
m.active="is-active"
}function a(){t=e(m.container);
A=e(m.slide,t);
B=e(m.accordion,t);
F.slidedelay=parseInt(t.attr(m.timedelay),10)||F.slidedelay
}function H(){if(q.size!==q.sizes.NARROW){r=d.width();
f=x.width();
E.width(f-r)
}}function y(){var I="";
w();
A.each(function(){var J=(e(this).find("."+m.textpanel).hasClass(m.isFreemium))?" "+m.isFreemium:"";
I+='<li class="'+m.item+'"><div class="'+m.textpanel+J+'">'+e(this).find("."+m.textpanel).html()+"</div></li>"
});
B.append(I);
d=e("."+m.item,t);
C=d.length;
E=e(m.premiumOverlayText);
x=e("."+m.promoArticles);
H();
k();
return B
}function w(){return B.empty()
}function k(){var M='<li class="stack-item-empty"><div class="'+m.textpanel+'"></div></li>',K=C,I=c,L,J;
if(K<I){L=I-K;
for(J=0;
J<L;
J+=1){B.append(M)
}}}function j(I){d.eq(I).addClass(m.active);
A.eq(I).addClass(m.active)
}function G(I){d.eq(I).removeClass(m.active);
A.eq(I).removeClass(m.active)
}function o(I){var J=g;
g=I;
G(J);
j(g)
}function b(){var I=g;
g=(g<(C-1))?g+1:0;
G(I);
j(g)
}function h(){s=setInterval(function(){b()
},F.slidedelay)
}function n(){clearInterval(s)
}function v(){B.on("click","a",function(J){var I=e(this).closest("."+m.item);
if(!I.hasClass(m.active)){J.preventDefault();
n();
o(I.index())
}})
}function u(){if(!fom.utils.isEditMode){fom.utils.removeSwiperClasses(e(m.slide,m.container));
a();
t.addClass(m.modifier);
if(A.length>0){y();
o(0);
q.on("resize",H);
if(A.length>1){v();
h()
}}}}function D(){n();
o(0);
w();
t.removeClass(m.modifier);
d.removeClass(m.active);
A.removeClass(m.active)
}p.setOptions=z;
p.init=u;
p.destroy=D;
return p
}(jQuery,fom.utils.resizeManager));
fom.components.videoIndexAggregator=(function(f,e,g,d){var c=function(){};
c.selectors={AGGREGATOR:".video-aggregator",TEASER:".video-teaser",TEASER_HOLDER:".article-columns",LOAD_MORE:".load-more",RESULTS_HOLDER:".results-container"};
c.classes={LOADING:"loading",ERROR:"error"};
c.prototype.params={START:16,COUNT:8};
c.prototype.init=function(){if(this.cacheElements()){if(e.ieVersion==8){this.initLoadMore();
return false
}this.initPackery();
this.initLoadMore();
d.on(d.events.RESIZE,this.onResize,this);
return this
}return false
};
c.prototype.onResize=function(){e.debounce(this._elements.$teaserHolder.packery,1000)
};
c.prototype.cacheElements=function(){var h=f(c.selectors.AGGREGATOR);
if(h.length<=0){return false
}this._elements={$holder:h,$teaserHolder:h.find(c.selectors.TEASER_HOLDER),$loadMoreButton:h.find(c.selectors.LOAD_MORE),$resultsHolder:h.find(c.selectors.RESULTS_HOLDER)};
return true
};
c.prototype.initPackery=function(){this._elements.$teaserHolder.packery({itemSelector:c.selectors.TEASER,transitionDuration:0,gutter:0})
};
c.prototype.initLoadMore=function(){this.createLoadMore()
};
c.prototype.createLoadMore=function(){var h={},m=this._elements.$loadMoreButton.attr("data-linktext")||"Load more",j=this._elements.$loadMoreButton.attr("data-errormessage")||"Something went wrong. Try again later",k='<p><a href="#load-more">'+m+'<span class="errormessage">'+j+'</span><span class="icon-arrow"></span></a></p>';
this.getEditorSetParams(this._elements.$loadMoreButton);
this._elements.$loadMoreButton.append(k);
h=f("a",this._elements.$loadMoreButton).on("click",f.proxy(function(n){n.preventDefault();
n.stopPropagation();
this.getMoreResults();
return false
},this))
};
c.prototype.getEditorSetParams=function(j){var h=j.attr("data-globalpartnerblockenabled");
if(typeof h!==typeof undefined&&h!==false){this.params.START=this.params.START-1
}this.params.currentStart=this.params.START;
this.params.TOTAL_RESULTS=j.attr("data-totalresults")||this.params.START;
this.params.NODEPATH=j.attr("data-ajax-path");
this.params.COUNT=parseInt(j.attr("data-loadnum"),10)||this.params.COUNT;
this.ENDPOINT=this.createEndpoint()
};
c.prototype.createEndpoint=function(){return(this.params.NODEPATH+".more.html"+window.location.search)
};
c.prototype.getMoreResults=function(){this.displayLoader(true);
f.ajax({type:"GET",url:this.ENDPOINT,data:{start:this.params.currentStart,count:this.params.COUNT}}).done(f.proxy(function(j,h,k){this.handleSuccess(a(k))
},this)).fail(f.proxy(function(h){this.handleFailure(h)
},this))
};
c.prototype.displayLoader=function(h){if(h){this._elements.$loadMoreButton.addClass(c.classes.LOADING).removeClass(c.classes.ERROR)
}else{this._elements.$loadMoreButton.removeClass(c.classes.LOADING)
}};
c.prototype.handleSuccess=function(h){this.displayLoader(false);
this._elements.$loadMoreButton.detach();
this.params.currentStart+=this.params.COUNT;
this.appendResults(h)
};
c.prototype.handleFailure=function(h){this.displayLoader(false);
console.log("An Error has occured!")
};
c.prototype.appendResults=function(j){var h=j.find(c.selectors.TEASER);
$teaserWrap={},targetHeight=0;
if(e.ieVersion==8){this._elements.$teaserHolder.append(h);
this.reinstateLoadMoreLink();
return
}$teaserWrap=h.wrap('<div class="hide"></div>');
this._elements.$teaserHolder.append($teaserWrap);
targetHeight=this._elements.$teaserHolder.outerHeight()+$teaserWrap.height()+"px";
$teaserWrap.remove();
this._elements.$teaserHolder.animate({height:targetHeight},f.proxy(function(){this._elements.$teaserHolder.append(h);
h.hide(0).fadeIn();
this._elements.$teaserHolder.packery("appended",h);
this.reinstateLoadMoreLink();
g.updateTeasers()
},this))
};
c.prototype.reinstateLoadMoreLink=function(){if(this.params.TOTAL_RESULTS>this.params.currentStart){this._elements.$loadMoreButton.hide().appendTo(this._elements.$holder).fadeIn("fast")
}};
function b(j){var h=0;
j.each(function(){var k=f(this).height();
h=(k>h)?k:h
});
return h
}function a(j){var h=f(j.responseText);
h.find("script, .editmode-helper, .editmode").remove();
return h
}return new c().init()
})(jQuery,fom.utils,fom.components.videoTeaser,fom.utils.resizeManager);
(function(c,a){c.raceCalendar||(c.raceCalendar={});
var d=function(f,e){this.$el=$(f);
this.$slides=this.$el.find("."+d.SLIDE_CLASSNAME);
this.$wrapper=this.$el.find("."+d.WRAPPER_CLASSNAME);
this.$parallax=this.$el.find("."+d.PARALLAX_CLASSNAME);
this.isActive=false;
this._events=[];
this._addSwiperShim();
this.swiper=new Swiper(f,{freeMode:true,freeModeMomentum:true,slidesPerView:"auto",wrapperClass:d.WRAPPER_CLASSNAME,slideClass:d.SLIDE_CLASSNAME});
this.$el.on("click","."+d.SLIDE_CLASSNAME,$.proxy(this.showRace,this))
};
c.raceCalendar.RaceCalendarSwiper=d;
d.WRAPPER_CLASSNAME="race-list";
d.SLIDE_CLASSNAME="race";
d.SLIDE_DETAILS_CLASSNAME="race-details";
d.CURRENT_RACE_CLASSNAME="current";
d.PARALLAX_CLASSNAME="parallax";
d.ANIMATION_STEP_CLASSNAMES=["step-1","step-2","step-3"];
d.ANIMATION_STEP_CLASS_LIST=d.ANIMATION_STEP_CLASSNAMES.join(" ");
d.ANIMATION_STEP_DURATION=400;
d.PARALLAX_MOVEMENT_RANGE=300;
d.ACTIVE_SLIDE_WIDTHS={};
d.ACTIVE_SLIDE_WIDTHS[a.resizeManager.sizes.WIDE]=625;
d.ACTIVE_SLIDE_WIDTHS[a.resizeManager.sizes.MEDIUM]=475;
d.prototype={on:function(f,e){this._events[f]=e
},trigger:function(h,e){var g=this._events[h],f;
if($.isFunction(g)){if(h==="beforeraceopen"){f=[this.createRolexContainer(e),this.raceIndex(e),this.clockScale()]
}g.apply(null,f||[])
}},createRolexContainer:function(e){var f=a.resizeManager.isWide()?"last":"first",g=e.find(".rolex-clock:"+f);
return g.off("timeupdate").on("timeupdate",$.proxy(this.updateRaceTimes,this))
},updateRaceTimes:function(f,e){$(f.currentTarget).closest("."+d.SLIDE_DETAILS_CLASSNAME).find("time").each(function(h,j){var g=$(j);
if(!g.attr("datetime")){return
}var o=new Date(g.attr("datetime"));
var n="";
var m=g.closest("div").find("#cityText").attr("zone").toUpperCase();
var k=(o.dst()===new Date().dst())?0:(60*60*1000);
if(e!=0&&m==="AUSTRALIA"){o.setTime(+o+e*60*1000+k)
}else{o.setTime(+o+e*60*1000)
}if(g.hasClass("clock-24")){n=b(o,"HH:MM")
}else{if(g.hasClass("month")){n=b(o,"MMM")
}else{if(g.hasClass("date")){n=b(o,"DD")
}else{if(g.hasClass("day")){n=b(o,"ddd")
}else{if(g.hasClass("date-full")){n=b(o,"DD MMM YYYY")
}}}}}g.text(n)
})
},raceIndex:function(e){return this.$slides.index(e)
},clockScale:function(){switch(a.resizeManager.size){case a.resizeManager.sizes.NARROW:return 47;
case a.resizeManager.sizes.NARROW:return 70;
default:return 90
}},_addSwiperShim:function(){var e=$("<div />"),f=d.ANIMATION_STEP_CLASS_LIST+" "+d.SLIDE_CLASSNAME;
e.addClass(f);
this.$wrapper.append(e);
this.$slides.add(e)
},checkScrollIntoView:function(e){if(this.$el.offset().top+200<=e){setTimeout($.proxy(function(){this.showRace({currentTarget:this.findNextRace()})
},this),0);
return true
}return false
},findNextRace:function(){var e;
this.$slides.each(function(h,j){var g=$(j),n=g.find(".race-date-full"),f=+new Date;
var m=+new Date(n.find(".from").attr("datetime"));
var k=+new Date(n.find(".to").attr("datetime"));
if(!m){m=+new Date(n.find(".from").text())
}if(!k){k=+new Date(n.find(".to").text())
}if((m<f&&k>f)||m>f){e=g;
return false
}});
return e||this.$slides.last()
},currentRaceSlide:function(){return this.$slides.filter("."+d.ANIMATION_STEP_CLASSNAMES.join("."))
},isActiveSlide:function(e){return e.hasClass(d.ANIMATION_STEP_CLASS_LIST)
},slideWidth:function(){var e=a.resizeManager.size;
return d.ACTIVE_SLIDE_WIDTHS[e]
},leftOffset:function(){if(a.resizeManager.isNarrow()){return 0
}return(this.slideWidth()/2)-(this.$el.innerWidth()/2)
},alignSwiperToRace:function(e){var f=e.position()||{left:0},g=-(this.swiper.getWrapperTranslate("x"))+f.left+this.leftOffset();
this.swiper.setWrapperTranslate(-g,0,0);
this.parallaxBackground(-g)
},animateRaceIntoView:function(e){var g=this,f=d.ANIMATION_STEP_CLASSNAMES.length-1;
this.trigger("beforeraceopen",e);
this.alignSwiperToRace(e);
$.each(d.ANIMATION_STEP_CLASSNAMES,function(j,h){var k=j*d.ANIMATION_STEP_DURATION;
setTimeout(function(){e.addClass(h);
if(j===f){g.isActive=false
}},k)
})
},showRace:function(f){var e=$(f.currentTarget);
if(this.isActive||this.isActiveSlide(e)){return true
}this.isActive=true;
this.closeActiveSlide($.proxy(this.animateRaceIntoView,this,e))
},closeActiveSlide:function(j){var e=this,f=this.$slides,g=d.ANIMATION_STEP_CLASSNAMES,h=g.length-1;
f.removeClass(g[h]);
setTimeout(function(){var k=g.slice(0,h).join(" ");
f.removeClass(k);
setTimeout(function(){e.trigger("afterraceclose");
j.call(null)
},d.ANIMATION_STEP_DURATION)
},d.ANIMATION_STEP_DURATION)
},parallaxBackground:function(f){var g=f/this.$el.width(),e=d.PARALLAX_MOVEMENT_RANGE*g;
e=(e<=0)?e:0;
this.$parallax.css("transform","translate3d("+e+"px, 0px, 0px)")
},update:function(){this.$wrapper.css({width:"",height:""});
setTimeout($.proxy(function(){var e=this.currentRaceSlide();
this.trigger("afterraceclose");
this.swiper.update(true);
this.trigger("beforeraceopen",e);
this.alignSwiperToRace(e)
},this),500)
}};
var b=(function(){var k=function(n){if(n<10){return"0"+n
}return n+""
};
var j=function(n){return k(n.getHours())+":"+k(n.getMinutes())
};
var h=function(n){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n.getMonth()]
};
var e=function(n){return k(n.getDate())
};
var f=function(n){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][n.getDay()]
};
var m=function(n){return[e(n),h(n),n.getFullYear()].join(" ")
};
var g=function(n,o){switch(o){case"HH:MM":return j(n);
case"MMM":return h(n);
case"DD":return e(n);
case"ddd":return f(n);
case"DD MMM YYYY":return m(n)
}throw new Error("DateTime format not recognised for "+o)
};
return function(n,o){return g(n,o)
}
}())
}(fom.components,fom.utils));
(function(b){b.raceCalendar||(b.raceCalendar={});
var d=function(j){this.template=j
};
b.raceCalendar.Timepiece=d;
d.prototype={inject:function(m,j,k){if(m.length===0){return
}this.$el=$(this.template);
this.raceEvent=Events[j||0];
this.$container=m;
m.html(this.$el);
this.tickingBomb=m.rolexClock(this.settings(k),j||0)
},settings:function(k){var j=h[k];
return $.extend({},f,{globalXcenter:j.width/2,globalYcenter:j.height/2,globalXscale:j.scale,globalYscale:j.scale,onclickCity:$.proxy(this._onClickCity,this),onclickYourtime:$.proxy(this._onClickYourTime,this)})
},remove:function(){if(this.$el){if($.isFunction(this.tickingBomb)){this.tickingBomb()
}this.$el.remove()
}},_onClickCity:function(){this.$container.trigger("timeupdate",0);
return false
},_onClickYourTime:function(j){this.$container.trigger("timeupdate",-j);
return false
}};
var c="en";
var h={47:{width:42,height:42,scale:0.47},60:{width:56,height:56,scale:0.6},65:{width:60,height:60,scale:0.65},70:{width:64,height:64,scale:0.7},75:{width:68,height:68,scale:0.75},80:{width:73,height:73,scale:0.8},90:{width:82,height:82,scale:0.95},100:{width:90,height:90,scale:1},110:{width:99,height:99,scale:1.1},120:{width:109,height:109,scale:1.2},300:{width:259,height:260,scale:2.2}};
var e=h[100];
var g={green:"/etc/designs/fom-website/images/rolex/hands/green/",black:"/etc/designs/fom-website/images/rolex/hands/black/"};
var a=g.green;
var f={LANG:c,contentWidth:365,contentHeight:90,clockWidth:e.width,clockHeight:e.height,trackingurl:"https://web.archive.org/web/20180902030509/http://www.rolex.com/?cmpid=dw_Clocks_201500329",leadingZeros:true,amPm:false,time24hours:true,showText:true,showTime:false,showDay:false,globalXcenter:e.width/2,globalYcenter:e.height/2,globalXscale:e.scale,globalYscale:e.scale,handsFolder:a,clocktimeAtEvent:false,countdownNumbersOnly:false,showDefaultCity:false,dateList:undefined,selectedCityId:undefined,isCountdownClock:false}
}(fom.components));
(function(a){var c=fom.components.raceCalendar,e=$(".race-calendar");
c.$components=e;
c.swipers=[];
function b(){var f=$(this).parents(".race-details");
f.find(".js-calendar-your-link").removeClass("hidden");
f.find(".js-calendar-city-link").addClass("hidden")
}function d(){var f=$(this).parents(".race-details");
f.find(".js-calendar-city-link").removeClass("hidden");
f.find(".js-calendar-your-link").addClass("hidden")
}c.$components.each(function(k,m){var j=$(m),o=j.find(".js-calendar-your-link, .js-calendar-city-link"),h=c.RaceCalendarSwiper.SLIDE_CLASSNAME,g,f,n;
if(j.find("."+h).length){g=j.find(".rolex-clock-tmpl").html();
f=new c.RaceCalendarSwiper(m);
n=new c.Timepiece(g);
c.swipers.push(f);
f.on("afterraceclose",$.proxy(n.remove,n));
f.on("beforeraceopen",$.proxy(n.inject,n));
j.on("click",".race-calendar-link",function(p){p.stopPropagation();
p.preventDefault()
});
j.on("click","#local-link",d);
j.on("click","#city-link",b);
o.on("click",function(r){var q=$(this),p=q.parents(".race-details");
r.stopPropagation();
r.preventDefault();
if(p.length){if(q.hasClass("js-calendar-your-link")){p.find("#local-link").trigger("click")
}else{p.find("#city-link").trigger("click")
}}})
}});
a.scrollWatcher.add(c.swipers);
a.resizeManager.on("change",function(){$.each(c.swipers,function(g,f){f.update()
})
})
}(fom.utils));
fom.components.userform=(function(g,d,j,m,a,f,b,k){var h=function(){};
h.prototype.selectors={HOLDER:"undefined",FORM:".user-form",PROFILE:".form-fieldset--profile",BILLING:".form-fieldset--billing",PAYMENT:".form-fieldset--payment",PURCHASE_UPGRADE_LINK:".purchase-upgrade-link",INPUT:".form-input",TEXT:".form-input--text",SELECT:".form-input--select",CHECKBOX:".form-input--checkbox",SUBMIT:".form-input--submit",REDEMPTION_CODE:"#form-input-redemption-code",VOTE_STRING:"#mt-vote",COUNTRY:"#form-input-country",FIRST_NAME:"#form-input-first-name",LAST_NAME:"#form-input-last-name",EMAIL:"#form-input-email",EMAIL_VERIFY:"#form-input-email-verify",PASSWORD:"#form-input-password",PASSWORD_VERIFY:"#form-input-password-verify",BILLING_LINE_1:"#form-input-billing-address-line-1",BILLING_LINE_2:"#form-input-billing-address-line-2",BILLING_TOWN:"#form-input-billing-town",BILLING_COUNTRY:"#form-input-billing-country",BILLING_POSTCODE:"#form-input-billing-postcode",BILLING_PHONE:"#form-input-billing-phone",CARD_TYPE:"#form-input-card-type",CARD_NAME:"#form-input-card-name",CARD_NUMBER:"#form-input-card-no",CARD_CVV:"#form-input-cvv",EXPIRY_MONTH:"#form-input-expiry-month",EXPIRY_YEAR:"#form-input-expiry-year",RADIO_MONTH:"#form-input-sub-month",RADIO_YEAR:"#form-input-sub-year",ACCEPT_CONTACT_THIRD_PARTY:"#form-input-accept-contact-third-party",ACCEPT_CONTACT_F1:"#form-input-accept-contact-f1",PRICE_MONTH:".price-month",PRICE_YEAR:".price-year",SUB_CANCEL_WRAPPER:".sub-cancel-wrapper",SUB_CANCEL_BUTTON:".cancel-subscription",SUB_CANCEL_PENDING:".cancel-pending",SUB_MONTH_WRAPPER:".sub-month-wrapper",SUB_YEAR_WRAPPER:".sub-year-wrapper",ERROR_PANEL:".form-error-panel",ERROR_PANEL_LIST:".form-error-panel-list",INVALID_COUNTRY:".invalid-country"};
h.prototype.events={FORM_LOAD:"userFormLoad",INVALID_COUNTRY_SELECT:"userFormInvalidCountrySelect",INVALID_COUNTRY_SUBMIT:"userFormInvalidCountrySubmit",INVALID_COUNTRY_CTA_CLICK:"userFormInvalidCountryCTAClick",CLIENT_VALIDATION_ERROR:"userFormClientValidationError",SERVER_VALIDATION_ERROR:"userFormServerValidationError",FORM_SUBMIT:"userFormSubmit",SUBMIT_SUCCESS:"userFormSubmitSuccess",VOUCHER_ERROR:"voucherError"};
h.prototype.validation=[{name:"country",rules:"callback_country_required|callback_check_country"},{name:"first-name",display:"first name",rules:"required|min_length[2]|max_length[100]"},{name:"last-name",display:"last name",rules:"required|min_length[2]|max_length[100]"},{name:"billing-phone",display:"phone number",rules:"numeric|max_length[20]"},{name:"billing-address-line-1",display:"billing address (line 1)",rules:"required"},{name:"card-type",display:"credit card type",rules:"required|default[default]"},{name:"card-name",display:"credit card name",rules:"required"},{name:"issue-number",display:"issue number",rules:"numeric|max_length[2]"},{name:"expiry-month",display:"expiry month",rules:"required|default[default]|callback_check_expiry"},{name:"expiry-year",display:"expiry year",rules:"required|default[default]|callback_check_expiry"}];
h.prototype.classes={HIDE:"hide",ERROR:"error",OTHER:"Other",INITIALISED:"initialised"};
h.prototype.init=function(){this.DEBUG=false;
if(!this.cacheElements()){return false
}if(!j.browserSupportsPremium()){window.fom.modules.modals.unsupportedBrowser(this.redirectUnsupportedBrowser);
return false
}this._elements.$purchaseUpgradeLink.hide();
this.validation=this.validation.concat(this.getExtraValidation());
return this
};
h.prototype.activate=function(){k.ready({onSuccess:$.proxy(function(){this.initPlaceholders();
this.initStyles();
this.attachListeners();
this.initPrices();
this.initValidator();
this.initVoteSignUp();
a.fireCustomEvent(this.events.FORM_LOAD);
if(this.DEBUG){this.initDebug()
}},this),onFail:$.proxy(function(){this.activate()
},this)})
};
h.prototype.redirectUnsupportedBrowser=function(){history.back()
};
h.prototype.initDebug=function(){};
h.prototype.getExtraValidation=function(){return[]
};
h.prototype.initPrices=function(n){m.onPriceInit($.proxy(this.onCountryChange,this))
};
h.prototype.cacheElements=function(){var p=$(this.selectors.HOLDER),n=p.find(this.selectors.FORM),o=n.find(this.selectors.ERROR_PANEL);
if(!p.length){return false
}return this._elements={$holder:p,$form:n,$input:n.find(this.selectors.INPUT),$text:n.find(this.selectors.TEXT),$select:n.find(this.selectors.SELECT),$checkbox:n.find(this.selectors.CHECKBOX),$radioMonth:n.find(this.selectors.RADIO_MONTH),$radioYear:n.find(this.selectors.RADIO_YEAR),$submit:n.find(this.selectors.SUBMIT),$country:n.find(this.selectors.COUNTRY),$cardNumber:n.find(this.selectors.CARD_NUMBER),$billingPhone:n.find(this.selectors.BILLING_PHONE),$expiryMonth:n.find(this.selectors.EXPIRY_MONTH),$expiryYear:n.find(this.selectors.EXPIRY_YEAR),$password:n.find(this.selectors.PASSWORD),$passwordVerify:n.find(this.selectors.PASSWORD_VERIFY),$redemptionCode:n.find(this.selectors.REDEMPTION_CODE),$voteString:n.find(this.selectors.VOTE_STRING),$purchaseUpgradeLink:n.find(this.selectors.PURCHASE_UPGRADE_LINK),$priceMonth:n.find(this.selectors.PRICE_MONTH),$priceYear:n.find(this.selectors.PRICE_YEAR),$subCancelWrapper:n.find(this.selectors.SUB_CANCEL_WRAPPER),$subCancelPending:n.find(this.selectors.SUB_CANCEL_PENDING),$subCancelButton:n.find(this.selectors.SUB_CANCEL_BUTTON),$subMonthWrapper:n.find(this.selectors.SUB_MONTH_WRAPPER),$subYearWrapper:n.find(this.selectors.SUB_YEAR_WRAPPER),$errorPanel:o,$errorPanelList:o.find(this.selectors.ERROR_PANEL_LIST),$errorPanelWrap:o.parent().parent(),$invalidCountry:n.find(this.selectors.INVALID_COUNTRY)}
};
h.prototype.initPlaceholders=function(){this._elements.$text.placeholder()
};
h.prototype.initStyles=function(){this._elements.$select.each($.proxy(function(n,o){this.onSelectChange.call(o)
},this));
this._elements.$form.addClass(this.classes.INITIALISED)
};
h.prototype.attachListeners=function(){this._elements.$form.on("input",$.proxy(this.onInputChange,this));
this._elements.$holder.on("click",this.selectors.INVALID_COUNTRY+" a",$.proxy(this.onInvalidCountryCTAClick,this));
this._elements.$checkbox.on("change",$.proxy(this.onCheckboxChange,this));
this._elements.$select.on("onchange change",this.onSelectChange);
this._elements.$expiryMonth.on("onchange change",$.proxy(this.onExpiryChange,this));
this._elements.$expiryYear.on("onchange change",$.proxy(this.onExpiryChange,this));
m.on("change",this.onCountryChange,this);
m.on("invalidCountry",this.onInvalidCountrySelect,this)
};
h.prototype.onInvalidCountryCTAClick=function(){a.fireCustomEvent(this.events.INVALID_COUNTRY_CTA_CLICK)
};
h.prototype.onInvalidCountrySelect=function(){a.fireCustomEvent(this.events.INVALID_COUNTRY_SELECT)
};
h.prototype.onCountryChange=function(n){this.updateCurrency(n.currency)
};
h.prototype.initValidator=function(){this._formValidator=new g(this._elements.$form.first()[0],this.validation,$.proxy(this.onValidation,this),$.proxy(this.onBeforeValidation,this));
this._formValidator.registerCallback("check_dropdown",$.proxy(this.checkDropdown,this));
this._formValidator.registerCallback("check_expiry",$.proxy(this.checkExpiry,this));
this._formValidator.registerCallback("check_country",$.proxy(this.checkCountry,this));
this._formValidator.registerCallback("country_required",function(n){return(n!==null&&n!==""&&n!=="default")
}).setMessage("country_required","Please select your country from the list");
this._formValidator.registerCallback("terms_required",function(){return $("#form-input-accept-terms").is(":checked")
}).setMessage("terms_required","You need to accept the Terms & Conditions before proceeding")
};
h.prototype.initVoteSignUp=function(){var n=this._elements.$form.hasClass("vote-signup"),o=window.location.hash?window.location.hash.replace("#",""):"";
if(n&&o&&this._elements.$voteString.length>0){this._elements.$voteString.val(o)
}};
h.prototype.onBeforeValidation=function(q){var p={},r=this,t,n,o=false,s=false;
if(this._elements.$cardNumber.length>0){o=true;
t=this._elements.$cardNumber.val()
}if(this._elements.$billingPhone.length>0){s=true;
n=this._elements.$billingPhone.val()
}a.fireCustomEvent(this.events.FORM_SUBMIT);
if(this._elements.$form.prop("disabled")){return false
}this._elements.$input.each(function(u,v){p=$(v);
p.val($.trim(p.val()))
});
if(o){if(t.substr(0,15)!=="XXXX-XXXX-XXXX-"){this._elements.$cardNumber.val(j.stripSpacesHyphensBrackets(t))
}}return true
};
h.prototype.onValidation=function(o,n){if(n&&n.preventDefault){n.preventDefault()
}else{if(event){event.returnValue=false
}}if(o.length>0){a.fireCustomEvent(this.events.CLIENT_VALIDATION_ERROR);
this.handleErrors(o,"client-validation")
}else{this.postForm()
}return false
};
h.prototype.postForm=function(){var n=this.getMappedForm();
this._elements.$errorPanelWrap.addClass(this.classes.HIDE);
this._elements.$input.parent().removeClass(this.classes.ERROR);
this._elements.$select.parent().parent().removeClass(this.classes.ERROR);
this._elements.$checkbox.closest(".form-input-expand").parent().removeClass(this.classes.ERROR);
$(".error-message",this._elements.$form).remove();
this.disableForm();
this.disableSubmit();
this.hasVoucherCode=n["redemption-code"];
this.service.post(n,$.proxy(this.onPostSuccess,this),$.proxy(this.onPostFail,this))
};
h.prototype.onPostFail=function(n,o){a.fireCustomEvent(this.events.SERVER_VALIDATION_ERROR);
this.enableForm();
this.enableSubmit();
if(n.isVoucherError){this.handleVoucherError(n.voucherCode);
return
}if(!n||!o){return this.unknownError()
}this.showErrorFromPointOfFailure(n,o)
};
h.prototype.showErrorFromPointOfFailure=function(n,p){var o=[];
switch(p){case"mpp-manage-card-details":case"mpp-add-subscription":case"mpp-user-update":case"mpp-user-create":o=this.parseMPPErrors(n);
if(o){return this.handleErrors(o,p)
}return this.handleErrors([{message:n.ErrorMessage}],p);
case"gigya-account-create":case"gigya-account-update":o=this.parseGigyaErrors(n);
return this.handleErrors(o,p);
case"gigya-account-init":case"mpp-session-create":case"get-csg-activeSubscription":case"get-csg-RetrievePaymentInstrument":default:return this.unknownError(p)
}};
h.prototype.unknownError=function(n){return this.handleErrors([{message:"Unexpected error occurred."}],n)
};
h.prototype.parseMPPErrors=function(n){var p=n.ErrorMessage,o;
if(p){if(p.match("BillingPostcode had illegal characters.")){o=this.getInput("billing-postcode")
}else{if(p.match("BillingTownCity had illegal characters.")){o=this.getInput("billing-town")
}else{if(p.match("BillingStreet had illegal characters.")){o=this.getInput("billing-address-line-2")
}else{if(p.match("BillingHouseName had illegal characters.")){o=this.getInput("billing-address-line-1")
}else{if(p.match("FirstName had illegal characters.")){o=this.getInput("first-name")
}else{if(p.match("Surname had illegal characters.")){o=this.getInput("last-name")
}}}}}}if(o){return[{element:o,message:"Contains illegal characters.",showFieldName:true,code:n.ErrorNumber.toString()}]
}}if(n.ErrorNumber){switch(n.ErrorNumber.toString()){case"1018":return[{element:this.getInput("email"),message:"email already exists",showFieldName:true,code:n.ErrorNumber.toString()}]
}}return false
};
h.prototype.parseGigyaErrors=function(p){var n=0,o=[];
if(p.validationErrors){n=p.validationErrors.length;
while(n--){switch(p.validationErrors[n].fieldName){case"email":o.push({element:this.getInput("email"),message:p.validationErrors[n].message,showFieldName:true,code:p.validationErrors[n].errorCode});
break;
case"password":case"newPassword":o.push({element:this.getInput("password"),message:p.validationErrors[n].message,showFieldName:true,code:p.validationErrors[n].errorCode});
break
}}return o
}else{if(p.errorDetails){if(p.errorDetails.match("Invalid argument: Invalid email")){return[{element:this.getInput("email"),message:"Invalid email address.",code:p.errorCode}]
}else{if(p.errorDetails.match("'password' cannot be the same as 'newPassword'")){return[{element:this.getInput("password-confirm"),message:"Your new password cannot be the same as your previous password.",code:p.errorCode}]
}else{if(p.errorDetails.match("invalid loginID or password")){return[{element:this.getInput("password"),message:"Current password incorrect.",code:p.errorCode}]
}}}}}return[{message:"Invalid profile details entered."}]
};
h.prototype.handleErrors=function(o,n){n=this.pointOfFailureToErrorCode(n);
if($("main").hasClass("template-registration-forms")){this.newErrorMessageView(o,n)
}else{this.oldErrorMessageView(o,n)
}};
h.prototype.oldErrorMessageView=function(t,n){var o=0,p=t.length,r={},u={},v="",q="",s="";
n=this.pointOfFailureToErrorCode(n);
while(o<p){r=t[o];
s=['<span class="error-code">[Reference: ',n.toUpperCase(),(r.code||""),"]</span>"].join("");
if(r.element){u=$(r.element);
if(r.showFieldName){q=u.data("title");
if(r.message){q=[q,r.message].join(" - ")
}}else{q=r.message||""
}v+="<li>"+q+s+"</li>";
if(e(u)){u=u.parent()
}u.addClass(this.classes.ERROR)
}else{if(r.message){v+=["<li>",r.message,s,"</li>"].join("")
}}o++
}this._elements.$errorPanelList.html(v);
this._elements.$errorPanelWrap.removeClass(this.classes.HIDE);
setTimeout($.proxy(function(){var w=this._elements.$errorPanel.offset().top-1;
if(d.size==d.sizes.NARROW){w-=$(".site-header .site-header-wrap").height()
}$("html, body").animate({scrollTop:w},"slow")
},this),0)
};
h.prototype.newErrorMessageView=function(x,o){var p=0,s=x.length,u={},y={},z="",t="",w="",r="";
var v=this.classes.ERROR;
var n="success-el";
var q=this.validation;
while(p<s){u=x[p];
if(u.element){y=$(u.element);
r=['<div class="error-message">',u.message,"</div>"].join("");
if(e(y)){y=y.parent().parent()
}else{if(c(y)){y=y.closest(".form-input-expand").parent();
r=['<div class="error-message clearbottom">',u.message,"</div>"].join("")
}else{y=y.parent()
}}y.removeClass(n);
y.addClass(v);
$(".error-message",y).remove();
y.prepend(r)
}else{if(u.message){z+=["<li>",u.message,w,"</li>"].join("")
}}p++
}$.each(q,function(){var B=$("[name="+this.name+"]");
var A;
if(e(B)){A=B.parent().parent()
}else{if(c(B)){A=B.closest(".form-input-expand").parent()
}else{A=B.parent()
}}if(!A.hasClass(v)){A.addClass(n)
}});
if(typeof x[0].element!=="undefined"){$("html, body").animate({scrollTop:$(x[0].element).offset().top-30},"slow")
}else{this._elements.$errorPanelList.html(z);
this._elements.$errorPanelWrap.removeClass(this.classes.HIDE);
setTimeout($.proxy(function(){var A=this._elements.$errorPanel.offset().top-1;
if(d.size==d.sizes.NARROW){A-=$(".site-header .site-header-wrap").height()
}$("html, body").animate({scrollTop:A},"slow")
},this),0)
}};
h.prototype.pointOfFailureToErrorCode=function(p){var n=p.split("-"),o=0;
p="";
for(;
o<n.length;
o++){p+=n[o][0]
}return p
};
h.prototype.handleVoucherError=function(n){a.fireCustomEvent(this.events.VOUCHER_ERROR);
window.location=$(".js-account-management").first().attr("href")+"#"+n
};
h.prototype.onPostSuccess=function(){this.setOnPostSuccessRedirectURL();
var n=this._elements.$form.data("complete-url"),o=window.location.hash?window.location.hash.replace("#",""):"monthly",p=$(".site-header").attr("data-upsellPage")+"#"+o;
a.fireCustomEvent(this.events.SUBMIT_SUCCESS);
this._elements.$input.val("");
this._elements.$select.val("default");
if(this.hasVoucherCode){p=p+"&"+this.hasVoucherCode;
window.location=p
}else{window.location=n
}};
h.prototype.disableForm=function(){this._elements.$input.prop("disabled",true);
this._elements.$form.prop("disabled",true)
};
h.prototype.enableForm=function(){this._elements.$input.prop("disabled",false);
this._elements.$form.prop("disabled",false)
};
h.prototype.enableSubmit=function(){this._elements.$submit.removeClass("loading");
this._elements.$submit.prop("disabled",false)
};
h.prototype.disableSubmit=function(){this._elements.$submit.addClass("loading");
this._elements.$submit.prop("disabled",true)
};
h.prototype.onCheckboxChange=function(o){var n=$(o.target);
if(n.attr("id")==="form-input-reveal-password"){var q=this.getInput("password");
if(n.is(":checked")){q.attr("type","text")
}else{q.attr("type","password")
}}else{var p=n.closest(".form-input-expand").parent();
if(p.hasClass(this.classes.ERROR)){$(".error-message",p).remove();
p.removeClass(this.classes.ERROR)
}}};
h.prototype.onInputChange=function(o){var n=$(o.target);
if(e(n)){n=n.parent().parent()
}else{if(c(n)){n=n.closest(".form-input-expand").parent()
}else{n=n.parent()
}}n.removeClass(this.classes.ERROR);
$(".error-message",n).remove()
};
h.prototype.onSelectChange=function(n){var o=$(this),p=o.find(":selected");
if(p.val()==="default"){o.addClass("default-selected")
}else{o.removeClass("default-selected")
}};
h.prototype.onExpiryChange=function(n){this._elements.$expiryMonth.parent().removeClass(this.classes.ERROR);
this._elements.$expiryYear.parent().removeClass(this.classes.ERROR)
};
h.prototype.updateCurrency=function(o){var n=k.getPrice(o,"month"),q=k.getPrice(o,"year"),p=j.getCurrencySymbol(o);
this._elements.$priceMonth.text(n.string);
this._elements.$priceYear.text(q.string);
this._elements.$radioMonth.val(n.serviceId);
this._elements.$radioYear.val(q.serviceId)
};
h.prototype.getInput=function(n){return this._elements.$input.filter("[name="+n+"]")
};
h.prototype.checkCountry=function(n){var o=(n===this.classes.OTHER);
if(o){a.fireCustomEvent(this.events.INVALID_COUNTRY_SUBMIT)
}return !o
};
h.prototype.checkExpiry=function(){var n=new Date(),o=new Date().getTime(),q=Number(this._elements.$expiryMonth.val())-1,p=Number(this._elements.$expiryYear.find(":selected").text());
n.setMonth(q);
n.setFullYear(p);
n=n.getTime();
if(n<o){return false
}return true
};
h.prototype.getMappedForm=function(){var o={},n=this._elements.$form.serializeArray();
$.map(n,function(p){o[p.name]=p.value
});
return o
};
function e(n){return n.is("select")
}function c(n){return n.is(":checkbox")
}h.prototype.setOnPostSuccessRedirectURL=function(){var o=window.location.hash;
var p=o.indexOf("#r");
if(o.length!=0&&p>-1){var q=o.substring(p+3);
q=q.replace("/content/fom-website","");
this._elements.$form.data("complete-url",q);
this._elements.$form.attr("data-complete-url",q);
if(this.hasVoucherCode){var n=o.split("#");
n.shift();
if(n.length==1){window.location.hash="monthly#"+n[0]
}}}};
return h
})(FormValidator,fom.utils.resizeManager,fom.utils,fom.components.countryDropdown,fom.tracking,fom.modules.modals,fom.config,fom.modules.csg);
fom.components.userSubscribeStep1Form=(function(g,d,h,m,a,f,b,j){var k=function(){};
k.prototype.selectors={HOLDER:"undefined",FORM:".subscribe-fullaccess-form-step1",NEXTFORMHOLDER:".subscribe-fullaccess-form-step2-holder",EDITFORM:".step-edit",PROFILE:".form-fieldset--profile",INPUT:".form-input",TEXT:".form-input--text",SELECT:".form-input--select",CHECKBOX:".form-input--checkbox",SUBMIT:".form-input--submit",COUNTRY:"#form-input-country",FIRST_NAME:"#form-input-first-name",LAST_NAME:"#form-input-last-name",EMAIL:"#form-input-email",EMAIL_VERIFY:"#form-input-email-verify",PASSWORD:"#form-input-password",ACCEPT_CONTACT_THIRD_PARTY:"#form-input-accept-contact-third-party",ACCEPT_CONTACT_F1:"#form-input-accept-contact-f1",REDEMPTION_CODE:"#form-input-redemption-code",ERROR_PANEL:".form-error-panel",ERROR_PANEL_LIST:".form-error-panel-list",INVALID_COUNTRY:".invalid-country"};
k.prototype.events={FORM_LOAD:"userSubscribeStep1FormLoad",INVALID_COUNTRY_SELECT:"userSubscribeStep1FormInvalidCountrySelect",INVALID_COUNTRY_SUBMIT:"userSubscribeStep1FormInvalidCountrySubmit",INVALID_COUNTRY_CTA_CLICK:"userSubscribeStep1FormInvalidCountryCTAClick",CLIENT_VALIDATION_ERROR:"userSubscribeStep1FormClientValidationError",SERVER_VALIDATION_ERROR:"userSubscribeStep1FormServerValidationError",FORM_SUBMIT:"userSubscribeStep1FormSubmit",SUBMIT_SUCCESS:"userSubscribeStep1FormSubmitSuccess",VOUCHER_ERROR:"userSubscribeStep1FormVoucherError"};
k.prototype.validation=[{name:"country",display:"country",rules:"callback_country_required|callback_check_country"},{name:"first-name",display:"first name",rules:"required|min_length[2]|max_length[100]"},{name:"last-name",display:"last name",rules:"required|min_length[2]|max_length[100]"}];
k.prototype.classes={HIDE:"hide",ERROR:"error",OTHER:"Other",INITIALISED:"initialised"};
k.prototype.init=function(){this.DEBUG=false;
if(!this.cacheElements()){return false
}if(!h.browserSupportsPremium()){window.fom.modules.modals.unsupportedBrowser(this.redirectUnsupportedBrowser);
return false
}this.validation=this.validation.concat(this.getExtraValidation());
return this
};
k.prototype.activate=function(){j.ready({onSuccess:$.proxy(function(){this.initPlaceholders();
this.initStyles();
this.attachListeners();
this.initValidator();
a.fireCustomEvent(this.events.FORM_LOAD);
if(this.DEBUG){this.initDebug()
}},this),onFail:$.proxy(function(){this.activate()
},this)})
};
k.prototype.redirectUnsupportedBrowser=function(){history.back()
};
k.prototype.initDebug=function(){};
k.prototype.getExtraValidation=function(){return[]
};
k.prototype.cacheElements=function(){var q=$(this.selectors.HOLDER),n=q.find(this.selectors.FORM),p=$(this.selectors.NEXTFORMHOLDER),o=n.find(this.selectors.ERROR_PANEL);
if(!q.length){return false
}return this._elements={$holder:q,$form:n,$nextformholder:p,$input:n.find(this.selectors.INPUT),$text:n.find(this.selectors.TEXT),$select:n.find(this.selectors.SELECT),$checkbox:n.find(this.selectors.CHECKBOX),$submit:n.find(this.selectors.SUBMIT),$country:n.find(this.selectors.COUNTRY),$password:n.find(this.selectors.PASSWORD),$editform:n.find(this.selectors.EDITFORM),$redemptionCode:n.find(this.selectors.REDEMPTION_CODE),$errorPanel:o,$errorPanelList:o.find(this.selectors.ERROR_PANEL_LIST),$errorPanelWrap:o.parent().parent(),$invalidCountry:n.find(this.selectors.INVALID_COUNTRY)}
};
k.prototype.initPlaceholders=function(){this._elements.$text.placeholder()
};
k.prototype.initStyles=function(){this._elements.$select.each($.proxy(function(n,o){this.onSelectChange.call(o)
},this));
this._elements.$form.addClass(this.classes.INITIALISED)
};
k.prototype.attachListeners=function(){this._elements.$form.on("input",$.proxy(this.onInputChange,this));
this._elements.$holder.on("click",this.selectors.INVALID_COUNTRY+" a",$.proxy(this.onInvalidCountryCTAClick,this));
this._elements.$checkbox.on("change",$.proxy(this.onCheckboxChange,this));
this._elements.$select.on("onchange change",this.onSelectChange);
m.on("invalidCountry",this.onInvalidCountrySelect,this)
};
k.prototype.onInvalidCountryCTAClick=function(){a.fireCustomEvent(this.events.INVALID_COUNTRY_CTA_CLICK)
};
k.prototype.onInvalidCountrySelect=function(){a.fireCustomEvent(this.events.INVALID_COUNTRY_SELECT)
};
k.prototype.initValidator=function(){this._formValidator=new g(this._elements.$form.first()[0],this.validation,$.proxy(this.onValidation,this),$.proxy(this.onBeforeValidation,this));
this._formValidator.registerCallback("check_dropdown",$.proxy(this.checkDropdown,this));
this._formValidator.registerCallback("check_expiry",$.proxy(this.checkExpiry,this));
this._formValidator.registerCallback("check_country",$.proxy(this.checkCountry,this));
this._formValidator.registerCallback("country_required",function(n){return(n!==null&&n!==""&&n!=="default")
}).setMessage("country_required","Please select your country from the list");
this._formValidator.registerCallback("terms_required",function(){return $("#form-input-accept-terms").is(":checked")
}).setMessage("terms_required","You need to accept the Terms & Conditions before proceeding")
};
k.prototype.onBeforeValidation=function(o){var n={},p=this;
a.fireCustomEvent(this.events.FORM_SUBMIT);
if(this._elements.$form.prop("disabled")){return false
}this._elements.$input.each(function(q,r){n=$(r);
n.val($.trim(n.val()))
});
return true
};
k.prototype.onValidation=function(o,n){if(n&&n.preventDefault){n.preventDefault()
}else{if(event){event.returnValue=false
}}if(o.length>0){a.fireCustomEvent(this.events.CLIENT_VALIDATION_ERROR);
this.handleErrors(o,"client-validation")
}else{this.postForm()
}return false
};
k.prototype.postForm=function(){var n=this.getMappedForm();
this._elements.$errorPanelWrap.addClass(this.classes.HIDE);
this._elements.$input.parent().removeClass(this.classes.ERROR);
this._elements.$select.parent().parent().removeClass(this.classes.ERROR);
this._elements.$checkbox.closest(".form-input-expand").parent().removeClass(this.classes.ERROR);
$(".error-message",this._elements.$form).remove();
this.disableForm();
this.disableSubmit();
this.hasVoucherCode=n["redemption-code"];
this.service.post(n,$.proxy(this.onPostSuccess,this),$.proxy(this.onPostFail,this))
};
k.prototype.onPostFail=function(n,p){a.fireCustomEvent(this.events.SERVER_VALIDATION_ERROR);
this.enableForm();
this.enableSubmit();
if(n.isVoucherError){var o='<div class="error-message">Invalid or expired voucher code entered</div>';
this._elements.$redemptionCode.parent().addClass("error");
this._elements.$redemptionCode.parent().prepend(o);
return
}if(!n||!p){return this.unknownError()
}this.showErrorFromPointOfFailure(n,p)
};
k.prototype.showErrorFromPointOfFailure=function(n,p){var o=[];
switch(p){case"mpp-manage-card-details":case"mpp-add-subscription":case"mpp-user-update":case"mpp-user-create":o=this.parseMPPErrors(n);
if(o){return this.handleErrors(o,p)
}return this.handleErrors([{message:n.ErrorMessage}],p);
case"gigya-account-create":case"gigya-account-update":o=this.parseGigyaErrors(n);
return this.handleErrors(o,p);
case"gigya-account-init":case"mpp-session-create":case"get-csg-activeSubscription":case"get-csg-RetrievePaymentInstrument":default:return this.unknownError(p)
}};
k.prototype.unknownError=function(n){return this.handleErrors([{message:"Unexpected error occurred."}],n)
};
k.prototype.parseMPPErrors=function(n){var p=n.ErrorMessage,o;
if(p){if(p.match("BillingPostcode had illegal characters.")){o=this.getInput("billing-postcode")
}else{if(p.match("BillingTownCity had illegal characters.")){o=this.getInput("billing-town")
}else{if(p.match("BillingStreet had illegal characters.")){o=this.getInput("billing-address-line-2")
}else{if(p.match("BillingHouseName had illegal characters.")){o=this.getInput("billing-address-line-1")
}else{if(p.match("FirstName had illegal characters.")){o=this.getInput("first-name")
}else{if(p.match("Surname had illegal characters.")){o=this.getInput("last-name")
}}}}}}if(o){return[{element:o,message:"Contains illegal characters.",showFieldName:true,code:n.ErrorNumber.toString()}]
}}if(n.ErrorNumber){switch(n.ErrorNumber.toString()){case"1018":return[{element:this.getInput("email"),message:"email already exists",showFieldName:true,code:n.ErrorNumber.toString()}]
}}return false
};
k.prototype.parseGigyaErrors=function(p){var n=0,o=[];
if(p.validationErrors){n=p.validationErrors.length;
while(n--){switch(p.validationErrors[n].fieldName){case"email":o.push({element:this.getInput("email"),message:p.validationErrors[n].message,showFieldName:true,code:p.validationErrors[n].errorCode});
break;
case"password":case"newPassword":o.push({element:this.getInput("password"),message:p.validationErrors[n].message,showFieldName:true,code:p.validationErrors[n].errorCode});
break
}}return o
}else{if(p.errorDetails){if(p.errorDetails.match("Invalid argument: Invalid email")){return[{element:this.getInput("email"),message:"Invalid email address.",code:p.errorCode}]
}else{if(p.errorDetails.match("'password' cannot be the same as 'newPassword'")){return[{element:this.getInput("password-confirm"),message:"Your new password cannot be the same as your previous password.",code:p.errorCode}]
}else{if(p.errorDetails.match("invalid loginID or password")){return[{element:this.getInput("password"),message:"Current password incorrect.",code:p.errorCode}]
}}}}}return[{message:"Invalid profile details entered."}]
};
k.prototype.handleErrors=function(x,o){var p=0,s=x.length,u={},y={},z="",t="",w="",r="";
var v=this.classes.ERROR;
var n="success-el";
var q=this.validation;
o=this.pointOfFailureToErrorCode(o);
while(p<s){u=x[p];
if(u.element){y=$(u.element);
r=['<div class="error-message">',u.message,"</div>"].join("");
if(e(y)){y=y.parent().parent()
}else{if(c(y)){y=y.closest(".form-input-expand").parent();
r=['<div class="error-message clearbottom">',u.message,"</div>"].join("")
}else{y=y.parent()
}}y.removeClass(n);
y.addClass(v);
$(".error-message",y).remove();
y.prepend(r)
}else{if(u.message){z+=["<li>",u.message,w,"</li>"].join("")
}}p++
}$.each(q,function(){var B=$("[name="+this.name+"]");
var A;
if(e(B)){A=B.parent().parent()
}else{if(c(B)){A=B.closest(".form-input-expand").parent()
}else{A=B.parent()
}}if(!A.hasClass(v)){A.addClass(n)
}});
if(typeof x[0].element!=="undefined"){$("html, body").animate({scrollTop:$(x[0].element).offset().top-30},"slow")
}else{this._elements.$errorPanelList.html(z);
this._elements.$errorPanelWrap.removeClass(this.classes.HIDE);
setTimeout($.proxy(function(){var A=this._elements.$errorPanel.offset().top-1;
if(d.size==d.sizes.NARROW){A-=$(".site-header .site-header-wrap").height()
}$("html, body").animate({scrollTop:A},"slow")
},this),0)
}};
k.prototype.pointOfFailureToErrorCode=function(p){var n=p.split("-"),o=0;
p="";
for(;
o<n.length;
o++){p+=n[o][0]
}return p
};
k.prototype.onPostSuccess=function(){var n=this._elements.$form.data("complete-url"),o=window.location.hash?window.location.hash.replace("#",""):"monthly",p=$(".site-header").attr("data-upsellPage")+"#"+o;
if(this.hasVoucherCode){p=p+"&"+this.hasVoucherCode
}a.fireCustomEvent(this.events.SUBMIT_SUCCESS);
if(this.hasVoucherCode){window.location=p
}else{this._elements.$holder.addClass("step-hide");
this._elements.$nextformholder.removeClass("step-hide")
}};
k.prototype.disableForm=function(){this._elements.$input.prop("disabled",true);
this._elements.$form.prop("disabled",true)
};
k.prototype.enableForm=function(){this._elements.$input.prop("disabled",false);
this._elements.$form.prop("disabled",false)
};
k.prototype.enableSubmit=function(){this._elements.$submit.removeClass("loading");
this._elements.$submit.prop("disabled",false)
};
k.prototype.disableSubmit=function(){this._elements.$submit.addClass("loading");
this._elements.$submit.prop("disabled",true)
};
k.prototype.onCheckboxChange=function(o){var n=$(o.target);
if(n.attr("id")==="form-input-reveal-password"){var q=this.getInput("password");
if(n.is(":checked")){q.attr("type","text")
}else{q.attr("type","password")
}}else{var p=n.closest(".form-input-expand").parent();
if(p.hasClass(this.classes.ERROR)){$(".error-message",p).remove();
p.removeClass(this.classes.ERROR)
}}};
k.prototype.onInputChange=function(o){var n=$(o.target);
if(e(n)){n=n.parent().parent()
}else{if(c(n)){n=n.closest(".form-input-expand").parent()
}else{n=n.parent()
}}n.removeClass(this.classes.ERROR);
$(".error-message",n).remove()
};
k.prototype.onSelectChange=function(n){var o=$(this),p=o.find(":selected");
if(p.val()==="default"){o.addClass("default-selected")
}else{o.removeClass("default-selected")
}};
k.prototype.getInput=function(n){return this._elements.$input.filter("[name="+n+"]")
};
k.prototype.checkCountry=function(n){var o=(n===this.classes.OTHER);
if(o){a.fireCustomEvent(this.events.INVALID_COUNTRY_SUBMIT)
}return !o
};
k.prototype.getMappedForm=function(){var o={isProfileData:true},n=this._elements.$form.serializeArray();
$.map(n,function(p){o[p.name]=p.value
});
return o
};
function e(n){return n.is("select")
}function c(n){return n.is(":checkbox")
}return k
})(FormValidator,fom.utils.resizeManager,fom.utils,fom.components.countryDropdown,fom.tracking,fom.modules.modals,fom.config,fom.modules.csg);
fom.components.userSubscribeStep2Form=(function(g,d,j,o,a,f,b,n,m,h){var k=function(){};
k.prototype.selectors={HOLDER:"undefined",FORM:".subscribe-fullaccess-form-step2",BILLING:".form-fieldset--billing",PAYMENT:".form-fieldset--payment",CENTERCONTENT:".center-content",INPUT:".form-input",TEXT:".form-input--text",SELECT:".form-input--select",CHECKBOX:".form-input--checkbox",SUBMIT:".form-input--submit",BILLING_LINE_1:"#form-input-billing-address-line-1",BILLING_LINE_2:"#form-input-billing-address-line-2",BILLING_TOWN:"#form-input-billing-town",BILLING_PROVINCE:"#form-input-billing-state",BILLING_COUNTRY:"#form-input-billing-country",MANDATORY_STATE_COUNTRIES:"#mandatory-state-country-list",BILLING_POSTCODE:"#form-input-billing-postcode",BILLING_PHONE:"#form-input-billing-phone",CARD_TYPE:"#form-input-card-type",CARD_NAME:"#form-input-card-name",CARD_NUMBER:"#form-input-card-no",CARD_CVV:"#form-input-cvv",EXPIRY_MONTH:"#form-input-expiry-month",EXPIRY_YEAR:"#form-input-expiry-year",RADIO_MONTH:"#form-input-sub-month",RADIO_YEAR:"#form-input-sub-year",REDEMPTION_CODE:"#redemption-code",STEP1_FORM:".subscribe-fullaccess-form-step1",PRICE_MONTH:".price-month",PRICE_YEAR:".price-year",SUB_CANCEL_WRAPPER:".sub-cancel-wrapper",SUB_CANCEL_BUTTON:".cancel-subscription",SUB_CANCEL_PENDING:".cancel-pending",SUB_MONTH_WRAPPER:".sub-month-wrapper",SUB_YEAR_WRAPPER:".sub-year-wrapper",ERROR_PANEL:".form-error-panel",ERROR_PANEL_LIST:".form-error-panel-list",INVALID_COUNTRY:".invalid-country"};
k.prototype.events={FORM_LOAD:"userSubscribeStep2FormLoad",INVALID_COUNTRY_SELECT:"userSubscribeStep2FormInvalidCountrySelect",INVALID_COUNTRY_SUBMIT:"userSubscribeStep2FormInvalidCountrySubmit",INVALID_STATE_SELECT:"userSubscribeStep2FormInvalidStateSelect",INVALID_STATE_SUBMIT:"userSubscribeStep2FormInvalidStateSubmit",INVALID_COUNTRY_CTA_CLICK:"userSubscribeStep2FormInvalidCountryCTAClick",CLIENT_VALIDATION_ERROR:"userSubscribeStep2FormClientValidationError",SERVER_VALIDATION_ERROR:"userSubscribeStep2FormServerValidationError",FORM_SUBMIT:"userSubscribeStep2FormSubmit",SUBMIT_SUCCESS:"userSubscribeStep2FormSubmitSuccess"};
k.prototype.validation=[{name:"billing-phone",display:"phone number",rules:"numeric|max_length[20]"},{name:"billing-address-line-1",display:"billing address (line 1)",rules:"required"},{name:"card-type",display:"credit card type",rules:"required|default[default]"},{name:"card-name",display:"credit card name",rules:"required"},{name:"card-no",display:"credit card number",rules:"required|valid_credit_card"},{name:"issue-number",display:"issue number",rules:"numeric|max_length[2]"},{name:"expiry-month",display:"expiry month",rules:"required|default[default]|callback_check_expiry"},{name:"expiry-year",display:"expiry year",rules:"required|default[default]|callback_check_expiry"}];
k.prototype.classes={HIDE:"hide",ERROR:"error",OTHER:"Other",INITIALISED:"initialised"};
k.prototype.init=function(){this.DEBUG=false;
if(!$.fn.detachOptions){$.fn.detachOptions=function(p){var q=this;
return q.each(function(){var r=q.data("selectOptions")||[];
q.find(p).each(function(){r.push($(this).detach())
});
q.data("selectOptions",r)
})
}
}if(!$.fn.attachOptions){$.fn.attachOptions=function(p){var q=this;
return q.each(function(){var s=q.data("selectOptions")||[];
var r=0;
for(r;
r<s.length;
r++){if(s[r].is(p)){q.append(s[r])
}}})
}
}if(!this.cacheElements()){return false
}if(!j.browserSupportsPremium()){window.fom.modules.modals.unsupportedBrowser(this.redirectUnsupportedBrowser);
return false
}this.validation=this.validation.concat(this.getExtraValidation());
return this
};
k.prototype.activate=function(){h.ready({onSuccess:$.proxy(function(){this.initPlaceholders();
this.initStyles();
this.initValidator();
this.initPrices();
this.attachListeners();
this.initSubscriptionType();
this.initVoucherDetails();
a.fireCustomEvent(this.events.FORM_LOAD);
if(this.DEBUG){this.initDebug()
}},this),onFail:$.proxy(function(){this.activate()
},this)})
};
k.prototype.redirectUnsupportedBrowser=function(){history.back()
};
k.prototype.initDebug=function(){};
k.prototype.getExtraValidation=function(){return[]
};
k.prototype.initPrices=function(p){o.onPriceInit($.proxy(this.onCountryChange,this))
};
k.prototype.cacheElements=function(){var s=$(this.selectors.HOLDER),p=s.find(this.selectors.FORM),r=s.find(this.selectors.BILLING),q=p.find(this.selectors.ERROR_PANEL);
if(!s.length){return false
}return this._elements={$holder:s,$form:p,$billing:r,$billingCenterContent:r.children(this.selectors.CENTERCONTENT),$input:p.find(this.selectors.INPUT),$text:p.find(this.selectors.TEXT),$select:p.find(this.selectors.SELECT),$checkbox:p.find(this.selectors.CHECKBOX),$radioMonth:p.find(this.selectors.RADIO_MONTH),$radioYear:p.find(this.selectors.RADIO_YEAR),$submit:p.find(this.selectors.SUBMIT),$cardNumber:p.find(this.selectors.CARD_NUMBER),$billingPhone:p.find(this.selectors.BILLING_PHONE),$billingProvince:p.find(this.selectors.BILLING_PROVINCE),$billingCountry:p.find(this.selectors.BILLING_COUNTRY),$mandatoryStateCountries:p.find(this.selectors.MANDATORY_STATE_COUNTRIES),$expiryMonth:p.find(this.selectors.EXPIRY_MONTH),$expiryYear:p.find(this.selectors.EXPIRY_YEAR),$redemptionCode:p.find(this.selectors.REDEMPTION_CODE),$step1Form:$(this.selectors.STEP1_FORM),$priceMonth:p.find(this.selectors.PRICE_MONTH),$priceYear:p.find(this.selectors.PRICE_YEAR),$subCancelWrapper:p.find(this.selectors.SUB_CANCEL_WRAPPER),$subCancelPending:p.find(this.selectors.SUB_CANCEL_PENDING),$subCancelButton:p.find(this.selectors.SUB_CANCEL_BUTTON),$subMonthWrapper:p.find(this.selectors.SUB_MONTH_WRAPPER),$subYearWrapper:p.find(this.selectors.SUB_YEAR_WRAPPER),$errorPanel:q,$errorPanelList:q.find(this.selectors.ERROR_PANEL_LIST),$errorPanelWrap:q.parent().parent(),$invalidCountry:p.find(this.selectors.INVALID_COUNTRY)}
};
k.prototype.initPlaceholders=function(){this._elements.$text.placeholder()
};
k.prototype.initStyles=function(){this._elements.$select.each($.proxy(function(p,q){this.onSelectChange.call(q)
},this));
this._elements.$form.addClass(this.classes.INITIALISED)
};
k.prototype.attachListeners=function(){this._elements.$form.on("input",$.proxy(this.onInputChange,this));
this._elements.$holder.on("click",this.selectors.INVALID_COUNTRY+" a",$.proxy(this.onInvalidCountryCTAClick,this));
this._elements.$checkbox.on("change",$.proxy(this.onCheckboxChange,this));
this._elements.$select.on("onchange change",this.onSelectChange);
this._elements.$expiryMonth.on("onchange change",$.proxy(this.onExpiryChange,this));
this._elements.$expiryYear.on("onchange change",$.proxy(this.onExpiryChange,this));
o.on("change",this.onCountryChange,this);
o.on("invalidCountry",this.onInvalidCountrySelect,this)
};
k.prototype.onInvalidCountryCTAClick=function(){a.fireCustomEvent(this.events.INVALID_COUNTRY_CTA_CLICK)
};
k.prototype.onInvalidCountrySelect=function(){a.fireCustomEvent(this.events.INVALID_COUNTRY_SELECT)
};
k.prototype.onCountryChange=function(q){this.updateCurrency(q.currency);
var r=-1,p=this._elements.$mandatoryStateCountries.val().split(",");
if($.inArray(this._elements.$billingCountry.val(),p)===-1){this._formValidator.RemoveField("billing-state");
this._elements.$billingProvince.parent().parent().removeClass(this.classes.ERROR);
$(".error-message",this._elements.$billingProvince.parent().parent()).remove()
}else{if($.inArray(this._elements.$billingCountry.val(),p)>-1){this._formValidator.AddField({name:"billing-state",display:"billing state/province",rules:"callback_state_required|callback_check_state"})
}}this.updateStateOptions(this._elements.$billingCountry.val())
};
k.prototype.updateStateOptions=function(s){var p=this._elements.$mandatoryStateCountries.val().split(","),q=$.inArray(s,p)>-1;
for(var r=0;
r<p.length;
r++){if(q){this._elements.$billingProvince.detachOptions("option");
this._elements.$billingProvince.attachOptions('option[data-country="'+p[r]+'"]');
this._elements.$billingProvince.attachOptions('option[value="default"]');
this._elements.$billingProvince.val("default")
}else{this._elements.$billingProvince.detachOptions("option");
this._elements.$billingProvince.attachOptions('option[value="Non-USA/Other"]');
this._elements.$billingProvince.val("Non-USA/Other")
}}};
k.prototype.initValidator=function(){this._formValidator=new g(this._elements.$form.first()[0],this.validation,$.proxy(this.onValidation,this),$.proxy(this.onBeforeValidation,this));
this._formValidator.registerCallback("check_dropdown",$.proxy(this.checkDropdown,this));
this._formValidator.registerCallback("check_expiry",$.proxy(this.checkExpiry,this));
this._formValidator.registerCallback("check_country",$.proxy(this.checkCountry,this));
this._formValidator.registerCallback("check_state",$.proxy(this.checkState,this));
this._formValidator.registerCallback("state_required",function(p){return(p!==null&&p!==""&&p!=="default")
}).setMessage("state_required","Please select your state from the list");
this._formValidator.registerCallback("country_required",function(p){return(p!==null&&p!==""&&p!=="default")
}).setMessage("country_required","Please select your country from the list")
};
k.prototype.initSubscriptionType=function(){var p=window.location.hash?window.location.hash.replace("#",""):"monthly";
if(p.indexOf("#r")>-1){p=p.substring(0,p.indexOf("#r"))
}if(p==="monthly"){this._elements.$radioMonth.prop("checked",true)
}else{if(p==="annually"){this._elements.$radioYear.prop("checked",true)
}}};
k.prototype.fetchVoucherDetails=function(p){var q=this.getMappedForm();
q["redemption-code"]=p;
this.service.getVoucherInfo(q,$.proxy(this.onVoucherDetailsFetched,this),$.proxy(this.onVoucherDetailsFailed,this))
};
k.prototype.onVoucherDetailsFetched=function(p){if(p&&p.LowStartOfferType){n.setDiscount(p.LowStartOfferType.PeriodPercentageDiscount,p.LowStartOfferType.ServiceIds)
}};
k.prototype.onVoucherDetailsFailed=function(p){};
k.prototype.initVoucherDetails=function(){var r=window.location.hash?window.location.hash.replace("#",""):"";
var p;
if(r.indexOf("#r")>-1&&r.indexOf("&")>-1){p=r.split("#r=");
var q=p.pop().split("&");
q.shift();
p.push(q.toString())
}else{p=r?r.split("&"):false
}if(p&&p.length&&p[0]){if(p[0]==="monthly"){this._elements.$radioMonth.prop("checked",true)
}else{if(p[0]==="annually"){this._elements.$radioYear.prop("checked",true)
}}}if(p&&p.length>1&&p[1]){this._elements.$redemptionCode.val(p[1]);
this.fetchVoucherDetails(p[1])
}};
k.prototype.onBeforeValidation=function(s){var r={},t=this,v,p,q=false,u=false;
if(this._elements.$cardNumber.length>0){q=true;
v=this._elements.$cardNumber.val()
}if(this._elements.$billingPhone.length>0){u=true;
p=this._elements.$billingPhone.val()
}a.fireCustomEvent(this.events.FORM_SUBMIT);
if(this._elements.$form.prop("disabled")){return false
}this._elements.$input.each(function(w,x){r=$(x);
r.val($.trim(r.val()))
});
if(q){if(v.substr(0,15)!=="XXXX-XXXX-XXXX-"){this._elements.$cardNumber.val(j.stripSpacesHyphensBrackets(v))
}}return true
};
k.prototype.onValidation=function(q,p){if(p&&p.preventDefault){p.preventDefault()
}else{if(event){event.returnValue=false
}}if(q.length>0){a.fireCustomEvent(this.events.CLIENT_VALIDATION_ERROR);
this.handleErrors(q,"client-validation")
}else{this.postForm()
}return false
};
k.prototype.postForm=function(){var p=this.getMappedForm();
this._elements.$input.parent().removeClass(this.classes.ERROR);
this._elements.$select.parent().parent().removeClass(this.classes.ERROR);
this._elements.$checkbox.closest(".form-input-expand").parent().removeClass(this.classes.ERROR);
$(".error-message",this._elements.$form).remove();
this.disableForm();
this.disableSubmit();
this.hasVoucherCode=p["redemption-code"];
this.service.post(p,$.proxy(this.onPostSuccess,this),$.proxy(this.onPostFail,this))
};
k.prototype.onPostFail=function(p,q){a.fireCustomEvent(this.events.SERVER_VALIDATION_ERROR);
this.enableForm();
this.enableSubmit();
if(!p||!q){return this.unknownError()
}this.showErrorFromPointOfFailure(p,q)
};
k.prototype.showErrorFromPointOfFailure=function(p,r){var q=[];
switch(r){case"mpp-manage-card-details":case"mpp-add-subscription":case"mpp-user-update":case"mpp-user-create":q=this.parseMPPErrors(p);
if(q){return this.handleErrors(q,r)
}return this.handleErrors([{message:p.ErrorMessage}],r);
case"gigya-account-create":case"gigya-account-update":q=this.parseGigyaErrors(p);
return this.handleErrors(q,r);
case"gigya-account-init":case"mpp-session-create":case"get-csg-activeSubscription":case"get-csg-RetrievePaymentInstrument":default:return this.unknownError(r)
}};
k.prototype.unknownError=function(p){return this.handleErrors([{message:"Unexpected error occurred."}],p)
};
k.prototype.parseMPPErrors=function(p){var u=p.Fault.Message,r,t,s,v,q;
if(u){v=u.split("Property=").pop().split(",").shift();
q=u.slice(u.indexOf("Constraint=")+("Constraint=").length);
if(v.match("ZipPostalCode")){r=this.getInput("billing-postcode")
}if(r){return[{element:r,message:q,showFieldName:true,code:p.Fault.Code}]
}}if(p.ErrorNumber){switch(p.ErrorNumber.toString()){case"1018":return[{element:this.getInput("email"),message:"email already exists",showFieldName:true,code:p.ErrorNumber.toString()}]
}}if(p.Fault){t=p.Fault.Code;
s=p.Fault.Subcode;
switch(t){case 606:return[{element:this.getInput("card-no"),message:"Issue with Card Number",showFieldName:true,code:t}];
case 1106:return[{element:this.getInput("billing-town"),message:"InvalidBillingAddress: there is mismatch between the session or home country and the payment instrument billing addresses based on system configuration",showFieldName:false,code:t}];
default:return[{element:this._elements.$billingCenterContent,message:"There has been an issue with your entry. Please correct the following:",showFieldName:false,code:t,errorType:"genericerror"}]
}}return false
};
k.prototype.parseGigyaErrors=function(r){var p=0,q=[];
if(r.validationErrors){p=r.validationErrors.length;
while(p--){switch(r.validationErrors[p].fieldName){case"email":q.push({element:this.getInput("email"),message:r.validationErrors[p].message,showFieldName:true,code:r.validationErrors[p].errorCode});
break;
case"password":case"newPassword":q.push({element:this.getInput("password"),message:r.validationErrors[p].message,showFieldName:true,code:r.validationErrors[p].errorCode});
break
}}return q
}else{if(r.errorDetails){if(r.errorDetails.match("Invalid argument: Invalid email")){return[{element:this.getInput("email"),message:"Invalid email address.",code:r.errorCode}]
}else{if(r.errorDetails.match("'password' cannot be the same as 'newPassword'")){return[{element:this.getInput("password-confirm"),message:"Your new password cannot be the same as your previous password.",code:r.errorCode}]
}else{if(r.errorDetails.match("invalid loginID or password")){return[{element:this.getInput("password"),message:"Current password incorrect.",code:r.errorCode}]
}}}}}return[{message:"Invalid profile details entered."}]
};
k.prototype.handleErrors=function(A,q){var r=0,v=A.length,x={},B={},C="",w="",z="",u="";
var y=this.classes.ERROR;
var p="success-el";
var s=this.validation;
var D=true;
var t=false;
q=this.pointOfFailureToErrorCode(q);
while(r<v){x=A[r];
t=false;
if(x.element&&x.errorType=="genericerror"){D=false;
if(!($(x.element).children(".error").length)){u=['<div class="error">',x.message,"</div>"].join("");
$(x.element).prepend(u)
}}else{if(x.element&&(x.errorType!=="genericerror")){B=$(x.element);
u=['<div class="error-message">',x.message,"</div>"].join("");
if(e(B)){t=B.attr("name")=="expiry-month"||B.attr("name")=="expiry-year";
B=B.parent().parent()
}else{if(c(B)){B=B.closest(".form-input-expand").parent();
u=['<div class="error-message clearbottom">',x.message,"</div>"].join("")
}else{B=B.parent()
}}B.removeClass(p);
B.addClass(y);
$(".error-message",B).remove();
if(t){B.append(u)
}else{B.prepend(u)
}if($(x.element).hasClass("hide-error-icon")){B.addClass("hide-error-icon")
}}else{if(x.message){C+=["<li>",x.message,z,"</li>"].join("")
}}}r++
}if(D){$.each(s,function(){var F=$("[name="+this.name+"]");
var E;
if(e(F)){E=F.parent().parent()
}else{if(c(F)){E=F.closest(".form-input-expand").parent()
}else{E=F.parent()
}}if(!E.hasClass(y)){E.addClass(p)
}})
}if(typeof A[0].element!=="undefined"){$("html, body").animate({scrollTop:$(A[0].element).offset().top-30},"slow")
}else{this._elements.$errorPanelList.html(C);
this._elements.$errorPanelWrap.removeClass(this.classes.HIDE);
setTimeout($.proxy(function(){var E=this._elements.$errorPanel.offset().top-1;
if(d.size==d.sizes.NARROW){E-=$(".site-header .site-header-wrap").height()
}$("html, body").animate({scrollTop:E},"slow")
},this),0)
}};
k.prototype.pointOfFailureToErrorCode=function(r){var p=r.split("-"),q=0;
r="";
for(;
q<p.length;
q++){r+=p[q][0]
}return r
};
k.prototype.onPostSuccess=function(){this.setOnPostSuccessRedirectURL();
var q=this._elements.$form.data("complete-url"),p=this._elements.$step1Form.data("voucher-complete-url");
a.fireCustomEvent(this.events.SUBMIT_SUCCESS);
this._elements.$input.val("");
this._elements.$select.val("default");
if(this.hasVoucherCode&&p){window.location=p
}else{window.location=q
}};
k.prototype.disableForm=function(){this._elements.$input.prop("disabled",true);
this._elements.$form.prop("disabled",true)
};
k.prototype.enableForm=function(){this._elements.$input.prop("disabled",false);
this._elements.$form.prop("disabled",false)
};
k.prototype.enableSubmit=function(){this._elements.$submit.removeClass("loading");
this._elements.$submit.prop("disabled",false)
};
k.prototype.disableSubmit=function(){this._elements.$submit.addClass("loading");
this._elements.$submit.prop("disabled",true)
};
k.prototype.onCheckboxChange=function(q){var p=$(q.target);
if(p.attr("id")==="form-input-reveal-password"){var s=this.getInput("password");
if(p.is(":checked")){s.attr("type","text")
}else{s.attr("type","password")
}}else{var r=p.closest(".form-input-expand").parent();
if(r.hasClass(this.classes.ERROR)){$(".error-message",r).remove();
r.removeClass(this.classes.ERROR)
}}};
k.prototype.onInputChange=function(q){var p=$(q.target);
if(e(p)){p=p.parent().parent()
}else{if(c(p)){p=p.closest(".form-input-expand").parent()
}else{p=p.parent()
}}p.removeClass(this.classes.ERROR);
$(".error-message",p).remove()
};
k.prototype.onSelectChange=function(p){var q=$(this),r=q.find(":selected");
if(r.val()==="default"){q.addClass("default-selected")
}else{q.removeClass("default-selected")
}};
k.prototype.onExpiryChange=function(p){this._elements.$expiryMonth.parent().removeClass(this.classes.ERROR);
this._elements.$expiryYear.parent().removeClass(this.classes.ERROR)
};
k.prototype.updateCurrency=function(q){var p=h.getPrice(q,"month"),s=h.getPrice(q,"year"),r=j.getCurrencySymbol(q);
this._elements.$priceMonth.text(p.string);
this._elements.$priceYear.text(s.string);
n.setPrice(q);
this._elements.$radioMonth.val(p.serviceId);
this._elements.$radioYear.val(s.serviceId)
};
k.prototype.getInput=function(p){return this._elements.$input.filter("[name="+p+"]")
};
k.prototype.checkCountry=function(p){var q=(p===this.classes.OTHER);
if(q){a.fireCustomEvent(this.events.INVALID_COUNTRY_SUBMIT)
}return !q
};
k.prototype.checkState=function(p){var q=(p==="Non-USA/Other");
if(q){a.fireCustomEvent(this.events.INVALID_STATE_SUBMIT)
}return !q
};
k.prototype.checkExpiry=function(){var p=new Date(),q=new Date().getTime(),s=Number(this._elements.$expiryMonth.val())-1,r=Number(this._elements.$expiryYear.find(":selected").text());
p.setMonth(s);
p.setFullYear(r);
p=p.getTime();
if(p<q){return false
}return true
};
k.prototype.getMappedForm=function(){var r={isBillingData:true,isExistingPremiumUser:m.isPremium},q=this._elements.$form.serializeArray(),p=JSON.parse($.cookie("account-info")),t=p?p.profile:{};
var s=$(this._elements.$billingCountry);
$.grep(q,function(v,u){if(v.name==="billing-country"){v.value=$("option:selected",s).data("iso3")
}});
r=$.extend({},r,t);
$.map(q,function(u){r[u.name]=u.value
});
return r
};
function e(p){return p.is("select")
}function c(p){return p.is(":checkbox")
}k.prototype.setOnPostSuccessRedirectURL=function(){var p=window.location.hash;
var q=p.indexOf("#r");
if(q>-1){var r="";
if(this.hasVoucherCode){r=p.substring(q+3,p.indexOf("&"));
r=r.replace("/content/fom-website","");
if(this._elements.$step1Form.data("voucher-complete-url")){this._elements.$step1Form.data("voucher-complete-url",r);
this._elements.$step1Form.attr("voucher-complete-url",r)
}}else{r=p.substring(q+3);
r=r.replace("/content/fom-website","")
}this._elements.$form.data("complete-url",r);
this._elements.$form.attr("data-complete-url",r)
}};
return k
})(FormValidator,fom.utils.resizeManager,fom.utils,fom.components.countryDropdown,fom.tracking,fom.modules.modals,fom.config,fom.modules.autosetprice,fom.modules.user,fom.modules.csg);
fom.components.registrationform||(fom.components.registrationform={});
fom.components.registrationform.service=(function(c,b,d,g,f,a){var e=function(){};
e.prototype.onFailHandler=function(){};
e.prototype.onSuccessHandler=function(){};
e.prototype.responseData={};
e.prototype.formValues={};
e.prototype.hasChangedProfileInfo=false;
e.prototype.hasChangedPaymentInfo=false;
e.prototype.hasChangedServicePriceId=false;
e.prototype.hasChangedEmail=false;
e.prototype.hasChangedPassword=false;
e.prototype.addedMPPSubscription=false;
e.prototype.createdGigyaProfile=false;
e.prototype.createdMPPSessionUnregisteredUser=false;
e.prototype.createdMPPSessionRegisteredUser=false;
e.prototype.createdMPPUser=false;
e.prototype.initialisedGigyaProfileCreate=false;
e.prototype.loggedUserIn=false;
e.prototype.reAuthedUser=false;
e.prototype.hasVoucherCode=false;
e.prototype.updatedPaymentInfo=false;
e.prototype.updatedProfileInfo=false;
e.prototype.updatedGigyaProfile=false;
e.prototype.appliedVoucherCode=false;
e.prototype.validatedVoucherCode=false;
e.prototype.updatedMPPProfile=false;
e.prototype.updatedCookieSubscriptionStatus=false;
e.prototype.isUpsellJourney=c.trim(c("#is-upsell-journey").val());
e.prototype.post=function(h,j,k){h=this.cleanFormData(h);
this.onFailHandler=k;
this.onSuccessHandler=j;
if(!this.responseData.gigya){this.responseData.gigya=c.extend({},g.accountInfo)
}this.hasChangedEmail=this.checkEmailChange(h);
this.hasChangedPassword=this.checkPasswordChange(h);
this.hasChangedPaymentInfo=this.checkPaymentInfoChange(h);
this.hasChangedProfileInfo=this.checkProfileChange(h);
this.hasChangedServicePriceId=this.checkServicePriceIdChange(h);
this.hasVoucherCode=this.checkVoucherCodeEntered(h);
this.updatedPaymentInfo=false;
this.updatedProfileInfo=false;
this.updatedMPPProfile=false;
this.updatedGigyaProfile=false;
this.appliedVoucherCode=false;
this.validatedVoucherCode=false;
this.validCSGSession=false;
if(h.isFreemium&&h.isFreemium=="true"){this.postFromPreviousStateFreemium(h)
}else{if(h.isProfileData){this.postProfileDetails(h)
}else{if(h.isBillingData){this.postBillingDetails(h)
}}}};
e.prototype.cleanFormData=function(j){var h=50;
if(typeof j["card-name"]!=="undefined"){j["card-name"]=a.cleanIllegalCharacters(j["card-name"]);
j["billing-address-line-1"]=a.cleanIllegalCharacters(j["billing-address-line-1"]).substr(0,h);
j["billing-address-line-2"]=a.cleanIllegalCharacters(j["billing-address-line-2"]).substr(0,h);
j["billing-town"]=a.cleanIllegalCharacters(j["billing-town"]).substr(0,h);
j["billing-country"]=a.cleanIllegalCharacters(j["billing-country"]).substr(0,h);
j["billing-postcode"]=a.cleanIllegalCharacters(j["billing-postcode"]).substr(0,h)
}return j
};
e.prototype.postFromPreviousStateFreemium=function(h){if(!this.createdGigyaProfile){return this.createGigyaProfile(h)
}if(!this.loggedUserIn){return this.logUserIn(h)
}else{if(!this.reAuthedUser){return this.reAuthUser(h)
}}if(this.hasVoucherCode&&!this.appliedVoucherCode){this.loggedUserIn=false;
this.reAuthedUser=false;
return this.applyVoucherCode(h)
}return this.onSuccessHandler()
};
e.prototype.postProfileDetails=function(h){if(h.isFreemium&&h.isFreemium=="true"){return this.postFromPreviousStateFreemium(h)
}if(!this.createdGigyaProfile){return this.createGigyaProfile(h)
}if(!this.loggedUserIn){return this.logUserIn(h)
}else{if(!this.reAuthedUser){return this.reAuthUser(h)
}}if(this.hasVoucherCode&&!this.validatedVoucherCode){return this.validateVoucherCode(h)
}return this.onSuccessHandler()
};
e.prototype.postBillingDetails=function(h){if(h.isFreemium&&h.isFreemium=="true"){return this.postFromPreviousStateFreemium(h)
}if(h.isProfileData){return this.postProfileDetails(h)
}if(!this.validCSGSession){return this.getCSGSession(h)
}if(this.hasChangedProfileInfo&&!this.updatedGigyaProfile){return this.updateGigyaProfile(h)
}if(!this.createdMPPSessionRegisteredUser){return this.createMPPSessionRegisteredUser(h)
}else{if(this.isUpsellJourney){return this.getCSGActiveSubscription(h)
}else{if(this.hasChangedPaymentInfo&&!this.updatedPaymentInfo){return this.manageMPPCardDetails(h)
}else{if(!this.addedMPPSubscription){this.reAuthedUser=false;
return this.addMPPSubscription(h)
}else{if(!this.updatedCookieSubscriptionStatus){return this.updateCookieSubscriptionStatus(h)
}}}}}if(!this.reAuthedUser){return this.reAuthUser(h)
}return this.onSuccessHandler()
};
e.prototype.postFromPreviousState=function(h){if(h.isFreemium&&h.isFreemium=="true"){return this.postProfileDetails(h)
}if(!this.createdGigyaProfile){return this.createGigyaProfile(h)
}if(!this.createdMPPSessionUnregisteredUser){return this.createMPPSessionUnregisteredUser(h)
}if(this.hasChangedProfileInfo&&!this.updatedGigyaProfile){return this.updateGigyaProfile(h)
}if(this.hasChangedPaymentInfo&&!this.updatedPaymentInfo){return this.manageMPPCardDetails(h)
}if(!this.loggedUserIn){return this.logUserIn(h)
}else{if(!this.createdMPPSessionRegisteredUser&&this.hasChangedServicePriceId){return this.createMPPSessionRegisteredUser(h)
}else{if(!this.addedMPPSubscription){return this.addMPPSubscription(h)
}else{if(!this.updatedCookieSubscriptionStatus){return this.updateCookieSubscriptionStatus(h)
}else{if(!this.reAuthedUser){return this.reAuthUser(h)
}}}}}return this.onSuccessHandler()
};
e.prototype.reAuthUser=function(h){var j=function(k){if(k.status===307||k.status===204){this.reAuthedUser=true
}else{return this.onFail(k,"aem-login-failure")
}return this.postBillingDetails(h)
};
f.authenticate(g.accountInfo,c.proxy(j,this))
};
e.prototype.getCSGSession=function(h){g.updateAccountInfo(c.proxy(function(){this.validCSGSession=true;
return this.postBillingDetails(h)
},this))
};
e.prototype.getCSGActiveSubscription=function(j){var h=function(m){this.responseData.mppActiveSubscription=m;
if(this.responseData.mppActiveSubscription.PaymentInstruments.length){this.getCSGRetrievePaymentInstrument(m,j)
}else{return this.manageMPPCardDetails(j)
}},k=function(m){return this.onFail(m,"get-csg-activeSubscription")
};
a.api({methodName:"/Subscriber/RetrieveWallet",onSuccess:c.proxy(h,this),onFail:c.proxy(k,this)})
};
e.prototype.getCSGRetrievePaymentInstrument=function(k,j){var n=function(p){this.responseData.transactionData=p;
this.isUpsellJourney=false;
a.setSessionItem("activeBillingAddressId",p.PaymentInstrument.BillingAddress.Id);
return this.updateCSGCardDetails(j)
},o=function(p){return this.onFail(p,"get-csg-RetrievePaymentInstrument")
},m=c.grep(k.PaymentInstruments,function(q,p){return q.Default==true
}),h={Id:m[0].Id};
a.setSessionItem("activePaymentInstrumentId",m[0].Id);
a.api({methodName:"/Subscriber/RetrievePaymentInstrument",requestData:h,onSuccess:c.proxy(n,this),onFail:c.proxy(o,this)})
};
e.prototype.updateCSGCardDetails=function(j){var k=a.getCreditCardType(j["card-type"])+"-"+j["card-no"].substr(j["card-no"].length-4);
var m=function(o){this.updateFormValues(["card-name","card-no","card-type","cvv","expiry-month","expiry-year","issue-number","billing-address-line-1","billing-address-line-2","billing-town","billing-country","billing-postcode"],j);
this.updatedMPPCardDetails=true;
this.hasChangedPaymentInfo=false;
this.addedMPPSubscription=false;
this.responseData.mppUserManageCreditDebitCard=o;
return this.postBillingDetails(j)
},n=function(o){return this.onFail(o,"mpp-manage-card-details")
},h={ApplyToSubscriptions:true,OverrideFraudValidation:false,PaymentInstrument:{BillingAddress:{City:j["billing-town"].replace(/,/g,""),Country:j["billing-country"].replace(/,/g,""),DefaultBilling:true,DefaultHome:true,DefaultPostal:true,DefaultService:true,DefaultShipping:true,DefaultWork:true,LineOne:j["billing-address-line-1"].replace(/,/g,""),LineTwo:j["billing-address-line-2"].replace(/,/g,""),PostalCode:j["billing-postcode"],State:j["billing-state"].replace(/,/g,""),Name:"default",Status:1,Id:a.getSessionItem("activeBillingAddressId")},Created:new Date().toJSON().toString(),Default:true,Name:k.toUpperCase()}};
h.PaymentInstrument.Type=0;
h.PaymentInstrument.Id=a.getSessionItem("activePaymentInstrumentId");
h.PaymentInstrument.CreditCard={AccountNumber:j["card-no"].toString().replace(/[.-\s]/g,""),Cvv:j.cvv,ExpirationMonth:j["expiry-month"],ExpirationYear:j["expiry-year"],NameOnCard:j["card-name"],Type:j["card-type"]};
g.updateCardDetails({data:h,fail:c.proxy(n,this),success:c.proxy(m,this)})
};
e.prototype.updateCookieSubscriptionStatus=function(j,h){var k=function(m){if(m&&m.data&&m.data.subscriptionStatus&&m.data.subscriptionStatus==="active"){this.updatedCookieSubscriptionStatus=true;
return this.postBillingDetails(j)
}else{return this.updateCookieSubscriptionStatus(j,h*2)
}};
h=h||500;
setTimeout(c.proxy(function(){g.updateAccountInfo(c.proxy(k,this))
},this),h)
};
e.prototype.addMPPSubscription=function(j){var m=j["service-price-id"].substr(0,j["service-price-id"].lastIndexOf("_"));
var k=function(o){this.addedMPPSubscription=true;
return this.postBillingDetails(j)
},n=function(o){return this.onFail(o,"mpp-add-subscription")
},h={ShoppingCart:{Items:[{ProductExternalReferenceType:"Product Reference",ProductExternalReference:m,PricingPlanExternalReferenceType:"Subscription",PricingPlanExternalReference:j["service-price-id"]}],Modified:new Date().toJSON().toString()}};
g.addSubscription({data:h,fail:c.proxy(n,this),success:c.proxy(k,this)})
};
e.prototype.createMPPSessionRegisteredUser=function(j){var k=function(n){this.createdMPPSessionRegisteredUser=true;
this.updateFormValues(["service-price-id"],j);
return this.postBillingDetails(j)
},m=function(n){n=n.responseJSON||n.responseText||n;
return this.onFail(n,"mpp-session-create")
},h={Email:j.email,ServicePriceId:j["service-price-id"],ClientUserId:this.responseData.gigya.UID,UIDSignature:this.responseData.gigya.UIDSignature,signatureTimestamp:this.responseData.gigya.signatureTimestamp};
a.createSession(a.CREATE_SESSION_EXISTING_USER_URL,{data:h,onSuccess:c.proxy(k,this),onFail:c.proxy(m,this)})
};
e.prototype.createMPPSessionForVoucher=function(j,n,k){var m=function(p){this.createdMPPSessionRegisteredUser=true;
return n(j)
},o=function(p){p=p.responseJSON||p.responseText||p;
return k(p,"mpp-session-create")
},h={Email:j.email,ServicePriceId:j["service-price-id"],ClientUserId:this.responseData.gigya.UID,UIDSignature:this.responseData.gigya.UIDSignature,signatureTimestamp:this.responseData.gigya.signatureTimestamp};
a.createSession(a.CREATE_SESSION_EXISTING_USER_URL,{data:h,onSuccess:c.proxy(m,this),onFail:c.proxy(o,this)})
};
e.prototype.manageMPPCardDetails=function(j){var k=a.getCreditCardType(j["card-type"])+"-"+j["card-no"].substr(j["card-no"].length-4);
var m=function(o){this.updateFormValues(["card-name","card-no","card-type","cvv","expiry-month","expiry-year","issue-number","billing-address-line-1","billing-address-line-2","billing-town","billing-country","billing-postcode"],j);
this.updatedPaymentInfo=true;
this.isUpsellJourney=false;
return this.postBillingDetails(j)
},n=function(o){return this.onFail(o,"mpp-manage-card-details")
},h={ApplyToSubscriptions:true,OverrideFraudValidation:false,PaymentInstrument:{BillingAddress:{City:j["billing-town"].replace(/,/g,""),Country:j["billing-country"].replace(/,/g,""),DefaultBilling:true,DefaultHome:true,DefaultPostal:true,DefaultService:true,DefaultShipping:true,DefaultWork:true,LineOne:j["billing-address-line-1"].replace(/,/g,""),LineTwo:j["billing-address-line-2"].replace(/,/g,""),PostalCode:j["billing-postcode"],State:j["billing-state"].replace(/,/g,""),Name:"default",Status:1},Created:new Date().toJSON().toString(),Default:true,Name:k.toUpperCase()}};
h.PaymentInstrument.Type=0;
h.PaymentInstrument.CreditCard={AccountNumber:j["card-no"].toString().replace(/[.-\s]/g,""),Cvv:j.cvv,ExpirationMonth:j["expiry-month"],ExpirationYear:j["expiry-year"],NameOnCard:j["card-name"],Type:j["card-type"]};
g.manageCardDetails({success:c.proxy(m,this),fail:c.proxy(n,this),data:h})
};
e.prototype.updateGigyaProfile=function(j){var k=function(n){if(n&&n.status==="success"){this.updateFormValues(["email","email-confirm","country","first-name","last-name","accept-contact-f1","accept-contact-third-party","mobile-phone"],j);
if(this.hasChangedPassword){this.updateFormValues(["password","password-confirm"],j)
}this.updatedGigyaProfile=true;
return this.postBillingDetails(j)
}else{return this.onFail(n,"gigya-account-update")
}},m=function(n){return this.onFail(n.responseJSON,"gigya-account-update")
},h={email:this.responseData.gigya.profile.email,country:this.responseData.gigya.profile.country,"first-name":this.responseData.gigya.profile.firstName,"last-name":this.responseData.gigya.profile.lastName,"accept-contact-f1":this.responseData.gigya.data.acceptContactF1,"accept-contact-third-party":this.responseData.gigya.data.acceptContactThirdParty,"accept-terms":this.responseData.gigya.data.acceptTerms,UID:this.responseData.gigya.UID,UIDSignature:this.responseData.gigya.UIDSignature,signatureTimestamp:this.responseData.gigya.signatureTimestamp,"mobile-phone":j["billing-phone"]};
if(this.hasChangedPassword){h.password=this.formValues.password;
h.newPassword=j.password
}g.setAccountInfoGigya({data:h,fail:c.proxy(m,this),success:c.proxy(k,this)})
};
e.prototype.updateMPPProfile=function(j){var k=function(n){this.updatedMPPProfile=true;
this.updateFormValues(["billing-phone"],j);
return this.postBillingDetails(j)
},m=function(n){return this.onFail(n,"mpp-user-update")
},h={Subscriber:{MobilePhone:j["billing-phone"],Language:a.getLanguageCode()}};
g.setAccountInfoMPP({data:h,fail:c.proxy(m,this),success:c.proxy(k,this)})
};
e.prototype.createMPPUser=function(j){var k=function(n){this.createdMPPUser=true;
this.updateFormValues(["billing-phone"],j);
return this.postFromPreviousState(j)
},m=function(n){return this.onFail(n.responseJSON,"mpp-user-create")
},h={UserCreateInfo:{ClientUserId:this.responseData.gigya.UID,EmailAddress:j.email,FirstName:a.cleanIllegalCharacters(j["first-name"]),MobilePhoneNumber:j["billing-phone"],Surname:a.cleanIllegalCharacters(j["last-name"]),Gender:"NotKnown",AccountTypeId:0}}
};
e.prototype.logUserIn=function(h){var j=function(m){this.loggedUserIn=true;
return this.postBillingDetails(h)
},k=function(m){return this.onFail(m.respnseJSON)
};
g.login(false,{password:h.password,email:h.email,setCookieExpiry:true,fail:c.proxy(k,this),success:c.proxy(j,this)})
};
e.prototype.applyVoucherCode=function(j){var k=function(n){this.appliedVoucherCode=true;
return this.postBillingDetails(j)
},m=function(n){if(!n.respnseJSON){n.respnseJSON={}
}n.respnseJSON.isVoucherError=true;
n.respnseJSON.voucherCode=j["redemption-code"];
return this.onFail(n.respnseJSON)
},h={voucher:j["redemption-code"]};
d.redeemVoucher2({data:h,success:c.proxy(k,this),fail:c.proxy(m,this)})
};
e.prototype.validateVoucherCode=function(j){var k=function(n){this.validatedVoucherCode=true;
return this.postBillingDetails(j)
},m=function(n){if(!n.respnseJSON){n.respnseJSON={}
}n.respnseJSON.isVoucherError=true;
n.respnseJSON.voucherCode=j["redemption-code"];
return this.onFail(n.respnseJSON)
},h={voucher:j["redemption-code"]};
d.redeemVoucher2({data:h,success:c.proxy(k,this),fail:c.proxy(m,this)})
};
e.prototype.getVoucherInfo=function(m,n,j){var k=function(p){return n(p)
},o=function(p){if(!p.respnseJSON){p.respnseJSON={}
}p.respnseJSON.isVoucherError=true;
p.respnseJSON.voucherCode=m["redemption-code"];
return j(p.respnseJSON)
},h={VoucherCode:m["redemption-code"]};
if(!this.createdMPPSessionRegisteredUser){if(!this.responseData.gigya){this.responseData.gigya=c.extend({},g.accountInfo)
}this.createMPPSessionForVoucher(m,c.proxy(function(){},this),c.proxy(o,this))
}else{}};
e.prototype.createMPPSessionUnregisteredUser=function(j){var k=function(n){this.createdMPPSessionUnregisteredUser=true;
return this.postBillingDetails(j)
},m=function(n){n=n.responseJSON||n.responseText||n;
return this.onFail(n,"mpp-session-create")
},h={Email:j.email,ClientUserId:this.responseData.gigya.UID,ServicePriceId:j["service-price-id"],UIDSignature:this.responseData.gigya.UIDSignature,signatureTimestamp:this.responseData.gigya.signatureTimestamp};
a.createSession(a.CREATE_SESSION_NEW_USER_URL,{data:h,onSuccess:c.proxy(k,this),onFail:c.proxy(m,this)})
};
e.prototype.createGigyaProfile=function(j){var k=function(n){if(n.status==="success"&&n.UID){this.responseData.gigya=n;
this.createdGigyaProfile=true;
this.updatedGigyaProfile=true;
this.updateFormValues(["email","email-confirm","country","first-name","last-name","password","password-confirm","accept-contact-f1","accept-contact-third-party","accept-terms","mobile-phone","participate-dod-draw","mt-vote"],j);
return this.postProfileDetails(j)
}return this.onFail(n,"gigya-account-create")
},m=function(n){return this.onFail(n.responseJSON,"gigya-account-create")
},h={regToken:this.responseData.regToken,email:j.email,password:j.password,country:j.country,"first-name":j["first-name"],"last-name":j["last-name"],"accept-contact-f1":!!j["accept-contact-f1"],"accept-contact-third-party":!!j["accept-contact-third-party"],"accept-terms":!!j["accept-terms"],"create-user":"true","mobile-phone":j["billing-phone"],"participate-dod-draw":j["vote-accept-terms"],"mt-vote":j["mt-vote"]};
d.createAccount({data:h,success:c.proxy(k,this),fail:c.proxy(m,this)})
};
e.prototype.initialiseGigyaProfileCreate=function(h){var j=function(m){if(m.status==="success"&&m.regToken){this.initialisedGigyaProfileCreate=true;
this.responseData.regToken=m.regToken;
return this.postProfileDetails(h)
}k(m)
},k=function(m){m=m.responseJSON||m.responseText||m;
this.onFail(m,"gigya-account-init")
};
d.initAccount({success:c.proxy(j,this),fail:c.proxy(k,this)})
};
e.prototype.updateFormValues=function(h,k){var j=h.length,m="";
while(j--){m=h[j];
this.formValues[m]=k[h[j]]
}};
e.prototype.fieldHasUpdated=function(h,j){return this.formValues[j]!==h[j]
};
e.prototype.checkServicePriceIdChange=function(h){return this.fieldHasUpdated(h,"service-price-id")
};
e.prototype.checkVoucherCodeEntered=function(h){return h["redemption-code"]
};
e.prototype.checkPaymentInfoChange=function(h){return(this.fieldHasUpdated(h,"card-no")||this.fieldHasUpdated(h,"card-name")||this.fieldHasUpdated(h,"cvv")||this.fieldHasUpdated(h,"issue-number")||this.fieldHasUpdated(h,"expiry-month")||this.fieldHasUpdated(h,"expiry-year")||this.fieldHasUpdated(h,"card-type")||this.fieldHasUpdated(h,"billing-address-line-1")||this.fieldHasUpdated(h,"billing-address-line-2")||this.fieldHasUpdated(h,"billing-town")||this.fieldHasUpdated(h,"billing-country")||this.fieldHasUpdated(h,"billing-postcode"))
};
e.prototype.checkPasswordChange=function(h){return(this.fieldHasUpdated(h,"password")||this.fieldHasUpdated(h,"password-confirm"))
};
e.prototype.checkEmailChange=function(h){return(this.fieldHasUpdated(h,"email")||this.fieldHasUpdated(h,"email-confirm"))
};
e.prototype.checkProfileChange=function(h){return(this.checkEmailChange(h)||this.checkPasswordChange(h)||this.fieldHasUpdated(h,"country")||this.fieldHasUpdated(h,"first-name")||this.fieldHasUpdated(h,"last-name")||this.fieldHasUpdated(h,"accept-terms")||this.fieldHasUpdated(h,"billing-phone")||this.fieldHasUpdated(h,"accept-contact-f1")||this.fieldHasUpdated(h,"accept-contact-third-party"))
};
e.prototype.onFail=function(h,j){if(h&&h.Fault&&typeof h.Fault.Message==="string"){h.validationErrors=[h.Fault.Message]
}this.onFailHandler(h,j)
};
return e
})(jQuery,fom.modules.mpp,fom.modules.gigya,fom.modules.user,fom.modules.authenticator,fom.modules.csg);
fom.components.registrationform.form=(function(a,d){var c=function(){},b=a.prototype;
c.prototype=new a();
c.prototype.selectors=$.extend(a.prototype.selectors,{HOLDER:".registration-form"});
c.prototype.events={FORM_LOAD:"registrationFormLoad",INVALID_COUNTRY_SELECT:"registrationFormInvalidCountrySelect",INVALID_COUNTRY_SUBMIT:"registrationFormInvalidCountrySubmit",INVALID_COUNTRY_CTA_CLICK:"registrationFormInvalidCountryCTAClick",CLIENT_VALIDATION_ERROR:"registrationFormClientValidationError",SERVER_VALIDATION_ERROR:"registrationFormServerValidationError",FORM_SUBMIT:"registrationFormSubmit",SUBMIT_SUCCESS:"registrationFormSubmitSuccess"};
c.prototype.getExtraValidation=function(){return[{name:"email",rules:"required|valid_email|min_length[3]|max_length[100]"},{name:"email-confirm",display:"email verification",rules:"required|matches[email]"},{name:"password",rules:"required|min_length[8]|max_length[30]"},{name:"password-confirm",display:"password verification",rules:"required|matches[password]"},{name:"card-no",display:"credit card number",rules:"required|valid_credit_card"},{name:"cvv",display:"CVV",rules:"required|numeric|exact_length[3]"},{name:"accept-terms",display:"terms and conditions agreement",rules:"callback_terms_required"}]
};
c.prototype.init=function(){if(!b.init.call(this)){return false
}this.service=new d();
this._elements.$subCancelWrapper.remove();
return this
};
return new c().init()
})(fom.components.userform,fom.components.registrationform.service);
fom.components.registrationform.subscribestep1form=(function(d,c){var b=function(){},a=d.prototype;
b.prototype=new d();
b.prototype.selectors=$.extend(d.prototype.selectors,{HOLDER:".subscribe-fullaccess-form-step1-holder"});
b.prototype.events={FORM_LOAD:"subscribeStep1FormLoad",INVALID_COUNTRY_SELECT:"subscribeStep1FormInvalidCountrySelect",INVALID_COUNTRY_SUBMIT:"subscribeStep1FormInvalidCountrySubmit",INVALID_COUNTRY_CTA_CLICK:"subscribeStep1FormInvalidCountryCTAClick",CLIENT_VALIDATION_ERROR:"subscribeStep1FormClientValidationError",SERVER_VALIDATION_ERROR:"subscribeStep1FormServerValidationError",FORM_SUBMIT:"subscribeStep1FormSubmit",SUBMIT_SUCCESS:"subscribeStep1FormSubmitSuccess"};
b.prototype.getExtraValidation=function(){return[{name:"email",rules:"required|valid_email|min_length[3]|max_length[100]"},{name:"email-confirm",display:"email verification",rules:"required|matches[email]"},{name:"password",rules:"required|min_length[8]|max_length[30]"},{name:"password-confirm",display:"password verification",rules:"required|matches[password]"},{name:"accept-terms",display:"terms and conditions agreement",rules:"callback_terms_required"}]
};
b.prototype.init=function(){if(!a.init.call(this)){return false
}this.service=new c();
return this
};
return new b().init()
})(fom.components.userSubscribeStep1Form,fom.components.registrationform.service);
fom.components.registrationform.subscribestep2form=(function(b,d){var a=function(){},c=b.prototype;
a.prototype=new b();
a.prototype.selectors=$.extend(b.prototype.selectors,{HOLDER:".subscribe-fullaccess-form-step2-holder"});
a.prototype.events={FORM_LOAD:"subscribeStep2FormLoad",INVALID_COUNTRY_SELECT:"subscribeStep2FormInvalidCountrySelect",INVALID_COUNTRY_SUBMIT:"subscribeStep2FormInvalidCountrySubmit",INVALID_STATE_SELECT:"userSubscribeStep2FormInvalidStateSelect",INVALID_STATE_SUBMIT:"userSubscribeStep2FormInvalidStateSubmit",INVALID_COUNTRY_CTA_CLICK:"subscribeStep2FormInvalidCountryCTAClick",CLIENT_VALIDATION_ERROR:"subscribeStep2FormClientValidationError",SERVER_VALIDATION_ERROR:"subscribeStep2FormServerValidationError",FORM_SUBMIT:"subscribeStep2FormSubmit",SUBMIT_SUCCESS:"subscribeStep2FormSubmitSuccess"};
a.prototype.getExtraValidation=function(){return[{name:"billing-country",display:"billing country",rules:"callback_country_required|callback_check_country"},{name:"card-no",display:"credit card number",rules:"required|valid_credit_card"},{name:"cvv",display:"CVV",rules:"required|numeric|exact_length[3]"},{name:"billing-town",display:"billing town/city",rules:"required|max_length[30]"},{name:"billing-state",display:"billing state/province",rules:"callback_state_required|callback_check_state"},{name:"billing-postcode",display:"billing post code",rules:"required|alphanumeric|max_length[7]"}]
};
a.prototype.init=function(){if(!c.init.call(this)){return false
}this.service=new d();
this._elements.$subCancelWrapper.remove();
return this
};
return new a().init()
})(fom.components.userSubscribeStep2Form,fom.components.registrationform.service);
fom.components.userAccountManagement=(function(j,d,k,f,a,h,b,m){var g=function(){};
g.prototype.selectors={HOLDER:".user-account",FORM:".user-form",PROFILE_PREVIEW:".profile-preview",BILLING_PREVIEW:".billing-preview",PAYMENT:".form-fieldset--payment",BILLING:".billing-info",TRANSACTIONS:".transactionlist",PREVIEW_NAME:".preview-name",PREVIEW_EMAIL:".preview-email",PREVIEW_EXPIRY:".preview-expiry",PREVIEW_RENEWAL_NOTE:".preview-renewal-note",PREVIEW_MEMBERSHIP:".preview-membership-number",PURCHASE_UPGRADE_LINK:".purchase-upgrade-link",INPUT:".form-input",TEXT:".form-input--text",SELECT:".form-input--select",CHECKBOX:".form-input--checkbox",SUBMIT:".btn-save",COUNTRY:"#form-input-country",FIRST_NAME:"#form-input-first-name",LAST_NAME:"#form-input-last-name",EMAIL:"#form-input-email",EMAIL_VERIFY:"#form-input-email-verify",PASSWORD:"#form-input-password",PASSWORD_VERIFY:"#form-input-password-new",BILLING_LINE_1:"#form-input-billing-address-line-1",PREVIEW_BILLING_LINE_1:"#preview-billing-address-line-1",BILLING_LINE_2:"#form-input-billing-address-line-2",PREVIEW_BILLING_LINE_2:"#preview-billing-address-line-2",BILLING_TOWN:"#form-input-billing-town",PREVIEW_BILLING_TOWN:"#preview-billing-town",BILLING_PROVINCE:"#form-input-billing-state",PREVIEW_BILLING_PROVINCE:"#preview-billing-province",BILLING_COUNTRY:"#form-input-billing-country",PREVIEW_BILLING_COUNTRY:"#preview-billing-country",BILLING_POSTCODE:"#form-input-billing-postcode",PREVIEW_BILLING_POSTCODE:"#preview-billing-postcode",BILLING_PHONE:"#form-input-billing-phone",PREVIEW_BILLING_PHONE:"#preview-billing-phone",CARD_TYPE:"#form-input-card-type",PREVIEW_CARD_TYPE:"#preview-card-type",CARD_NAME:"#form-input-card-name",PREVIEW_CARD_NAME:"#preview-card-name",CARD_NUMBER:"#form-input-card-no",PREVIEW_CARD_NUMBER:"#preview-card-no",CARD_CVV:"#form-input-cvv",EXPIRY_MONTH:"#form-input-expiry-month",PREVIEW_EXPIRY_MONTH:"#preview-expiry-month",EXPIRY_YEAR:"#form-input-expiry-year",PREVIEW_EXPIRY_YEAR:"#preview-expiry-year",RADIO_MONTH:"#form-input-sub-month",RADIO_YEAR:"#form-input-sub-year",MONTHLY_PRICE:".monthly .price",YEARLY_PRICE:".yearly .price",ACCEPT_CONTACT_THIRD_PARTY:"#form-input-accept-contact-third-party",ACCEPT_CONTACT_F1:"#form-input-accept-contact-f1",PRICE_MONTH:".price-month",PRICE_YEAR:".price-year",MANDATORY_STATE_COUNTRIES:"#mandatory-state-country-list",SUB_CANCEL_WRAPPER:".sub-cancel-wrapper",SUB_CANCEL_BUTTON:".cancel-subscription",SUB_CANCEL_PENDING:".cancel-pending",SUB_MONTH_WRAPPER:".sub-month-wrapper",SUB_YEAR_WRAPPER:".sub-year-wrapper",REDEEM_VOUCHER_LINK:"#redeemVoucherLink",REDEEM_VOUCHER_BUTTON:".redeem-code-button",VOUCHER_INPUT:"#form-input-redeem-code",REDEMPTION_INPUTS:".redemption-inputs",VOUCHER_TAB:".voucher.tab--content",ERROR:".error",ERROR_DIV:".server-error",ERROR_PANEL:".form-error-panel",ERROR_PANEL_LIST:".form-error-panel-list",INVALID_COUNTRY:".invalid-country",SUCCESS:".success"};
g.prototype.events={FORM_LOAD:"userFormLoad",INVALID_COUNTRY_SELECT:"userFormInvalidCountrySelect",INVALID_COUNTRY_SUBMIT:"userFormInvalidCountrySubmit",INVALID_STATE_SELECT:"userFormInvalidStateSelect",INVALID_STATE_SUBMIT:"userFormInvalidStateSubmit",INVALID_COUNTRY_CTA_CLICK:"userFormInvalidCountryCTAClick",CLIENT_VALIDATION_ERROR:"userFormClientValidationError",SERVER_VALIDATION_ERROR:"userFormServerValidationError",FORM_SUBMIT:"userFormSubmit",SUBMIT_SUCCESS:"userFormSubmitSuccess"};
g.prototype.validation=[{name:"first-name",display:"first name",rules:"required|min_length[2]|max_length[100]"},{name:"last-name",display:"last name",rules:"required|min_length[2]|max_length[100]"},{name:"redemption-code",display:"redemption code",rules:"min_length[2]|max_length[20]"}];
g.prototype.getBillingValidations=function(){return[{name:"billing-country",display:"billing country",rules:"callback_country_required|callback_check_country"},{name:"billing-phone",display:"phone number",rules:"numeric|max_length[20]"},{name:"billing-address-line-1",display:"billing address (line 1)",rules:"required"},{name:"billing-town",display:"billing town/city",rules:"required|max_length[30]"},{name:"billing-state",display:"billing state/province",rules:"callback_state_required|callback_check_state"},{name:"billing-postcode",display:"billing post code",rules:"required|alphanumeric|max_length[7]"},{name:"card-type",display:"credit card type",rules:"required|default[default]"},{name:"card-name",display:"credit card name",rules:"required"},{name:"issue-number",display:"issue number",rules:"numeric|max_length[2]"},{name:"expiry-month",display:"expiry month",rules:"required|default[default]|callback_check_expiry"},{name:"expiry-year",display:"expiry year",rules:"required|default[default]|callback_check_expiry"}]
};
g.prototype.classes={HIDE:"hide",ERROR:"error",SUCCESS:"success-el",OTHER:"Other",INITIALISED:"initialised"};
g.prototype.init=function(){this.DEBUG=false;
if(!$.fn.detachOptions){$.fn.detachOptions=function(n){var o=this;
return o.each(function(){var p=o.data("selectOptions")||[];
o.find(n).each(function(){p.push($(this).detach())
});
o.data("selectOptions",p)
})
}
}if(!$.fn.attachOptions){$.fn.attachOptions=function(n){var o=this;
return o.each(function(){var q=o.data("selectOptions")||[];
var p=0;
for(p;
p<q.length;
p++){if(q[p].is(n)){o.append(q[p])
}}})
}
}if(!this.cacheElements()){return false
}if(!k.browserSupportsPremium()){window.fom.modules.modals.unsupportedBrowser(this.redirectUnsupportedBrowser);
return false
}this._elements.$purchaseUpgradeLink.hide();
this.validation=this.validation.concat(this.getExtraValidation());
this.validation=this.validation.concat(this.getBillingValidations());
return this
};
g.prototype.activate=function(){m.ready({onSuccess:$.proxy(function(){this.initPlaceholders();
this.initStyles();
this.initValidator();
this.attachListeners();
this.initPrices();
a.fireCustomEvent(this.events.FORM_LOAD);
if(this.DEBUG){this.initDebug()
}},this),onFail:$.proxy(function(){this.activate()
},this)})
};
g.prototype.redirectUnsupportedBrowser=function(){history.back()
};
g.prototype.initDebug=function(){};
g.prototype.getExtraValidation=function(){return[]
};
g.prototype.cacheElements=function(){var r=$(this.selectors.HOLDER),o=r.find(this.selectors.FORM),q=r.find(this.selectors.BILLING_PREVIEW),n=r.find(this.selectors.ERROR_DIV),p=n.find(this.selectors.ERROR_PANEL);
if(!r.length){return false
}return this._elements={$holder:r,$form:o,$billingPreview:q,$previewName:o.find(this.selectors.PREVIEW_NAME),$previewEmail:o.find(this.selectors.PREVIEW_EMAIL),$previewExpiry:o.find(this.selectors.PREVIEW_EXPIRY),$previewRenewalNote:o.find(this.selectors.PREVIEW_RENEWAL_NOTE),$previewMembership:o.find(this.selectors.PREVIEW_MEMBERSHIP),$input:o.find(this.selectors.INPUT),$text:o.find(this.selectors.TEXT),$select:o.find(this.selectors.SELECT),$checkbox:o.find(this.selectors.CHECKBOX),$radioMonth:o.find(this.selectors.RADIO_MONTH),$radioYear:o.find(this.selectors.RADIO_YEAR),$monthlyPrice:o.find(this.selectors.MONTHLY_PRICE),$yearlyPrice:o.find(this.selectors.YEARLY_PRICE),$submit:o.find(this.selectors.SUBMIT),$country:o.find(this.selectors.COUNTRY),$cardNumber:o.find(this.selectors.CARD_NUMBER),$previewCardNumber:o.find(this.selectors.PREVIEW_CARD_NUMBER),$billingPhone:o.find(this.selectors.BILLING_PHONE),$expiryMonth:o.find(this.selectors.EXPIRY_MONTH),$expiryYear:o.find(this.selectors.EXPIRY_YEAR),$previewExpiryMonth:o.find(this.selectors.PREVIEW_EXPIRY_MONTH),$previewExpiryYear:o.find(this.selectors.PREVIEW_EXPIRY_YEAR),$password:o.find(this.selectors.PASSWORD),$passwordVerify:o.find(this.selectors.PASSWORD_VERIFY),$purchaseUpgradeLink:o.find(this.selectors.PURCHASE_UPGRADE_LINK),$priceMonth:o.find(this.selectors.PRICE_MONTH),$priceYear:o.find(this.selectors.PRICE_YEAR),$mandatoryStateCountries:o.find(this.selectors.MANDATORY_STATE_COUNTRIES),$subCancelWrapper:o.find(this.selectors.SUB_CANCEL_WRAPPER),$subCancelPending:o.find(this.selectors.SUB_CANCEL_PENDING),$subCancelButton:o.find(this.selectors.SUB_CANCEL_BUTTON),$subMonthWrapper:o.find(this.selectors.SUB_MONTH_WRAPPER),$subYearWrapper:o.find(this.selectors.SUB_YEAR_WRAPPER),$errors:r.find(this.selectors.ERROR),$successes:r.find(this.selectors.SUCCESS),$serverError:n,$errorPanel:p,$errorPanelList:p.find(this.selectors.ERROR_PANEL_LIST),$errorPanelWrap:p.parent().parent().parent(),$invalidCountry:o.find(this.selectors.INVALID_COUNTRY)}
};
g.prototype.initPlaceholders=function(){this._elements.$text.placeholder()
};
g.prototype.initStyles=function(){this._elements.$select.each($.proxy(function(n,o){this.onSelectChange.call(o)
},this));
this._elements.$form.addClass(this.classes.INITIALISED)
};
g.prototype.attachListeners=function(){this._elements.$form.on("input",$.proxy(this.onInputChange,this));
this._elements.$holder.on("click",this.selectors.INVALID_COUNTRY+" a",$.proxy(this.onInvalidCountryCTAClick,this));
this._elements.$checkbox.on("change",$.proxy(this.onCheckboxChange,this));
this._elements.$select.on("onchange change",this.onSelectChange);
this._elements.$expiryMonth.on("onchange change",$.proxy(this.onExpiryChange,this));
this._elements.$expiryYear.on("onchange change",$.proxy(this.onExpiryChange,this));
if(fom.components.countryDropdown){fom.components.countryDropdown.on("change",this.onCountryChange,this).on("invalidCountry",this.onInvalidCountrySelect,this)
}};
g.prototype.onInvalidCountryCTAClick=function(){a.fireCustomEvent(this.events.INVALID_COUNTRY_CTA_CLICK)
};
g.prototype.onInvalidCountrySelect=function(){a.fireCustomEvent(this.events.INVALID_COUNTRY_SELECT)
};
g.prototype.onCountryChange=function(n){this.updateCurrency(n.currency);
this.onCountryChangeUpdateValidations(n,true);
this.updateStateOptions(this._elements.$billingCountry.val(),true)
};
g.prototype.onCountryChangeUpdateValidations=function(o,q){var p=-1,n=this._elements.$mandatoryStateCountries.val().split(",");
if($.inArray(this._elements.$billingCountry.val(),n)===-1){this._formValidator.RemoveField("billing-state");
this._elements.$billingProvince.parent().parent().removeClass(this.classes.ERROR);
$(".error-message",this._elements.$billingProvince.parent().parent()).remove()
}else{if($.inArray(this._elements.$billingCountry.val(),n)>-1){this._formValidator.AddField({name:"billing-state",display:"billing state/province",rules:"callback_state_required|callback_check_state"})
}}if(!q){this.updateStateOptions(this._elements.$billingCountry.val(),false)
}};
g.prototype.updateStateOptions=function(q,r){var n=this._elements.$mandatoryStateCountries.val().split(","),o=$.inArray(q,n)>-1;
for(var p=0;
p<n.length;
p++){if(o){this._elements.$billingProvince.attachOptions("option");
if(!r){this._elements.$billingProvince.val("default")
}}else{this._elements.$billingProvince.detachOptions("option");
this._elements.$billingProvince.attachOptions('option[value="Non-USA/Other"]');
this._elements.$billingProvince.val("Non-USA/Other")
}}};
g.prototype.initValidator=function(){this._formValidator=new j(this._elements.$form.first()[0],this.validation,$.proxy(this.onValidation,this),$.proxy(this.onBeforeValidation,this));
this._formValidator.registerCallback("check_dropdown",$.proxy(this.checkDropdown,this));
this._formValidator.registerCallback("check_expiry",$.proxy(this.checkExpiry,this));
this._formValidator.registerCallback("check_country",$.proxy(this.checkCountry,this));
this._formValidator.registerCallback("check_state",$.proxy(this.checkState,this));
this._formValidator.registerCallback("country_required",function(n){return(n!==null&&n!==""&&n!=="default")
}).setMessage("country_required","Please select your country from the list");
this._formValidator.registerCallback("state_required",function(n){return(n!==null&&n!==""&&n!=="default")
}).setMessage("state_required","Please select your state from the list");
this._formValidator.registerCallback("terms_required",function(){return $("#form-input-accept-terms").is(":checked")
}).setMessage("terms_required","You need to accept the Terms & Conditions before proceeding")
};
g.prototype.onBeforeValidation=function(q){var p={},r=this,t,n,o=false,s=false;
if(this._elements.$cardNumber.length>0){o=true;
t=this._elements.$cardNumber.val()
}if(this._elements.$billingPhone.length>0){s=true;
n=this._elements.$billingPhone.val()
}a.fireCustomEvent(this.events.FORM_SUBMIT);
if(this._elements.$form.prop("disabled")){return false
}this._elements.$input.each(function(u,v){p=$(v);
p.val($.trim(p.val()))
});
if(o){if(t.substr(0,15)!=="XXXX-XXXX-XXXX-"){this._elements.$cardNumber.val(k.stripSpacesHyphensBrackets(t));
this._elements.$previewCardNumber.val(k.stripSpacesHyphensBrackets(t))
}}return true
};
g.prototype.onValidation=function(o,n){if(n&&n.preventDefault){n.preventDefault()
}else{if(event){event.returnValue=false
}}if(o.length>0){a.fireCustomEvent(this.events.CLIENT_VALIDATION_ERROR);
this.handleErrors(o,"client-validation")
}else{this.postForm()
}return false
};
g.prototype.postForm=function(){var n=this.getMappedForm();
this._elements.$errorPanelWrap.addClass(this.classes.HIDE);
this._elements.$errors.addClass(this.classes.HIDE);
this._elements.$successes.addClass(this.classes.HIDE);
this._elements.$input.parent().removeClass(this.classes.ERROR);
this._elements.$select.parent().parent().removeClass(this.classes.ERROR);
this._elements.$checkbox.closest(".form-input-expand").parent().removeClass(this.classes.ERROR);
$(".error-message",this._elements.$form).remove();
this.disableForm();
this.disableSubmit();
this.service.post(n,$.proxy(this.onPostSuccess,this),$.proxy(this.onPostFail,this))
};
g.prototype.onPostFail=function(n,o){a.fireCustomEvent(this.events.SERVER_VALIDATION_ERROR);
this.enableForm();
this.enableSubmit();
if(!n||!o){return this.unknownError()
}this.showErrorFromPointOfFailure(n,o)
};
g.prototype.showErrorFromPointOfFailure=function(n,p){var o=[];
switch(p){case"mpp-manage-card-details":case"mpp-add-subscription":case"mpp-user-update":case"mpp-user-create":o=this.parseMPPErrors(n);
if(o){return this.handleErrors(o,p)
}return this.handleErrors([{message:n.Fault.Message}],p);
case"gigya-account-create":case"gigya-account-update":case"gigya-voucher-redemption":o=this.parseGigyaErrors(n);
return this.handleErrors(o,p);
case"gigya-account-init":case"mpp-session-create":case"csg-session-failed":case"get-csg-activeSubscription":case"get-csg-RetrievePaymentInstrument":default:return this.unknownError(p)
}};
g.prototype.unknownError=function(n){return this.handleErrors([{message:"Unexpected error occurred."}],n)
};
g.prototype.parseMPPErrors=function(n){var s=n.Fault.Message,p,r,q,t,o;
if(s){t=s.split("Property=").pop().split(",").shift();
o=s.slice(s.indexOf("Constraint=")+("Constraint=").length);
if(t.match("ZipPostalCode")){p=this.getInput("billing-postcode")
}if(p){return[{element:p,message:o,showFieldName:true,code:n.Fault.Code}]
}}if(n.ErrorNumber){switch(n.ErrorNumber.toString()){case"1018":return[{element:this.getInput("email"),message:"email already exists",showFieldName:true,code:n.ErrorNumber.toString()}]
}}if(n.Fault){r=n.Fault.Code;
q=n.Fault.Subcode;
switch(r){case 606:return[{element:this.getInput("card-no"),message:"Issue with Card Number",showFieldName:true,code:r}];
case 1106:return[{element:this.getInput("billing-town"),message:"InvalidBillingAddress: there is mismatch between the session or home country and the payment instrument billing addresses based on system configuration",showFieldName:false,code:r}];
default:return[{element:this._elements.$billingPreview,message:"There has been an issue with your entry. Please correct the following:",showFieldName:false,code:r,errorType:"genericerror"}]
}}return false
};
g.prototype.parseGigyaErrors=function(p){var n=0,o=[];
if(p.validationErrors){n=p.validationErrors.length;
while(n--){switch(p.validationErrors[n].fieldName){case"email":o.push({element:this.getInput("email"),message:p.validationErrors[n].message,showFieldName:true,code:p.validationErrors[n].errorCode});
break;
case"password":case"newPassword":o.push({element:this.getInput("password"),message:p.validationErrors[n].message,showFieldName:true,code:p.validationErrors[n].errorCode});
break
}}return o
}else{if(p.errorDetails){if(p.errorDetails.match("Invalid argument: Invalid email")){return[{element:this.getInput("email"),message:"Invalid email address.",code:p.errorCode}]
}else{if(p.errorDetails.match("'password' cannot be the same as 'newPassword'")){return[{element:this.getInput("password-confirm"),message:"Your new password cannot be the same as your previous password.",code:p.errorCode}]
}else{if(p.errorDetails.match("invalid loginID or password")){return[{element:this.getInput("password"),message:"Current password incorrect.",code:p.errorCode}]
}}}}}return[{message:"Invalid profile details entered."}]
};
g.prototype.handleErrors=function(o,n){n=this.pointOfFailureToErrorCode(n);
if($("main").hasClass("account-details-registered")){this.newErrorMessageView(o,n)
}else{this.oldErrorMessageView(o,n)
}};
g.prototype.oldErrorMessageView=function(t,n){var o=0,p=t.length,r={},u={},v="",q="",s="";
n=this.pointOfFailureToErrorCode(n);
while(o<3){r=t[o];
s=['<span class="error-code">[Reference: ',n.toUpperCase(),(r.code||""),"]</span>"].join("");
if(r.element){u=$(r.element);
if(r.showFieldName){q=u.data("title");
if(r.message){q=[q,r.message].join(" - ")
}}else{q=r.message||""
}v+="<li>"+q+s+"</li>";
if(e(u)){u=u.parent()
}u.addClass(this.classes.ERROR)
}else{if(r.message){v+=["<li>",r.message,s,"</li>"].join("")
}}o++
}this._elements.$errorPanelList.html(v);
this._elements.$errorPanelWrap.removeClass(this.classes.HIDE);
this._elements.$serverError.removeClass(this.classes.HIDE);
setTimeout($.proxy(function(){var w=this._elements.$errorPanel.offset().top-1;
if(d.size==d.sizes.NARROW){w-=$(".site-header .site-header-wrap").height()
}$("html, body").animate({scrollTop:w},"slow")
},this),0)
};
g.prototype.newErrorMessageView=function(y,o){var p=0,t=y.length,v={},z={},A="",u="",x="",s="";
var w=this.classes.ERROR;
var n="success-el";
var q=this.validation;
var B=true;
var r=false;
while(p<3){v=y[p];
r=false;
if(v&&v.element&&v.errorType=="genericerror"){B=false;
if(!($(v.element).children(".error").length)){s=['<div class="error generic-error">',v.message,"</div>"].join("");
$(s).insertBefore(v.element)
}}else{if(v&&v.element&&(v.errorType!=="genericerror")){z=$(v.element);
s=['<div class="error-message">',v.message,"</div>"].join("");
if(e(z)){r=z.attr("name")=="expiry-month"||z.attr("name")=="expiry-year";
z=z.parent().parent()
}else{if(c(z)){z=z.closest(".form-input-expand").parent();
s=['<div class="error-message clearbottom">',v.message,"</div>"].join("")
}else{z=z.parent();
r=z.parents(".change-password").length
}}z.removeClass(n);
z.addClass(w);
$(".error-message",z).remove();
if(r){z.append(s)
}else{z.prepend(s)
}}else{if(v&&v.message){A+=["<li>",v.message,x,"</li>"].join("")
}}}p++
}if(B){$.each(q,function(){var D=$("[name="+this.name+"]");
var C;
if(e(D)){C=D.parent().parent()
}else{if(c(D)){C=D.closest(".form-input-expand").parent()
}else{C=D.parent()
}}if(!C.hasClass(w)){C.addClass(n)
}})
}if(typeof y[0].element!=="undefined"){$("html, body").animate({scrollTop:$(y[0].element).offset().top-30},"slow")
}else{this._elements.$errorPanelList.html(A);
this._elements.$errorPanelWrap.removeClass(this.classes.HIDE);
this._elements.$serverError.removeClass(this.classes.HIDE);
setTimeout($.proxy(function(){var C=this._elements.$errorPanel.offset().top-1;
if(d.size==d.sizes.NARROW){C-=$(".site-header .site-header-wrap").height()
}$("html, body").animate({scrollTop:C},"slow")
},this),0)
}};
g.prototype.pointOfFailureToErrorCode=function(p){var n=p.split("-"),o=0;
p="";
for(;
o<n.length;
o++){p+=n[o][0]
}return p
};
g.prototype.onPostSuccess=function(){var n=this._elements.$form.data("complete-url");
a.fireCustomEvent(this.events.SUBMIT_SUCCESS);
this._elements.$input.val("");
this._elements.$select.val("default");
window.location=n
};
g.prototype.disableForm=function(){this._elements.$input.prop("disabled",true);
this._elements.$form.prop("disabled",true)
};
g.prototype.enableForm=function(){this._elements.$input.prop("disabled",false);
this._elements.$form.prop("disabled",false)
};
g.prototype.enableSubmit=function(){this._elements.$submit.removeClass("loading");
this._elements.$submit.prop("disabled",false)
};
g.prototype.disableSubmit=function(){this._elements.$submit.addClass("loading");
this._elements.$submit.prop("disabled",true)
};
g.prototype.onCheckboxChange=function(o){var n=$(o.target);
if(n.attr("id")==="form-input-reveal-password"){var q=this.getInput("password");
if(n.is(":checked")){q.attr("type","text")
}else{q.attr("type","password")
}}else{var p=n.closest(".form-input-expand").parent();
if(p.hasClass(this.classes.ERROR)){$(".error-message",p).remove();
p.removeClass(this.classes.ERROR)
}}};
g.prototype.onInputChange=function(o){var n=$(o.target);
if(e(n)){n=n.parent().parent()
}else{if(c(n)){n=n.closest(".form-input-expand").parent()
}else{n=n.parent()
}}n.removeClass(this.classes.ERROR);
$(".error-message",n).remove()
};
g.prototype.onSelectChange=function(n){var o=$(this),p=o.find(":selected");
if(p.val()==="default"){o.addClass("default-selected")
}else{o.removeClass("default-selected")
}};
g.prototype.onExpiryChange=function(n){this._elements.$expiryMonth.parent().removeClass(this.classes.ERROR);
this._elements.$expiryYear.parent().removeClass(this.classes.ERROR)
};
g.prototype.updateCurrency=function(o){var n=m.getPrice(o,"month"),q=m.getPrice(o,"year"),p=k.getCurrencySymbol(o);
this._elements.$priceMonth.text(n.string);
this._elements.$priceYear.text(q.string);
this._elements.$monthlyPrice.text(n.string),this._elements.$yearlyPrice.text(q.string),this._elements.$radioMonth.val(n.serviceId);
this._elements.$radioYear.val(q.serviceId)
};
g.prototype.getInput=function(n){return this._elements.$input.filter("[name="+n+"]")
};
g.prototype.checkCountry=function(n){var o=(n===this.classes.OTHER);
if(o){a.fireCustomEvent(this.events.INVALID_COUNTRY_SUBMIT)
}return !o
};
g.prototype.checkState=function(p){var n=this._elements.$mandatoryStateCountries.val().split(","),o=$.inArray(this._elements.$billingCountry.val(),n)>-1,q=(p==="Non-USA/Other"&&o);
if(q){a.fireCustomEvent(this.events.INVALID_STATE_SUBMIT)
}return !q
};
g.prototype.checkExpiry=function(){var n=new Date(),o=new Date().getTime(),q=Number(this._elements.$expiryMonth.val())-1,p=Number(this._elements.$expiryYear.find(":selected").text());
n.setMonth(q);
n.setFullYear(p);
n=n.getTime();
if(n<o){return false
}return true
};
g.prototype.getMappedForm=function(){var o={},n=this._elements.$form.serializeArray();
var p=$(this._elements.$billingCountry);
$.grep(n,function(r,q){if(r.name==="billing-country"){r.value=$("option:selected",p).data("iso3")
}});
o.email=this._elements.$previewEmail.first().text();
$.map(n,function(q){o[q.name]=q.value
});
return o
};
function e(n){return n.is("select")
}function c(n){return n.is(":checkbox")
}g.prototype.activateBillingValidations=function(){var n=this.getBillingValidations();
for(var o=0;
o<n.length;
o++){this._formValidator.AddField(n[o])
}this.setEditingCardDetails(true);
this.setCardInfoChange(true)
};
g.prototype.deactivateBillingValidations=function(){var n=this.getBillingValidations();
for(var o=0;
o<n.length;
o++){this._formValidator.RemoveField(n[o].name)
}this.setEditingCardDetails(false);
this.setCardInfoChange(false)
};
return g
})(FormValidator,fom.utils.resizeManager,fom.utils,fom.modules.mpp,fom.tracking,fom.modules.modals,fom.config,fom.modules.csg);
fom.components.accountmanagement||(fom.components.accountmanagement={});
fom.components.accountmanagement.service=(function(c,b,d,g,f,a){var e=function(){};
e.prototype.onFailHandler=function(){};
e.prototype.onSuccessHandler=function(){};
e.prototype.responseData={};
e.prototype.formValues={};
e.prototype.hasChangedProfileInfo=false;
e.prototype.hasChangedCardInfo=false;
e.prototype.hasChangedSubscriptionType=false;
e.prototype.hasChangedPassword=false;
e.prototype.hasChangedEmail=false;
e.prototype.hasChangedCVV=false;
e.prototype.hasActiveSubscription=true;
e.prototype.updatedGigyaProfile=false;
e.prototype.updatedMPPCardDetails=false;
e.prototype.userHadNoMPPAccount=false;
e.prototype.updatedMPPProfile=false;
e.prototype.createdMPPSession=false;
e.prototype.createdMPPUser=true;
e.prototype.createdMPPSubscriptionSession=false;
e.prototype.addedMPPSubscription=false;
e.prototype.updatedCookieSubscriptionStatus=false;
e.prototype.previousEmail="";
e.prototype.post=function(h,j,k){this.onFailHandler=k;
this.onSuccessHandler=j;
this.hasChangedProfileInfo=this.checkProfileChange(h);
this.hasChangedCardInfo=this.checkCardInfoChange(h);
this.hasChangedSubscriptionType=this.checkSubscriptionTypeChange(h);
this.hasChangedPassword=this.checkPasswordChange(h);
this.hasChangedEmail=this.checkEmailChange(h);
this.hasChangedCVV=this.checkCVVChange(h);
this.hasChangedPhone=this.checkPhoneChange(h);
this.updatedGigyaProfile=false;
this.updatedMPPProfile=false;
this.createdMPPSession=false;
this.createdMPPSubscriptionSession=false;
this.updatedMPPCardDetails=false;
this.addedMPPSubscription=false;
this.updatedCookieSubscriptionStatus=false;
this.previousEmail=this.formValues.email;
if(h.isFreemium&&h.isFreemium=="true"){this.postFromPreviousStateFreemium(h)
}else{this.postFromPreviousState(h)
}};
e.prototype.postFromPreviousStateFreemium=function(h){if(this.hasChangedProfileInfo){if(!this.updatedGigyaProfile){return this.updateGigyaAccount(h)
}}return this.onSuccessHandler()
};
e.prototype.postFromPreviousState=function(h){if(h.isFreemium&&h.isFreemium=="true"){return this.postFromPreviousStateFreemium(h)
}if(this.hasChangedProfileInfo&&!this.updatedGigyaProfile){return this.updateGigyaAccount(h)
}else{if(this.hasChangedCardInfo&&!this.updatedMPPCardDetails){return this.updateMPPCardDetails(h)
}else{if(!this.updatedCookieSubscriptionStatus){return this.updateCookieSubscriptionStatus(h)
}}}return this.onSuccessHandler()
};
e.prototype.createUnregisteredUserMPPSession=function(j){var k=function(n){this.createdMPPSession=true;
this.updateFormValues(["service-price-id"],j);
return this.postFromPreviousState(j)
},m=function(n){n=n.responseJSON||n.responseText||n;
return this.onFail(n,"mpp-session-create")
},h={Email:j.email,ServicePriceId:j["service-price-id"],ClientUserId:fom.modules.user.accountInfo.UID,UIDSignature:fom.modules.user.accountInfo.UIDSignature,signatureTimestamp:fom.modules.user.accountInfo.signatureTimestamp};
a.createSession(a.CREATE_SESSION_NEW_USER_URL,{data:h,onSuccess:c.proxy(k,this),onFail:c.proxy(m,this)})
};
e.prototype.createMPPUser=function(j){var k=function(n){this.createdMPPUser=true;
this.updateFormValues(["billing-phone"],j);
this.userHadNoMPPAccount=true;
return this.postFromPreviousState(j)
},m=function(n){return this.onFail(n.responseJSON,"mpp-user-create")
},h={UserCreateInfo:{ClientUserId:fom.modules.user.accountInfo.UID,EmailAddress:j.email,FirstName:b.cleanIllegalCharacters(j["first-name"]),MobilePhoneNumber:j["billing-phone"],Surname:b.cleanIllegalCharacters(j["last-name"]),Gender:"NotKnown",AccountTypeId:0}};
b.api({methodName:"UserCreate",onSuccess:c.proxy(k,this),onFail:c.proxy(m,this),requestData:h})
};
e.prototype.applyVoucherCode=function(j,o,k){var h={voucher:j["redemption-code"]},m=function(p){if(p&&p.paymentDetailsRequired){p["redemption-code"]=j["redemption-code"];
o(p)
}else{g.updateAccountInfo(c.proxy(function(){if(!this.reAuthedUser){return this.reAuthUser(o,k)
}},this))
}},n=function(p){if(!p.respnseJSON){p.respnseJSON={}
}p.respnseJSON.isVoucherError=true;
p.respnseJSON.voucherCode=j["redemption-code"];
return k(p.respnseJSON)
};
this.reAuthedUser=false;
d.redeemVoucher2({data:h,success:c.proxy(m,this),fail:c.proxy(n,this)})
};
e.prototype.reAuthUser=function(k,h){var j=function(m){if(m.status===307||m.status===204){this.reAuthedUser=true;
return k()
}else{return h(m,"aem-login-failure")
}};
f.authenticate(g.accountInfo,c.proxy(j,this))
};
e.prototype.createMPPSession=function(h){var j=function(m){this.createdMPPSession=true;
return this.postFromPreviousState(h)
},k=function(m){m=m.responseJSON||m.responseText||m;
return this.onFail(m,"mpp-session-create")
};
a.createSession(a.CREATE_SESSION_EXISTING_USER_URL,{data:{ClientUserId:g.accountInfo.UID,UIDSignature:g.accountInfo.UIDSignature,signatureTimestamp:g.accountInfo.signatureTimestamp},onSuccess:c.proxy(j,this),onFail:c.proxy(k,this)})
};
e.prototype.createMPPSubscriptionSession=function(j){var k=function(n){return this.postFromPreviousState(j)
},m=function(n){n=n.responseJSON||n.responseText||n;
return this.onFail(n,"mpp-session-create")
},h={Email:j.email,ServicePriceId:j["service-price-id"],ClientUserId:g.accountInfo.UID,UIDSignature:g.accountInfo.UIDSignature,signatureTimestamp:g.accountInfo.signatureTimestamp};
this.createdMPPSubscriptionSession=true;
a.createSession(a.CREATE_SESSION_NEW_USER_URL,{data:h,onSuccess:c.proxy(k,this),onFail:c.proxy(m,this)})
};
e.prototype.updateMPPCardDetails=function(j){var k=a.getCreditCardType(j["card-type"])+"-"+j["card-no"].substr(j["card-no"].length-4);
var m=function(o){this.updateFormValues(["card-name","card-no","card-type","cvv","expiry-month","expiry-year","issue-number","billing-address-line-1","billing-address-line-2","billing-town","billing-country","billing-postcode"],j);
this.updatedMPPCardDetails=true;
this.responseData.mppUserManageCreditDebitCard=o;
return this.postFromPreviousState(j)
},n=function(o){return this.onFail(o,"mpp-manage-card-details")
},h={ApplyToSubscriptions:true,OverrideFraudValidation:false,PaymentInstrument:{BillingAddress:{City:j["billing-town"].replace(/,/g,""),Country:j["billing-country"].replace(/,/g,""),DefaultBilling:true,DefaultHome:true,DefaultPostal:true,DefaultService:true,DefaultShipping:true,DefaultWork:true,LineOne:j["billing-address-line-1"].replace(/,/g,""),LineTwo:j["billing-address-line-2"].replace(/,/g,""),PostalCode:j["billing-postcode"],State:j["billing-state"].replace(/,/g,""),Name:"default",Status:1,Id:a.getSessionItem("activeBillingAddressId")},Created:new Date().toJSON().toString(),Default:true,Name:k.toUpperCase()}};
h.PaymentInstrument.Type=0;
h.PaymentInstrument.Id=a.getSessionItem("activePaymentInstrumentId");
h.PaymentInstrument.CreditCard={AccountNumber:j["card-no"].toString().replace(/[.-\s]/g,""),Cvv:j.cvv,ExpirationMonth:j["expiry-month"],ExpirationYear:j["expiry-year"],NameOnCard:j["card-name"],Type:j["card-type"]};
g.updateCardDetails({data:h,fail:c.proxy(n,this),success:c.proxy(m,this)})
};
e.prototype.updateMPPProfile=function(j){var k=function(n){this.updatedMPPProfile=true;
this.updateFormValues(["billing-phone"],j);
return this.postFromPreviousState(j)
},m=function(n){return this.onFail(n,"mpp-user-update")
},h={Subscriber:{MobilePhone:j["billing-phone"],Language:a.getLanguageCode()}};
g.setAccountInfoMPP({data:h,fail:c.proxy(m,this),success:c.proxy(k,this)})
};
e.prototype.updateCookieSubscriptionStatus=function(j,h){this.updatedCookieSubscriptionStatus=true;
return this.postFromPreviousState(j)
};
e.prototype.addMPPSubscription=function(j){var k=function(n){return this.postFromPreviousState(j)
},m=function(n){n=n.responseJSON||n.responseText||n;
return this.onFail(n,"mpp-add-subscription")
},h={AddSubscriptionInfo:{ActivationCode:"",Cv2Number:j.cvv,MD:"",PaRes:"",RenewalDayOffset:"0",ServicePriceId:j["service-price-id"],TermUrl:""}};
this.addedMPPSubscription=true;
g.addSubscription({data:h,fail:c.proxy(m,this),success:c.proxy(k,this)})
};
e.prototype.updateMPPAccount=function(j){var k=function(n){this.updateFormValues(["billing-phone"],j);
if(this.hasChangedEmail){this.updateFormValues(["email","email-confirm"],j)
}return this.postFromPreviousState(j)
},m=function(n){return this.onFail(n,"mpp-user-update")
},h={UserAmendInfo:{MobilePhoneNumber:j["billing-phone"],FirstName:j["first-name"],Surname:j["last-name"]}};
if(this.hasChangedEmail&&!this.userHadNoMPPAccount){h.UserAmendInfo["EmailAddress"]=this.previousEmail;
h.UserAmendInfo["NewEmailAddress"]=j.email
}this.updatedMPPProfile=true;
if(this.checkMPPRequiresUpdate(j)){g.setAccountInfoMPP({data:h,fail:c.proxy(m,this),success:c.proxy(k,this)})
}else{k.call(this)
}};
e.prototype.updateGigyaAccount=function(j){var k=function(n){if(n&&n.status==="success"){this.updateFormValues(["email","country","first-name","last-name","accept-contact-f1","accept-contact-third-party","mobile-phone"],j);
if(this.hasChangedPassword){this.updateFormValues(["password","password-confirm"],j)
}this.updateUserCookie();
return this.postFromPreviousState(j)
}else{return this.onFail(n,"gigya-account-update")
}},m=function(n){return this.onFail(n.responseJSON,"gigya-account-update")
},h={email:j.email,country:j.country,"first-name":j["first-name"],"last-name":j["last-name"],"accept-contact-f1":!!j["accept-contact-f1"],"accept-contact-third-party":!!j["accept-contact-third-party"],"accept-terms":true,UID:g.accountInfo.UID,UIDSignature:g.accountInfo.UIDSignature,signatureTimestamp:g.accountInfo.signatureTimestamp,"mobile-phone":j["billing-phone"]};
if(this.hasChangedPassword){h.password=j.password;
h.newPassword=j["password-confirm"]
}this.updatedGigyaProfile=true;
localStorage.setItem("userSubscriptionStatus",g.accountInfo.data.subscriptionStatus);
g.setAccountInfoGigya({data:h,fail:c.proxy(m,this),success:c.proxy(k,this)})
};
e.prototype.setFormValues=function(h){this.formValues=c.extend({},h)
};
e.prototype.updateUserCookie=function(){var h=g.accountInfo;
h.profile.firstName=this.formValues["first-name"];
h.profile.lastName=this.formValues["last-name"];
h.profile.email=this.formValues.email;
h.profile.country=this.formValues.country;
h.data.acceptContactF1=!!this.formValues["accept-contact-f1"];
h.data.acceptContactThirdParty=!!this.formValues["accept-contact-third-party"];
g.setAccountInfoCookie(h)
};
e.prototype.updateFormValues=function(h,k){var j=h.length,m="";
while(j--){m=h[j];
this.formValues[m]=k[h[j]]
}};
e.prototype.fieldHasUpdated=function(h,j){return this.formValues[j]!==h[j]
};
e.prototype.checkSubscriptionTypeChange=function(h){return this.fieldHasUpdated(h,"service-price-id")||!this.hasActiveSubscription
};
e.prototype.checkCardInfoChange=function(h){var j=this.fieldHasUpdated(h,"card-no")+this.fieldHasUpdated(h,"card-name")+this.fieldHasUpdated(h,"cvv")+this.fieldHasUpdated(h,"issue-number")+this.fieldHasUpdated(h,"expiry-month")+this.fieldHasUpdated(h,"expiry-year")+this.fieldHasUpdated(h,"card-type")+this.fieldHasUpdated(h,"billing-address-line-1")+this.fieldHasUpdated(h,"billing-address-line-2")+this.fieldHasUpdated(h,"billing-town")+this.fieldHasUpdated(h,"billing-state")+this.fieldHasUpdated(h,"billing-country")+this.fieldHasUpdated(h,"billing-postcode");
if((j===1&&this.fieldHasUpdated(h,"cvv"))||!this.editingCardDetails){return false
}return !!j
};
e.prototype.checkMPPRequiresUpdate=function(h){return(this.fieldHasUpdated(h,"first-name")||this.fieldHasUpdated(h,"last-name")||this.fieldHasUpdated(h,"billing-phone")||this.hasChangedEmail)
};
e.prototype.checkCVVChange=function(h){return this.fieldHasUpdated(h,"cvv")
};
e.prototype.checkPasswordChange=function(h){return(this.fieldHasUpdated(h,"password")||this.fieldHasUpdated(h,"password-confirm"))
};
e.prototype.checkEmailChange=function(h){return(this.fieldHasUpdated(h,"email")||this.fieldHasUpdated(h,"email-confirm"))
};
e.prototype.checkProfileChange=function(h){return(this.checkEmailChange(h)||this.checkPasswordChange(h)||this.fieldHasUpdated(h,"country")||this.fieldHasUpdated(h,"first-name")||this.fieldHasUpdated(h,"last-name")||this.fieldHasUpdated(h,"billing-phone")||this.fieldHasUpdated(h,"accept-contact-f1")||this.fieldHasUpdated(h,"accept-contact-third-party"))
};
e.prototype.checkPhoneChange=function(h){return this.fieldHasUpdated(h,"billing-phone")
};
e.prototype.getServiceInfoAll=function(j){var h=function(k){j.onSuccess(k)
};
b.getServiceInfoAll({onSuccess:c.proxy(h,this),onFail:j.onFail})
};
e.prototype.setUserHasActiveSubscription=function(h){if(!this.createdMPPUser||!h.responseData.mppActiveSubscription){this.hasActiveSubscription=false
}else{this.hasActiveSubscription=h.responseData.mppActiveSubscription.PaymentInstruments[0].Default==="active"
}};
e.prototype.onFail=function(h,j){if(h&&h.validationErrors&&typeof h.validationErrors==="string"){h.validationErrors=c.parseJSON(h.validationErrors)
}this.onFailHandler(h,j)
};
return e
})(jQuery,fom.modules.mpp,fom.modules.gigya,fom.modules.user,fom.modules.authenticator,fom.modules.csg);
fom.components.accountmanagement||(fom.components.accountmanagement={});
fom.components.accountmanagement.appsubscriberservice=(function(a,b,e,d){var c=function(){};
c.prototype.onFailHandler=function(){};
c.prototype.onSuccessHandler=function(){};
c.prototype.formValues={};
c.prototype.hasChangedProfileInfo=false;
c.prototype.hasChangedPassword=false;
c.prototype.hasChangedEmail=false;
c.prototype.updatedGigyaProfile=false;
c.prototype.previousEmail="";
c.prototype.post=function(f,g,h){this.onFailHandler=h;
this.onSuccessHandler=g;
this.hasChangedProfileInfo=this.checkProfileChange(f);
this.hasChangedPassword=this.checkPasswordChange(f);
this.hasChangedEmail=this.checkEmailChange(f);
this.updatedGigyaProfile=false;
this.previousEmail=this.formValues.email;
this.postFromPreviousState(f)
};
c.prototype.postFromPreviousState=function(f){if(!this.updatedGigyaProfile){return this.updateGigyaAccount(f)
}return this.onSuccessHandler()
};
c.prototype.updateGigyaAccount=function(g){var h=function(k){if(k&&k.status==="success"){this.updateFormValues(["email","country","first-name","last-name","accept-contact-f1","accept-contact-third-party"],g);
if(this.hasChangedPassword){this.updateFormValues(["password","password-confirm"],g)
}this.updateUserCookie();
return this.postFromPreviousState(g)
}else{return this.onFail(k,"gigya-account-update")
}},j=function(k){return this.onFail(k.responseJSON,"gigya-account-update")
},f={email:g.email,country:g.country,"first-name":g["first-name"],"last-name":g["last-name"],"accept-contact-f1":!!g["accept-contact-f1"],"accept-contact-third-party":!!g["accept-contact-third-party"],"accept-terms":true,UID:e.accountInfo.UID,UIDSignature:e.accountInfo.UIDSignature,signatureTimestamp:e.accountInfo.signatureTimestamp};
if(this.hasChangedPassword){f.password=g.password;
f.newPassword=g["password-confirm"]
}this.updatedGigyaProfile=true;
e.setAccountInfoGigya({data:f,fail:a.proxy(j,this),success:a.proxy(h,this)})
};
c.prototype.setFormValues=function(f){this.formValues=a.extend({},f)
};
c.prototype.updateUserCookie=function(){var f=e.accountInfo;
f.profile.firstName=this.formValues["first-name"];
f.profile.lastName=this.formValues["last-name"];
f.profile.email=this.formValues.email;
f.profile.country=this.formValues.country;
f.data.acceptContactF1=!!this.formValues["accept-contact-f1"];
f.data.acceptContactThirdParty=!!this.formValues["accept-contact-third-party"];
e.setAccountInfoCookie(f)
};
c.prototype.updateFormValues=function(f,h){var g=f.length,j="";
while(g--){j=f[g];
this.formValues[j]=h[f[g]]
}};
c.prototype.fieldHasUpdated=function(f,g){return this.formValues[g]!==f[g]
};
c.prototype.checkPasswordChange=function(f){return(this.fieldHasUpdated(f,"password")||this.fieldHasUpdated(f,"password-confirm"))
};
c.prototype.checkEmailChange=function(f){return(this.fieldHasUpdated(f,"email")||this.fieldHasUpdated(f,"email-confirm"))
};
c.prototype.checkProfileChange=function(f){return(this.checkEmailChange(f)||this.checkPasswordChange(f)||this.fieldHasUpdated(f,"country")||this.fieldHasUpdated(f,"first-name")||this.fieldHasUpdated(f,"last-name")||this.fieldHasUpdated(f,"billing-phone")||this.fieldHasUpdated(f,"accept-contact-f1")||this.fieldHasUpdated(f,"accept-contact-third-party"))
};
c.prototype.onFail=function(f,g){if(f&&f.validationErrors&&typeof f.validationErrors==="string"){f.validationErrors=a.parseJSON(f.validationErrors)
}this.onFailHandler(f,g)
};
return c
})(jQuery,fom.modules.gigya,fom.modules.user,fom.modules.authenticator);
fom.components.accountmanagement.retrievedataservice=(function(d,c,b,f,a){var e=d.extend({MPP_SESSION_FAIL:"mppSessionFail",ACCOUNT_INFO_LOADED:"accountInfoLoaded",ACCOUNT_INFO_FAILED:"accountInfoFailed",TRANSACTIONS_LOADED:"transactionsLoaded",TRANSACTIONS_FAILED:"transactionsFailed",responseData:{},init:function(){this.createMPPSession()
},createMPPSession:function(){var g=function(j){this.responseData.mppSession=j;
this.responseData.mppAccountInfo=f.accountInfo;
if(f.accountInfo.data.subscriptionStatus==="active"){this.getMPPActiveSubscription()
}else{this.trigger(this.ACCOUNT_INFO_LOADED,[j])
}},h=function(j){return this.onFail(j.responseJSON,"mpp-session-create")
};
a.createSession(a.CREATE_SESSION_EXISTING_USER_URL,{data:{ClientUserId:f.accountInfo.UID,UIDSignature:f.accountInfo.UIDSignature,signatureTimestamp:f.accountInfo.signatureTimestamp},onSuccess:d.proxy(g,this),onFail:d.proxy(h,this)})
},getMPPAccountInfo:function(){var g=function(j){this.responseData.mppAccountInfo=j;
if(j.Subscriber.HasActiveSubscriptions){this.getMPPActiveSubscription()
}else{this.trigger(this.ACCOUNT_INFO_LOADED,[j])
}},h=function(j){this.trigger(this.ACCOUNT_INFO_FAILED,[j.responseJSON])
};
a.api({methodName:"/Subscriber/RetrieveSubscriber",onSuccess:d.proxy(g,this),onFail:d.proxy(h,this)})
},getSearchSubscription:function(){var g=function(j){this.responseData.mppSearchSubscription=j;
this.trigger(this.ACCOUNT_INFO_LOADED,[j])
},h=function(j){return this.onFail(j,"csg-session-failed")
};
a.api({methodName:"/Subscriber/SearchSubscriptions",onSuccess:d.proxy(g,this),onFail:d.proxy(h,this)})
},getMPPActiveSubscription:function(){var g=function(j){if(j.PaymentInstruments.length>0){this.responseData.mppActiveSubscription=j;
this.getRetrievePaymentInstrument(j)
}else{this.responseData.paymentInstruments=false;
this.trigger(this.ACCOUNT_INFO_FAILED,[j])
}},h=function(j){this.trigger(this.ACCOUNT_INFO_FAILED,[j]);
return this.onFail(j,"csg-session-failed")
};
a.api({methodName:"/Subscriber/RetrieveWallet",onSuccess:d.proxy(g,this),onFail:d.proxy(h,this)})
},getRetrievePaymentInstrument:function(h){var k=function(n){this.responseData.transactionData=n;
a.setSessionItem("activeBillingAddressId",n.PaymentInstrument.BillingAddress.Id);
this.getSearchSubscription()
},m=function(n){this.responseData.transactionData=false;
if(n&&n.responseJSON){this.trigger(this.TRANSACTIONS_FAILED,[n.responseJSON])
}},j=d.grep(h.PaymentInstruments,function(o,n){return o.Default==true
}),g={Id:j[0].Id};
a.setSessionItem("activePaymentInstrumentId",j[0].Id);
a.api({methodName:"/Subscriber/RetrievePaymentInstrument",requestData:g,onSuccess:d.proxy(k,this),onFail:d.proxy(m,this)})
},getMPPTransactionInfo:function(){var h=function(k){this.responseData.transactionData=k;
this.trigger(this.TRANSACTIONS_LOADED,[k])
},j=function(k){this.responseData.transactionData=false;
if(k&&k.responseJSON){this.trigger(this.TRANSACTIONS_FAILED,[k.responseJSON])
}},g={UserOrderHistoryDetails:{FromDate:"/Date(0+0000)/",ToDate:"/Date("+new Date().getTime()+"+0000)/",SortAscending:false,NumOrdersInPage:100,PageNum:1}};
b.api({methodName:"UserOrderHistory",requestData:g,onSuccess:d.proxy(h,this),onFail:d.proxy(j,this)})
},onFail:function(g,h){this.trigger(this.MPP_SESSION_FAIL,[g])
}},c);
return e
})(jQuery,fom.utils.eventDispatcher.object,fom.modules.mpp,fom.modules.user,fom.modules.csg);
fom.components.accountmanagement.form=(function(f,m,b,k,p,o,a,j,e,h,g){var c=function(){},n=f.prototype;
c.prototype=new f();
c.prototype.selectors=$.extend(f.prototype.selectors,{HOLDER:".user-account",LOADER:".user-form-loader",CONTENT:".user-form-content",TRANSACTION_LIST_TABLE:".transaction-list-table",TRANSACTION_LIST_BODY_EXPANDED:".mobile-hide .transaction-list-body",TRANSACTION_LIST_BODY_COLLAPSED:".mobile-view .transaction-list-body",TRANSACTION_LIST_EMPTY:".transaction-list-empty",APP_SUBSCRIBER_MESSAGE:".app-subscriber-message",CANCEL_FORM:".cancel-button",UPDATE_BUTTON:".update-button"});
c.prototype.events={FORM_LOAD:"accountManagementFormLoad",INVALID_COUNTRY_SELECT:"accountManagementFormInvalidCountrySelect",INVALID_COUNTRY_SUBMIT:"accountManagementFormInvalidCountrySubmit",INVALID_COUNTRY_CTA_CLICK:"accountManagementFormInvalidCountryCTAClick",CLIENT_VALIDATION_ERROR:"accountManagementFormClientValidationError",SERVER_VALIDATION_ERROR:"accountManagementFormServerValidationError",FORM_SUBMIT:"accountManagementFormSubmit",SUBMIT_SUCCESS:"accountManagementFormSubmitSuccess",CANCEL_SUBSCRIPTION_CLICK:"accountManagementCancelSubscriptionClick",CANCEL_SUBSCRIPTION_CONFIRM:"accountManagementCancelSubscriptionConfirm"};
c.prototype.getExtraValidation=function(){return[{name:"email",rules:"required|valid_email|min_length[3]|max_length[100]",depends:$.proxy(this.checkEmailChange,this)},{name:"email-confirm",display:"email verification",rules:"required|matches[email]",depends:$.proxy(this.checkEmailChange,this)},{name:"password",display:"current password",rules:"required|min_length[8]|max_length[50]",depends:$.proxy(this.checkPasswordChange,this)},{name:"password-confirm",display:"new password",rules:"required|min_length[8]|max_length[50]",depends:$.proxy(this.checkPasswordChange,this)},{name:"card-no",display:"credit card number",rules:"required|valid_credit_card",depends:$.proxy(this.checkCardInfoChange,this)},{name:"cvv",display:"CVV",rules:"required|numeric|exact_length[3]",depends:$.proxy(this.checkCardInfoOrCVVChange,this)}]
};
c.prototype.appSubscriberValidation=function(){return[{name:"email",rules:"required|valid_email|min_length[3]|max_length[100]",depends:$.proxy(this.checkEmailChange,this)},{name:"email-confirm",display:"email verification",rules:"required|matches[email]",depends:$.proxy(this.checkEmailChange,this)},{name:"password",display:"current password",rules:"required|min_length[8]|max_length[50]",depends:$.proxy(this.checkPasswordChange,this)},{name:"password-confirm",display:"new password",rules:"required|min_length[8]|max_length[50]",depends:$.proxy(this.checkPasswordChange,this)},{name:"first-name",display:"first name",rules:"required|min_length[2]|max_length[100]"},{name:"last-name",display:"last name",rules:"required|min_length[2]|max_length[100]"}]
};
c.prototype.init=function(){if(!n.init.call(this)||(!k.isLoggedIn&&!j.isEditMode)){return false
}if(j.isEditMode){this.initTransactionView();
this.initFormView();
return
}g.ready({onSuccess:$.proxy(this.retrieveUserData,this),onFail:function(){}});
this._elements.$purchaseUpgradeLink.hide();
this._elements.$updateBtn.prop("disabled","true");
return this
};
c.prototype.retrieveUserData=function(){k.updateAccountInfo($.proxy(function(){k.setUserProperties();
if(k.subscriptionSource==="app"){this.service=new b()
}else{this.service=new m()
}if(k.subscriptionSource==="web"||!k.subscriptionSource){p.on("accountInfoLoaded",this.initFormView,this).on("accountInfoFailed",this.initFormView,this).on("mppSessionFail",this.onMPPSessionFail,this).init(g.CREATE_SESSION_EXISTING_USER_URL)
}else{this.initTransactionView();
this.initFormView()
}},this))
};
c.prototype.initValidator=function(){if(k.subscriptionSource==="app"){this._formValidator=new FormValidator(this._elements.$form.first()[0],this.appSubscriberValidation(),$.proxy(this.onValidation,this),$.proxy(this.onBeforeValidation,this));
return
}else{n.initValidator.call(this)
}};
c.prototype.onMPPSessionFail=function(q){if(q&&q.Fault){this.service.createdMPPUser=false
}this.initTransactionView();
this.initFormView()
};
c.prototype.cacheElements=function(){var r=n.cacheElements.call(this),s=this.selectors,q=r?r.$input:undefined,t=this._elements.$holder;
if(!r){return false
}return this._elements=$.extend(r,{$loader:r.$holder.find(s.LOADER),$content:r.$holder.find(s.CONTENT),$updateBtn:r.$holder.find(s.UPDATE_BUTTON),$firstName:q.filter(s.FIRST_NAME),$lastName:q.filter(s.LAST_NAME),$email:q.filter(s.EMAIL),$emailVerify:q.filter(s.EMAIL_VERIFY),$purchaseUpgradeLink:r.$holder.find(s.PURCHASE_UPGRADE_LINK),$billingLine1:q.filter(s.BILLING_LINE_1),$billingLine2:q.filter(s.BILLING_LINE_2),$billingTown:q.filter(s.BILLING_TOWN),$billingProvince:q.filter(s.BILLING_PROVINCE),$billingCountry:q.filter(s.BILLING_COUNTRY),$billingPostcode:q.filter(s.BILLING_POSTCODE),$billingPhone:q.filter(s.BILLING_PHONE),$previewBillingLine1:r.$holder.find(s.PREVIEW_BILLING_LINE_1),$previewBillingLine2:r.$holder.find(s.PREVIEW_BILLING_LINE_2),$previewBillingTown:r.$holder.find(s.PREVIEW_BILLING_TOWN),$previewBillingProvince:r.$holder.find(s.PREVIEW_BILLING_PROVINCE),$previewBillingCountry:r.$holder.find(s.PREVIEW_BILLING_COUNTRY),$previewBillingPostcode:r.$holder.find(s.PREVIEW_BILLING_POSTCODE),$previewBillingPhone:r.$holder.find(s.PREVIEW_BILLING_PHONE),$cardType:q.filter(s.CARD_TYPE),$cardName:q.filter(s.CARD_NAME),$previewCardType:r.$holder.find(s.PREVIEW_CARD_TYPE),$previewCardName:r.$holder.find(s.PREVIEW_CARD_NAME),$paymentFieldset:r.$holder.find(s.PAYMENT),$billingFieldset:r.$holder.find(s.BILLING),$transactions:r.$holder.find(s.TRANSACTIONS),$acceptContactThirdParty:q.filter(s.ACCEPT_CONTACT_THIRD_PARTY),$acceptContactF1:q.filter(s.ACCEPT_CONTACT_F1),$redeemVoucherButton:q.filter(s.REDEEM_VOUCHER_BUTTON),$redeemVoucherInput:q.filter(s.VOUCHER_INPUT),$redemptionInputs:r.$holder.find(s.REDEMPTION_INPUTS),$voucherTab:r.$holder.find(s.VOUCHER_TAB),$transactionListTable:r.$holder.find(s.TRANSACTION_LIST_TABLE),$transactionListBodyExpanded:r.$holder.find(s.TRANSACTION_LIST_BODY_EXPANDED),$transactionListBodyCollapsed:r.$holder.find(s.TRANSACTION_LIST_BODY_COLLAPSED),$transactionListEmpty:r.$holder.find(s.TRANSACTION_LIST_EMPTY),$appSubscriberMessage:r.$holder.find(s.APP_SUBSCRIBER_MESSAGE)})
};
c.prototype.attachListeners=function(){if(!n.listenersAttached){n.attachListeners.call(this);
n.listenersAttached=true;
this._elements.$form.on("change input",$.proxy(this.onFormChange,this));
this._elements.$cardType.one("onchange change",$.proxy(this.onCardTypeChange,this));
this._elements.$holder.on("click",this.selectors.CANCEL_FORM,this.onCancelFormClick);
this._elements.$holder.on("click",this.selectors.SUB_CANCEL_BUTTON,$.proxy(this.onSubscriptionCancelClick,this));
this._elements.$holder.on("click",this.selectors.REDEEM_VOUCHER_BUTTON,$.proxy(this.onRedeemVoucherClick,this))
}};
c.prototype.onFormChange=function(q){if(d(this._firstForm,this.getMappedForm())){this._elements.$updateBtn.prop("disabled","true")
}else{this._elements.$updateBtn.prop("disabled",false)
}};
c.prototype.onBeforeValidation=function(q){if(!n.onBeforeValidation.call(this)){return false
}return !d(this._firstForm,this.getMappedForm())
};
function d(s,r){function q(v,u){for(var t in v){if(t==="service-price-id"){continue
}if(v.hasOwnProperty(t)){if(!u.hasOwnProperty(t)){return false
}if(v[t]!=u[t]){return false
}}}return true
}return q(s,r)&&q(r,s)
}c.prototype.onCancelFormClick=function(q){q.preventDefault();
if(!k.isPremium&&window.location.search&&window.location.search.indexOf("upsell=true")!=-1){window.location=window.location.pathname
}else{window.location.reload()
}};
c.prototype.onSubscriptionCancelClick=function(q){q.preventDefault();
a.fireCustomEvent(this.events.CANCEL_SUBSCRIPTION_CLICK);
e.confirmCancelSubscription({confirm:$.proxy(this.cancelSubscription,this),cancel:function(){}})
};
c.prototype.onRedeemVoucherClick=function(q){q.preventDefault();
a.fireCustomEvent(this.events.REDEEM_VOUCHER_CLICK);
$(".error-message",this._elements.$redeemVoucherInput.parent()).remove();
this._elements.$redeemVoucherInput.parent().removeClass("error");
this._elements.$holder.find(this.selectors.REDEEM_VOUCHER_BUTTON).addClass("loading");
if(this._elements.$redeemVoucherInput.val()){this.redeemVoucher()
}else{this.redeemVoucherFailure({isVoucherError:true})
}};
c.prototype.redeemVoucher=function(){this.service.applyVoucherCode(this.getMappedForm(),$.proxy(this.redeemVoucherSuccess,this),$.proxy(this.redeemVoucherFailure,this))
};
c.prototype.redeemVoucherSuccess=function(q){if(q&&q.paymentDetailsRequired){window.location=$(".site-header").attr("data-upsellPage")+"#from-account-details&"+q["redemption-code"]
}else{if(!k.isPremium){j.localStorage.setItem("accountManagementMessage","freeVoucherSuccess")
}else{j.localStorage.setItem("accountManagementMessage","paidVoucherSuccess")
}a.fireCustomEvent(this.events.VOUCHER_REDEMPTION_SUCCESS);
if(window.location.href.indexOf("#")>-1){window.location=window.location.href.substr(0,window.location.href.indexOf("#"))
}else{window.location.reload()
}}};
c.prototype.redeemVoucherFailure=function(r,s){if(r.isVoucherError){var q='<div class="error-message">Invalid or expired voucher code entered</div>';
this._elements.$redeemVoucherInput.parent().addClass("error");
this._elements.$redeemVoucherInput.parent().append(q);
this._elements.$holder.find(this.selectors.REDEEM_VOUCHER_BUTTON).removeClass("loading");
return
}};
c.prototype.cancelSubscription=function(){var r=this.getMappedForm()["service-price-id"],q=g.getServiceIdFromServicePriceId(r);
g.cancelSubscription({data:{ServiceId:q,subscriptionToken:k.accountInfo.data.subscriptionToken,ClientUserId:k.accountInfo.UID,UIDSignature:k.accountInfo.UIDSignature,signatureTimestamp:k.accountInfo.signatureTimestamp,userExpiry:p.responseData.mppActiveSubscription.ServiceInformation[0].ExpiryDateUTC.slice(6,-7)},onSuccess:$.proxy(this.onCancelSubscriptionComplete,this),onFail:function(){}})
};
c.prototype.onCancelSubscriptionComplete=function(q){var r=function(s){if(s&&s.data){j.localStorage.setItem("accountManagementMessage","cancelSuccess");
a.fireCustomEvent(this.events.CANCEL_SUBSCRIPTION_CONFIRM);
window.location.reload()
}else{return this.onCancelSubscriptionComplete(q*2)
}};
q=q||500;
setTimeout($.proxy(function(){k.updateAccountInfo($.proxy(r,this))
},this),q)
};
c.prototype.onCardTypeChange=function(){this._currentFormValues=this.getMappedForm();
if(this.checkCardInfoChange()){this._elements.$cardName.val("");
this._elements.$cardNumber.val("");
this._elements.$expiryMonth.val("default").addClass("default-selected");
this._elements.$expiryYear.val("default").addClass("default-selected")
}};
c.prototype.initFormView=function(){if(j.isEditMode){return
}if(this.service&&this.service.setUserHasActiveSubscription){this.service.setUserHasActiveSubscription(p)
}this._elements.$previewExpiry.text("Free F1 Access membership");
this.initProfileView();
if((k.subscriptionSource==="web"||!k.subscriptionSource)&&k.isPremium&&p.responseData.paymentInstruments===false){this.initAppSubscriberView();
this.activatePage()
}else{if((k.subscriptionSource==="web"||!k.subscriptionSource)&&k.isPremium){this.initBillingView();
this.initPaymentView()
}else{if(!k.isPremium&&window.location.search&&window.location.search.indexOf("upsell=true")!=-1){this.initBillingView();
this.initPaymentView();
this._elements.$purchaseUpgradeLink.hide()
}else{if(!k.isPremium&&window.location.search.indexOf("upsell=true")===-1){this._elements.$purchaseUpgradeLink.show();
this.initAppSubscriberView();
this.activatePage()
}else{this.initAppSubscriberView()
}}}}this.initAgreementsView();
if(!j.isEditMode){this.service.setFormValues(this.getMappedForm());
this._currentFormValues=this.getMappedForm();
this._firstForm=this.getMappedForm()
}this._elements.$input.parent().removeClass(this.classes.ERROR);
this._elements.$select.parent().parent().removeClass(this.classes.ERROR);
this._elements.$checkbox.closest(".form-input-expand").parent().removeClass(this.classes.ERROR);
$(".error-message",this._elements.$form).remove();
this._elements.$input.parent().removeClass(this.classes.SUCCESS);
this._elements.$select.parent().parent().removeClass(this.classes.SUCCESS);
this._elements.$checkbox.closest(".form-input-expand").parent().removeClass(this.classes.SUCCESS);
if(this.failedVoucher){var q='<div class="error-message">Invalid or expired voucher code entered</div>';
this._elements.$redeemVoucherInput.parent().addClass("error");
this._elements.$redeemVoucherInput.parent().append(q);
this.failedVoucher=false
}this.activate()
};
c.prototype.initAppSubscriberView=function(){this._elements.$billingFieldset.remove();
this._elements.$transactions.remove();
this._elements.$paymentFieldset.remove()
};
c.prototype.initAgreementsView=function(){if(j.isEditMode||!k.accountInfo.data){return
}if(k.accountInfo.data.acceptContactF1){this._elements.$acceptContactF1.prop("checked",(k.accountInfo.data.acceptContactF1.toString())==="true"?"checked":"")
}if(k.accountInfo.data.acceptContactThirdParty){this._elements.$acceptContactThirdParty.prop("checked",(k.accountInfo.data.acceptContactThirdParty.toString())==="true"?"checked":"")
}};
c.prototype.initProfileView=function(r,s){j=r||j;
k=s||k;
if(j.isEditMode){return
}if(!!k.accountInfo.profile.country&&!!this._elements.$country.find('option[value="'+k.accountInfo.profile.country+'"]')[0]){this._elements.$country.val(k.accountInfo.profile.country)
}else{if(!!k.accountInfo.profile.country&&!this._elements.$country.find('option[value="'+k.accountInfo.profile.country+'"]')[0]){this._elements.$country.val("Other")
}}if(!!k.accountInfo.data.subscriptionExpiry.replace("0000-00-00 00:00:00","")&&Date.parse(k.accountInfo.data.subscriptionExpiry.replace(" ","T"))){var q=new Date(k.accountInfo.data.subscriptionExpiry.replace(" ","T"));
if(k.subscriptionSource==="app"){this._elements.$previewExpiry.text("App subscription expires "+[q.getDate(),"/",String(q.getMonth()+1),"/",q.getFullYear()].join(""))
}else{this._elements.$previewExpiry.text("Web subscription expires "+[q.getDate(),"/",String(q.getMonth()+1),"/",q.getFullYear()].join(""))
}}this._elements.$previewName.text(k.get("fullName"));
this._elements.$previewMembership.text(k.accountInfo.UID.substr(0,12));
this._elements.$firstName.val(k.accountInfo.profile.firstName);
this._elements.$lastName.val(k.accountInfo.profile.lastName);
this._elements.$previewEmail.text(k.accountInfo.profile.email);
this._elements.$password.val("");
this._elements.$passwordVerify.val("");
this._elements.$password.prop("placeholder","Current password");
this._elements.$passwordVerify.prop("placeholder","New password")
};
c.prototype.initBillingView=function(){var s=p.responseData.transactionData.PaymentInstrument,u=p.responseData.mppAccountInfo;
if(s){var q=new Date();
s.BillingAddress.Country=s.BillingAddress.Country?s.BillingAddress.Country:"";
var r=this._elements.$billingCountry.find("option").filter(function(){var v=$(this).data("iso3");
var w=s.BillingAddress.Country;
if(v===w){return this
}}).attr("value")||"Other";
s.BillingAddress.District=s.BillingAddress.State?s.BillingAddress.State:"";
var t=this._elements.$billingProvince.find("option").filter(function(){return this.value.toLowerCase()===s.BillingAddress.District.toLowerCase()
}).attr("value")||"Non-USA/Other";
this._elements.$billingLine1.val(s.BillingAddress.LineOne);
this._elements.$billingLine2.val(s.BillingAddress.LineTwo);
this._elements.$billingTown.val(s.BillingAddress.City);
this._elements.$billingCountry.val(r);
this._elements.$billingProvince.val(t);
this._elements.$billingPostcode.val(s.BillingAddress.PostalCode);
this._elements.$previewBillingLine1.text(s.BillingAddress.LineOne);
this._elements.$previewBillingLine2.text(s.BillingAddress.LineTwo);
this._elements.$previewBillingTown.text(s.BillingAddress.City);
this._elements.$previewBillingProvince.text(t);
this._elements.$previewBillingCountry.text(r);
this._elements.$previewBillingPostcode.text(s.BillingAddress.PostalCode);
if(u.data.phoneNumber){this._elements.$billingPhone.val(u.data.phoneNumber);
this._elements.$previewBillingPhone.text(u.data.phoneNumber)
}}};
c.prototype.initPaymentView=function(){var w=p.responseData.transactionData.PaymentInstrument,x={},v=p.responseData.mppSearchSubscription.Subscriptions,t,s=[],r=false,q="";
if(w&&!w.CreditCard){this._elements.$subCancelWrapper.remove();
this.initAppSubscriberView();
return false
}if(w){x=p.responseData.mppActiveSubscription;
r=g.hasActiveSubscription(x);
this._elements.$cardType.val(w.CreditCard.Type);
this._elements.$cardName.val(w.CreditCard.NameOnCard);
this._elements.$cardNumber.val(w.CreditCard.AccountNumber);
this._elements.$expiryMonth.val(w.CreditCard.ExpirationMonth);
this._elements.$expiryYear.val(w.CreditCard.ExpirationYear);
this._elements.$previewCardType.text(g.getCreditCardType(w.CreditCard.Type));
this._elements.$previewCardName.text(w.CreditCard.NameOnCard);
this._elements.$previewCardNumber.text(w.CreditCard.AccountNumber);
this._elements.$previewExpiryMonth.text(w.CreditCard.ExpirationMonth);
this._elements.$previewExpiryYear.text(w.CreditCard.ExpirationYear)
}if(k.isPremium&&v){r=r[0];
t=$.grep(v,function(z,y){return(z.StatusName.toLowerCase()==="active")
});
if(r){var u=t["0"].Items["0"].Product.Name;
u=u.split(" ").splice(-1)[0];
if(u==="Monthly"){this._elements.$radioMonth.prop("checked",true);
this._elements.$subYearWrapper.remove()
}else{if(u==="Annual"){this._elements.$radioYear.prop("checked",true);
this._elements.$subMonthWrapper.remove()
}}}}else{this._elements.$subCancelWrapper.remove()
}return this.activatePage()
};
c.prototype.onPostSuccess=function(){a.fireCustomEvent(this.events.SUBMIT_SUCCESS);
j.localStorage.setItem("accountManagementMessage","updateSuccess");
window.location.reload()
};
c.prototype.initPrices=function(){o.onPriceInit($.proxy(this.onCountryChange,this));
if(this._cancelPriceUpdates){o.off("change",this.onCountryChange);
o.on("change",$.proxy(this.onCountryChangeUpdateValidations,this));
this.updateCurrency(p.responseData.mppActiveSubscription.ServiceInformation[0]["SubscriptionInformation"]["Currency"]);
this.service.setFormValues(this.getMappedForm())
}};
c.prototype.onBeforeValidation=function(q){if(!n.onBeforeValidation.call(this,q)){return false
}this._currentFormValues=this.getMappedForm();
return true
};
c.prototype.checkCardInfoOrCVVChange=function(){return this.checkCardInfoChange()||this.service.checkCVVChange(this._currentFormValues)
};
c.prototype.checkCardInfoChange=function(){return this.cardInfoChanged&&this.service.checkCardInfoChange(this._currentFormValues)
};
c.prototype.setEditingCardDetails=function(q){this.service.editingCardDetails=q
};
c.prototype.setCardInfoChange=function(q){this.cardInfoChanged=q
};
c.prototype.checkPasswordChange=function(){return this.passwordChanged||this.service.checkPasswordChange(this._currentFormValues)
};
c.prototype.setPasswordChanged=function(q){this.passwordChanged=q
};
c.prototype.setVoucherError=function(r){this.failedVoucher=r;
if(this.failedVoucher){var q='<div class="error-message">Invalid or expired voucher code entered</div>';
this._elements.$redeemVoucherInput.parent().addClass("error");
this._elements.$redeemVoucherInput.parent().append(q);
this._elements.$redeemVoucherInput.val(this.failedVoucher)
}};
c.prototype.checkEmailChange=function(){return this.service.checkEmailChange(this._currentFormValues)
};
c.prototype.initTransactionView=function(){return this.activatePage();
var s="",r="",q={},w=0,t=new Date(),v={};
if(j.isEditMode){return this.activatePage()
}if(k.subscriptionSource==="app"||!k.subscriptionSource){this._elements.$transactionListTable.remove();
this._elements.$transactionListEmpty.remove();
this._elements.$holder.find(this.selectors.REDEEM_VOUCHER_LINK).remove()
}else{if(!p.responseData.transactionData||!p.responseData.transactionData.TotalNumberOfOrders){this._elements.$appSubscriberMessage.remove();
this._elements.$transactionListTable.remove()
}else{q=p.responseData.transactionData;
w=q.TotalNumberOfOrders;
for(var u=0;
u<w;
u++){v=q.Baskets[u].Basket[0];
t.setTime(v.OrderDateUTC.slice(6,-7));
s+=["<tr><td>",t.getUTCDate(),"/",String(t.getUTCMonth()+1),"/",t.getUTCFullYear(),"</td>"].join("");
s+=["<td>",v.OrderDescription,"</td>"].join("");
s+=["<td>",j.getCurrencySymbol(v.Currency),Number(v.TaxResult.GrossAmount).toFixed(2),"</td></tr>"].join("");
r+=['<tr><td colspan="2"><div class="pull-left">',t.getUTCDate(),"/",String(t.getUTCMonth()+1),"/",t.getUTCFullYear(),'</div><div class="pull-right">',j.getCurrencySymbol(v.Currency),Number(v.TaxResult.GrossAmount).toFixed(2),'</div><div style="clear:both;font-weight:normal;">',v.OrderDescription,"</div></td></tr>"].join("")
}this._elements.$transactionListBodyExpanded.html(s);
this._elements.$transactionListBodyCollapsed.html(r);
this._elements.$appSubscriberMessage.remove();
this._elements.$transactionListEmpty.remove()
}}};
c.prototype.activatePage=function(){this._elements.$content.removeClass("hide");
this._elements.$loader.addClass("hide")
};
return new c()
})(fom.components.userAccountManagement,fom.components.accountmanagement.service,fom.components.accountmanagement.appsubscriberservice,fom.modules.user,fom.components.accountmanagement.retrievedataservice,fom.components.countryDropdown,fom.tracking,fom.utils,fom.modules.modals,fom.modules.authenticator,fom.modules.csg);
(function(g,h,d){var b="LB_Sentinel_{:id}.js";
var a="LBSentinelCallback_{:id}";
var f="LiveBlogCallback_{:id}";
var c=(function(){if(d.isPremium){return"LiveBlog_{:id}.js"
}return"LB_Free_{:id}.js"
}());
var j="live_comms";
var e=function(m,k){this.options=$.extend({pollInterval:1000*5,feedUrl:"https://web.archive.org/web/20180902030509/http://f1tata.bc.cdn.bitgravity.com/commentary/",queueLimit:5},k);
this.blogId=m;
this._dataId=null;
this._callbacks=[];
this._queue=[];
window[this.sentinelCallback()]=$.proxy(this._checkForUpdateHandler,this);
window[this.dataCallback()]=$.proxy(this._fetchHandler,this)
};
g.liveCommentary||(g.liveCommentary={});
g.liveCommentary.DeltatreService=e;
e.prototype={onData:function(k){this._callbacks.push(k)
},_notify:function(k){$.each(this._callbacks,function(m,n){n.call(null,k)
})
},start:function(){if(this._isPolling){throw new Error("Attempted to start current Deltatre service")
}this.startWithStoredData();
this._startPolling()
},startWithStoredData:function(){var m;
try{m=h.localStorage.getItem(j)
}catch(k){}if(!m){return
}if(m.blogId===this.blogId&&m.premium===d.isPremium){this._dataId=m.ts;
this._notify(m.data)
}else{h.localStorage.removeItem(j)
}},stop:function(){this._isPolling=false;
clearInterval(this._pollTimer)
},_startPolling:function(){var k=$.proxy(this._checkForUpdate,this);
this._pollTimer=setInterval(k,this.options.pollInterval);
this._isPolling=true;
k()
},_checkForUpdate:function(){this._makeRequest(this.sentinelUrl())
},_fetch:function(){this._makeRequest(this.dataUrl())
},_makeRequest:function(m){var k;
if(this.hasSpaceInQueue()){k=$.ajax({url:m,dataType:"jsonp",cache:false});
k.always($.proxy(this._removeFromQueue,this));
this._queue.push(k)
}},_checkForUpdateHandler:function(k){if(k.ts!==this._dataId){this._dataId=k.ts;
this._fetch()
}},_fetchHandler:function(k){this._notify(k);
h.localStorage.setItem(j,{ts:this._dataId,blogId:this.blogId,premium:d.isPremium,data:k})
},hasSpaceInQueue:function(){return this._queue.length<this.options.queueLimit
},dataUrl:function(){return h.interpolate(this.options.feedUrl+c,{id:this.blogId})
},dataCallback:function(){return h.interpolate(f,{id:this.blogId})
},sentinelUrl:function(){return h.interpolate(this.options.feedUrl+b,{id:this.blogId})
},sentinelCallback:function(){return h.interpolate(a,{id:this.blogId})
},_removeFromQueue:function(k){var m=$.inArray(k,this._queue);
if(m!==-1){this._queue.splice(m,1)
}},destroy:function(){var k=function(){};
this.stop();
window[this.sentinelCallback()]=k;
window[this.dataCallback()]=k
}}
}(fom.components,fom.utils,fom.modules.user));
(function(b){var a={YELLOW_FLAG:"flag yellow",GREEN_FLAG:"flag green",RED_FLAG:"flag red",BLUE_FLAG:"flag blue",SC_DEPLOYED:"safety_car yellow",CHEQUERED_FLAG:"checkered_flag",DRS_ENABLED:"drs green",DRS_DISABLED:"drs red",ERROR:"error yellow",OVERTAKING:"overtake blue",RECAP:"repost",TV_IMAGE:"tv_image"};
b.liveCommentary||(b.liveCommentary={});
b.youtubeCarouselSlide||(b.youtubeCarouselSlide={});
b.liveCommentary.templates={};
b.liveCommentary.templates.Base=(function(){var c=function(){};
c.prototype.iconType=function(d){return a[d]
};
c.prototype.cleanTags=function(e){var d=new RegExp(b.liveCommentary.TAG_REGEX,"gi");
return $.trim(e.replace(d,""))
};
c.prototype.stripHtml=function(d){return d.replace(/<[^>]+>/g,"")
};
c.prototype.wrap=function(e,d){return'<div class="post-content '+(d||"text").toLowerCase()+'">'+e+"</div>"
};
c.prototype.findDataNode=function(f,d){var e;
$.each(f,function(h,g){if(g.Name===d){e=g;
return false
}});
return e
};
return{extend:function(d){var e=function(){};
e.prototype=new c();
$.extend(e.prototype,d);
return new e()
}}
}())
}(fom.components));
(function(a){a.templates.mainPost=a.templates.Base.extend({render:function(e,c,f){var d=[],b=f==="RECAP";
if(this.hasCustomTags(c)){d.push('<div class="post-meta ',(b?"recap":""),'">');
if(b){d.push('<span class="post-type">Recap</span>')
}if(c.l){d.push('<span class="post-tag lap-number">L',c.l,"</span>")
}else{if(c.t){d.push('<span class="post-tag custom">',c.t,"</span>")
}}d.push("</div>")
}d.push('<ol class="posts">');
[].push.apply(d,$.map(e,function(g){if(g){return'<li class="content-item">'+g+"</li>"
}return""
}));
d.push("</ol>");
return d.join("")
},hasCustomTags:function(b){var c=false;
$.each(a.CUSTOM_TAGS,function(e,d){if(b[d]){c=true;
return false
}});
return c
}})
}(fom.components.liveCommentary));
(function(a){a.text=a.Base.extend({render:function(c,e){var d=this.cleanTags(c.Text),b="";
if(d){b=this.cleanTags(c.Html);
b=this.wrap('<i class="icon icon-'+(this.iconType(e)||"text")+'"></i>'+b)
}return b
}})
}(fom.components.liveCommentary.templates));
(function(a){String.prototype.parseURL=function(){return this.replace(/(http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?/g,function(b){return b.link(b)
})
};
String.prototype.parseUsername=function(){return this.replace(/[@]+[A-Za-z0-9-_]+/g,function(b){var c=b.replace("@","");
return b.link("https://web.archive.org/web/20180902030509/https://twitter.com/"+c)
})
};
String.prototype.parseHashtag=function(){return this.replace(/[#]+[A-Za-z0-9-_]+/g,function(c){var b=c.replace("#","");
return c.link("https://web.archive.org/web/20180902030509/https://twitter.com/hashtag/"+b)
})
};
a.twitter=a.Base.extend({render:function(b){return this.wrap('<i class="icon icon-twitter"></i>'+this.rebuild(b),"tweet")
},rebuild:function(b){var g="",e=$(b.Html),d=e.find(".twitter-tweet"),c=d.find("p").html(),h="- "+b.ContentAuthorName.replace(/\+/g," ")+" ("+("@"+b.ContentAuthor).parseUsername()+")",f=d.find("a[data-datetime]");
c=c.parseURL().parseUsername().parseHashtag();
g="<p>"+c+"</p>";
g=g+h+" "+$("<output>").append(f.clone()).html();
d.html(g);
d.find("a").attr("target","_blank");
return $("<div>").append(e.clone()).html()
}})
}(fom.components.liveCommentary.templates));
(function(b,a){b.raceFeed=b.Base.extend({render:function(c,d){return this.wrap(this.iconHtml(d)+c.Html,"race-feed")
},iconHtml:function(e){var d=this.iconType(e),c="";
if(d){c=a.interpolate('<i class="icon icon-{:classNames}"></i>',{classNames:d})
}return c
}})
}(fom.components.liveCommentary.templates,fom.utils));
(function(a){a.facebook=a.Base.extend({render:function(b){return this.wrap('<i class="icon icon-facebook"></i>'+b.Html,"facebook")
}})
}(fom.components.liveCommentary.templates));
(function(b,a){b.audio=b.Base.extend({render:function(c){return this.wrap('<i class="icon icon-audio"></i>'+this.html(c),"audio")
},html:function(d){var c=d.Html;
var e={audioUrl:c.replace(/^.*href=(?:"|')([^"']+)(?:"|').*$/,"$1"),description:this.stripHtml(c.replace(/^.*<a[^>]+>(.*?)<\/a>.*$/,"$1")),playerId:(+new Date)+Math.floor(Math.random()*1000)};
e.audioUrl="//"+e.audioUrl.replace(/^https?:\/\//,"");
return a.interpolate(['<div id="jp_player_{:playerId}" class="jp-jplayer" data-url="{:audioUrl}" data-title="{:description}" data-player-id="{:playerId}"></div>','<div id="jp_container_{:playerId}" class="jp-audio" role="application" aria-label="media player">','<div class="jp-type-single">','<div class="jp-details">','<div class="jp-title" aria-label="title">&nbsp;</div>',"</div>",'<div class="jp-interface-wrapper">','<div class="jp-gui jp-interface">','<div class="jp-progress">','<div class="jp-seek-bar">','<div class="jp-play-bar"></div>',"</div>","</div>","</div>",'<div class="jp-controls">','<button class="jp-play" role="button" tabindex="0">','<i class="icon-play3"></i>','<span class="assistive-text">play</span>',"</button>","</div>",'<div class="jp-time-holder">','<div class="jp-current-time" role="timer" aria-label="time">&nbsp;</div>',"</div>","</div>",'<div class="jp-no-solution">',"<span>Update Required</span>",'To play the media you will need to either update your browser to a recent version or update your <a href="https://web.archive.org/web/20180902030509/http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.',"</div>","</div>","</div>"].join(""),e)
}})
}(fom.components.liveCommentary.templates,fom.utils));
(function(a){a.youtube=a.Base.extend({render:function(b){return this.wrap('<i class="icon icon-youtube"></i>'+b.Html,"youtube")
}})
}(fom.components.liveCommentary.templates));
(function(b,a){b.image=b.Base.extend({render:function(d,f,e){var c=this.imageTemplate(e);
if(!c){return""
}return a.interpolate(this.wrap('<i class="icon icon-{:icon}"></i>'+c,"image"),{icon:this.iconType(f)||"tv_image"})
},imageTemplate:function(g){var d=this,j=d.getGallaryParams(g),k=[320,640,768,1024,1536],h=function(){var q="",s=k,o=j.urlSections,m="//"+o.host+o.directory+o.filename,r=o.extention,p=k.length-1,n=0;
for(;
p>=0;
p--){n=k[p];
q=q+'<span data-media="(max-width: '+n+'px)" data-src="'+m+"_"+n+r+'"></span>'
}return q
},f=function(){return('<div class="manual-gallery"><div class="gallery-inpage"><div class="swiper-container"><div class="swiper-wrapper"><figure class="swiper-slide"><div class="image fom-adaptiveimage"><span data-media="" data-src="{:imageUrl}"></span>'+h()+'</div></figure></div><a href="#" class="gallery-enlarge gallery-enlarge-link" title="Enlarge"><span class="icon-enlarge"></span></a><a href="#" class="gallery-enlarge gallery-enlarge-hitarea"><span>Enlarge</span></a></div></div><div class="gallery-modal"><div class="gallery-modal-container"><a class="gallery-modal-close-link icon-close"><span>Close</span></a><div class="gallery-modal-wrapper"></div></div></div></div>')
},e=function(){return('<div class="manual-gallery"><div class="gallery-inpage"><div class="swiper-container"><div class="swiper-wrapper"><figure class="swiper-slide"><div class="image"><img src="{:imageUrl}" alt=""></div></figure></div><a href="#" class="gallery-enlarge gallery-enlarge-link" title="Enlarge"><span class="icon-enlarge"></span></a><a href="#" class="gallery-enlarge gallery-enlarge-hitarea"><span>Enlarge</span></a></div></div><div class="gallery-modal"><div class="gallery-modal-container"><a class="gallery-modal-close-link icon-close"><span>Close</span></a><div class="gallery-modal-wrapper"></div></div></div></div>')
},c;
if(j.imageUrl){c=j.isLegacy?e():f();
return a.interpolate(c,j)
}},extractImageUrl:function(d){var c=this.findDataNode(d,"ImageLink");
if(c){return c.Value
}},getGallaryParams:function(f){var c=this,d=c.extractImageUrl(f),g=d.indexOf("/f1tata/tv_images")===-1,e={isLegacy:g,imageUrl:d};
if(!g){e.urlSections=a.parseUri(d)
}return e
}})
}(fom.components.liveCommentary.templates,fom.utils));
(function(c,a){var b=c.PostTypes={Text:"TEXT",Race:"RACECONTROLFEED",Tweet:"TWITTER",Facebook:"FACEBOOK",Audio:"AUDIOFEED",Image:"TVIMAGESFEED",GalleryImage:"AKQA GALLERIES",MediaManager:"MEDIA MANAGER",Video:"MRSS",YouTube:"YOUTUBE"};
c.CUSTOM_TAGS=["l","t"];
c.TAG_REGEX="@(\\w+)\\(([^)]+)\\);";
c.CUSTOM_TAG_REGEX=a.interpolate("@({:tags})\\(([^)]+)\\);",{tags:c.CUSTOM_TAGS.join("|")});
c.Renderer={render:function(f){var e=this.parsePost(f),d=this.renderPosts(e.posts,f);
return c.templates.mainPost.render(d,e.tags,f.PostSubType)
},renderPosts:function(d,g){var f=g.PostSubType,e=g.PostData||[];
if(g.ExternalResourceType=="503"){return[c.templates.audio.render(d[0])]
}return $.map(d,function(h){switch(h.TypeName){case b.Race:return c.templates.raceFeed.render(h,f);
case b.Tweet:return c.templates.twitter.render(h);
case b.Audio:return c.templates.audio.render(h);
case b.Facebook:return c.templates.facebook.render(h);
case b.YouTube:return c.templates.youtube.render(h);
case b.Image:case b.GalleryImage:return c.templates.image.render(h,f,e);
case b.MediaManager:case b.Video:return"";
default:return c.templates.text.render(h,f)
}})
},parsePost:function(e){var f=new RegExp(c.CUSTOM_TAG_REGEX),d={tags:{},posts:[]};
$.each(e.Text,$.proxy(function(g,h){if(h.TypeName===b.Text&&f.test(h.Text)){$.extend(d.tags,this.extractCustomTags(h.Text))
}h.ContentAuthor=e.ContentAuthor;
h.ContentAuthorName=e.ContentAuthorName;
h.OriginalContentDateTime=e.OriginalContentDateTime;
d.posts.push(h)
},this));
return d
},extractCustomTags:function(d){return this.extractTags(d,c.CUSTOM_TAG_REGEX)
},extractTags:function(h,f){var e={},g=new RegExp(f||c.TAG_REGEX,"gi"),d;
while((d=g.exec(h))!==null){e[d[1].toLowerCase()]=d[2].toLowerCase()
}return e
}}
}(fom.components.liveCommentary,fom.utils));
(function(d,c,a){var e="/etc/designs/fom-website/libs/scripts/libs/jplayer/";
var b=function(f,g){this.$el=$(f);
this.$feed=this.$el.find(".feed");
this.$notification=this.$el.find(".new-post-notification");
this.$newPostCount=this.$notification.find(".new-post-count");
this.$newPostText=this.$notification.find(".post-text");
this.dataService=g;
this.numberOfPosts=0;
this._notifyForNewPosts=false;
this._newPostBuffer=[];
this._audioPlayers=[];
this.$notification.on("click",$.proxy(this.showNewPosts,this));
this.$el.one("newposts",function(){$(this).find(".load-more").remove()
});
g.onData($.proxy(this.newPosts,this));
g.start()
};
b.prototype={checkScrollIntoView:function(f,h){var g=this.$el.offset().top<h;
if(!this._notifyForNewPosts&&g){this._notifyForNewPosts=true
}else{if(this._notifyForNewPosts&&!g){this._notifyForNewPosts=false;
this._flush()
}}return false
},_flush:function(){this._newPostBuffer.reverse();
this.renderPosts(this._newPostBuffer);
this._newPostBuffer.length=0;
this.hideNotification()
},newPosts:function(h){var f=this.numberOfPosts!==0,g=h.TotalPosts-this.numberOfPosts,j=h.Posts.slice(0,g);
this.numberOfPosts=h.TotalPosts;
this.$el.trigger("newposts",g);
if(f&&this._notifyForNewPosts){[].push.apply(this._newPostBuffer,j);
this.notifyNewPosts()
}else{this.renderPosts(j)
}},notifyNewPosts:function(){var f=this._newPostBuffer.length,g=f>1?"textPlural":"textSingular";
this.$newPostCount.text(f);
this.$newPostText.text(this.$notification.data(g)||"");
this.showNotification()
},showNewPosts:function(f){f.preventDefault();
this.hideNotification();
$("body, html").animate({scrollTop:this.$el.offset().top-100},400)
},showNotification:function(){this.$notification.addClass("active")
},hideNotification:function(){this.$notification.removeClass("active")
},renderPosts:function(f){var g=document.createDocumentFragment();
$.each(f,function(k,j){var h=document.createElement("li");
h.className="post pending";
h.innerHTML=c.liveCommentary.Renderer.render(j);
g.appendChild(h)
});
this.$feed.prepend(g);
this.instantiatePosts()
},instantiatePosts:function(){var f=this;
this.$feed.find(".pending").each(function(h,j){var g=$(j);
g.find(".post-content").each(function(n,m){var k=$(m);
if(k.is(".audio")){f.initAudio(k)
}else{if(k.is(".image")){d.picturefill(k);
k.find(".manual-gallery").manualGallery({enlarge:true})
}}});
g.removeClass("pending")
})
},initAudio:function(f){var h=f.find(".jp-jplayer"),g=h.data();
this._audioPlayers.push(h);
h.jPlayer({ready:function(){h.jPlayer("setMedia",{title:g.title,mp3:g.url})
},cssSelectorAncestor:"#jp_container_"+g.playerId,swfPath:e,supplied:"mp3",useStateClassSkin:true,autoBlur:false,smoothPlayBar:true,keyEnabled:true})
},getBufferSize:function(){return this._newPostBuffer.length
},destroy:function(){this.dataService.destroy();
$.each(this._audioPlayers,function(f,g){g.jPlayer("destroy")
});
this._audioPlayers.length=0;
return this
}};
c.liveCommentary.attach=function(f,h,g){var k=new c.liveCommentary.DeltatreService(h,g);
var j=new b(f,k);
a.scrollWatcher.add(j);
return j
}
}(window,fom.components,fom.utils));
(function(d,g,f){var e=80;
var b="fom-adaptiveimage";
var a=800;
var c="HOME_PAGE";
d.HomepageSlide=function(h,j){this.$slides=h;
this.$raceStatus=h.find(".race-status");
this.$lapNumber=this.$raceStatus.find(".lap-number");
this.$adaptiveImage=h.find("."+b);
this.$post=h.find(".post");
this.dataService=j;
this._sticky={};
this._postHeight=0;
this._defaultImageSrc=this.$adaptiveImage.find("img").attr("src");
j.onData($.proxy(this.update,this));
j.start();
f.on("resize",this.resetPostHeight,this)
};
d.HomepageSlide.prototype={update:function(h){var j=this.findStickyPost(h.Posts);
if(j&&j.Id!==this._sticky.Id){this._sticky=j;
this.newPost(j)
}},findStickyPost:function(h){var j;
$.each(h,function(m,k){if(k.PostSubType===c){j=k;
return false
}});
return j
},newPost:function(h){var j=this.extractPostItems(h),k=j.imageUrl||this._defaultImageSrc;
if(k){this.switchImage(k)
}if(j.lap){this.$lapNumber.text("L"+j.lap)
}else{this.$raceStatus.hide()
}if(j.text){this.updateText(j.text)
}},switchImage:function(m){var j="fader",n=a/2,h=$('<img class="fader next" src="'+m+'">'),k=this.$adaptiveImage.find("img");
h.prependTo(this.$adaptiveImage);
k.addClass(j);
setTimeout(function(){h.removeClass(j);
setTimeout(function(){k.remove();
h.removeClass("next")
},n)
},n);
this.$adaptiveImage.removeClass(b)
},updateText:function(m){var j=this.$post.find(".old"),k=$('<div class="post-content next-up">'+m+"</div>"),h;
j.remove();
this.$post.find(".post-content").addClass("old");
this.$post.append(k);
setTimeout($.proxy(function(){h=k.outerHeight();
if(h>this._postHeight){this.$post.height(h);
this._postHeight=h
}k.removeClass("next-up")
},this),0)
},resetPostHeight:function(){var h=this.$post.find(".post-content").not(".old").outerHeight();
this._postHeight=h;
this.$post.height(h)
},extractPostItems:function(j){var h={};
$.each(j.Text,$.proxy(function(m,n){var k;
switch(n.TypeName){case d.PostTypes.Text:k=this.extractText(n);
h.text=k.text;
h.lap=k.lap;
break;
case d.PostTypes.Image:case d.PostTypes.GalleryImage:h.imageUrl=this.extractImage(j.PostData);
break
}},this));
return h
},extractText:function(j){var h=new RegExp(d.TAG_REGEX,"g");
return{lap:d.Renderer.extractCustomTags(j.Text).l,text:this.truncate(j.Text.replace(h,""))}
},extractImage:function(h){return d.templates.image.extractImageUrl(h)
},truncate:function(j){var h=0;
if(j.length<=e){return j
}return $.trim($.map(j.split(/\s+/),function(k){h+=k.length+1;
if(h<e){return k
}return""
}).join(" "))+"&hellip;"
}};
g.YoutubePopup=function(h){this.$slides=h;
this.$playIcon=h.find(".youtube-video-link");
this.$modal=$(".youtube-video-carousel-popup");
this.$closeIcon=this.$modal.find(".icon-close");
this.$youtubeFrame=this.$modal.find("#iframeYoutube");
this.$playIcon.on("click",$.proxy(this.openPopup,this));
this.$closeIcon.on("click",$.proxy(this.closePopup,this))
};
g.YoutubePopup.prototype={openPopup:function(h){this.$youtubeFrame.attr("src","https://web.archive.org/web/20180902030509/https://www.youtube.com/embed/"+$(h.target).data("code")+"?theme=dark&autohide=2&autoplay=1&modestbranding=1&showinfo=0&rel=0&iv_load_policy=3&cc_load_policy=0");
this.$modal.addClass("isVisible")
},closePopup:function(){this.$youtubeFrame.removeAttr("src");
this.$modal.removeClass("isVisible")
}}
}(fom.components.liveCommentary,fom.components.youtubeCarouselSlide,fom.utils.resizeManager));
fom.components||(fom.components={});
fom.components.searchresults=(function(j,w,k,o){var h={filter:".searchbar-form-input",genericTeaser:".generic-teaser",teaserDescription:".teaser-description",searchbarButton:".search-results-template .navigation-toggle--search",responsiveElement:".responsive-element",resultsContainer:".ResultsContainer",queryTextContainer:".QueryText",loadMore:".LoadMore"},x={loading:"loading",animate:"animate",error:"error"},b={loadStart:"loadstartnum",loadNum:"loadnum",totalResults:"totalresults",query:"query-text",ajaxPath:"ajax-path"},g=j(h.resultsContainer),r=g.find(h.loadMore),q=g.data(b.query);
function m(A){return A+".results.html"
}function p(){j("a",r).on("click",function(A){A.preventDefault();
y(j(A.currentTarget).parents(h.loadMore))
})
}function c(B,A){if(B){A.addClass(x.loading).removeClass(x.error)
}else{A.removeClass(x.loading)
}}function z(C,A){var D=A.data(b.loadStart),B=A.data(b.loadNum);
A.fadeOut(0);
c(false,A);
A.data(b.loadStart,D+B);
n(C,A)
}function f(B,A){c(false,A);
A.addClass(x.error)
}function a(A){return j(A.responseText).find("script, .editmode-helper, .editmode").remove().end()
}function y(A){c(true,A);
j.ajax({type:"GET",url:m(A.data(b.ajaxPath)),data:{q:q,start:A.data(b.loadStart),count:A.data(b.loadNum)}}).done(function(C,B,D){z(a(D),A)
}).fail(function(B){f(B,A)
})
}function t(A){if(A.data(b.totalResults)>A.data(b.loadStart)){A.fadeIn("fast")
}}function n(B,A){A.before(B);
j(B).hide(0).slideDown("fast");
s(B);
t(A)
}function s(B){var A=j(B).find(h.responsiveElement);
if(B&&A.length>0){j.each(A,function(C,D){o.recalculate(D)
})
}e();
u();
k.applyTo(g.find(h.genericTeaser))
}function u(){var A=g.find(h.genericTeaser);
if(j(window).width()>=768){var B=0;
j.each(A,function(C,D){var E=j(D).height();
if(E>B){B=E
}});
A.height(B)
}else{A.css({height:"auto"})
}}function d(C,D){var B=C.split(" "),A=(B.length>D)?"...":"";
return B.splice(0,D).join(" ")+A
}function e(){var A=g.find(h.teaserDescription),B=new RegExp(q,"gi");
A.each(function(E,D){var C=j(D),F=d(C.text(),45);
C.html(F.replace(B,"<strong>"+q+"</strong>"))
})
}function v(){var A=w.resizeManager;
j(h.filter).val(q);
j(h.searchbarButton).attr("disabled","disabled");
A.on(A.events.RESIZE,u,window);
if(r.length>0){p()
}if(w.isTouch){g.find(h.genericTeaser).removeClass(x.animate)
}s()
}j(v);
return{}
})(jQuery,fom.utils,fom.modules.premiumOverlay,fom.modules.responsiveElements);
fom.components.subscribecta=(function(b,h,f,g,c){var d=b(".subscribe-cta");
function e(k){g.setPrice(k.currency)
}function j(){h.on("change",e)
}function a(){}if(d.length){c.ready({onSuccess:j,onFail:a});
if(f.isLoggedIn){d.find(".js-hide-if-loggedin").hide();
if(f.isPremium){d.find(".js-hide-if-subscribed").hide()
}}else{d.find(".sign-in").on("click",function(k){k.preventDefault();
f.login();
return false
})
}}})(jQuery,fom.components.countryDropdown,fom.modules.user,fom.modules.autosetprice,fom.modules.csg);
fom.components.signupoffering=(function(e,h,d){var a=e(".sign-up-offerings");
var c=e(".signed-out a:eq(1)");
var b=e(".site-header").attr("data-upsellPage");
if(a.length){g();
f()
}function g(){if(h.isLoggedIn){a.find(".js-hide-if-loggedin").hide();
if(h.isPremium){a.find(".js-hide-if-subscribed").hide()
}else{if(b){a.find(".js-hide-if-subscribed.js-monthly").attr("href",b+"#monthly");
a.find(".js-hide-if-subscribed.js-annualy").attr("href",b+"#annually")
}}}}function f(){if(d.queryString!=undefined&&d.queryString.get("resource")!=null){var o=decodeURIComponent(d.queryString.get("resource"));
if(h.isLoggedIn){setTimeout(function(){o=o.replace("/content/fom-website","");
window.location=o
},800)
}else{var n=a.find(".js-hide-if-loggedin").attr("href"),k=a.find(".js-hide-if-subscribed.js-monthly").attr("href"),j=a.find(".js-hide-if-subscribed.js-annualy").attr("href"),m=c.attr("href");
a.find(".js-hide-if-loggedin").attr("href",n+"#r="+o);
a.find(".js-hide-if-subscribed.js-monthly").attr("href",k+"#r="+o);
a.find(".js-hide-if-subscribed.js-annualy").attr("href",j+"#r="+o);
c.attr("href",m+"?resource="+o)
}}}})(jQuery,fom.modules.user,fom.utils);
fom.components.featureCategory1=(function(b,d){var a=b(".features.free-feature");
if(a.length){c()
}function c(){if(d.isLoggedIn){a.find(".js-hide-if-loggedin").hide()
}}})(jQuery,fom.modules.user);
fom.components.feature_category_2=(function(c,e){var a=c(".premium-feature");
var b=c(".site-header").attr("data-upsellPage");
if(a.length){d()
}function d(){if(e.isLoggedIn){if(e.isPremium){a.find(".js-hide-if-subscribed").hide()
}else{if(b){a.find(".js-hide-if-subscribed.js-monthly").attr("href",b+"#monthly");
a.find(".js-hide-if-subscribed.js-annualy").attr("href",b+"#annually")
}}}}})(jQuery,fom.modules.user);
(function(b,a,d){var c=function(f,e){this.$el=b(f);
this.$slides=this.$el.find(".swiper-slide");
this.options=b.extend(true,this.defaultOptions(),e);
this.setSwiperNode().setSwiperNav();
this.init()
};
c.prototype={defaultOptions:function(){return{swiper:{loop:true,setWrapperSize:true,onSlideChangeEnd:b.proxy(this._onSlideChange,this),slideClass:"swiper-slide"},containerSelector:".swiper-nudge-container",navSelector:".swipe-nav",navItemSelector:".nav-item",nextPrevSelector:".nudge",navActiveItem:"active",nextClassName:"next",prevClassName:"prev",revealOnHover:true}
},initLivePromo:function(){var f=this.$el.find(".slide-livepromo"),g=fom.components.liveCommentary,e={},h;
if(this.options.blogId&&f.length){if(this.options.feedUrl){e.feedUrl=this.options.feedUrl
}h=new g.DeltatreService(this.options.blogId,e);
this.promoSlide=new g.HomepageSlide(f,h)
}},initYoutubeVideo:function(){var f=this.$el.find(".slide-youtube-video-embed"),e=fom.components.youtubeCarouselSlide;
if(f.length){this.youtubeSlide=new e.YoutubePopup(f)
}},setSwiperNode:function(){this.$swiperContainer=this.$el.find(this.options.containerSelector);
if(!this.$swiperContainer.length){this.$swiperContainer=this.$el
}return this
},setSwiperNav:function(){this.$nav=this.$el.find(this.options.navSelector);
this.$navItems=this.$nav.find(this.options.navItemSelector);
this.$nav.on("click","a",b.proxy(this._onNavClick,this));
this.setActiveNavItem(this.$navItems.first());
if(this.options.revealOnHover&&!fom.utils.isTouch&&!this.isSingle()){this.$el.find(this.options.nextPrevSelector).on("focus blur mouseenter mouseleave",b.proxy(this._onNextPrevHover,this))
}return this
},goToIndex:function(e){this.swiper.slideTo(e+1);
return this
},setActiveNavItem:function(e){this.$navItems.removeClass(this.options.navActiveItem);
e.addClass(this.options.navActiveItem);
return this
},setupVideo:function(){var e={};
var g=b(".swiper-slide",this.$el);
var f=b("video:visible",g);
if(f.length){f.each(function(){this.pause()
})
}e=b("video:visible",g.filter(".swiper-slide-active")).get(0);
if(e){e.play()
}},setupRaceCountdown:function(){var e=b(".swiper-slide",this.$el);
e.filter(".swiper-slide-duplicate").filter(":not('.swiper-slide-countdown-initialised')").each(function(){var f=b(this);
f.find(".countdown-container").each(function(){d.initOnEl(this);
f.addClass("swiper-slide-countdown-initialised")
})
})
},init:function(){if(!this.isSingle()&&!fom.utils.isEditMode){this.swiper=new Swiper(this.$swiperContainer.get(0),this.options.swiper)
}if(this.isLivePromo()){this.initLivePromo()
}else{this.setupVideo();
this.setupRaceCountdown();
this.initYoutubeVideo()
}return this
},isLivePromo:function(){return this.isSingle()&&this.$slides.find(".slide-livepromo").length===1
},isYoutubeVideo:function(){return this.isSingle()&&this.$slides.find(".slide-youtube-video-embed").length===1
},isSingle:function(){return this.$slides.length===1
},_onNavClick:function(f){var g=b(f.currentTarget),e=this.$navItems.index(g);
this.setActiveNavItem(g).goToIndex(e);
this.swiper.stopAutoplay();
f.preventDefault()
},_onSlideChange:function(e){if(!this.swiper){return
}var f=this.$navItems.eq(this.swiper.realIndex);
this.setActiveNavItem(f);
this.setupVideo();
this.setupRaceCountdown()
},_onNextPrevHover:function(g){var f=b(g.currentTarget),e=g.type==="mouseenter"||g.type==="focus",h;
clearTimeout(this._nudgeTimer);
if(e){h=f.hasClass(this.options.nextClassName)?"Next":"Prev";
f.not(".clickadded").on("click",b.proxy(function(k){var j="slide"+h;
this.swiper[j]();
this.swiper.stopAutoplay()
},this)).addClass("clickadded")
}else{f.off("click").removeClass("clickadded")
}this._nudgeTimer=setTimeout(b.proxy(function(){this.$swiperContainer.removeClass("nudge-prev nudge-next");
if(e){this.$swiperContainer.addClass("nudge-"+h.toLowerCase())
}},this),150)
}};
fom.components.carousel={create:function(f,e){return new c(f,e)
}};
b(function(){var e=b(".carousel");
if(e.length){e.each(function(j,k){var h=b(k),o=h.find(".swiper-slide"),n=(o.length===1),m=h.data(),g={blogId:m.blogId,feedUrl:m.feedUrl},f=+m.slideTimeout;
if(f&&!n){g.swiper={autoplay:f,autoplayDisableOnInteraction:true}
}fom.components.carousel.create(k,g)
})
}})
}(jQuery,fom.utils.resizeManager,fom.components.raceCountdown));
(function(c,b,a){var d=function(f,e){this.$el=c(f);
this.$slides=this.$el.find(".swiper-slide");
this.options=c.extend(true,this.defaultOptions(),e);
this.setSwiperNode().setSwiperNav();
this.init()
};
d.prototype={defaultOptions:function(){return{swiper:{loop:true,setWrapperSize:true,onSlideChangeEnd:c.proxy(this._onSlideChange,this),slideClass:"swiper-slide",autoplayDisableOnInteraction:false},containerSelector:".device-screen",navSelector:".swiper-pagination",navItemSelector:".nav-item",navActiveItem:"active",nextClassName:"next",prevClassName:"prev",revealOnHover:true,progressbartimer:null}
},setSwiperNode:function(){this.$swiperContainer=this.$el.find(this.options.containerSelector);
if(!this.$swiperContainer.length){this.$swiperContainer=this.$el
}return this
},setSwiperNav:function(){this.$nav=this.$el.find(this.options.navSelector);
this.$navItems=this.$nav.find(this.options.navItemSelector);
this.$nav.on("click","a",c.proxy(this._onNavClick,this));
this.setActiveNavItem(this.$navItems.first());
return this
},goToIndex:function(e){this.swiper.slideTo(e+1,0,true);
return this
},setActiveNavItem:function(g){var e=this;
e.$navItems.removeClass(e.options.navActiveItem);
g.addClass(e.options.navActiveItem);
var f=0;
clearInterval(e.options.progressbartimer);
c(this.$navItems).find(".progress").width(0+"%");
e.options.progressbartimer=setInterval(h,50);
function h(){if(f>=100){clearInterval(e.options.progressbartimer)
}else{f++;
c(g).find(".progress").width(f+"%")
}}return e
},init:function(){if(!this.isSingle()&&!fom.utils.isEditMode){this.swiper=new Swiper(this.$swiperContainer.get(0),this.options.swiper)
}return this
},isSingle:function(){return this.$slides.length===1
},_onNavClick:function(f){var g=c(f.currentTarget),e=this.$navItems.index(g);
this.goToIndex(e);
this.swiper.stopAutoplay();
f.preventDefault()
},_onSlideChange:function(e){if(!this.swiper){return
}var f=this.$navItems.eq(this.swiper.realIndex);
this.setActiveNavItem(f)
}};
fom.components.carouselfeature={create:function(f,e){return new d(f,e)
}};
c(function(){var e=c(".swiper-container-feature");
if(e.length){e.each(function(j,k){var h=c(k),o=h.find(".swiper-slide"),n=(o.length===1),m=h.data(),g={blogId:m.blogId,feedUrl:m.feedUrl},f=+m.slideTimeout;
if(f&&!n){g.swiper={autoplay:f,autoplayDisableOnInteraction:false}
}fom.components.carouselfeature.create(k,g)
})
}})
}(jQuery,fom.utils.resizeManager,fom.components.carousel));
(function(f,d){var e=".share-component",a=".share-trigger",c=".share-options",g={name:"shareWindow",width:550,height:400,resizable:1,status:1},b="width="+g.width+",height="+g.height+",resizable="+g.resizable+",status="+g.status;
$shareComps=f(e),init=function(){$shareComps.each(function(){var m=f(this),j=m.find(a),h=m.find(c),k=h.find("a");
j.on("click",function(n){n.preventDefault();
m.toggleClass("open")
});
k.on("click",function(o){var n=f(this).attr("href");
o.preventDefault();
o.stopPropagation();
d.open(n,g.name,b)
})
})
};
init()
})(jQuery,window);
fom.components.autoreload=(function(f,h){var j={SYNC_CONTENT_FLAG:".enable-auto-refersh",SYNC_CONTENT_INTERVAL:".auto-refresh-interval"},c="",b=0,e="cq_lastModified",d=60000,g=null,a={init:function(){if(!this.cacheElements()){return this
}if(!h.isEditMode){this.initView()
}return this
},getMetadataForPage:function(){var k=this;
c=window.location.href.replace(/\.?\d*.html/g,".ts.html");
f.ajax({url:c}).success(function(m){if(m){k.metadataReceived(JSON.parse(m))
}}).fail(function(){window.location.reload()
})
},metadataReceived:function(m){var k=parseInt(m[e]);
if(b&&b<k){this.reload(k)
}else{if(!b){b=k
}}},getNewUrl:function(k){b=k;
return window.location.href.replace(/\.?\d*.html/g,"."+b+".html")
},reload:function(k){if(g){clearInterval(g)
}window.location=this.getNewUrl(k)
},cacheElements:function(){var m=f(j.SYNC_CONTENT_FLAG),n=f(j.SYNC_CONTENT_INTERVAL),k=n.length&&n.val()?parseInt(n.val()):60;
if(!m.length||!n.length){return false
}d=parseInt(k)*1000;
if(d<60000){d=60000
}return true
},initView:function(){var k=this;
b=window.location.href.match(/\.?\d*.html/g)[0].replace(".html","").replace(".","");
if(!b){b=0;
k.getMetadataForPage()
}else{b=parseInt(b)
}g=setInterval(function(){k.getMetadataForPage()
},d)
}};
return a.init()
})(jQuery,fom.utils);
fom.components.monterosaVoting=(function(e,d,f){var b={HOLDER:".monterosa-voting",URL:"#js-dod-iframe",IFRAME:"iframe:first"},a={USERID:"?guid="},c={init:function(){if(this.cacheElements()){this.setSourceForIframe()
}return this
},cacheElements:function(){var g=e(b.HOLDER);
if(g.length<=0||d.isEditMode){return false
}return this._elements={$holder:g,$url:g.find(b.URL),$iframe:g.find(b.IFRAME)}
},setSourceForIframe:function(){var h=this._elements.$url.val(),g=f.isLoggedIn?f.accountInfo.profile.SubscriberId:0;
this._elements.$iframe.attr("src",h+a.USERID+g)
}};
return c.init()
})(jQuery,fom.utils,fom.modules.user);
(function(b,a){if(b(".template-video-item").length){a.initPlayers(b(".ooyalaplayer"))
}})(jQuery,fom.modules.videoPlayer);
(function(e,j,d,f){var n=d(".last-race-wrapper"),a=d(".next-race-wrapper"),c=a.find(".info"),k=d(".template-home").length,h=c.find(".links").length,b=100,g=["one","two","three","four"][h-1]||"one",m=function(){var o=n.outerHeight(),p=a.outerHeight();
if(o<p){n.css({height:p+"px"})
}else{if(o>p){a.css({height:o+"px"})
}}};
if(n.length&&a.length&&k){if(!j.hasFlexbox){d(e).on("load",function(){m();
m=j.debounce(m,b);
f.on(f.events.RESIZE,m)
})
}else{c.addClass(g+"-links")
}}}(window,fom.utils,jQuery,fom.utils.resizeManager));
fom.templates=fom.templates||{};
fom.templates.accountmanagement=(function(c,b,f,e){var a={TEMPLATE:".account-details-registered",TITLE:".page-title-premium",NAME:".name",PREVIEW_MODE:"#previewMode",EXPIRED_SUBSCRIPTION:".expired-subscription",CANCEL_SUCCESS:".cancel-success",VOUCHER_FREEMIUM_SUCCESS:".voucher-freemium-success",VOUCHER_PREMIUM_SUCCESS:".voucher-premium-success",UPDATE_SUCCESS:".update-success",UPGRADE_SUCCESS:".upgrade-success"},d={init:function(){if(!this.cacheElements()){return this
}if(f.isLoggedIn||b.isEditMode||this.isPreviewMode){this.initView()
}else{if(!b.isStaticServer){this.redirectToHome()
}}return this
},redirectToHome:function(){window.location=b.homeUrl
},cacheElements:function(){var g=c(a.TEMPLATE),h=g.find(a.TITLE),j=c(a.PREVIEW_MODE);
if(!g.length){return false
}this.isPreviewMode=j.length>0;
return this._elements={$template:g,$title:h,$cancelSuccess:g.find(a.CANCEL_SUCCESS),$updateSuccess:g.find(a.UPDATE_SUCCESS),$freeVoucherSuccess:g.find(a.VOUCHER_FREEMIUM_SUCCESS),$paidVoucherSuccess:g.find(a.VOUCHER_PREMIUM_SUCCESS),$name:h.find(a.NAME),$expiredSubscription:g.find(a.EXPIRED_SUBSCRIPTION),$upgradeSuccess:g.find(a.UPGRADE_SUCCESS)}
},reset:function(){if(!this.isPreviewMode){fom.components.accountmanagement.form.initFormView();
this.setPasswordChanged(false);
this.setVoucherError(false)
}},setPasswordChanged:function(g){fom.components.accountmanagement.form.setPasswordChanged(g)
},setVoucherError:function(g){fom.components.accountmanagement.form.setVoucherError(g)
},setBillingValidations:function(g){if(g){fom.components.accountmanagement.form.activateBillingValidations()
}else{fom.components.accountmanagement.form.deactivateBillingValidations()
}},initView:function(){var m=window.location.hash?window.location.hash.replace("#",""):"";
var h="",g=this;
c(".tab--link").on("click",function(p){p.preventDefault();
c(".tab--content").hide();
var o=c(this).attr("rel"),n="."+c(this).attr("rel");
c(n).show();
if(c(n).hasClass("hide-profile-preview")){c(".profile-preview").hide()
}else{c(".profile-preview").show()
}g.reset();
g.setBillingValidations(false);
c(".billing-edit .btn-cancel").trigger("click");
g.setPasswordChanged(o==="change-password")
});
c(".btn-edit").on("click",function(n){n.preventDefault();
c(this).parent().toggleClass("active");
g.setBillingValidations(false);
g.reset()
});
c("#edit").on("click",function(n){n.preventDefault();
c(".tab--content").hide();
c(".profile-preview").show();
c(".billing-preview").hide();
c(".billing-edit").show();
c(this).hide();
g.reset();
g.setBillingValidations(true)
});
c(".btn-cancel").on("click",function(n){n.preventDefault();
c(this).closest(".tab--content").hide();
c(".profile-preview").show();
c("#edit").show();
g.reset()
});
c(".billing-edit .btn-cancel").on("click",function(n){n.preventDefault();
c(this).closest(".billing-edit").hide();
c(".billing-preview").show();
g.setBillingValidations(false)
});
c("#form-input-reveal-password").on("change",function(){if(c(this).is(":checked")){c("#form-input-password").attr("type","text");
c("#form-input-password-new").attr("type","text")
}else{c("#form-input-password").attr("type","password");
c("#form-input-password-new").attr("type","password")
}});
fom.components.accountmanagement.form.init();
if(!g.isPreviewMode){this._elements.$name.text(f.get("fullName"));
h=f.accountInfo.data.subscriptionStatus
}else{fom.components.accountmanagement.form.activatePage()
}var k=localStorage.getItem("userSubscriptionStatus");
var j=b.localStorage.getItem("accountManagementMessage");
this._elements.$updateSuccess.addClass("hide");
this._elements.$cancelSuccess.addClass("hide");
this._elements.$expiredSubscription.addClass("hide");
this._elements.$upgradeSuccess.addClass("hide");
this._elements.$paidVoucherSuccess.addClass("hide");
this._elements.$freeVoucherSuccess.addClass("hide");
this._elements.$expiredSubscription.addClass("hide");
if(f.isPremium&&k&&k!=h&&j!="cancelSuccess"){this._elements.$cancelSuccess.addClass("hide");
this._elements.$expiredSubscription.addClass("hide");
this._elements.$updateSuccess.addClass("hide");
this._elements.$upgradeSuccess.removeClass("hide");
this._elements.$paidVoucherSuccess.addClass("hide");
this._elements.$freeVoucherSuccess.addClass("hide")
}else{switch(j){case"cancelSuccess":this._elements.$cancelSuccess.removeClass("hide");
this._elements.$expiredSubscription.addClass("hide");
break;
case"updateSuccess":this._elements.$updateSuccess.removeClass("hide");
break;
case"paidVoucherSuccess":this._elements.$paidVoucherSuccess.removeClass("hide");
break;
case"freeVoucherSuccess":this._elements.$freeVoucherSuccess.removeClass("hide");
break
}}b.localStorage.removeItem("accountManagementMessage");
b.localStorage.removeItem("userSubscriptionStatus");
if(m){g.setVoucherError(m);
c(".tab--content").hide();
c(".voucher").show();
c(".profile-preview").show()
}}};
return d.init()
})(jQuery,fom.utils,fom.modules.user,fom.components.accountmanagement);
(function(c,d,b,f){var a={TEMPLATE:".template-registration"},e={init:function(){if(!this.cacheElements()){return false
}if(f.isLoggedIn&&!b.isEditMode){this.redirectToAccountManagement()
}else{this.initForm()
}return this
},redirectToAccountManagement:function(){window.location=c(".js-account-management").first().attr("href")||b.homeUrl
},cacheElements:function(){var g=c(a.TEMPLATE);
if(!g.length){return false
}return this._elements={$template:g}
},initForm:function(){d.form.activate()
}};
e.init()
})(jQuery,fom.components.registrationform,fom.utils,fom.modules.user);
(function(c,d,b,f){var a={TEMPLATE:".template-subscribe-fullaccess",UPSELL:"#is-upsell-journey"},e={init:function(){if(!this.cacheElements()){return false
}if(f.isLoggedIn&&!b.isEditMode&&!b.isStaticServer&&!this._elements.$upsell.length){this.redirectToAccountManagement()
}else{if(!f.isLoggedIn&&!b.isStaticServer&&this._elements.$upsell.length){this.redirectToHome()
}else{this.initForm()
}}return this
},redirectToAccountManagement:function(){window.location=c(".js-account-management").first().attr("href")||b.homeUrl
},redirectToHome:function(){window.location=b.homeUrl
},cacheElements:function(){var g=c(a.TEMPLATE);
if(!g.length){return false
}return this._elements={$template:g,$upsell:g.find(a.UPSELL)}
},initForm:function(){d.subscribestep1form.activate();
d.subscribestep2form.activate()
}};
e.init()
})(jQuery,fom.components.registrationform,fom.utils,fom.modules.user);
fom.templates||(fom.templates={});
fom.templates.resultsarchive=(function(c,a,e,d){var f={};
var b=true;
f.selectors={templateWrapper:".ResultArchiveWrapper",templateContainer:".ResultArchiveContainer",sectionTitle:".ResultsArchiveTitle",filter:".ResultFilterScrollable",form:".ResultsArchiveForm",filterTrigger:".FilterTrigger",tableLinkTrigger:".ArchiveLink",scrollUpTrigger:".ScrollUpTrigger",scrollDownTrigger:".ScrollDownTrigger",activeClass:"active",selectedClass:"selected",loadingClass:"loading"};
f.config={animationTime:500,ajaxAllowed:!!c.history.pushState};
f.init=function(){var g=this;
g.alignFilters(true);
g.attachFilterSelectionHandlers(g);
g.attachLinksHandlers(g);
g.attachFilterScrollHandlers(g);
d.on(d.events.CHANGE,g.alignFilters,g);
return g
};
f.attachFilterSelectionHandlers=function(g){e(g.selectors.form).find("select").on("change",function(j){var h=e(j.currentTarget);
g.updateContent(h.attr("name"),h.val())
});
e(g.selectors.filterTrigger).on("click",function(j){j.preventDefault();
var h=e(j.currentTarget);
if(h.hasClass(g.selectors.selectedClass)){return
}var k=h.parent().parent();
k.find("."+g.selectors.selectedClass).removeClass(g.selectors.selectedClass);
h.addClass(g.selectors.selectedClass);
g.alignFilters();
g.updateContent(h.data("name"),h.data("value"))
})
};
f.attachBrowserBackForwardhandlers=function(g){if(e(".ResultArchiveWrapper").length>0&&b){b=false;
e(c).bind("popstate",function(n){if(e("body").hasClass("historypushed")){var m=e(g.selectors.templateWrapper),j=e(g.selectors.form,m),p=(new Date).getTime(),k=location.href.split("/results.html");
if(k[1]==null||k[1]==""){return
}var h=j.data("ajax-path")+k[1],q=g.config.animationTime-((new Date).getTime()-p);
if(g.config.ajaxAllowed){e.ajax({type:"GET",url:h,beforeSend:function(){m.addClass(g.selectors.loadingClass)
}}).success(function(r){c.setTimeout(function(){e(g.selectors.templateContainer,m).html(r);
if(e(".race-header-sponsor a").length>0){e(".race-header-sponsor a").attr("target","_blank")
}g.changePageTitle(m);
g.init();
m.removeClass(g.selectors.loadingClass)
},q<0?0:q)
}).fail(function(){var r=g.getURL(g.getFilterParams(j),"action");
c.location.href=r
})
}else{var o=g.getURL(g.getFilterParams(j),"action");
c.location.href=o
}}})
}};
f.attachLinksHandlers=function(g){var h=e(g.selectors.templateWrapper);
e(g.selectors.tableLinkTrigger,h).on("click",function(n){var j=e(n.currentTarget),k=j.attr("href"),m=j.data("ajax-url");
n.preventDefault();
if(j.hasClass(g.selectors.selectedClass)){return
}h.addClass(g.selectors.loadingClass);
if(g.config.ajaxAllowed){e.ajax({url:m}).success(function(o){g.updateContentAjaxHandler(o,(new Date).getTime())
}).fail(function(){c.location.href=k
})
}else{c.location.href=k
}})
};
f.attachFilterScrollHandlers=function(g){e(g.selectors.scrollUpTrigger+","+g.selectors.scrollDownTrigger).on("click",function(j){j.preventDefault();
var h=e(j.currentTarget),k=h.is(g.selectors.scrollUpTrigger)?"up":"down";
if(h.hasClass(g.selectors.activeClass)){g.scrollFilter(h.parent().parent(),k)
}});
e(g.selectors.filter).each(function(h,j){j.addEventListener("mousewheel",g.mouseWheelHandler());
j.addEventListener("DOMMouseScroll",g.mouseWheelHandler())
})
};
f.mouseWheelHandler=function(){var g=this;
return function(h){h.preventDefault();
var j=e(h.currentTarget).parent(),k=Math.max(-1,Math.min(1,(h.wheelDelta||-h.detail)));
k<0?g.scrollFilter(j,"down"):g.scrollFilter(j,"up")
}
};
f.updateContent=function(g,o){var j=this,k=e(j.selectors.templateWrapper),h=e(j.selectors.form,k),n=(new Date).getTime();
h.find("[name="+g+"]").val(o);
k.addClass(j.selectors.loadingClass);
if(j.config.ajaxAllowed){e.ajax({type:"GET",url:j.getURL(j.getFilterParams(h),"ajax")}).success(function(p){j.updateContentAjaxHandler(p,n)
}).fail(function(){var p=j.getURL(j.getFilterParams(h),"action");
c.location.href=p
})
}else{var m=j.getURL(j.getFilterParams(h),"action");
c.location.href=m
}};
f.updateContentAjaxHandler=function(k,j){var g=this,h=e(g.selectors.templateWrapper),m=g.config.animationTime-((new Date).getTime()-j);
c.setTimeout(function(){e(g.selectors.templateContainer,h).html(k);
if(e(".race-header-sponsor a").length>0){e(".race-header-sponsor a").attr("target","_blank")
}g.changePageTitle(h);
g.init();
h.removeClass(g.selectors.loadingClass);
var n=e(g.selectors.form,h),o=g.getFilterParams(e(g.selectors.form,h));
c.history.pushState(o,"",g.getURL(o,"action"));
e("body").addClass("historypushed");
g.attachBrowserBackForwardhandlers(g)
},m<0?0:m)
};
f.getFilterParams=function(h){var g=h.find("select"),j={};
e.each(g,function(k,m){if(e(m).val()===""){return false
}j[e(m).attr("name")]=e(m).val()
});
return j
};
f.getURL=function(o,p){var k=this,m=e(k.selectors.templateWrapper),j=e(k.selectors.form,m),h;
if(p==="ajax"){h=j.data("ajax-path")
}if(p==="action"){h=j.attr("action")
}var g=e.map(o,function(r,q){return q
}).length;
var n=0;
e.each(o,function(r,q){n=n+1;
if(n===g){(q==="all"||q==="")?h+=".html":h+="/"+q+".html"
}else{h+="/"+q
}});
return h
};
f.scrollFilter=function(k,p){var r=this,o=k.children().first(),m=e(r.selectors.scrollUpTrigger,k),h=e(r.selectors.scrollDownTrigger,k),g=o.outerHeight()-k.innerHeight(),q=o.children().first().innerHeight()*3,n=o.position().top,j;
if(g<=0){return
}if(p==="up"){h.addClass(r.selectors.activeClass);
j=n+q;
if(j>=0){j=0;
m.removeClass(r.selectors.activeClass)
}}else{m.addClass(r.selectors.activeClass);
j=n-q;
if(j<=-(g)){j=-(g);
h.removeClass(r.selectors.activeClass)
}}o.css({top:j+"px"})
};
f.alignFilters=function(h){var g=this;
e.each(e(g.selectors.filter),function(q,o){var s=e(o),p=s.parent(),n=p.innerHeight(),k=s.find("."+g.selectors.selectedClass).parent(),m=-(s.outerHeight()-n),r=-(k.position().top-(n/2-k.innerHeight()/2)),j=p.find(g.selectors.scrollUpTrigger),t=p.find(g.selectors.scrollDownTrigger);
if(r>=0){r=0;
j.removeClass(g.selectors.activeClass);
t.addClass(g.selectors.activeClass)
}else{j.addClass(g.selectors.activeClass);
if(r<=m){r=m;
t.removeClass(g.selectors.activeClass)
}else{t.addClass(g.selectors.activeClass)
}}if(s.outerHeight()<=p.innerHeight()){j.removeClass(g.selectors.activeClass);
t.removeClass(g.selectors.activeClass);
s.css({top:"0px"})
}else{s.css({top:r+"px"})
}if(h){setTimeout(function(){s.css({transition:"top 0.5s"})
},10)
}})
};
f.changePageTitle=function(g){a.title=e(this.selectors.sectionTitle,g).text()
};
return f.init()
})(window,document,jQuery,fom.utils.resizeManager);
(function(c,d){var a={TEMPLATE:".user-authenticated"},b={init:function(){if(!this.cacheElements()){return false
}if(!d.isLoggedIn){d.login(true,{hideCloseIcon:true});
return this
}},cacheElements:function(){var e=c(a.TEMPLATE);
if(!e.length){return false
}return this._elements={$template:e}
}};
c(window).load(function(){b.init()
})
})(jQuery,fom.modules.user);
(function(d,c){var b={TEMPLATE:".email-validation-error",RESEND_COOKIE:"resend-email-info",IS_AUTHOR_MODE:"#is-author-mode"},a={init:function(){if(!this.cacheElements()){return false
}else{if(d(b.IS_AUTHOR_MODE).length){return false
}}if(!d.cookie(b.RESEND_COOKIE)&&!c.isStaticServer){window.location=c.homeUrl
}},cacheElements:function(){var e=d(b.TEMPLATE);
if(!e.length){return false
}return this._elements={$template:e}
}};
d(window).load(function(){a.init()
})
})(jQuery,fom.utils);
fom.templates||(fom.templates={});
fom.templates.propositionPage=(function(c,a,d,b){var e={};
e.selectors={templateWrapper:".proposition-page",templateTVAccess:".proposition-tv-access",templateTVPro:".proposition-tv-pro",templateTVFreeRegistration:".proposition-no-pro-no-access",NavItem:".proposition-nav-language li",SynUrlFragment:".sync-url-fragment",SynTvUrlFragment:".sync-tv-url-fragment",countryDropdown:".proposition-page .form-input--select",accessPricing:".access-prices",proPricing:".pro-prices",monthly:".monthly",yearly:".yearly",subscribeLink:".subscribe-link",subscribeNote:".subscribe-note",btnPricing:".btn-pricing",f1Countries:"#f1-countries",accessPageRedirectURL:".js-tv-acces-page-url",freeRegistrationPageRedirectURL:".js-free-registration-page-url",modalRegister:"#modal-register-body",modalAccess:"#modal-access-body",modalTitle:"#modal-title",discountAvailble:".js-discount-available",tvProDiscountAnnual:".js-tv-pro-discount-annual",tvProDiscountMonthly:".js-tv-pro-discount-monthly",tvAccessDiscountAnnual:".js-tv-access-discount-annual",tvAccessDiscountMonthly:".js-tv-access-discount-monthly",offerPricing:".offer-pricing",discountRatePromo:".discount-rate-promo",activeClass:"active",selectedClass:"selected",loadingClass:"loading"};
e.config={locale:"en",country:"",language:"en-US",localeMapping:{en:"en-US",fr:"fr-FR",de:"de-DE",es:"es-ES"},i18nMapping:{en:"languages.english",fr:"languages.french",de:"languages.dutch",es:"languages.espanol"},f1countries:{},f1UniqueCountries:[],isPro:(d(e.selectors.templateTVPro).length>0)?true:false,isAccess:(d(e.selectors.templateTVAccess).length>0)?true:false,isFreeRegistration:(d(e.selectors.templateTVFreeRegistration).length>0)?true:false,isDiscountAvailble:(d(e.selectors.discountAvailble).val()==="true")?true:false,productTVAccess:"F1 TV Access",productTVPro:"F1 TV Pro",productTVFreeRegistration:"F1 TV Free Registration",modal:false,redirectionTime:3000};
e.init=function(){var f=this;
if(!d(f.selectors.templateWrapper).length){return false
}f.bindEvent();
f.setConfig();
f.updateContent();
f.setActiveNav();
return f
};
e.setActiveNav=function(){var g=this,f=d.grep(d(g.selectors.NavItem),function(j,h){if(d("a",j).data("i18n")===g.config.i18nMapping[g.config.locale]){d(j).addClass("active")
}})
};
e.bindEvent=function(){var g=this,h=c.location.search.substring(1);
d.getJSON(d(g.selectors.f1Countries).val(),function(k){g.config.f1countries=k;
g.config.f1UniqueCountries=d.unique(k.map(function(m){return m.Country
}))
});
if(h.length){var j=c.location.hash.split("/"),f=location.protocol+"//"+location.host+location.pathname+j.join("/");
c.history.pushState({},a.title,f)
}d("a",g.selectors.NavItem).on("click touchend",function(m){m.preventDefault();
var n=d(this).attr("href").split("#")[1],k=c.location.hash.split("/");
k[0]="#"+n;
c.location.href=c.location.pathname+k.join("/");
c.location.reload();
if(zE){zE(function(){zE.setLocale(n)
})
}});
d(g.selectors.countryDropdown).on("onchange change",function(){if(d(this).find(":selected").val()!=="default"){if(d.isEmptyObject(g.config.f1countries)){var k=setInterval(function(){if(!d.isEmptyObject(g.config.f1countries)){g.setPrice();
clearInterval(k);
k=false
}},1200)
}else{g.setPrice()
}}else{d(".invalid-country").addClass("hide");
d(".price-not-fetch").removeClass("price-is-fetch")
}});
if("onhashchange" in c){c.onhashchange=function(){c.location.reload()
}
}};
e.redirectModal=function(j,h,f){if(!j){return
}var g=this;
g.config.modal=b({content:h,header:f},[{url:j}],{xclose:{disable:true,callback:function(){}},messagetype:"info"});
g.config.modal.open();
c.setTimeout(function(){c.location=j
},g.config.redirectionTime)
};
e.updateContent=function(){var f=this;
if(c.jqueryI18next&&c.i18next&&c.i18nextXHRBackend){i18next.use(i18nextXHRBackend);
i18next.init({debug:false,lng:f.config.language,fallbackLng:"en-US",backend:{loadPath:"/etc/designs/fom-website/data/resources/{{lng}}.json"}},function(){jqueryI18next.init(i18next,d);
d("html").localize();
f.setDiscountBannerPrice();
if(i18next.languages&&typeof i18next.languages[1]!=="undefined"){if(zE){zE(function(){zE.setLocale(i18next.languages[1])
})
}}})
}f.updateURL();
if(f.config.country!==""){f.setCountry()
}};
e.updateURL=function(){var g=this;
var h=d(g.selectors.SynUrlFragment);
var f=d(g.selectors.SynTvUrlFragment);
h.each(function(){var j=d(this).attr("href");
if(j){var m=j.split("#"),k=m[1].split("/");
k[0]=m[0]+"#";
k[1]=g.config.locale;
d(this).attr("href",k.join("/"))
}});
f.each(function(){var k=d(this).attr("href");
if(k){var j=k.split("/");
j[j.length-2]=g.config.locale;
d(this).attr("href",j.join("/"))
}})
};
e.setCountry=function(){var f=this;
if(f.config.country!==""){d("option",f.selectors.countryDropdown).each(function(){if(d(this).data("iso3")===f.config.country){d(this).prop("selected",true).change()
}})
}};
e.formattedPrice=function(k){var h=k.Price.toString().split("."),j=h[0],f=h[1],g="";
if(k["Currency Symbol"]){g='<span class="c-symbol">'+k["Currency Symbol"]+"</span>"
}if(j){g+='<span class="digit">'+j+"</span>"
}if(f){g+='<span class="decimal">.'+f+"</span>"
}return g
};
e.discountAppliedPrice=function(o,p){var g=o.Price.toString(),f=p/100,h=(g-(g*f)).toFixed(2),k=h.split("."),m=k[0],j=k[1],n="";
if(o["Currency Symbol"]){n='<span class="c-symbol">'+o["Currency Symbol"]+"</span>"
}if(m){n+='<span class="digit">'+m+"</span>"
}if(j){n+='<span class="decimal">.'+j+"</span>"
}return n
};
e.removeProPricePlans=function(f){var h=this;
var j=[];
d.map(f,function(k){if(h.config.productTVPro===k.Product){j.push(k)
}});
if(j.length===1){var g=j[0].Period;
if(g==="Annual"){d(".pro-prices .monthly").addClass("hidden")
}else{d(".pro-prices .yearly").addClass("hidden")
}}else{d(".pro-prices .monthly").removeClass("hidden");
d(".pro-prices .yearly").removeClass("hidden")
}};
e.setPrice=function(){var g=this,m=d(g.selectors.countryDropdown).find(":selected"),o=g.itemWithKey(g.config.f1countries,"Country",d(m).val()),h=0,f=false,k=false;
g.removeProPricePlans(o);
for(h;
h<o.length;
h++){var n,j=g.formattedPrice(o[h]);
if(g.config.productTVPro===o[h].Product){f=true;
if("Monthly"===o[h].Period){if(g.config.isDiscountAvailble&&d(e.selectors.tvProDiscountMonthly).val()){n=g.discountAppliedPrice(o[h],d(e.selectors.tvProDiscountMonthly).val());
d(".pro-prices .monthly .price").html(n);
d(".pro-prices .monthly .old-price").html(j)
}else{d(".pro-prices .monthly .price").html(j);
d(".pro-prices .monthly .old-price").addClass("hidden")
}}if("Annual"===o[h].Period){if(g.config.isDiscountAvailble&&d(e.selectors.tvProDiscountAnnual).val()){n=g.discountAppliedPrice(o[h],d(e.selectors.tvProDiscountAnnual).val());
d(".pro-prices .yearly .price").html(n);
d(".pro-prices .yearly .old-price").html(j)
}else{d(".pro-prices .yearly .price").html(j);
d(".pro-prices .yearly .old-price").addClass("hidden")
}if(g.config.isPro&&d(".voucher-promo-banner").length&&d(e.selectors.tvProDiscountAnnual).val()){d(".voucher-promo-banner .old-price").html(j);
d(".voucher-promo-banner .new-price").html(n)
}}}if(g.config.productTVAccess===o[h].Product){k=true;
if("Monthly"===o[h].Period){if(g.config.isDiscountAvailble&&d(e.selectors.tvAccessDiscountMonthly).val()){n=g.discountAppliedPrice(o[h],d(e.selectors.tvAccessDiscountMonthly).val());
d(".access-prices .monthly .price").html(n);
d(".access-prices .monthly .old-price").html(j)
}else{d(".access-prices .monthly .price").html(j);
d(".access-prices .monthly .old-price").addClass("hidden")
}}if("Annual"===o[h].Period){if(g.config.isDiscountAvailble&&d(e.selectors.tvAccessDiscountAnnual).val()){n=g.discountAppliedPrice(o[h],d(e.selectors.tvAccessDiscountAnnual).val());
d(".access-prices .yearly .price").html(n);
d(".access-prices .yearly .old-price").html(j)
}else{d(".access-prices .yearly .price").html(j);
d(".access-prices .yearly .old-price").addClass("hidden")
}if(g.config.isAccess&&d(".voucher-promo-banner").length&&d(e.selectors.tvAccessDiscountAnnual).val()){d(".voucher-promo-banner .old-price").html(j);
d(".voucher-promo-banner .new-price").html(n)
}}}}if(!f&&!k){g.redirectModal(g.setPageRedirectURL(g.config.locale,d(e.selectors.freeRegistrationPageRedirectURL)),d(e.selectors.modalRegister).val(),d(e.selectors.modalTitle).val());
d(".invalid-country").removeClass("hide");
d(".price-not-fetch").removeClass("price-is-fetch")
}else{if(g.config.isPro&&!f){g.redirectModal(g.setPageRedirectURL(g.config.locale,d(e.selectors.accessPageRedirectURL)),d(e.selectors.modalAccess).val(),d(e.selectors.modalTitle).val());
d(".invalid-country").removeClass("hide");
d(".price-not-fetch").removeClass("price-is-fetch")
}else{d(".invalid-country").addClass("hide");
d(".price-not-fetch").addClass("price-is-fetch")
}}};
e.setPageRedirectURL=function(f,g){if(d.trim(g.val())!==""){var j=f?"#"+f:"#en",h=g.val()+j;
return h
}};
e.hidePrice=function(){var f=this
};
e.setConfig=function(){var f=this,h=c.location.hash.replace(/^#/,""),g=h.split("/");
f.config.locale=(g[0])?g[0]:"en";
f.config.language=(f.config.localeMapping[f.config.locale])?f.config.localeMapping[f.config.locale]:"en-US";
if(g[1]){f.config.country=(g[1].length===3)?g[1]:""
}};
e.setDiscountBannerPrice=function(){var f=this;
if(f.config.isPro&&d(e.selectors.discountRatePromo).length>0){d(e.selectors.discountRatePromo).text(d(e.selectors.tvProDiscountAnnual).val()+"%")
}if(f.config.isAccess&&d(e.selectors.discountRatePromo).length>0){d(e.selectors.discountRatePromo).text(d(e.selectors.tvAccessDiscountAnnual).val()+"%")
}};
e.itemWithKey=function(g,f,h){return g.filter(function(j){if(j.hasOwnProperty(f)){return j[f].toLowerCase()===h.toLowerCase()
}return false
})
};
return e.init()
})(window,document,jQuery,fom.modules.modal);
fom.utils.trackingExtended=(function(c,e,a,f){var d={};
var b={};
d.initialise=function(){var g=d.getTemplate();
switch(g){case"driverdetails":d.setPageType("driver");
d.setDriverTemplate();
break;
case"teamdetails":d.setPageType("team");
d.setTeamTemplate();
break;
case"racedetails":d.setPageType("track");
d.setTracktemplate();
break;
case"article":case"feature":case"informationfeature":case"informationtechnical":case"informationinterview":d.setPageType("content");
d.setContentTemplate();
break;
case"ooyala-video":d.setPageType("video");
d.setContentOoyalaTemplate();
break;
case"dashboard":d.setPageType("dashboard");
break;
case"homepage":d.setPageType("homepage");
break;
default:d.setPageType("other")
}d.setAllTemplate();
d.setproperty()
};
d.readCookie=function(h){var k=h+"=";
var g=document.cookie.split(";");
for(var j=0;
j<g.length;
j++){var m=g[j];
while(m.charAt(0)==" "){m=m.substring(1,m.length)
}if(m.indexOf(k)==0){return m.substring(k.length,m.length)
}}return null
};
d.createCookie=function(j,k,m){if(m){var h=new Date();
h.setTime(h.getTime()+(m*24*60*60*1000));
var g="; expires="+h.toGMTString()
}else{var g=""
}document.cookie=j+"="+k+g+"; path=/"
};
d.eraseCookie=function(g){d.createCookie(g,"",-1)
};
d.getAge=function(k,j,p){var n=new Date(),o=n.getFullYear(),g=n.getMonth(),m=n.getDate(),h=o-p;
if(g<(k-1)){h--
}if(((k-1)==g)&&(m<j)){h--
}return h
};
d.getTemplate=function(){var g=c("#gtm-template").val();
if(g!==""){return g
}else{return""
}};
d.setCid=function(){var k=d.readCookie("_ga"),h=".",m=2;
if(typeof k!=="undefined"&&k!==null){var j=k.split(h).slice(m),g=j.join(h);
b.cid=g
}};
d.setPageType=function(g){b.pageType=g;
b.userType=d.getUserType()
};
d.getUserType=function(){var m=c.cookie("account-info");
var n="freemium";
var k="premium";
var g="anonymous";
if(m){try{var h=JSON.parse(m);
if(h.data&&h.data.subscriptionStatus){if(h.data.subscriptionStatus=="active"){return k
}else{return n
}}else{return n
}}catch(j){console.error("Error parsing account info object : "+j);
return
}}else{return g
}};
d.setDriverTemplate=function(){d.setDriverNames();
d.setDriverTeams();
d.setDriverAge();
d.setDriverPoints();
d.setDriverCountry()
};
d.setTeamTemplate=function(){d.setTeamName();
d.setTeamFullName();
d.setDriverNames();
d.setTeamPolePosition();
d.setTeamPoints()
};
d.setTracktemplate=function(){d.setTrackCountry();
d.setTrackCity();
d.setTrackName()
};
d.setContentTemplate=function(){d.setContentPageType();
d.setVideoCount();
d.setWordCount();
d.setImageCount();
d.setPageTitle();
d.setContentTags();
d.setDatePublished();
d.setContentAge()
};
d.setContentOoyalaTemplate=function(){};
d.setAllTemplate=function(){d.setCid();
d.setUserObject();
d.setSocialSharing()
};
d.setDriverAge=function(){var g=c(".stats-list-component.driver-stats span.text");
if(g.length>0){g.each(function(){var m=c(this).text();
if(c.trim(m)==="Date of birth"){var j=c(this).parent().next().text();
var k=j.split("/");
var h=d.getAge(k[1],k[0],k[2]);
b.driverAge=h
}})
}else{b.driverAge=""
}};
d.setDriverCountry=function(){var g=c(".stats-list-component.driver-stats span.text");
if(g.length>0){g.each(function(){var j=c(this).text();
if(c.trim(j)==="Country"){var h=c(this).parent().next().text();
b.driverCountry=h
}})
}else{b.driverCountry=""
}};
d.setDriverNames=function(){var j=c("h1.driver-name");
var g=j.length;
var h="";
if(g){j.each(function(k){var m=c(this).text();
if((g-1)!==k){h+=c.trim(m)+"|"
}else{h+=c.trim(m)
}})
}b.driverNames=h
};
d.setDriverPoints=function(){var g=c(".stats-list-component.driver-stats span.text");
if(g.length>0){g.each(function(){var j=c(this).text();
if(c.trim(j)==="Points"){var h=c(this).parent().next().text();
b.driverPoints=h
}})
}else{b.driverPoints=""
}};
d.setDriverTeams=function(){var h=c("p.driver-team span");
var j=h.length;
var k="";
if(j>0){h.each(function(m){var n=c(this).text();
if((j-1)!==m){k+=c.trim(n)+"|"
}else{k+=c.trim(n)
}});
b.driverTeam=k
}else{var g=c(".stats-list-component.driver-stats span.text");
if(g.length>0){g.each(function(){var n=c(this).text();
if(c.trim(n)==="Team"){var m=c(this).parent().next().text();
b.driverTeam=c.trim(m)
}})
}else{b.driverTeam=""
}}};
d.setTeamNames=function(){var g=c(".teamteaser-details .teamteaser-title");
var h=g.length;
var j="";
if(h>0){g.each(function(k){var m=c(this).text();
if((h-1)!==k){j+=c.trim(m)+"|"
}else{j+=c.trim(m)
}});
b.teamFullNames=j
}else{}};
d.setTeamName=function(){var g=c("h1.headline").text();
var h=c.trim(g);
if(h.length>0){b.teamName=h
}else{b.teamName=""
}};
d.setTeamFullName=function(){var g=c(".stats-list-component.team-stats span.text");
if(g.length>0){g.each(function(){var j=c(this).text();
if(c.trim(j)==="Full Team Name"){var h=c(this).parent().next().text();
b.teamFullNames=c.trim(h)
}})
}else{b.teamFullNames=""
}};
d.setTeamPolePosition=function(){var g=c(".stats-list-component.team-stats span.text");
if(g.length>0){g.each(function(){var j=c(this).text();
if(c.trim(j)==="Pole Positions"){var h=c(this).parent().next().text();
b.teamPolePosition=c.trim(h)
}})
}else{b.teamPolePosition=""
}};
d.setTrackCountry=function(){var g=c("#gtm-page-title").val();
var h=c.trim(g);
if(h!==""){b.trackCountry=h
}else{b.trackCountry=""
}};
d.setTrackCity=function(){var g=c("h2.race-header-country").text();
var h=c.trim(g);
if(h!==""){b.trackCity=h
}else{b.trackCity=""
}};
d.setTrackName=function(){var g=c("h2.circuit-info-header").text();
var h=c.trim(g);
if(h!==""){b.trackName=h
}else{b.trackName=""
}};
d.setDriverCurrentPosition=function(){};
d.setTeamPoints=function(){};
d.setContentPageType=function(){var g=c(".category-title").text();
var h=c.trim(g).split("/");
if(h.length>0){b.contentPageType=c.trim(h.slice(-1).pop())
}else{b.contentPageType=""
}};
d.setVideoCount=function(){var g=c(".ooyala_video").length;
if(g>0){b.contentVideoCount=g
}else{b.contentVideoCount=""
}};
d.setWordCount=function(){var g=c(".article-content p");
var h=0;
g.each(function(){var k=c(this);
if(k.closest(".ooyala_video").length>0){return
}if(k.closest(".related-content").length>0){return
}if(k.hasClass("date")||k.hasClass("share")||k.hasClass("gallery-description")){return
}var m=k.text();
if(m===" "){return
}var j=d.getWords(c.trim(m));
h+=j
});
b.contentWordCount=h
};
d.setImageCount=function(){var h=0;
var g=c(".article-content picture img");
if(g.length>0){g.each(function(){var j=c(this);
if(j.closest(".gallery-modal-container").length>0){return true
}if(j.closest(".ooyala_video").length>0){return true
}if(j.closest(".related-content").length>0){return true
}h++
});
b.contentImageCount=h
}else{b.contentImageCount=""
}};
d.setPageTitle=function(){var g=c("title").text();
var h=c.trim(g);
if(h!==""){b.contentPageTitle=h
}else{b.contentPageTitle=h
}};
d.setContentTags=function(){var h=c('meta[name="keywords"]').attr("content");
var g=c.trim(h);
if(g!==""){b.contentTags=d.getPipeString(g)
}else{b.contentTags=""
}};
d.setDatePublished=function(){var h=c(".article-title .date");
if(h.length>0){var j=h.text();
var g=c.trim(j);
b.contentPublishedDate=g
}};
d.setContentAge=function(){var j=c(".article-title .date");
if(j.length>0){var n=j.text();
var m=c.trim(n);
var h=new Date(m);
var g=new Date();
var k=d.dateDiff("d",h,g);
b.contentAge=k
}};
d.setUserObject=function(){var j=d.readCookie("account-info");
if(j===null||j==="undefined"){return
}var h=j.replace(/\\n/g,"\\n").replace(/\\'/g,"\\'").replace(/\\"/g,'\\"').replace(/\\&/g,"\\&").replace(/\\r/g,"\\r").replace(/\\t/g,"\\t").replace(/\\b/g,"\\b").replace(/\\f/g,"\\f");
h=decodeURIComponent(h);
h=h.replace(/[\u0000-\u0019]+/g,"");
var g=JSON.parse(h);
if(g.profile){if(g.profile.SubscriberId){b.userUID=g.profile.SubscriberId
}if(g.profile.country){b.userCountry=g.profile.country
}}};
d.setSocialSharing=function(){var h=".share-component",g=c(h);
g.each(function(){var n=c(this),m=".share-options",j=n.find(m),k=j.find("a");
k.on("click",function(s){var o=a.location.href,p=c(this).attr("title"),q=c.trim(c("title").text())+"|"+o;
var r={};
r.event="socialInteraction";
r.socialNetwork=p;
r.socialAction="Share";
r.socialTarget=q;
f.addProperty(r)
})
})
};
d.getWords=function(h){var g=h;
g=g.replace(/(^\s*)|(\s*$)/gi,"");
g=g.replace(/[ ]{2,}/gi," ");
g=g.replace(/\n /,"\n");
return g.split(" ").length
};
d.getPipeString=function(k){var h=c.trim(k);
if(h.length>0){var j=h.replace(/,/g,"|");
var g=j.length-1;
var m=j.lastIndexOf("|");
if(m===g){j=j.slice(0,-1)
}return j
}else{return""
}};
d.dateDiff=function(j,k,h){var j=j.toLowerCase();
var m=h-k;
var g={w:604800000,d:86400000,h:3600000,n:60000,s:1000};
return Math.floor(m/g[j])
};
d.setproperty=function(){f.addProperty(b)
};
return d.initialise()
})($,Modernizr,window,fom.tracking);
fom.init=(function(j,t,o,v,w,n,e){var p=w();
var y={adRaceHeaderSponsorLink:j(".race-header-sponsor a"),articleTitle:j(".article-title"),headline:j(".article-title .headline"),sponserWrapper:j(".article-title .sponser-wrapper"),notApply:j(".template-feature"),globalAdComponent:j(".globalpartner-block"),picElement:".global-ad-image .img-wrapper"},f=false,D,z={},x,c=1000,m=10,k=true,C=function(){fom.utils.resizeManager.on(o.events.CHANGE,b,this);
fom.utils.resizeManager.on(o.events.RESIZE,b,this)
},b=function(H){if(H!==o.sizes.NARROW){var E=j(y.articleTitle).width()-210;
j(y.headline).width(E);
var G=j(y.headline).outerHeight(true);
var J=84;
var F=G-J;
F=(F<0)?0:F/2;
var I=j(y.headline).position().top+F;
j(y.sponserWrapper).css("top",I)
}},h=function(){var I=j(".partner-image-modal-container .video-player");
var G=j(".partner-image-modal-wrapper");
var H=j(".partner-image-modal-window").height();
var F=G.height();
var E=H-F;
j(".partner-image-modal-container").css({top:E/2});
if(I.length>0){setTimeout(function(){if(!I.hasClass("full-screen-mode")){var J=j(".partner-image-modal-window").height();
var K=j(".partner-image-modal-wrapper").height();
var L=J-K;
I.height(K);
j(".partner-image-modal-container").css({top:L/2})
}},50)
}},u=function(){var G=j(".partner-image-modal-container").find(".video-player").length>0?true:false;
j(".partner-image-modal-link").on("click",function(I){I.preventDefault();
var H=j("#"+j(this).data("id"));
A(H)
});
j(".partner-image-modal-close-link").on("click",function(I){I.preventDefault();
if(!f){return
}var H=j(this).closest(".partner-image-modal-window");
s(H)
});
j(".partner-image-enlarged").on("click",function(I){if(!f){return
}var H=j(this).closest(".partner-image-modal-window");
s(H)
});
j(".partner-image-modal-window").on("click",function(J){if(!f){return
}var H=j(this);
var I=H.find(".video-player").length>0?true:false;
if(I){if(j(J.target).closest(".video-section").length>0){return
}else{s(j(this))
}}else{s(j(this))
}});
var F=j("#partner-image-modal-window").closest(".tablet-swiper");
if(F.length>0){j(j("#partner-image-modal-window").detach()).appendTo(F)
}if(G){var E=j(".partner-image-modal-container").find(".video-player").not(".initialised");
E.addClass("initialised");
e.initPlayers(E,{},j.proxy(function(I){j.extend(z,I);
var H=e.players.length;
while(H--){}}))
}fom.utils.resizeManager.on(o.events.CHANGE,h,this);
fom.utils.resizeManager.on(o.events.RESIZE,h,this)
},A=function(G){var K=j(G).find(".partner-image-modal-container");
var E=K.find(".video-player").length>0?true:false;
var L=j(G).height();
var F=K.height();
var I=L-F;
j(G).addClass("partner-image-modal-open partner-image-mobile-open-animate");
j("body").addClass("modal_active");
K.css({top:I/2});
f=true;
var J=d();
if(J!==false){var H=fom.utils.parseUri(J.attr("src"));
var N={event:"AdModalOpened",event_category:"expand_ad",event_action:J.data("gatitle"),event_label:H.filename+"|"+J.width()+"X"+J.height()};
n.addProperty(N)
}else{var N={event:"partnerPromotionClick",ecommerce:{promoClick:{promotions:[]}}},M=j(".partner-image-modal-window .video-section > div");
D.creative="video";
N.ecommerce.promoClick.promotions.push(D);
n.addProperty(N)
}},s=function(E){var I=d();
if(I!==false){var K=fom.utils.parseUri(I.attr("src"));
var F={event:"AdModalClosed",event_category:"close_ad",event_action:I.data("gatitle"),event_label:K.filename+"|"+I.width()+"X"+I.height()};
n.addProperty(F)
}var H=j(E).find(".partner-image-modal-container");
var J=H.find(".video-player").length>0?true:false;
if(J){var L=H.find(".video-player").find(".video-display").first().attr("id");
var G=z[L];
if(G){G.resetVideoPlayback();
G.showPreview()
}}H.removeAttr("style");
j(E).removeClass("partner-image-modal-open partner-image-mobile-open-animate");
j("body").removeClass("modal_active");
f=false
},g=function(){if(j(".article-sup-content section > div").length>0){return
}if(o.size!==o.sizes.NARROW){setTimeout(function(){r()
},50)
}else{j(".globalpartner-block").removeAttr("style")
}},r=function(){j(".globalpartner-block").css({right:0});
var F=j(".globalpartner-block").offset().left;
var E=j(t).width();
var G=300;
var H;
if(E>1440){H=j(".globalpartner-block").closest(".inner-wrap").outerWidth()-j(".site-header-wrap").width();
H=H/2-20;
k=false
}else{if(E>800){H=((F+G)-E)+20
}else{H=-20
}}j(".globalpartner-block").css({right:H});
x=setInterval(a,c)
},a=function(){var E=j(".globalpartner-block");
if(E.length){if((E.offset().left+E.width()+50)<j(t).width()){if(k){j(t).trigger("resize")
}m=0
}}else{m=0
}if(m--<=0){clearInterval(x)
}},B=function(){var G={event:"promoView",ecommerce:{promoView:{promotions:[]}}};
var E=j(".globalpartner-block");
var F=E.length;
E.each(function(J,L){var K;
var I;
if(j("img.frame-1",j(this)).is(":visible")){K=j("img.frame-1",j(this));
I="494X400"
}else{if(j("img.frame-2",j(this)).is(":visible")){K=j("img.frame-2",j(this));
I="494X400"
}else{K=j(".partner-small-image",j(this));
I="300X90"
}}if(K.length>0){var M=fom.utils.parseUri(K.attr("src"));
var H={};
H.id=M.filename;
H.name=K.data("gatitle");
H.position=I;
G.ecommerce.promoView.promotions.push(H);
D=H;
if(J==F-1){if(G.ecommerce.promoView.promotions.length>0){n.addProperty(G)
}}if(j(".template-feature").length>0||j(".template-article").length>0){j(".article-title").addClass("fix-partner-small-image");
g()
}}});
if(j(".globalpartner-block").length>0){v.recalculate$Elements(j(".responsive-element"));
if(j(".template-article").length>0&&j(".article-sup-content section > div").length>0){j(".article-sup-content").addClass("has-partner-block");
j(".globalpartner-block").parent().addClass("has-article-sup-content")
}if(j(".template-feature").length>0||j(".template-article").length>0){fom.utils.resizeManager.on(o.events.CHANGE,g,this);
fom.utils.resizeManager.on(o.events.RESIZE,g,this)
}}if(j(".partner-image-modal-window").length>0){u()
}j(".partner-link").on("click",function(L){var H={event:"partnerPromotionClick",ecommerce:{promoClick:{promotions:[]}}};
var J=d();
if(J!==false){var K=fom.utils.parseUri(J.attr("src"));
var I={id:K.filename,name:J.data("gatitle"),position:J.width()+"X"+J.height()};
H.ecommerce.promoClick.promotions.push(I);
n.addProperty(H)
}});
if(j(y.picElement).length>0){setTimeout(function(){j(".frame-2",j(y.picElement)).addClass("active")
},2000)
}},d=function(){if(j(".partner-image-modal-window").hasClass("partner-image-mobile-open-animate")){if(j(".partner-image-modal-window img").length>0){return j(".partner-image-modal-window img")
}else{return false
}}else{if(j(".partner-small-image").is(":visible")){return j(".partner-small-image")
}else{if(j(".globalpartner-block .img-fix.frame-2").length>0){return j(".globalpartner-block .img-fix.frame-2")
}else{if(j(".globalpartner-block .img-fix.frame-1").length>0){return j(".globalpartner-block .img-fix.frame-1")
}else{return false
}}}}},q=function(){if(j(y.adRaceHeaderSponsorLink).length>0){j(y.adRaceHeaderSponsorLink).attr("target","_blank");
var F={event:"promoView",ecommerce:{promoView:{promotions:[]}}};
j(".race-header-sponsor").each(function(){var H=j("img",j(this));
var I=fom.utils.parseUri(H.attr("src"));
var G={};
G.id=I.filename;
G.name=H.data("gatitle");
G.position=H.width()+"X"+H.height();
F.ecommerce.promoView.promotions.push(G)
});
n.addProperty(F);
j(y.adRaceHeaderSponsorLink).on("click",function(K){var J=j("img",j(this));
var I=fom.utils.parseUri(J.attr("src"));
var H={event:"promotionClick",ecommerce:{promoClick:{promotions:[]}}};
var G={};
G.id=I.filename;
G.name=J.data("gatitle");
G.position=J.width()+"X"+J.height();
H.ecommerce.promoClick.promotions.push(G);
n.addProperty(H)
})
}p.update(".globalpartner-block",function(){if(j(".globalpartner-block").length>0){B()
}else{var G=setInterval(function(){if(j(".globalpartner-block").length){B();
clearInterval(G)
}},100)
}});
if(j(y.notApply).length===0&&j(y.articleTitle).length>0&&j(y.sponserWrapper).length>0){var E=j(t).width();
if(E>=768){C();
b("medium")
}}};
return q()
})(jQuery,window,fom.utils.resizeManager,fom.modules.responsiveElements,fom.utils.adobeCampaignManager,fom.tracking,fom.modules.videoPlayer);
/*
     FILE ARCHIVED ON 03:05:09 Sep 02, 2018 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 08:50:08 Oct 06, 2018.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  LoadShardBlock: 100.416 (3)
  esindex: 0.007
  captures_list: 168.555
  CDXLines.iter: 16.079 (3)
  PetaboxLoader3.datanode: 113.524 (5)
  exclusion.robots: 0.276
  exclusion.robots.policy: 0.262
  RedisCDXSource: 1.848
  PetaboxLoader3.resolve: 214.234 (2)
  load_resource: 294.297
*/